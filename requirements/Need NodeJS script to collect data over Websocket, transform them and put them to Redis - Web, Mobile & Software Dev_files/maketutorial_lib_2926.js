!function(e){var t=window._walkmeWebpackJP;window._walkmeWebpackJP=function(n,o){for(var a,s,u=0,l=[];u<n.length;u++)s=n[u],r[s]&&l.push.apply(l,r[s]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);for(t&&t(n,o);l.length;)l.shift().call(null,i)};var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}return i.e=function(e,t){if(0===r[e])return t.call(null,i);if(void 0!==r[e])r[e].push(t);else{r[e]=[t];var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=i.p+""+e+".maketutorial_lib.js",n.appendChild(o)}},i.m=e,i.c=n,i.p="",i(0)}([function(module,exports,__webpack_require__){(function(__extends){(function(){/*!
	 * WalkMe
	 * http://www.walkme.com/
	 *
	 * Copyright 2012, WalkMe LTD
	 */
window._walkmeInternals=window._walkmeInternals||{},_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeStart"),window.wmjQuery=mtjQuery,mtjQuery&&(mtjQuery.expr&&mtjQuery.expr.filters&&(mtjQuery.expr.filters.mt_hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!mtjQuery.support.reliableHiddenOffsets&&"none"===(e.style.display||mtjQuery.css(e,"display"))||"hidden"===mtjQuery.css(e,"visibility")},mtjQuery.expr.filters.mt_visible=function(e){return!mtjQuery.expr.filters.mt_hidden(e)},mtjQuery.expr.filters.wm_can_embed=function(e){var t=wmjQuery(e);return!t.hasClass("walkme-not-embed")&&"static"!=t.css("position")}),mtjQuery.trim=function(e){var t=/^\s+/,n=/\s+$/;return null==e?"":e.toString().replace(t,"").replace(n,"")}),function(e){function t(e){if(window._walkmeInternals.jQueryCompatability=window._walkmeInternals.jQueryCompatability||{},e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return void(_walkmeInternals.jQueryCompatability.wmIECorsSupport=!1);var t=/^(https?:)?\/\//i,n=/^get|post$/i,r=new RegExp("^(//|"+location.protocol+")","i");_walkmeInternals.jQueryCompatability.wmIECorsSupport=!0,e.ajaxTransport("* text html xml json",function(i,o,a){if(!(i.crossDomain&&i.async&&n.test(i.type)&&t.test(i.url)&&r.test(i.url)))return;var s=null;return{send:function(t,n){var r="",a=(o.dataType||"").toLowerCase();s=new XDomainRequest,/^\d+$/.test(o.timeout)&&(s.timeout=o.timeout),s.ontimeout=function(){n(500,"timeout")},s.onload=function(){var t="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,r={code:200,message:"success"},i={text:s.responseText};try{if("html"===a||/text\/html/i.test(s.contentType))i.html=s.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(s.contentType))try{i.json=e.parseJSON(s.responseText)}catch(o){r.code=500,r.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(s.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(s.responseText)}catch(o){u=void 0}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+s.responseText;i.xml=u}}catch(l){throw l}finally{n(r.code,r.message,i,t)}},s.onprogress=function(){},s.onerror=function(){n(500,"error",{text:s.responseText})},o.data&&(r="string"===e.type(o.data)?o.data:e.param(o.data)),s.open(i.type,i.url),s.send(r)},abort:function(){s&&s.abort()}}})}e.extend({safeEach:function(t,n){return e.each(t,function(e,r){t.hasOwnProperty(e)&&n(e,r)})}}),e.fn.safeEach=function(t){return e.safeEach(this,t)},e.fn.important=function(t,n){var r=this;if("object"==typeof t)return e.safeEach(t,function(e,t){r.important(e,t)}),r;return r.safeEach(function(r,i){e(i).css(t,"").attr("style",function(e,r){var i=new RegExp("(^|;)\\s*"+t+"\\s*:[^;]*(;|$)","gi");return(r||"").replace(i,"$1").replace(/;$/gi,"")+";"+(void 0!=n?t+": "+n+" !important;":"")})})},e.fn.cssReset=function(t,r){if(!t)return;var i=this;if("object"==typeof t)return e.safeEach(t,function(e,t){i.cssReset(e,t)}),i;var o;return"string"==typeof r&&(o=r.indexOf("!important")>-1,r=e.trim(r.replace("!important",""))),i.safeEach(function(i,a){a.style[t]||a.style[n(t)]||(o?e(a).important(t,r):e(a).css(t,r))})};function n(e){return e.replace(/^-+$/g,"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}e.fn.exist=function(){return!!this.length},e.fn.or=function(t,n){return this.length?this:e(t,n)},e.fn.allCss=function(){if(1!=this.length)return;var t={},n=this.attr("style");if(!n)return t;for(var r=n.split(";"),i=r.length-1;i>=0;i--){var o=r[i].split(":"),a=e.trim(o[0]);a&&(t[a]=e.trim(o[1]))}return t},e.extend(e.expr[":"],{textEquals:function(t,n,r){return e(t).text()==r[3]}}),e.fn.reduce=function(e,t){return this.each(function(n,r){t=e.apply(r,[t,r])}),t};function r(e){var t={},n=0,r=e.camelCase;e.camelCase=function(e){return void 0===t[e]&&(t[e]=r(e),++n>1e3&&(n=0,t={})),t[e]}}t(e),r(e)}(wmjQuery),function(e,t,n){n(window.wmjQuery,e,t)}(this,document,function(e,t,n,r){!function(e,t,n,r){var i,o,a="virtualMouseBindings",s="virtualTouchID",u="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),l="clientX clientY pageX pageY screenX screenY".split(" "),c=e.event.mouseHooks?e.event.mouseHooks.props:[],d=e.event.props.concat(c),p={},g=0,f=0,h=0,m=!1,v=[],S=!1,E=!1,T="addEventListener"in n,y=e(n),C=1,I=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function b(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function w(t,n){var i,o,a,s,u,c,p,g,f,h=t.type;if(t=e.Event(t),t.type=n,i=t.originalEvent,o=e.event.props,h.search(/^(mouse|click)/)>-1&&(o=d),i)for(p=o.length,s;p;)s=o[--p],t[s]=i[s];if(h.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),h.search(/^touch/)!==-1&&(a=b(i),h=a.touches,u=a.changedTouches,c=h&&h.length?h[0]:u&&u.length?u[0]:r))for(g=0,f=l.length;g<f;g++)s=l[g],t[s]=c[s];return t}function _(t){for(var n,r,i={};t;){n=e.data(t,a);for(r in n)n[r]&&(i[r]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function P(t,n){for(var r;t;){if(r=e.data(t,a),r&&(!n||r[n]))return t;t=t.parentNode}return null}function A(){E=!1}function k(){E=!0}function O(){I=0,v.length=0,S=!1,k()}function N(){A()}function D(){L(),g=setTimeout(function(){g=0,O()},e.vmouse.resetTimerDuration)}function L(){g&&(clearTimeout(g),g=0)}function x(t,n,r){var i;return(r&&r[t]||!r&&P(n.target,t))&&(i=w(n,t),e(n.target).trigger(i)),i}function F(t){var n,r=e.data(t.target,s);S||I&&I===r||(n=x("v"+t.type,t),n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function M(t){var n,r,i,o=b(t).touches;o&&1===o.length&&(n=t.target,r=_(n),r.hasVirtualBinding&&(I=C++,e.data(n,s,I),L(),N(),m=!1,i=b(t).touches[0],f=i.pageX,h=i.pageY,x("vmouseover",t,r),x("vmousedown",t,r)))}function R(e){if(E)return;m||x("vmousecancel",e,_(e.target)),m=!0,D()}function B(t){if(E)return;var n=b(t).touches[0],r=m,i=e.vmouse.moveDistanceThreshold,o=_(t.target);m=m||Math.abs(n.pageX-f)>i||Math.abs(n.pageY-h)>i,m&&!r&&x("vmousecancel",t,o),x("vmousemove",t,o),D()}function U(e){if(E)return;k();var t,n,r=_(e.target);x("vmouseup",e,r),m||(t=x("vclick",e,r),t&&t.isDefaultPrevented()&&(n=b(e).changedTouches[0],v.push({touchID:I,x:n.clientX,y:n.clientY}),S=!0)),x("vmouseout",e,r),m=!1,D()}function V(t){var n,r=e.data(t,a);if(r)for(n in r)if(r[n])return!0;return!1}function W(){}function G(t){var n=t.substr(1);return{setup:function(){V(this)||e.data(this,a,{});var r=e.data(this,a);r[t]=!0,p[t]=(p[t]||0)+1,1===p[t]&&y.bind(n,F),e(this).bind(n,W),T&&(p.touchstart=(p.touchstart||0)+1,1===p.touchstart&&y.bind("touchstart",M).bind("touchend",U).bind("touchmove",B).bind("scroll",R))},teardown:function(){--p[t],p[t]||y.unbind(n,F),T&&(--p.touchstart,p.touchstart||y.unbind("touchstart",M).unbind("touchmove",B).unbind("touchend",U).unbind("scroll",R));var r=e(this),i=e.data(this,a);i&&(i[t]=!1),r.unbind(n,W),V(this)||r.removeData(a)}}}for(o=0;o<u.length;o++)e.event.special[u[o]]=G(u[o]);if(T){var H=function(t){var n,r,o,a,u,l,c=v.length,d=t.target;if(c)for(n=t.clientX,r=t.clientY,i=e.vmouse.clickDistanceThreshold,o=d;o;){for(a=0;a<c;a++)if(u=v[a],l=0,o===d&&Math.abs(u.x-n)<i&&Math.abs(u.y-r)<i||e.data(o,s)===u.touchID)return t.preventDefault(),void t.stopPropagation();o=o.parentNode}};n.addEventListener("click",H,!0),wmjQuery(t._walkmeInternals).bind("removeWalkMe",function(){n.removeEventListener("click",H,!0)})}}(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){var i=e(n),o=e.mobile.support.touch,a="touchmove scroll",s=o?"touchstart":"mousedown",u=o?"touchend":"mouseup",l=o?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)});function c(t,n,i,o){var a=i.type;i.type=n,o?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=a}e.event.special.scrollstart={enabled:!0,setup:function(){var t,n,r=this,i=e(r);function o(e,n){t=n,c(r,t?"scrollstart":"scrollstop",e)}i.bind(a,function(r){if(!e.event.special.scrollstart.enabled)return;t||o(r,!0),clearTimeout(n),n=setTimeout(function(){o(r,!1)},50)})},teardown:function(){e(this).unbind(a)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(o){if(r=!1,o.which&&1!==o.which)return!1;var a,s=o.target;function u(){clearTimeout(a)}function l(){u(),n.unbind("vclick",d).unbind("vmouseup",u),i.unbind("vmousecancel",l)}function d(e){l(),r||s!==e.target?r&&e.preventDefault():c(t,"tap",e)}n.bind("vmouseup",u).bind("vclick",d),i.bind("vmousecancel",l),a=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),c(t,"taphold",e.Event("taphold",{target:s}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,o=e.clientY;return 0===e.pageY&&Math.floor(o)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(i)>Math.floor(e.pageX)?(i-=n,o-=r):(o<e.pageY-r||i<e.pageX-n)&&(i=e.pageX-n,o=e.pageY-r),{x:i,y:o}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var o=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return c(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),c(r,o,e.Event(o,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),o={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=o,o.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,a=e.event.special.swipe.start(t),s=t.target,c=!1;o.move=function(t){if(!a||t.isDefaultPrevented())return;r=e.event.special.swipe.stop(t),c||(c=e.event.special.swipe.handleSwipe(a,r,n,s),c&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(a.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},o.stop=function(){c=!0,e.event.special.swipe.eventInProgress=!1,i.off(l,o.move),o.move=null},i.on(l,o.move).one(u,o.stop)},r.on(s,o.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(s,n.start),n.move&&i.off(l,n.move),n.stop&&i.off(u,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)}),function(e){"use strict";function t(t,n){e.extend(this,n),this.$select=t,e.extend(this,this.markup(t)),this.bindEvents()}t.prototype={getValue:function(e){if("function"==typeof this[e])return this[e]();return this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},updateTitle:function(){var e=this.$select.find(":selected"),t=this.formatter(e.text(),this.$select.val(),e,this.$select);this.allowHtmlInTitle?this.$title.html(t):this.$title.text(t)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,e.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,e.proxy(this.updateTitle,this)),this.$select.on("keyup."+this.baseName,e.proxy(this.updateTitle,this)),this.updateTitle()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}};function n(r){return"string"!=typeof r&&(r=e.extend({},n.options,r)),this.filter("select").each(function(){var n=e(this),i=n.data(r.baseName);"string"==typeof r?i[r].apply(n,[].slice.call(arguments,1)):i||n.data(r.baseName,new t(n,r))}),this}n.klass=t,n.formatter=function(e,t,n,r){return e},n.markup=function(t){var n=t.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return e('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(n),{$el:n,$title:e('<span class="'+this.generateClassName("title")+'"/>').prependTo(n)}},n.generateClassName=function(e,t){return this.getValue("baseName")+(e?"-"+e:"")},n.options={baseName:"brute-select",generateClassName:n.generateClassName,markup:n.markup,formatter:n.formatter,allowHtmlInTitle:!1},e.fn.bruteSelect=n}(mtjQuery),function(e){e.fn.fixedPosition=function(e){}}(mtjQuery),function(e){e.extend({highlight:function(t,n,r,i){if(3===t.nodeType){var o=t.data.match(n);if(o){var a=document.createElement(r||"span");a.className=i||"walkme-highlight";var s=t.splitText(o.index);s.splitText(o[0].length);var u=s.cloneNode(!0);return a.appendChild(u),s.parentNode.replaceChild(a,s),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==r.toUpperCase()||t.className!==i))for(var l=0;l<t.childNodes.length;l++)l+=e.highlight(t.childNodes[l],n,r,i);return 0}}),e.fn.unhighlight=function(t){var n={className:"walkme-highlight",element:"span"};return e.extend(n,t),this.find(n.element+"."+n.className).each(function(){var t=this.parentNode;t&&(t.replaceChild(this.firstChild,this),e(t).text(e(t).text()))}).end()},e.fn.highlight=function(t,n){var r={className:"walkme-highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(e.extend(r,n),t.constructor===String&&(t=[t]),t=e.grep(t,function(e,t){return""!=e}),t=e.map(t,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==t.length)return this;var i=r.caseSensitive?"":"i",o="("+t.join("|")+")";r.wordsOnly&&(o="\\b"+o+"\\b");var a=new RegExp(o,i);return this.each(function(){e.highlight(this,a,r.element,r.className)})}}(mtjQuery),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){var o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I,b,w,_,P,A,k,O,N,D,L,x,F,M,R,B,U=this,V=!0,W=!0,G=!1,H=!1,j=r.clone(!1,!1).empty(),Y=Y,z=e.fn.mwheelIntent?"mwheelIntent.walkme-jsp":"mousewheel.walkme-jsp";"border-box"===r.css("box-sizing")?(M=0,R=0):(M=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),R=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0));function Q(t){var i,m,v,E,T,C,I=!1,b=!1;if(o=t,a===n)T=r.scrollTop(),C=r.scrollLeft(),r.important({overflow:"hidden",padding:0}),s=r.innerWidth()+R,u=r.innerHeight(),r.width(s),a=e('<div class="walkme-jspPane" />').css("padding",M).append(r.children()),l=e('<div class="walkme-jspContainer" />').css({width:s+"px",height:u+"px"}).append(a).appendTo(r),K(r);else{if(r.css("width",""),I=o.stickToBottom&&ve(),b=o.stickToRight&&Se(),E=r.innerWidth()+R!=s||r.outerHeight()!=u,E&&(s=r.innerWidth()+R,u=r.innerHeight(),l.css({width:s+"px",height:u+"px"})),!E&&B==c&&a.outerHeight()==d)return void r.width(s);B=c,a.css("width",""),r.width(s),l.find(">.walkme-jspVerticalBar,>.walkme-jspHorizontalBar").remove().end()}a.css("overflow","auto"),c=t.contentWidth?t.contentWidth:a[0].scrollWidth,d=a[0].scrollHeight,a.css("overflow",""),p=c<s?1:c/s,g=d<u?1:d/u,f=g>1||o.alwaysScrollVertical,h=p>1||o.alwaysScrollHorizontal,h||f?(r.addClass("walkme-jspScrollable"),i=o.maintainPosition&&(S||y),i&&(m=he(),v=me()),q(),J(),Z(),i&&(ge(b?c-s:m,!1),pe(I?d-u:v,!1)),Ce(),Ee(),Ae(),o.enableKeyboardNavigation&&be(),o.clickOnTrack&&re(),_e(),o.hijackInternalLinks&&Pe()):(r.removeClass("walkme-jspScrollable"),a.css({top:0,left:0,right:0,width:l.width()-R}),Te(),Ie(),we(),ie()),o.autoReinitialise&&!F?F=setInterval(function(){Q(o)},o.autoReinitialiseDelay):!o.autoReinitialise&&F&&clearInterval(F),T&&r.scrollTop(0)&&pe(T,!1),C&&r.scrollLeft(0)&&ge(C,!1),r.trigger("walkme-jsp-initialised",[h||f])}function K(t){var n=e(t).find('div[class*="walkme-jsp"]').add(t);n.each(function(t,n){var r="class",i=e(n),o=i.attr(r);i.attr(r,"").attr(r,o)})}function q(){if(f){C=e('<div class="walkme-jspVerticalBar" />'),I=e('<div class="walkme-jspTrack" />'),m=e('<div class="walkme-jspDrag" />');var t=e('<div class="walkme-jspCap walkme-jspCapTop" />'),n=e('<div class="walkme-jspCap walkme-jspCapBottom" />');l.append(C.append(t,I.append(m.append(e('<div class="walkme-jspDragTop" />'),e('<div class="walkme-jspDragBottom" />'))),n)),K(l),w=u,o.showArrows&&(P=e('<a class="walkme-jspArrow walkme-jspArrowUp" />').bind("mousedown.walkme-jsp",te(0,-1)).bind("click.walkme-jsp",ye),A=e('<a class="walkme-jspArrow walkme-jspArrowDown" />').bind("mousedown.walkme-jsp",te(0,1)).bind("click.walkme-jsp",ye),w-=P.outerHeight()+A.outerHeight(),o.arrowScrollOnHover&&(P.bind("mouseover.walkme-jsp",te(0,-1,P)),A.bind("mouseover.walkme-jsp",te(0,1,A))),ee(I,o.verticalArrowPositions,P,A)),t.add(n).each(function(){var t=e(this);"none"!=t.css("display")&&(w-=t.outerHeight())}),m.hover(function(){m.addClass("walkme-jspHover")},function(){m.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){var n=e(o.containerDoc).find("html");n.bind("dragstart.walkme-jsp selectstart.walkme-jsp",ye),m.addClass("walkme-jspActive");var r=t.pageY-m.position().top;return n.bind("mousemove.walkme-jsp",function(e){ae(e.pageY-r,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",oe),!1}),X()}}function X(){I.height(w+"px"),S=0,b=o.verticalGutter+I.outerWidth(),a.width(s-b-R);try{0===C.position().left&&a.css("margin-left",b+"px")}catch(e){}}function J(){h&&(l.append(e('<div class="walkme-jspHorizontalBar" />').append(e('<div class="walkme-jspCap walkme-jspCapLeft" />'),e('<div class="walkme-jspTrack" />').append(e('<div class="walkme-jspDrag" />').append(e('<div class="walkme-jspDragLeft" />'),e('<div class="walkme-jspDragRight" />'))),e('<div class="walkme-jspCap walkme-jspCapRight" />'))),K(l),k=l.find(">.walkme-jspHorizontalBar"),O=k.find(">.walkme-jspTrack"),E=O.find(">.walkme-jspDrag"),o.showArrows&&(L=e('<a class="walkme-jspArrow walkme-jspArrowLeft" />').bind("mousedown.walkme-jsp",te(-1,0)).bind("click.walkme-jsp",ye),x=e('<a class="walkme-jspArrow walkme-jspArrowRight" />').bind("mousedown.walkme-jsp",te(1,0)).bind("click.walkme-jsp",ye),o.arrowScrollOnHover&&(L.bind("mouseover.walkme-jsp",te(-1,0,L)),x.bind("mouseover.walkme-jsp",te(1,0,x))),ee(O,o.horizontalArrowPositions,L,x)),E.hover(function(){E.addClass("walkme-jspHover")},function(){E.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){e(o.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",ye),E.addClass("walkme-jspActive");var n=t.pageX-E.position().left;return e(o.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){ue(e.pageX-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",oe),!1}),N=l.innerWidth(),$())}function $(){l.find(">.walkme-jspHorizontalBar>.walkme-jspCap:visible,>.walkme-jspHorizontalBar>.walkme-jspArrow").each(function(){N-=e(this).outerWidth()}),O.width(N+"px"),y=0}function Z(){if(h&&f){var t=O.outerHeight(),n=I.outerWidth();w-=t,e(k).find(">.walkme-jspCap:visible,>.walkme-jspArrow").each(function(){N+=e(this).outerWidth()}),N-=n,u-=n,s-=t,O.parent().append(e('<div class="walkme-jspCorner" />').css("width",t+"px")),K(O.parent()),X(),$()}h&&a.width(l.outerWidth()-R+"px"),d=a.outerHeight(),g=d<u?1:d/u,h&&(D=Math.ceil(1/p*N),D>o.horizontalDragMaxWidth?D=o.horizontalDragMaxWidth:D<o.horizontalDragMinWidth&&(D=o.horizontalDragMinWidth),E.width(D+"px"),T=N-D,le(y)),f&&(_=Math.ceil(1/g*w),_>o.verticalDragMaxHeight?_=o.verticalDragMaxHeight:_<o.verticalDragMinHeight&&(_=o.verticalDragMinHeight),m.height(_+"px"),v=w-_+o.dragMaxYOffset,se(S))}function ee(e,t,n,r){var i,o="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?a=t:t==a&&(o=t,i=n,n=r,r=i),e[o](n)[a](r)}function te(e,t,n){return function(){return ne(e,t,this,n),this.blur(),!1}}function ne(t,n,r,i){r=e(r).addClass("walkme-jspActive");var a,s,u=!0,l=function(){0!==t&&U.scrollByX(t*o.arrowButtonSpeed),0!==n&&U.scrollByY(n*o.arrowButtonSpeed),s=setTimeout(l,u?o.initialDelay:o.arrowRepeatFreq),u=!1};l(),a=i?"mouseout.walkme-jsp":"mouseup.walkme-jsp",i=i||e(o.containerDoc).find("html"),i.bind(a,function(){r.removeClass("walkme-jspActive"),s&&clearTimeout(s),s=null,i.unbind(a)})}function re(){ie(),f&&I.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),a=i.offset(),s=t.pageY-a.top-S,l=!0,c=function(){var e=i.offset(),n=t.pageY-e.top-_/2,a=u*o.scrollPagePercent,g=v*a/(d-u);if(s<0)S-g>n?U.scrollByY(-a):ae(n);else{if(!(s>0))return void p();S+g<n?U.scrollByY(a):ae(n)}r=setTimeout(c,l?o.initialDelay:o.trackClickRepeatFreq),l=!1},p=function(){r&&clearTimeout(r),r=null,e(o.containerDoc).unbind("mouseup.walkme-jsp",p)};return c(),e(o.containerDoc).bind("mouseup.walkme-jsp",p),!1}}),h&&O.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),a=i.offset(),u=t.pageX-a.left-y,l=!0,d=function(){var e=i.offset(),n=t.pageX-e.left-D/2,a=s*o.scrollPagePercent,g=T*a/(c-s);if(u<0)y-g>n?U.scrollByX(-a):ue(n);else{if(!(u>0))return void p();y+g<n?U.scrollByX(a):ue(n)}r=setTimeout(d,l?o.initialDelay:o.trackClickRepeatFreq),l=!1},p=function(){r&&clearTimeout(r),r=null,e(o.containerDoc).unbind("mouseup.walkme-jsp",p)};return d(),e(o.containerDoc).bind("mouseup.walkme-jsp",p),!1}})}function ie(){O&&O.unbind("mousedown.walkme-jsp"),I&&I.unbind("mousedown.walkme-jsp")}function oe(){e(o.containerDoc).find("html").unbind("dragstart.walkme-jsp selectstart.walkme-jsp mousemove.walkme-jsp mouseup.walkme-jsp mouseleave.walkme-jsp"),m&&m.removeClass("walkme-jspActive"),E&&E.removeClass("walkme-jspActive")}function ae(e,t){if(!f)return;e<0?e=0:e>v&&(e=v),t===n&&(t=o.animateScroll),t?U.animate(m,"top",e,se):(m.css("top",e),se(e))}function se(e){e===n&&(e=m.position().top),l.scrollTop(0),S=e;var t=0===S,i=S==v,o=e/v,s=-o*(d-u);V==t&&G==i||(V=t,G=i,r.trigger("walkme-jsp-arrow-change",[V,G,W,H])),ce(t,i),a.css("top",s);try{r.trigger("walkme-jsp-scroll-y",[-s,t,i]).trigger("scroll")}catch(c){}}function ue(e,t){if(!h)return;e<0?e=0:e>T&&(e=T),t===n&&(t=o.animateScroll),t?U.animate(E,"left",e,le):(E.css("left",e),le(e))}function le(e){e===n&&(e=E.position().left),l.scrollTop(0),y=e;var t=0===y,i=y==T,o=e/T,u=-o*(c-s);W==t&&H==i||(W=t,H=i,r.trigger("walkme-jsp-arrow-change",[V,G,W,H])),de(t,i),a.css("left",u);try{r.trigger("walkme-jsp-scroll-x",[-u,t,i]).trigger("scroll")}catch(d){}}function ce(e,t){o.showArrows&&(P[e?"addClass":"removeClass"]("walkme-jspDisabled"),A[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function de(e,t){o.showArrows&&(L[e?"addClass":"removeClass"]("walkme-jspDisabled"),x[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function pe(e,t){var n=e/(d-u);ae(n*v,t)}function ge(e,t){var n=e/(c-s);ue(n*T,t)}function fe(t,n,r){var i,a,c,d,p,g,f,h,m,v=0,S=0;try{i=e(t)}catch(E){return}for(a=i.outerHeight(),c=i.outerWidth(),l.scrollTop(0),l.scrollLeft(0);!i.is(".walkme-jspPane");)if(v+=i.position().top,S+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;d=me(),g=d+u,v<d||n?h=v-o.verticalGutter:v+a>g&&(h=v-u+a+o.verticalGutter),isNaN(h)||pe(h,r),p=he(),f=p+s,S<p||n?m=S-o.horizontalGutter:S+c>f&&(m=S-s+c+o.horizontalGutter),isNaN(m)||ge(m,r)}function he(){return-a.position().left}function me(){return-a.position().top}function ve(){var e=d-u;return e>20&&e-me()<10}function Se(){var e=c-s;return e>20&&e-he()<10}function Ee(){l.unbind(z).bind(z,function(e,t,n,r){var i=y,a=S;return U.scrollBy(n*o.mouseWheelSpeed,-r*o.mouseWheelSpeed,!1),i==y&&a==S})}function Te(){l.unbind(z)}function ye(){return!1}function Ce(){a.find(":input,a").unbind("focus.walkme-jsp").bind("focus.walkme-jsp",function(e){fe(e.target,!1)})}function Ie(){a.find(":input,a").unbind("focus.walkme-jsp")}function be(){var t,n,i=[];h&&i.push(k[0]),f&&i.push(C[0]),a.focus(function(){r.focus()}),o.setTabIndex&&r.attr("tabindex",0),r.unbind("keydown.walkme-jsp keypress.walkme-jsp").bind("keydown.walkme-jsp",function(r){if(!(r.target===this||i.length&&e(r.target).closest(i).length))return;var o=y,a=S;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode,s();break;case 35:pe(d-u),t=null;break;case 36:pe(0),t=null}return n=r.keyCode==t&&o!=y||a!=S,!n}).bind("keypress.walkme-jsp",function(e){return e.keyCode==t&&s(),!n}),o.hideFocus?(r.css("outline","none"),"hideFocus"in l[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in l[0]&&r.attr("hideFocus",!1));function s(){var e=y,r=S;switch(t){case 40:U.scrollByY(o.keyboardSpeed,!1);break;case 38:U.scrollByY(-o.keyboardSpeed,!1);break;case 34:case 32:U.scrollByY(u*o.scrollPagePercent,!1);break;case 33:U.scrollByY(-u*o.scrollPagePercent,!1);break;case 39:U.scrollByX(o.keyboardSpeed,!1);break;case 37:U.scrollByX(-o.keyboardSpeed,!1)}return n=e!=y||r!=S}}function we(){o.setTabIndex&&r.attr("tabindex","-1").removeAttr("tabindex"),r.unbind("keydown.walkme-jsp keypress.walkme-jsp")}function _e(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&a.find(r)&&(0===l.scrollTop()?n=setInterval(function(){l.scrollTop()>0&&(fe(t,!0),e(o.containerDoc).scrollTop(l.position().top),clearInterval(n))},50):(fe(t,!0),e(o.containerDoc).scrollTop(l.position().top)))}}function Pe(){if(e(Y(o.containerDoc)).data("walkme-jspHijack"))return;e(Y(o.containerDoc)).data("walkme-jspHijack",!0),e(Y(o.containerDoc)).delegate("a[href*=#]","click",function(n){var r,i,o,a,s,u,l=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(location.href.indexOf("#")!==-1&&(c=location.href.substr(0,location.href.indexOf("#"))),l!==c)return;r=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+r+', a[name="'+r+'"]')}catch(d){return}if(!i.length)return;o=i.closest(".walkme-jspScrollable"),a=o.data("walkme-jsp"),a.scrollToElement(i,!0),o[0].scrollIntoView&&(s=e(t).scrollTop(),u=i.offset().top,(u<s||u>s+e(t).height())&&o[0].scrollIntoView()),n.preventDefault()})}function Ae(){var e,t,n,r,i,o=!1;l.unbind("touchstart.walkme-jsp touchmove.walkme-jsp touchend.walkme-jsp click.walkme-jsp-touchclick").bind("touchstart.walkme-jsp",function(a){var s=a.originalEvent.touches[0];e=he(),t=me(),n=s.pageX,r=s.pageY,i=!1,o=!0}).bind("touchmove.walkme-jsp",function(a){if(!o)return;var s=a.originalEvent.touches[0],u=y,l=S;return U.scrollTo(e+n-s.pageX,t+r-s.pageY),i=i||Math.abs(n-s.pageX)>5||Math.abs(r-s.pageY)>5,u==y&&l==S}).bind("touchend.walkme-jsp",function(e){o=!1}).bind("click.walkme-jsp-touchclick",function(e){if(i)return i=!1,!1})}function ke(){var e=me(),t=he();r.removeClass("walkme-jspScrollable").unbind(".walkme-jsp"),r.replaceWith(j.append(a.children())),j.scrollTop(e),j.scrollLeft(t),F&&clearInterval(F)}e.extend(U,{reinitialise:function(t){t=e.extend({},o,t),Q(t)},scrollToElement:function(e,t,n){fe(e,t,n)},scrollTo:function(e,t,n){ge(e,n),pe(t,n)},scrollToX:function(e,t){ge(e,t)},scrollToY:function(e,t){pe(e,t)},scrollToPercentX:function(e,t){ge(e*(c-s),t)},scrollToPercentY:function(e,t){pe(e*(d-u),t)},scrollBy:function(e,t,n){U.scrollByX(e,n),U.scrollByY(t,n)},scrollByX:function(e,t){var n=he()+Math[e<0?"floor":"ceil"](e),r=n/(c-s);ue(r*T,t)},scrollByY:function(e,t){var n=me()+Math[e<0?"floor":"ceil"](e),r=n/(d-u);ae(r*v,t)},positionDragX:function(e,t){ue(e,t)},positionDragY:function(e,t){ae(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:o.animateDuration,easing:o.animateEase,queue:!1,step:r})},getContentPositionX:function(){return he()},getContentPositionY:function(){return me()},getContentWidth:function(){return c},getContentHeight:function(){return d},getPercentScrolledX:function(){return he()/(c-s)},getPercentScrolledY:function(){return me()/(d-u)},getIsScrollableH:function(){return h},getIsScrollableV:function(){return f},getContentPane:function(){return a},scrollToBottom:function(e){ae(v,e)},hijackInternalLinks:e.noop,destroy:function(){ke()}}),Q(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("walkme-jsp");n?n.reinitialise(r):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,r),t.data("walkme-jsp",n))})},e.fn.jScrollPane.defaults={containerDoc:document,setTabIndex:!0,alwaysScrollVertical:!1,alwaysScrollHorizontal:!1,dragMaxYOffset:0,showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(wmjQuery,this),function(e){var t,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var o=r.length;o;)e.event.fixHooks[r[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],a,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function a(r){var i,o=r||window.event,a=[].slice.call(arguments,1),s=0,u=0,l=0,c=0,d=0;return r=e.event.fix(o),r.type="mousewheel",o.wheelDelta&&(s=o.wheelDelta),o.detail&&(s=o.detail*-1),o.deltaY&&(l=o.deltaY*-1,s=l),o.deltaX&&(u=o.deltaX,s=u*-1),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=o.wheelDeltaX*-1),c=Math.abs(s),(!t||c<t)&&(t=c),d=Math.max(Math.abs(l),Math.abs(u)),(!n||d<n)&&(n=d),i=s>0?"floor":"ceil",s=Math[i](s/t),u=Math[i](u/n),l=Math[i](l/n),a.unshift(r,s,u,l),(e.event.dispatch||e.event.handle).apply(this,a)}}(wmjQuery),function(e){var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},n={duration:"fast",direction:"both"},r=/^(?:html)$/i,i=function(t,n){n=n||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),i={top:parseFloat(r?n.borderTopWidth:e.css(t,"borderTopWidth"))||0,left:parseFloat(r?n.borderLeftWidth:e.css(t,"borderLeftWidth"))||0,bottom:parseFloat(r?n.borderBottomWidth:e.css(t,"borderBottomWidth"))||0,
right:parseFloat(r?n.borderRightWidth:e.css(t,"borderRightWidth"))||0};return{top:i.top,left:i.left,bottom:i.bottom,right:i.right,vertical:i.top+i.bottom,horizontal:i.left+i.right}},o=function(t){var n=e(window),o=r.test(t[0].nodeName);return{border:o?{top:0,left:0,bottom:0,right:0}:i(t[0]),scroll:{top:(o?n:t).scrollTop(),left:(o?n:t).scrollLeft()},scrollbar:{right:o?0:t.innerWidth()-t[0].clientWidth,bottom:o?0:t.innerHeight()-t[0].clientHeight},rect:function(){var e=t[0].getBoundingClientRect();return{top:o?0:e.top,left:o?0:e.left,bottom:o?t[0].clientHeight:e.bottom,right:o?t[0].clientWidth:e.right}}()}};e.fn.extend({scrollintoview:function(i){i=e.extend({},n,i),i.direction=t["string"==typeof i.direction&&i.direction.toLowerCase()]||t.both;var a="";i.direction.x===!0&&(a="horizontal"),i.direction.y===!0&&(a=a?"both":"vertical"),r="html"==i.rootElement?/^(?:html)$/i:/^(?:body)$/i;var s="";i.customScrollElement&&(s=","+i.customScrollElement);var u=this.eq(0),l=i.elementToFindScrollableFor.parent().closest(":scrollable("+a+")"+s);if(!(l.length>0))return!1;"html"==i.rootElement&&l[0].tagName&&l[0].tagName.toUpperCase&&"BODY"==l[0].tagName.toUpperCase()&&(l=l.parent()),l=l.eq(0);var c={e:o(u),s:o(l)};if(i.heightLimit&&l.height()<200)return!1;var d={top:c.e.rect.top-(c.s.rect.top+c.s.border.top),bottom:c.s.rect.bottom-c.s.border.bottom-c.s.scrollbar.bottom-c.e.rect.bottom,left:c.e.rect.left-(c.s.rect.left+c.s.border.left),right:c.s.rect.right-c.s.border.right-c.s.scrollbar.right-c.e.rect.right},p=0,g={top:d.top,bottom:d.bottom};if(i.endScroll){var f=i.endScroll.scrollOptions;p="px"==f.unit?f.distance:(c.s.rect.bottom-i.endScroll.balloonHeight)*parseFloat(f.distance)/100,d.top>0&&d.bottom<0&&(p+=i.endScroll.totalDrawnHeight-c.s.rect.bottom),f.force&&(g.top-=p)}else d.top-=50,d.bottom-=50;var h={};if(i.direction.y===!0&&(g.top<0?h.scrollTop=c.s.scroll.top+d.top-p:g.top>0&&g.bottom<0&&(h.scrollTop=c.s.scroll.top+Math.min(d.top,-d.bottom)-p)),i.direction.x===!0&&(d.left<0?h.scrollLeft=c.s.scroll.left+d.left:d.left>0&&d.right<0&&(h.scrollLeft=c.s.scroll.left+Math.min(d.left,-d.right))),!h.scrollTop&&!h.scrollLeft)return!1;return r.test(l[0].nodeName)&&(l=e("html,body")),l.animate(h,i.duration).eq(0).queue(function(t){e.isFunction(i.complete)&&i.complete.call(l[0]),t()}),!0}});var a={auto:!0,scroll:!0,visible:!1,hidden:!1};e.extend(e.expr[":"],{scrollable:function(e,n,i,o){var s=t["string"==typeof i[3]&&i[3].toLowerCase()]||t.both,u=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,l={x:a[u.overflowX.toLowerCase()]||!1,y:a[u.overflowY.toLowerCase()]||!1,isRoot:r.test(e.nodeName)};if(!l.x&&!l.y&&!l.isRoot||"hidden"==u.overflowY.toLowerCase())return!1;var c={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(l.x||l.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(l.y||l.isRoot)&&this.height.scroll>this.height.client}};return s.y&&c.scrollableY()||s.x&&c.scrollableX()}})}(mtjQuery);function ClassMakeTutorial(e,t){var n=this;this.MTVersion="1.0",this.SVNRevision="$MasterRev: 3c5262fc91fb962210ad96cceaadfcb6975fdbad $",this.LibVersion="2926",this.SpecialRevision="no",__webpack_require__(2);var r=t.di,i=t.ctx;!function(e){var t=__webpack_require__(4);e.register("SimpleNLP").asInstance(t);var n=__webpack_require__(5)();e.register("ObjectMapper").asInstance(n.objectMapper),e.register("ObjectJpath").asInstance(n.objectJpath);var r=__webpack_require__(8);e.register("FlowNodeExtensions").asInstance(r.bizFlowExtensions),e.register("BaseGraphDfsService").asInstance(r.baseGraphDfsService);var i=__webpack_require__(16)();e.register("DeployableConsts").asInstance(i);var o=__webpack_require__(17)(e);e.register("UIComponentsClasses").asInstance(o);var a=__webpack_require__(24);e.register("NewToOldConditionConverter").asInstance(a.newToOldConditionConverter),e.register("OldToNewConditionConverter").asInstance(a.oldToNewConditionConverter);var s=__webpack_require__(28);if(e.register("Base64").asInstance(s),!e.has("PromiseManager")){var u=__webpack_require__(29).Promise;e.register("PromiseManager").asInstance(u)}var l=__webpack_require__(30);e.register("SharedConsts").asInstance(l);var c=__webpack_require__(49);e.register("BalloonTemplatesProvider").asInstance(c)}(window._walkmeInternals.ctx);var o=i.get("PromiseManager").Promise,a="uiProperties",s="auditSteps",u="goals",l="balloon",c="resources",d="FramesetsUtils",p="showLaunchers",g="tasks",f="content",h="searchResult",m="hl",v="autostart",S="superstep",E="loadTestMe",T="changeTracker",y="documentsManager",C="wm-ltm",I=900,b={Cookies:"cookies",LocalStorage:"localStorage",IndexedDB:"indexedDB"},w={Deactive:0,Active:1,ActiveAndReset:2},_=86400,P=31536e3,A=31536e4,k={display:"block",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0,marginRight:0,verticalAlign:"baseline",borderCollapse:"inherit",backgroundImage:"none",backgroundColor:"transparent",orderSpacing:"1px 1px",lineHeight:"normal",height:"auto",textIndent:"inherit",letterSpacing:"normal",textTransform:"none",outline:"invert none medium",width:"auto",boxShadow:"none",textShadow:"none",borderTopStyle:"none",borderTopWidth:"medium",borderRightStyle:"none",borderRightWidth:"medium",borderBottomStyle:"none",borderBottomWidth:"medium",borderLeftStyle:"none",borderLeftWidth:"medium",position:"static",top:"auto",left:"auto",transition:"none",boxSizing:"content-box",color:"#EB15E2"},O={Cookie:0,Var:1};i.register("DeployableTypes").dependencies("Consts").asFunction(function(e){return e.DEPLOYABLE_TYPE}),i.register("Consts").asCtor(N).dependencies("DeployableConsts");function N(e){var t=this;t.FREE_TEXT_MAX_LENGTH=1e3,t.COOKIE_LIFE_10_YEARS=31536e4,t.DEBUGGER_STATE_NAME="wm-ftr",t.DOMAIN_IN_COOKIE="wm-dmn",t.DEFAULT_COOKIE_SECONDS=600,t.IS_DISPLAY_POWERED_BY={Show:"txt",Hide:"no"},t.ANALYTICS_CUSTOM_VARS={MaxVarLength:100,MaxCustomFields:5},t.AJAX_PROVIDERS={wmjQueryAjaxProvider:1,ajaxProxyProvider:2},t.STEP_STATUS={SupposedToShow:0,Shown:1,Performed:2,SkippedNotFound:3,SkippedByCondition:4,MovedBack:5,Exited:6,FakeFound:7,SkippedByTutorialCondition:8,SkippedStartedFromBiggerStep:9,NonValidActionStep:10,SkippedByActionStep:11},t.STEP_ACTION={Redirect:"redirect",PlayStep:"playStep",WaitForCondition:"waitForCond",Branch:"branchWt",StopWt:"stopWt",Delay:"delay",Refresh:"refresh",OpenPlayerMenu:"openPlayerMenu",SetWalkMeData:"setWalkMeData",PassOwnership:"passOwnership"},t.STEP_TYPE={Normal:0,Popup:1,Action:2},t.SOURCES={production:0,preview:1,play:2,test:3,success:32},t.TIME_PERIODS={OneHourSeconds:3600,DaySeconds:86400},t.STORAGE_KEYS={lastGetDataTime:"wm-lgt",remindMeLater:"wm-RML",customAuditVarDictionary:"wm-cavd",WALKTHRU_PERSISTENCE_DATA:"wm-prsst"},t.STORAGE_TYPE={Cookie:"cookie",CrossDomain:"crossdomain",JStorage:"jstorage",CrossDomainLocalStorage:"crossdomain_ls",CrossDomainCookies:"crossdomain_ck",Extension:"extension",ProxyIframe:"proxy"},t.PLATFORM={Web:1,iOS:2,MobileWeb:3,Android:4},t.STEP_PLAY_INITIATOR_ENUM={NONE:0,WIDGET:1,API:2,LAUNCHER:3,TASK:4,BRANCHING:5,AUTOSTART:6,PERMALINK:7,BBCODE:8,CHAT_AGENT:9,SHOUTOUT:10,WALKTHRU:11,STEP:12,ATTENTION_GRABBER:13,FLOW_STEP:14,COURSE:15,CUSTOMIZATION:16},t.AUDIT_TYPE={OPEN_TICKET:100},t.PLAY_MODE={Widget:0,LightBox:1,NewTab:2,SameTab:3},t.MOBILE_COMMANDS={VIEW:{show:1e3,append:1001,hide:1002,remove:1003,externalClose:1004},ACTION:{rateApp:2e3,playVideo:2001,browseToPage:2001,openSettings:2002,libAction:2003,sendEmail:2004,openApp:2005,openAppStore:2006},GET_DATA:{storageVar:3e3,systemInfo:3001,permissions:3002,elementFinder:3003}},t.ELEMENT_INTERACTION_TYPES={Visible:0,NotVisible:1},t.SHOUTOUT_TYPES={snackbar:10,popup:20,fullScreen:30,customView:40},t.SPOTLIGHT_TYPES={arrow:1,django:2},t.MOBILE_COMMAND_NAME="message",t.EVENT_SENDER_EVENT_TYPES={Close:"close",Open:"open",Play:"play",PlayFailed:"playFailed",Click:"click",Search:"search",Complete:"complete",GoalReached:"goalReach",Submitted:"submitted",Loaded:"loaded",Visible:"visible",Draw:"draw",MouseEnter:"mouseenter",Focus:"focus",Blur:"blur",Passed:"passed",Failed:"failed",TeachMeStepCompletion:"teachMeStepCompletion",TeachMeCourseCompletion:"teachMeCourseCompletion",TeachMeCompletionUpdate:"teachMeCompletionUpdate",TeachMeStepStarted:"teachMeStepStarted",SessionPing:"sessionPing",SessionStart:"session"},t.TeachMe={QUIZ_RESULT_STORAGE_KEY_PREFIX:"wm-lms-quiz-res-",QUIZ_STATUS_CLASS:{PASSED:"passed",FAILED:"failed",NOT_TESTED:"not-tested"},QUIZ_STATUS_TEXT:{PASSED:"Quiz Passed",FAILED:"Quiz Failed",NOT_TESTED:"Not Tested"},QUIZ_STATUS:{PASSED:1,FAILED:0,NOT_TESTED:void 0}},t.EVENT_SENDER_STEP_ACTION_NAMES={Redirect:0,PlayStep:1,WaitForCondition:2,Branch:3,StopWt:4,Delay:5,Refresh:6,OpenPlayerMenu:7,SetWalkMeData:8,PassOwnership:9,ErrorHandling:10,Split:11,OnPageActionClick:12,OnPageActionHover:13,OnPageActionFocus:14,OnPageActionFillText:15,OnPageActionSelectListValue:16,Style:17},t.EVENT_SENDER_ACTIONS={None:"none",OpenMenu:"menu",PlayWalkthru:"wt",PlayShuttle:"shuttle",PlaySurvey:"survey",PlayShoutOut:"shoutout",PlayResource:"resource",PlayContent:"resource",SurveyQuestionAnswered:"answer",PlayBizFlow:"bizFlow"},t.EVENT_SENDER_MOBILE_ACTION_TYPES={None:"none",RateApp:"rateApp",OpenSettings:"openSettings",BrowseToPage:"browseToPage",PlayVideo:"playVideo",SendEmail:"sendEmail",OpenApp:"openApp",OpenAppStore:"openAppStore"},t.EVENT_SENDER_EVENT_APPS={None:"none",Player:"player",Walkthru:"wt",Step:"step",ShoutOut:"shoutout",Shuttle:"shuttle",Survey:"survey",Question:"question",SurveyQuestionAnswer:"answer",Content:"resource",Launcher:"launcher",Task:"task",Course:"course",WidgetSearch:"widgetSearch",Ticket:"openTicket",Walkme:"walkme",TeachMe:"teachMe",AbTesting:"abTesting",TrackedElement:"trackedElement",TrackedPage:"trackedElementsSet",SmartTip:"smartTip",SmartTipSet:"smartTipSet",SmartTipUiComponent:"smartTipUiComponent",BizFlow:"bizFlow",BizFlowStep:"bizFlowStep",LiveChat:"liveChat",Quiz:"quiz",QuizQuestion:"quizQuestion",QuizAnswer:"quizAnswer"},t.EVENT_SENDER_AB_TESTING_DRAW_REASONS={Draw:0,ActivationRule:1},t.EVENT_SENDER_CANCEL_REASONS={Xclick:"X Clicked"},t.DEPLOYABLE_TYPE=e.DEPLOYABLE_TYPE,delete t.DEPLOYABLE_TYPE.Walkthru,t.DEPLOYABLE_TYPE.Tutorial=0,t.DEPLOYABLE_ACTION_TYPES={Action:0,Close:1,RemindMeLater:2},t.SAFESTART_ACTION={ErrorShown:0,PopupShown:1,AutoRedirect:2,StayClicked:3,RedirectClicked:4,FailOnUrl:5},t.FEATURES={DisableWidgetOpenFullUrl:"disableWidgetOpenFullUrl",EventSenderDontSendPageUrl:"dontSendPageUrl",EventSenderDontSendPageTitle:"dontSendPageTitle",StickyCustomVars:"stickyCustomVars",StrongStickyCustomVars:"strongStickyCustomVars",DisableEventCollection:"disableEventCollection",JSP:"jsp",ForceEmbedInOwnerDocument:"embedInOwnerDocument",OldIsInIframeIndication:"oldIsInIframeIndication",DontMaskEndUserAddress:"dmeua",CalculateElementBoundsBeforeRedraw:"calculateElementBoundsBeforeRedraw"},t.EVENTS={DICreated:"DICreated",WalkMeTotalLoadingTime:"WalkMeTotalLoadingTime",MainStart:"mainCreationStart",WalkmeApiStarted:"walkMeApiCreationStart",WalkmePlayerApiStarted:"walkMePlayerApiCreationStart",BeforeWalkmeRemoved:"removeWalkMe",AfterWalkmeRemoved:"afterRemoveWalkMe",WalkmeLoaded:"wm_walkmeLibLoaded",BeforeWalkmeReady:"BeforeWalkmeReady",WalkmeReady:"WalkMeReady",ElementsTrackingReady:"ElementsTrackingReady",ReleaseAllElementsCalled:"releaseAllElementsCalled",CallReleaseElementsFromBalloons:"callReleaseElementsFromBalloons",LanguageChanged:"languageChanged",PlayerClicked:"wmPlayerClicked",ApiWasCalled:"wmApiCalled",PermalinkClicked:"wmPermalinkClicked",WidgetLoad:"WidgetLoad",WidgetOpening:"wmWidgetOpening",EndUserSettingsSet:"endUserSettingsSet",AbExperimentLinkedGoalReached:"wmLinkedGoalReached",AbTasksBlocked:"AbTasksBlocked",SalesForceVarsExposed:"SfVarsExposed",TimerManagerCreationStarted:"timerManagerCreationStart",DeployableCreated:"DeployableCreated",DeployableDestroyed:"DeployableDestroyed",DeployableNotShowing:"DeployableNotShowing",DeployableHandleStarting:"DeployableHandleStarting",UIComponentDestroyed:"UIComponentDestroyed",UIObjectsTreeCreated:"UIObjectsTreeCreated",BeforeDataFileLoaded:"BeforeDataFileLoaded",SmartTips:{SmartTipElementShown:"SmartTipElementShown",SmartTipElementRemoved:"SmartTipElementRemoved",ValidationFailed:"SmartTipValidationFailed",ValidationPassed:"SmartTipValidationPassed",TooltipShown:"SmartTipTooltipShown",SmartTipSegmented:"SmartTipSegmented",SetTurnedOn:"SmartTipSetTurnedOn",SmartTipIconShown:"SmartTipIconShown",SmartTipIconHovered:"SmartTipIconHovered"},TaskCompleted:"TaskCompleted",TasksLoaded:"TasksLoaded",Flows:{AfterCompletingFlowStage:"AfterCompletingFlowStage",BranchFlow:"SwitchToFlow",BeforeExecutingFlowStage:"BeforeExecutingFlowStage",UIFlowStageShown:"UIFlowStageShown",FailedToStart:"FlowFailedToStart",BeforeFlowStarted:"BeforeFlowStarted",FlowStarted:"FlowStarted",FlowBranched:"FlowBranched",FlowStopped:"FlowStopped",RestoringFlow:"RestoringFlow",FlowCompleted:"FlowCompleted",FlowBranchReturned:"FlowBranchReturned",LookingForElement:"LookingForElement",UiElementFound:"UiElementFound",WaitForConditionEvaluated:"WaitForConditionEvaluated",SafeStartStatusChanged:"SafeStartStatusChanged"},Walkthrus:{WalkthruGuidGenerated:"WalkthruGuid",WalkthruStarted:"StartNewWt",WalkthruStopped:"TutorialStopped",WalkthruLoaded:"LoadWt",WalkthruCompleted:"WalkthruCompleted",StepSkipped:"StepWasSkipped",StepElementFound:"ElementFound",StepElementNotFound:"ElementNotFound",LookingForStepElement:"LookingForElement",WaitingForStickyStep:"StickyStepWaiting",StepStarted:"NewStepStarted",StepExecuting:"StepPlayNum",StepPerforming:"StepPerforming",StepAdditionalTriggerSet:"StepAdditionalTriggerCBSet",StepAdditionalTriggersInitialized:"StepAdditionalTriggered",FakeStep:"StepIsFaked",StepShown:"NewStepShown",StepHasPlayCondition:"PlayStepCondition",StepCompleted:"StepCompleted",StepTriggered:"StepWasTriggered",InputGeneratedClick:"InputGeneratedClick",ShowStepBalloon:"showStepBalloon",DestroyStepBalloon:"destroyStepBalloon"},Launchers:{LauncherIsInsecure:"LauncherInsecure",LauncherClicked:"wmLauncherClicked",LauncherIsShown:"LauncherIsShown",LauncherIsHovered:"LauncherIsHovered"},Surveys:{StartSurvey:"StartSurvey",SurveyPlayed:"SurveyPlayed",SurveyCompleted:"SurveyCompleted",SurveyExited:"SurveyExited",SurveyFailedShowing:"SurveyFailedShowing",SurveyBalloonActionsSet:"SurveyBalloonActionsSet",SurveyBackQuestion:"SurveyBackQuestion",SurveyNextQuestion:"SurveyNextQuestion",SurveyFreeTextAnswerValidated:"SurveyFreeTextAnswerValidated",SuveyBeforeRadioButtonAppended:"SuveyBeforeRadioButtonAppended",SurveyBalloonDisplayed:"SurveyBalloonDisplayed"},PassOwnership:{PriorityInitialized:"priorityInitialized",PORegisterPriority:"PORegisterPriority"},Widget:{WidgetAPICreated:"WidgetAPICreated",TeachMeWidgetAPICreated:"TeachMeWidgetAPICreated",WidgetDisplayerClass:"WidgetDisplayerClass",WidgetInitInstances:"WidgetInitInstances",WidgetPlayerClass:"WidgetPlayerClass",WidgetMenuClass:"WidgetMenuClass",WidgetLanguageChanged:"WidgetLanguageChanged",WidgetDestroyAll:"WidgetDestroyAll",WidgetRefreshUI:"WidgetRefreshUI",SearchResultsReady:"SearchResultsReady",CreateSearchEngines:"CreateSearchEngines",SearchTermChanged:"SearchTermChanged",SearchCanceled:"SearchCanceled",SearchResultsAppended:"SearchResultsAppended",SearchEnded:"SearchEnded"},WidgetMenu:{MenuHtml:"MenuHtml",MenuBuilt:"MenuBuilt",MenuShow:"MenuShow",MenuHide:"MenuHide",MenuLanguageChanged:"MenuLanguageChanged",CreateActivatable:"createActivatable",AccessibilityMenuBuilt:"AccessibilityMenuBuilt"},WidgetPlayer:{PlayerShow:"PlayerShow",PlayerBuilt:"PlayerBuilt",PlayerHtml:"PlayerHtml",PlayerHide:"PlayerHide",PlayerLanguageChanged:"PlayerLanguageChanged"},SearchResultParse:"SearchResultParse",AppendingServerSearchResults:"AppendingServerSearchResults",SearchResultConverted:"SearchResultConverted",TrackedElementBeforeSendEvent:"trackedElementBeforeSendEvent",ContentRemoved:"ContentRemoved",AttentionGrabberInsecure:"AGDataInsecure",TasksConditionEvaluated:"TasksConditionEvaluated",LightBoxCreated:"lightBoxCreated",LightBoxClosed:"LightBoxClosed",ShouldChangeBalloonPosition:"ShouldChangeBalloonPosition",ShoutOutClosed:"ShoutOutClosed",AutoStart:{Activated:"wmAutoStartActivated",ConditionEvaluated:"WtAutoStartConditionEvaluated"},LoadingContent:"LoadingContent",LoadingContentFromTeachMe:"LoadingContentFromTeachMe",LoadingContentInNewTab:"LoadingContentInNewTab",StorageLoaded:"StorageLoaded",BeforeStorageLoadedCallback:"BeforeStorageLoadedCallback",CustomAuditVar:"CustomAuditVar",Goals:{ConditionEvaluated:"GoalConditionEvaluated",GoalReached:"GoalCompleted"},ActionConditionEvaluated:"ActionConditionEvaluated",Scrolls:{ScrollFired:"scrollFired"},Quizzes:{QuizSubmitted:"QuizSubmitted",QuizPlay:"QuizPlay",QuizFail:"QuizFail",QuizPass:"QuizPass",QuizAnswerSubmitted:"QuizAnswerSubmitted",QuizSummarySuccessButtonClicked:"QuizSummarySuccessButtonClicked",QuizSummaryFailureButtonClicked:"QuizSummaryFailureButtonClicked",QuizXButtonClicked:"QuizXButtonClicked",QuizResultsActionButtonClicked:"QuizResultsActionButtonClicked"},NewSession:"NewSession",WalkmeReadyNewSession:"WalkmeReadyNewSession",ConditionTreeResult:"ConditionTreeResult",BeforeSettingCustomCss:"BeforeSettingCustomCss",SettingsFileNewPublish:"SettingsFileNewPublish",BBCodeStartActionClicked:{Walkthru:"bbcodeWtClicked",Bizflow:"bbcodeBfClicked",Resource:"bbcodeResourceClicked",Survey:"bbcodeSurveyClicked"},AddFocusTraits:"AddFocusTraits",RegisterBBCodeDeployableClick:"RegisterBBCodeDeployableClick",ElementLocationChanged:"ElementLocationChanged",AnalyticsEventSent:"AnalyticsEventSent",BalloonLogs:{BalloonPopLocationCalculated:"BalloonPopLocationCalculated",BalloonIsFullyVisibleCalculated:"BalloonIsFullyVisibleCalculated",ClosestCanEmbedReturnsTop:"ClosestCanEmbedReturnsTop",ClosestCanEmbedSkipsElement:"ClosestCanEmbedSkipsElement"}},t.EVENTS_PARAMS={WalkmeRemovedErrorCodes:{missingUserIdentifyer:1,cannotHaveBothUniqueUserAndServerStorage:2}},t.SMART_TIP_INNER_EVENTS={CheckValidations:"wmCheckValidations",EventPropogationPrefix:"wmSmartTipInternalEvent",SmartTipElementRepositioned:"SmartTipElementRepositioned"},t.WINDOW_EVENTS={Resize:"resize"},t.PASS_OWNERSHIP={EvaluateOwnership:{CantBeDetermined:"CANT_BE_DETERMINED",Owner:"OWNER",NotOwner:"NOT_OWNER"},PassOwnershipEntity:{BizFlow:0,Walkthru:1},NEW_WINDOW_TIME_KEY:"wm-cond-win",LOG_FEATURE:"passOwnership",PASS_OWNERSHIP_COOKIE:"wm-cdplay"},t.FLOW_BEFORE_PLAY_KEY="wm-flw-preplay",t.FLOW_PLAY_MODES={PLAY:"play",RESTORE:"restore"},t.FLOW_STAGE_ACTIONS={BACK_FROM_FLOW_GROUP:"backFromFlowGroup",EXECUTE:"execute"},t.WINDOW_CUSTOM_DATA_TYPE={Cookie:0,Var:1},t.VALUE_CALCULATOR_TYPE={Cookie:"cookie",Variable:"var",JQuery:"jquery",LocalStorage:"localstorage"},t.DEFAULT_REACTION_TIME=500,t.FLOW_TRIGGER_WORKSPACE=".flow",t.FLOW_STEP_TYPE={UI:"UI",Action:"Action"},t.FLOW_UIELEMENT_TYPE={Element:"Element",Popup:"Popup"},t.FLOW_ACTION_RUN_STATE={Waiting:"Waiting",Done:"Done"},t.FLOW_ACTION_TYPE={ConnectToBizflow:"ConnectToBizflow",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Redirect:"Redirect",Refresh:"Refresh",Style:"Style",SetData:"SetData",Split:"Split",Stop:"Stop",WaitForCondition:"WaitForCondition",OnPageAction:"OnPageAction",ErrorHandling:"ErrorHandling"},t.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"},t.FLOW_INNER_EVENTS={EventPropogationPrefix:"wmFlowInternalEvent",FlowIsPlaying:"FlowIsPlaying"},t.STICKY_TYPE={ONCE:0,SOFT:1,STRONG:2},t.VISIBILITY_STATE={VISIBLE:0,HIDDEN:1},t.ICON_CONTENT_KIND={Text:0,Image:1},t.POSITION_PERIMETER_TYPE={Outside:0,Inside:1},t.POSITION_TYPE={Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8},t.OPPOSITE_POSITION_TYPE={},function(e,t){e[t.Top]=t.Bottom,e[t.Right]=t.Left,e[t.Bottom]=t.Top,e[t.Left]=t.Right,e[t.TopLeft]=t.BottomRight,e[t.TopRight]=t.BottomLeft,e[t.BottomRight]=t.TopLeft,e[t.BottomLeft]=t.TopRight,e[t.Center]=t.Center}(t.OPPOSITE_POSITION_TYPE,t.POSITION_TYPE),t.DEFAULT_POSITIONS={top:0,left:0,bottom:0,right:0},t.POPUP_BALLOON_Z_INDEX=2147483631,t.NORMAL_BALLOON_Z_INDEX=2147483630,t.POSITION_OFFSET_TYPE={VerticallyCentered:1,HorizontalCentered:2,Above:3,Below:4,ToRight:5,ToLeft:6,SnapToViewportRight:9},t.POSITION_OFFSET={Center:0,Start:1,End:2},t.EMBEDMENT_TYPE={EmbedInElement:0,EmbedInElementParent:1,EmbedInOwnerDocument:2,EmbedInTopDocument:3},t.ICON_CONTENT_STATE={Regular:0,Hover:1,Click:2},t.SMART_TIP={MODE:{OnlyInfo:0,OnlyValidations:1,InfoAndValidations:2},COMPONENT_TYPE:{Info:0,Validation:1,PositiveFeedback:2}},t.TOOLTIPS_ACTIVATION_MODES={Mouse:1,Focus:2},t.OLD_STICKIES={STICKINESS_TYPES:{soft:0,strong:1}},t.CONDITION_CHECKER={FEATURE_NAMES:{SmartTipSegmentation:"evaluate smart tip segmentation"}},t.IS_STICKY_SETTING_KEY="isSticky",t.STICKINESS_TYPE_SETTING_KEY="stickinessType",t.ANIMATION_TYPES={None:1},t.FLOW_TRIGGER_TYPE={Click:"Click",Hover:"Hover",Button:"Button",Text:"Text",Delay:"Delay",PageChanged:"PageChanged",SelectAny:"SelectAny",SelectValue:"SelectValue",BbCode:"BbCode",PeerStep:"PeerStep",Custom:"Custom",Swipe:"Swipe"},t.SHOUTOUT_CLICK_TYPE={Action:0,Close:1,XButton:2,RemindMeLater:3},t.BALLOON_BUTTON_TYPE={Submit:"Submit",Back:"Back",Next:"Next",Done:"Done",Start:"Start",Cancel:"Cancel"},t.FEATURES_LOGS={ElementFinder:"elementFinder",WalkMeSession:"session",Flows:"flows",AnalyticsTracking:"analyticsTracking"},t.SEARCH_DEPLOYABLES_PROVIDER_ID=0,t.APPLET_INTERACTION_TYPES={Element:1,Overlay:2},t.WALKTHRU_PERSISTANCE_DATA_FIELDS={STEP_COMPLETED_HISTORY_COOKIE_NAME:"sch",CURRENT_TUTORIAL_COOKIE_NAME:"tId",CURRENT_STATE_COOKIE_NAME:"stt",CURRENT_STEP_COOKIE_NAME:"step",CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME:"spn",CURRENT_PLAY_GUID_COOKIE_NAME:"plgd",CURRENT_PLAY_INITIATOR_COOKIE_NAME:"pint",SPLIT_POINT_COOKIE_NAME:"splt",TUTORIAL_FINISHED_COOKIE_NAME:"fnsh",STEP_PLAY_HISTORY_COOKIE_NAME:"sph",SPLIT_TUTORIAL_IDS_COOKIE_NAME:"sti",SPLIT_START_FROM_STEP_COOKIE_NAME:"ssi",INTERACTION_GUID_COOKIE_NAME:"igd"},t.SURVEY_START_EVENTS={WalkThruCompleted:0,WalkThruExited:1,Both:2,WalkThruInterrupted:3,BbCodeClicked:4},t.CHECK_STEP_MODE={Normal:1,Sandbox:2},t.playConditionModes={PLAY_CONDITION:0,STICKY_CONDITION:1,BOTH:2},t.UI_PROPERTIES={Visible:"visible",Invisible:"invisible",Completed:"completed",Uncompleted:"uncompleted",StrikedOut:"strike-out",Active:"active",Inactive:"inactive",ProgressBar:"progress-bar",Default:"default",Search:"search",SearchProviders:"search-providers",Video:"video",Article:"article",Accessible:"accessible",Phantom:"phantom",LmsCourse:"lmsCourse"},t.DISPLAY_WIDGET_CONDITION="displayWidgetCondition",t.WALKTHRU_STATE={NOT_RUNNING:0,RUNNING:1,WAITING_FOR_ELEMENT:2,WAITING_FOR_ELEMENT_EVENT:3,PAUSED:4,WAITING_FOR_SPLIT:5,WAITING_FOR_NEXT_BUTTON_CLICK:6,WAITING_FOR_PAGE_CHANGE:7,WAITING_FOR_STICKY_ELEMENT:8,WAITING_FOR_CONDITION:9,PASSING_OWNERSHIP:10,WAITING_FOR_REDIRECT:11,WAITING_FOR_OWNERSHIP:12},t.WALKTHRU_STEP_TRIGGER={NOTHING:0,NEXT_BUTTON:1,CLICK:2,HOVER:3,PAGE_CHANGED:4,KEY_PRESSED:5,DURATION:6,SELECT_ANY:7,SELECT_VALUE:8,SWIPE:9},t.SUBTEXT_CURRENT_START="##START_OF_CURRENT##",t.SUBTEXT_CURRENT_END="##END_OF_CURRENT##",t.SUBTEXT_TOTAL_START="##START_OF_TOTAL##",t.SUBTEXT_TOTAL_END="##END_OF_TOTAL##",t.DEPLOYABLE_DISPLAY_NAME={19:"BizFlow",0:"Walk-Thru"},t.SURVEY_FREQUENCY={0:"always",1:"visit",2:"once"},t.UI_CHANGE_NOTIFIERS={HASH:"hash",HISTORY:"history",IFRAME_LOAD_SELECTOR:"iframeLoadSelector",CLICK_SELECTOR:"clickSelector",AJAX_CALLS:"ajaxCalls",USER_INPUT:"userInput"},t.FLOW_TRANSITION_HANDLER_IDS={DELAYER:0,ON_BEFORE_UNLOAD:1},t.QUESTION_TYPES={FreeText:0,RadioButton:1,CheckBox:2}}var D=i.get("Consts");i.register("ExternalWalkMeConfig").asCtor(L).dependencies("Consts");function L(e){var t=this,n={platform:e.PLATFORM.Web};t.get=function(e){return window._walkmeConfig&&window._walkmeConfig[e]?window._walkmeConfig[e]:n[e]}}i.register("PlatformDI").asCtor(x).dependencies("Consts, ExternalWalkMeConfig");function x(t,n){var r,i=this;function o(){r=n.get("platform")}i.register=function(t,n){if("number"==typeof t)return void(t==r&&n());e.inArray(r,t)!=-1&&n()},o.apply(null,arguments)}var F=i.get("PlatformDI");i.register("SettingsFile").asCtor(M);function M(){var e,t=this;function n(){e=r()||window.wmPreviewSnippet||window.wmSnippet}function r(){if(window.wmPlaySnippetData){var e=If(window.wmPlaySnippetData);return window.wmPlaySnippet={getSettingsFile:function(){return e}},window.wmPlaySnippet}return null}t.getSettingsFile=function(){return e?e.getSettingsFile()||{}:{}},t.getPublishVersion=function(){var e=t.getSettingsFile(),n=e.DataFiles[0].url,r=n.match(/data_([a-z0-9]+)/)[1];return r},t.getPublishDirectory=function(){var e=t.getSettingsFile(),n=e.DataFiles[0].url;return n.substring(0,n.lastIndexOf("/")+1)},t.getCdnServerName=function(){return t.getSettingsFile().CdnServerName||window.mt_cdn_server_name},t.getStorageType=function(){return t.getSettingsFile().Storage},t.getAllUserGuids=function(){return t.getSettingsFile().UserGuids},t.getPublishDate=function(){return t.getSettingsFile().PublishDate},t.getUrl=function(){return window._walkmeInternals&&window._walkmeInternals.settingsUrl},t.getPlayerRelatedPath=function(){var e=t.getSettingsFile().LibFile,n=/http.+\/player\//.exec(e);return n[0]},n()}__webpack_require__.p=R();function R(){return i.get("SettingsFile").getSettingsFile().PublicPath}i.register("Logger").asCtor(B).dependencies("CookiesManager, HostData, Lib, IsInEditor, Consts, FeaturesManager");function B(t,n,o,a,s,u){var l=this,c=!1;window.walkme_lib_in_dev&&(c=!0);var d,p="walkmeCustomerLogs",g={debug:4,info:3,warn:2,error:1},f=86400,h=0,m=!0;function v(){d=new k(t)}l.ready=function(){var e="DI";r.logger=l.wrapCustomerLog(e)},l.wrapCustomerLog=function(e){return function(t,n,r){l.customerLog(t,n,r||e)}},l.customerLog=function(e,t,r){if(n.isQuirksMode()&&(e instanceof mtjQuery||e&&e.nodeType))return;t=i.get("CommonUtils").defaultValue(t,1);var o=d.get();if(o){var a=parseInt(o.l),s=o.f,u=o.u;if(a>=t&&I(s,u,r))try{w(o.m?C()+Cf(e):e)}catch(l){}}};function S(e){return e.debug=function(t,n,r){return e("debug",t,n,r)},e.info=function(t,n,r){return e("info",t,n,r)},e.warn=function(t,n,r){return e("warn",t,n,r)},e.error=function(t,n,r){return e("error",t,n,r)},e}l.sendServerLog=S(function(e,t,n,r){i.get("EventCollectorLoggerPixel").log(e,t,n),l.customerLog(t,g[e],r)}),l.wrapServerLog=function(e){return S(function(t,n,r,i){l.sendServerLog(t,n,r,i||e)})};var E=0,T=[];l.timer=function(e){E++;var n=(new Date).getTime();return{stop:function(){var r=If(t.getCookie(p));if(!r||!r.m)return;var i=(new Date).getTime(),o=i-n,a=Array(E).join("->\t"),s=C()+a+e+": "+o+"ms";1==E?(w(s),y()):T.push(s),E--}}};function y(){for(var e=T.length-1;e>=0;e--)w(T[e]);T.length=0}function C(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "}function I(e,t,n){var r=!0;return e?r=mtjQuery.inArray(n,e)!=-1:t&&(r=mtjQuery.inArray(n,t)==-1),r}l.enableCustomerLogs=function(e){return d.enable(e)},l.error=function(e,t,n){try{var r,i=arguments.callee.caller,o=i?i.name:"N/A";if(e&&e.message){var a=t?t+"\n":"";r=a+"File : "+e.fileName+"\n - Function : "+o+"\n - Line : "+e.lineNumber+"\n - Msg : "+e.message}else r="Function : "+o+"\n - "+t;e&&e.stack&&(r+="\n - Stack: "+e.stack),m&&b(r,1,n),c&&!window.wmNoAlert&&alert("Dev mode alert: "+r),customerLog("Error: "+r)}catch(s){}};function b(e,t,n){try{if(!i.get("AuditingEnabledIndicator").isEnabled())return!0;if(u.isFeatureEnabled("disableAuditErrorLog"))return!0;if(h++,h>5)return;var r={code:t,isInEditor:a.get(),SVNRevision:o.SVNRevision,LibVersion:o.LibVersion};n&&(mtjQuery.extend(n,r),r=n),l.sendServerLog.error(e,r)}catch(s){}}function w(e){if(window.console)console.log(e);else try{var t=A(),n=new Date,r=_(e);t.find("#walkme-console-messages").prepend('<li style="padding: 2px 5px; border-bottom: 1px solid #afafaf"><span style="float: left; color: #afafaf; margin-right: 5px;">'+P(n.getHours())+":"+P(n.getMinutes())+":"+P(n.getSeconds())+" </span>"+r.substring(1,r.length-1)+"</li>")}catch(i){}}function _(t){return t instanceof e?"-jQuery object: selector - "+t.selector+", value - "+t.val()+", domElement - "+Cf(t[0]):Cf(t)}function P(e){return e<10?"0"+e:e}function A(){var e=mtjQuery("#walkme-console-box");if(0===e.length){var t=i.get("TopContainerProvider").getTopContainer();e=mtjQuery('<div id="walkme-console-box"></div>');var n=mtjQuery('<div style="display: none;">Walkme Console: [ </div>'),r=mtjQuery('<button type="button" title="Toggle the walkme debug console">Walkme Console</button>'),o=mtjQuery('<ul id="walkme-console-messages"></ul>'),a=mtjQuery('<a href="#">clear</a>');n.append(a),n.append(" ]"),n.append(o),e.append(n),e.append(r),t.append(e),r.click(function(){n.slideToggle("fast",function(){var e=mtjQuery(this).is(":visible")?"Close Console":"Walkme Console";r.text(e)})}),a.click(function(){o.empty()}),n.css({margin:"15px 60px 5px 15px",padding:"5px",border:"1px solid red","background-color":"#FFC",color:"#000"}),r.css({border:"1px solid red","background-color":"#FFFFCC","margin-left":"15px",width:"120px"}),e.css({position:"fixed","z-index":s.POPUP_BALLOON_Z_INDEX,"font-family":"Arial",bottom:"10px",left:"10px",width:"100%","text-align":"left"}),o.css({"background-color":"white",border:"1px solid black",height:"260px","list-style-type":"none",padding:"0","overflow-y":"auto",margin:"5px 0 0"})}return e}l.getAPI=function(){return d};function k(){var e,t,n=this,r=1;function o(n){t=n,e=If(t.getCookie(p))}n.get=function(){return e},n.enable=function(t){return a(),e.l=t||r,l(),n},n.disable=function(){return e&&(e.l=0,l()),n},n.reset=function(){return e={l:r},l(),n},n.level=function c(c){if(void 0===c)return s("l",null);return a(),e.l=c,l(),n},n.track=function(t){if(void 0===t)return s("f",[]);a();var r=u(t);return delete e.u,e.f=e.f?xf(r,e.f):r,l(),n},n.untrack=function(t){if(void 0===t)return s("u",[]);a();var r=u(t);return delete e.f,e.u=e.u?xf(r,e.u):r,l(),n},n.timer=function(t){return a(),t?e.m=1:e.m&&delete e.m,l(),n};function a(){e||(e={})}function s(t,n){return e?e[t]:n}function u(e){if(!i.get("CommonUtils").isDefined(e))return[];if("string"==typeof e)return e=e.replace(/\s/g,""),e.split(",");if(e.length>0)return e}function l(){t.setCookie(p,Cf(e),f)}o.apply(null,arguments)}v.apply(null,arguments)}i.register("FeaturedLogger").asCtor(U).asProto().dependencies("FeaturedLoggerConsts, CommonUtils, Logger");function U(e,t,n,r){var i=this;i.customerLog=u;var o,a;function s(){o=r&&r.feature||e.DEFAULT_FEATURE,a=r&&r.logLevel||e.DEFAULT_LOG_LEVEL}function u(){var e=t.formatString.apply(null,arguments);n.customerLog(e,a,o)}s()}i.register("FeaturedLoggerConsts").asInstance({DEFAULT_FEATURE:"No name",DEFAULT_LOG_LEVEL:3}),n.CssInjector=__webpack_require__(54),i.register("CssInjector").asCtor(n.CssInjector).args({jQ:e}),i.register("CssUtils").asCtor(V);function V(){var e=this,t=["@import","expression","javascript","-moz-binding","-o-link","behavior"];e.clearComments=n,e.getSelectors=r,e.isSecure=i;function n(e){return e.replace(/\/\*[\s\S]*?\*\//gm,"")}function r(e){var t=n(e).split(/\s*{[^}]*}\s*/);return t.pop(),t}function i(e){var t=n(e);return!o(t.toLowerCase())}function o(e){for(var n=0;n<t.length;n++){var r=t[n];if(e.indexOf(r)>-1)return!0}return!1}}var W=function(){function t(e,t,n,r){if(this.feSessionManager=t,this._measures=[],this._mutations=[],n)n.bind?(this._syncFunc=n.bind(e),this._cleanFunc=r.bind(e)):(this._syncFunc=function(){return n.apply(e,arguments)},this._cleanFunc=function(){r.apply(e,arguments)});else{var o=i.get("TimerManager");this._syncFunc=function(e){return o.setWalkmeTimeout(e,16)}}}return t.prototype.measure=function(e){return this.addTask(this._measures,e)},t.prototype.mutate=function(e){return this.addTask(this._mutations,e);
},t.prototype.remove=function(e){this.removeTask(this._measures,e),this.removeTask(this._mutations,e)},t.prototype.removeTask=function(t,n){var r=e.inArray(n,t);r>-1&&t.splice(r,1)},t.prototype.cleanResources=function(){this._cleanFunc&&this._flushHandler&&this._cleanFunc(this._flushHandler),this._measures=[],this._mutations=[],this._flushHandler=null,this._scheduled=!1},t.prototype.addTask=function(e,t){var n=new o(function(n,r){e.push(function(){n(t())})});return this.scheduleFlush(),n},t.prototype.scheduleFlush=function(){var e=this;this._scheduled||(this._scheduled=!0,this._flushHandler=this._syncFunc(function(){e.flush()}))},t.prototype.flush=function(){for(var e=this;this._measures.length>0||this._mutations.length>0;)this.feSessionManager.wrapSession(function(){e.runTasks(e._measures)}),this.runTasks(this._mutations);this._scheduled=!1},t.prototype.runTasks=function(e){for(var t;t=e.shift();)try{t()}catch(n){i.get("EventSenderErrorLogger").logError("error running DOMSessionManager task\n\n"+Cf(n.message))}},t}();i.register("DOMSessionManager").asCtor(W).dependencies("win, FESessionManager, requestAnimationFrame, cancelAnimationFrame"),i.register("WalkMeInfo").asCtor(G).dependencies("EndUsersManager,AbCurrentPermutationProvider,LanguageManager,AuditSourceManager,UserGuidContainer,Lib,SettingsFile");function G(e,t,n,r,i,o,a){var s=this;s.getUserGuid=c,s.getEndUserGuid=c,s.getEndUserGuidSource=c,s.getPermutationId=c,s.getLanguage=c,s.getSource=c,s.getCustomVars=c,s.getLibVersion=c,s.setAnalyticsCustomFields=d,s.getAnalyticsCustomFields=p;var u=Array();s.init=function(){s.getUserGuid=i.getUserGuid,s.getEndUserGuid=l,s.getEndUserGuidSource=e.getEndUserGuidSource,s.getPermutationId=t.getCurrentPermutation,s.getLanguage=n.getCurrentLanguage,s.getEnvironmentId=r.get,s.getCustomVars=p,s.getLibVersion=function(){return o.LibVersion},s.getPublishDate=a.getPublishDate};function l(){if(e.getEndUserGuidSource())return e.getEndUserGuid()}function c(){throw new Error("WalkMeInfo not initialized properly")}function d(e,t){return u[e]=t,!0}function p(){return u}}var H=i.register("WalkmeLoader").asCtor(j).dependencies("Lib, WalkmeConfigManager, Consts, TimerManager, CommonEvents, LibDestroyer, DevModeAlertRaiser, UserGuidContainer, WindowBeforeUnloadHandler");"useOnce"in H&&H.useOnce();function j(e,t,n,r,o,a,s,u,l){var c,d,p=this;function g(){window._walkmeInternals.walkmeLoadLog=[],c={start:{run:function(t){f("st"),pr=i.get("CommonUtils"),e.profilerAPI=i.get("ProfilerAPI");var n=i.get("SettingsFile").getSettingsFile();i.get("AuditSourceManager").set(n.Environment),u.setUserGuid(n.UserGuids&&n.UserGuids[0]),i.get("RecorderServerManager").set(n.PlayerServer),i.get("EventServerBaseUrl").set(n.EventServer),i.get("FramesetsUtils").waitForFramesHeadsAndBodies(t)},next:"pageReady"},pageReady:{run:function(e){f("pr"),p.libCtorTimer=i.get("Logger").timer("lib constructor"),e()},next:"loadStorage"},loadStorage:{run:function(t){f("ls");var n=i.get("ClientStorageManager");if(!n)return;if(n.init(t,e)===!1)return S("storageManagerInitFailed"),!1;try{window.walkme_lib_in_dev&&s.devModeAlert()}catch(r){}p.libCtorTimer.stop()},next:"loadWalkmeConfig"},loadWalkmeConfig:{run:function(e){f("lwc"),t.init(function(){if(null!=t.Data){var n=t.Data.EndUserSettings,r=i.get("EndUsersManager");r.setEndUserSettings(n),r.createEndUserGuid()}e()})},next:"loadServerStorage"},loadServerStorage:{run:function(e){f("lss");var t=i.get("StorageManagerFactory").bySettingsFile(!0);i.register("ClientOrServerStorageManager").asInstance(t),t===i.get("ClientStorageManager")&&t.removeData(n.STORAGE_KEYS.lastGetDataTime,u.getUserGuid()),t.init(e,e)},next:"afterStorageLoaded"},afterStorageLoaded:{run:function(e){f("asl"),v();var t=i.get("ClientOrServerStorageManager"),n="wm-lang",o="wm-ABPer";t.convertOldCookieStorage(n),t.convertOldCookieStorage(o),document.cookie.indexOf("walkmeDontInitLib")==-1&&r.setWalkmeTimeout(function(){y()},0)}}},d="start"}function f(e){window._walkmeInternals.walkmeLoadLog.push(e)}var h=i.register("loadClasses").asInstance({}).dependencies("CookiesManager,Logger,FramesetsUtils,SettingsFile,JQueryElementFinder,ConditionFunctions,ConditionTreeEvaluator,BBCodeParser,ResourceManager,ClientOrServerStorageManager,EndUsersManager,DataSender,EventSender,AbPermutationManager,LibInitializer,WmAjax,SiteConfigManager,EndUserLoggerManager,AnalyticsManager,ClickAuditManager,RecorderServerManager,EventServerBaseUrl,ServerDataSenderManager,AuditStepsManager,GoalsManager,WalkMeGoalsManager");"useOnce"in h&&h.useOnce();var m=i.register("loadClasses2").asInstance({}).dependencies("DebuggerManager,WmInternals,PlayManager,FeaturesManager,TimerManager,CommonEvents,AuditWtsManager,PopupNotificationsService,LoggerManager,TriggersManager,ShoutOutActionDataProvider,LauncherActionDataProvider,AuditTasksManager,LegacyWidgetApiModule,LegacyExternalApiModule,FlowSurveyActivator");"useOnce"in m&&m.useOnce();function v(){i.get("loadClasses"),i.get("loadClasses2")}p.start=function(e){E(c[d],e)},p.get=function(e){return i.get(e)};function S(t){a.removeWalkMe(t,{sendLog:!0}),e.initFailed=!0}function E(e,t){e&&(e.run?e.run(function(){T(e,t)}):T(e,t))}function T(e,t){if(e){var n=c[e.next];d=e.next,n?E(n,t):t&&t()}}function y(){i.get("WalkmeLoadTimeManager").init(),l.init(),C(),i.get("HostData").isIE(7)||i.get("AuditSourceProvider").isInPlayMode()||i.get("EventSenderInitializer").init(),i.get("LibInitializer").startInitializer()}function C(){var e=i.get("SessionPersister");e.loadOrCreate()}g.apply(null,arguments)}i.register("LibCtorService").asCtor(Y).dependencies("Consts, Lib, WmInternals");function Y(t,n,r){var o=this;o.init=a;function a(){e(["bind","unbind","on","off","one"]).each(function(t,n){r[n]=function(t,i){e(r)[n](t,i)}}),i.get("DataEncoderFactory").registerEncoders(),i.get("CommonEvents").raiseEvent(t.EVENTS.DICreated,i),i.get("AjaxManager").init(),i.get("CommonEvents").raiseEvent(t.EVENTS.MainStart,{object:n}),i.initialize("Logger"),i.initialize("HostData"),i.get("PerformanceTracker").init(),i.initialize("ElementFinder"),i.get("WalkmeLoader").start()}}i.register("TasksContainer").asCtor(z),i.register("ContentsContainer").asCtor(z),i.register("ShuttlesContainer").asCtor(z),i.register("SurveysContainer").asCtor(z),i.register("ShoutOutsContainer").asCtor(z),i.register("SpotlightsContainer").asCtor(z),i.register("TooltipsContainer").asCtor(z),i.register("CategoriesContainer").asCtor(z),i.register("CollectionsContainer").asCtor(z),i.register("ConditionBlocksContainer").asCtor(z),i.register("BusinessSolutionsContainer").asCtor(z),i.register("CoursesContainer").asCtor(z),i.register("LabelsContainer").asCtor(z),i.register("LessonsContainer").asCtor(z),i.register("TagsContainer").asCtor(z),i.register("TrackedPagesContainer").asCtor(z),i.register("TrackedElementsContainer").asCtor(z),i.register("AbExperimentsContainer").asCtor(z),i.register("SearchProviderUrlsContainer").asCtor(z);function z(){var e=this;e.set=r,e.get=i,e.addRange=o;var t;function n(){t=[]}function r(e){t=e}function i(){return t}function o(e){t=t.concat(e)}n()}var Q=i.get("UIComponentsClasses"),K=Q.eventBasedObject,q=(Q.uiComponentBase,Q.idisplayer,Q.popupBase,Q.shoutOutBase);i.register("CdnServer").asCtor(X).dependencies("SettingsFile");function X(e){var t=this;t.get=i,t.override=r;var n;function r(e){n=e}function i(){return n||e.getCdnServerName()||""}}i.register("CookiesManager").dependencies("logger=Logger").injectToProperty().asCtor(J);function J(){var e,t,n,r=this;function o(r){e=i.get("DataValueEncoder"),t=i.get("DataNameEncoder"),n=i.get("Consts")}this.setCookie=function(n,r,i,o){try{"string"!=typeof r&&(r=r.toString()),r=e.encode(r);var a="";o&&o.length>0&&(a="; domain="+o);var s=new Date;s.setTime(s.getTime()+1e3*i);var u="; expires="+s.toUTCString(),l=r+u+"; path=/"+a;document.cookie=t.encode(n)+"="+l}catch(c){this.logger.error(c)}},this.getCookie=function(n){var r,i,o,a=t.encode(n),s=!1,u=document.cookie.split(";");for(r=0;r<u.length;r++){if(i=u[r].substr(0,u[r].indexOf("=")),o=u[r].substr(u[r].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==a)return e.decode(o);i==n&&(s=e.decode(o))}return s},this.getCurrentDomain=function(){var e=r.getCookie(n.DOMAIN_IN_COOKIE);if(e)return e;var t=window.location.hostname,i="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";if(new RegExp(i).test(t))return r.setCookie(n.DOMAIN_IN_COOKIE,t,n.DEFAULT_COOKIE_SECONDS,t),t;if(t.indexOf(".")==-1)return null;for(var o=t.split("."),a="",s=o.length-1;s>=0;s--)if(""!=a&&(a="."+a),a=o[s]+a,r.setCookie(n.DOMAIN_IN_COOKIE,a,n.DEFAULT_COOKIE_SECONDS,a),r.getCookie(n.DOMAIN_IN_COOKIE)==a)return a;r.setCookie("wm-test","wm-test",n.DEFAULT_COOKIE_SECONDS);var u=r.getCookie("wm-test");if("wm-test"!=u)try{console.log("WalkMe requires the browser to accept cookies - please enable cookies in your browser.")}catch(l){}else this.logger.error(new Error("Cannot get domain from: "+t));return},o.apply(null,arguments)}i.register("FindElementCornerMargin").asInstance(1),i.register("FindElementCornerFunctions").asFunction(function(e){return[function(t){return{x:t.offset().left+t.outerWidth()/2,y:t.offset().top+e}},function(t){return{x:t.offset().left+t.outerWidth()/2,y:t.offset().top+t.outerHeight()-e}},function(t){return{x:t.offset().left+e,y:t.offset().top+t.outerHeight()/2}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+t.outerHeight()/2}},function(t){return{x:t.offset().left+e,y:t.offset().top+e}},function(t){return{x:t.offset().left+e,y:t.offset().top+t.outerHeight()-e}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+e}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+t.outerHeight()-e}}]}).dependencies("FindElementCornerMargin"),i.register("ElementPositionCalculator").asCtor($).dependencies("Consts, PositionHelper");function $(e,t){var n=this;n.getElementPosition=i;function r(){}function i(n,r){try{var i,o;if(n==e.EMBEDMENT_TYPE.EmbedInOwnerDocument){var a=r.offset();i=Math.floor(a.top),o=Math.floor(a.left)}else if(n==e.EMBEDMENT_TYPE.EmbedInTopDocument){var s=t.getPosRelativeToWindow(r[0],window,!0);i=s.top,o=s.left}var u=r.height(),l=r.width();return{top:i,left:o,height:u,width:l}}catch(c){return{}}}r()}i.register("StorageResourceManager").asCtor(Z).dependencies("SettingsFile, CommonUtils, win");function Z(e,t,n){var r=this,i="hi",o="sc",a="wm-cdhi-o",s=32,u=2;r.getOrigin=function(){if(t.isLocalStorageEnabled()){var e=n.localStorage.getItem(a);if(e)return e}var r=l(i);if(r)return r;return t.getOrigin()},r.getHiddenIframePath=function(e){var t=e?".compress":"";return r.getOrigin()+kf("/player/resources/CD/CDhiddenIframe{1}_v{0}.html",s,t)},r.getHiddenIframeScriptSrc=function(){return r.getOrigin()+kf("/player/resources/CD/cdHiddenIframeScript_{0}.js",u)},r.getSaveCookiePath=function(){var e=l(o);return e||r.getOrigin()+"/player/resources/CD/saveCookie.html"};function l(t){var n=e.getStorageType();if(n)return n[t]}}function ee(){var e="walkme-hidden-iframe";this.init=o,this.postMessage=s,this.isInitialized=d,this.getTargetWindow=u,this.terminate=a;var t,n,r;function i(e,t,i){n=t,r=i.getHiddenIframePath(e)}function o(e,n,r){t=l(r),t?n&&n():t=c(e,n,r)}function a(){t&&t.parentNode&&t.parentNode.removeChild(t)}function s(e,t){u().postMessage(e,t)}function u(){return t&&(t.contentWindow||t.window)}function l(t){var n=t?t.ownerDocument:document;return n.getElementById(e)}function c(t,i,o){return n.createIframe(r,e,!1,i,t,o,!0)}function d(){try{return!!u()}catch(e){return!1}}i.apply(null,arguments)}function te(){var t,n,r,i,o,a,s,u,l="walkme-proxy-iframe";this.init=d,this.isInitialized=v,this.postMessage=m,this.terminate=p;function c(e,t,r,i){o=t,s=i,a=r,n=new ee(e,t,r)}function d(a,s){t=a,g(function(){var t=e(r).contents();i=r.contentWindow||r.window,f(t,i,function(){n.init(null,function(){u=o.registerEventHandler("message",h,!1,i),i.targetWindow=n.getTargetWindow(),s&&s()},t.find("body")[0])})})}function p(){n&&n.terminate(),u&&u(),r&&r.parentNode&&r.parentNode.removeChild(r)}function g(e){r=document.getElementById(l),r?e():r=o.createIframe("about:blank",l,!1,e,null,null,!0)}function f(e,t,n){var r=t.document.createElement("script");r.type="text/javascript",r.async=!1,r.src=a.getHiddenIframeScriptSrc(),window._walkmeInternals.hiddenIframeCallback=n,e.find("head")[0].appendChild(r)}function h(e){var n=o.getWalkmeInternals().walkmeWrap;n?n(t,e):t(e)}function m(e,t){i.send.apply(i,[e,t])}function v(){return n.isInitialized()}c.apply(null,arguments)}i.register("CookiesStorageManager").asCtor(ne).asProto().dependencies("CookiesManager,TimerManager,Consts");function ne(t,n,r){var i,o=this,a="#!@DeL@!#";function s(){i=new aa}o.saveData=function(e,n,r,a){void 0==o.currentDomain&&(o.currentDomain=t.getCurrentDomain()),t.setCookie(e,n,r,o.currentDomain),i.saveData(e,n,r,a)},o.getData=function(e,n){var r=i.getData(e,n);if(void 0===r&&(r=t.getCookie(e),r===a||r===!1))return;return r},o.removeData=function(e,t){i.removeData(e,t);var n=o.getData(e);void 0!==n&&o.saveData(e,a,-1)},o.removeAllData=function(){for(var t=document.cookie.split(";"),n=0;n<t.length;n++)if(0===e.trim(t[n]).toLowerCase().indexOf("wm-")){var r=e.trim(t[n].split("=")[0]);document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}},o.getInternalKeys=function(t,n){for(var i=document.cookie.split(";"),o={},a=0;a<i.length;a++)if(0===e.trim(i[a]).toLowerCase().indexOf(n)){var s=e.trim(i[a].split("=")[0]);s!==r.DOMAIN_IN_COOKIE&&(o[s]=this.getData(s))}return o},o.refreshGetData=function(e,t){for(var n=0;n<e.length;n++)i.clear(e[n]);t&&t()},s.apply(null,arguments)}i.register("ExtensionStorageManager").asCtor(re).asProto().dependencies("TimerManager, Logger");function re(e,t){var n=this,r=5,i=300;function o(){}n.init=function(o){if(window.walkmeExt)return void o();if(0==r)return void t.customerLog("Extension storage is not available, walkme can not load",3);r--,e.libSetTimeout(function(){n.init(o)},i)},n.saveData=function(e,t,n,r){var i={val:t,exp:a(1e3*n)};walkmeExt.SaveData(e,Cf(i),r)},n.getData=function(e,t){var n=walkmeExt.GetData(e,t);if(n){var r=If(n);return r.val}},n.removeData=function(e,t){walkmeExt.removeData(e,t)},n.removeAllData=function(e){walkmeExt.RemoveAllData(e)},n.getAll=function(e){return walkmeExt.GetAll(e)};function a(e){return s()+e}function s(){return(new Date).getTime()}o.apply(null,arguments)}i.register("ExtensionConfigManager").asCtor(ie);function ie(){var e=this;e.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:void 0}}i.register("WalkMejStorageManager").asCtor(oe).asProto().dependencies("CommonUtils");function oe(e){var t,n,r=this,i="walkMe_";function o(){try{n=e.isLocalStorageEnabled(),a()}catch(t){}}function a(){if(!r.isEnabled())return;t=window.localStorage;var e=If(t.getItem("wm-storage"));if(!e)return;var n=e.__jstorage_meta||{},i=n.TTL||{};for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],s=i[o],l=u();s>l&&r.saveData(o,a,(s-l)/1e3)}t.removeItem("wm-storage")}this.init=function(e){if(!r.isEnabled())return!1;e()},this.saveData=function(n,o,a){a=e.defaultValue(a,0),r.removeData(n);var u={val:o,exp:s(1e3*a)};t.setItem(i+n,Cf(u))},this.getData=function(e){var n=t.getItem(i+e);if(n){var o=If(n);if(!(o.exp<u()))return o.val;r.removeData(e)}},this.removeData=function(e){t.removeItem(i+e)},this.removeAllData=function(){Object.keys(localStorage).forEach(function(e){0===e.indexOf(i)&&localStorage.removeItem(e)})},this.getInternalKeys=function(e,n){function o(e,t,i){e=e.substr(i),e.toLowerCase().indexOf(n)>-1&&(t[e]=r.getData(e))}for(var a={},s=i.length,u=0;u<t.length;u++){var l=t.key(u);o(l,a,s)}return a},this.isEnabled=function(){return n};function s(e){return u()+e}function u(){return(new Date).getTime()}o.apply(null,arguments)}i.register("ServerStorageSettingsService").asCtor(ae).dependencies("SettingsFile");function ae(e){var t=this;t.isServerStorageOn=r;var n="ss";function r(){var t=e.getStorageType();return!!t&&1==t[n]}}i.register("StorageManagerFactory").asCtor(se).dependencies("UserGuidContainer, SettingsFile, FeaturesManager, Logger, HostData, CommonUtils, Consts, ServerStorageSettingsService");function se(e,t,n,r,o,a,s,u){var l,c,d,p,g,f,h=!0,m=this,v="st",S="cm",E="sm";function T(){l=e.getAllUserGuids,c=n.isFeatureEnabled}m.bySettingsFile=function(e){var n=pr.getWindowCookie("wm-stt"),r=n?m.byType(n):m.byType(t.getStorageType());return e&&u.isServerStorageOn()&&!i.get("EndUsersManager").isWalkMeGeneratedEndUserType()&&(r=i.get("ServerStorageManager")),r},m.byType=function(e){var t,n=y(e),r=!1,i=!1,o=!1,a=C(E);switch(n){case s.STORAGE_TYPE.JStorage:r=!0;break;case s.STORAGE_TYPE.CrossDomainCookies:a=b.Cookies,i=!0;break;case s.STORAGE_TYPE.CrossDomainLocalStorage:a=b.LocalStorage;case s.STORAGE_TYPE.CrossDomain:i=!0;break;case s.STORAGE_TYPE.Extension:o=!0;break;case s.STORAGE_TYPE.ProxyIframe:i=!0,t=!0;break;case s.STORAGE_TYPE.Cookie:}return w(r,i,o,a,t)};function y(e){if(!e)return e;if("string"==typeof e)return e;var t=e[v];return t[o.browser.string]||t[o.browser.name]||t["*"]}m.byFeature=function(){var e=c("jstorage"),t=c("crossdomain");return w(e,t)};function C(e,n){var r=t.getStorageType();if(!r||void 0===r[e])return n;return r[e]}function I(){return!!C(S,h)}function w(e,t,n,r,i){var o,a=l(),s=a[0];return o=t?_(a,t,s,r,I(),i):e?k(s):n?A(s):P(s)}function _(e,t,n,i,o,u){if(!d){var l=new oa(a,e,t,i,o,u);d=new sa(s.STORAGE_TYPE.CrossDomain,l,n,r,a)}return d}function P(e){if(!g){var t=i.get("CookiesStorageManager");g=new sa(s.STORAGE_TYPE.Cookie,t,e,r,a)}return g}function A(e){if(!f){var t=i.get("ExtensionStorageManager");f=new sa(s.STORAGE_TYPE.Extension,t,e,r,a)}return f}function k(e){if(!p){var t=i.get("WalkMejStorageManager");p=new sa(s.STORAGE_TYPE.JStorage,t,e,r,a)}return p}T.apply(null,arguments)}function ue(){var e,t,n,r,o,a=2600,s="wm-dt",u="wm-ne",l=this;function c(a,s,u,l){t=a,e=s,n=u,r=i.get("DataMinifier"),o=l}l.saveData=function(n){var i=r.minifyData(n);if(l.removeData(),void 0===i)return;for(var o=d(i,a),c=0;c<o.length;c++){var p=o[c];t.saveToStorage(s+c,p,e)}t.saveToStorage(u,o.length,e)};function d(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++){var o=t>e.length?e.length:t,a=e.slice(0,o);e=e.substring(o),n.push(a)}return n}l.getData=function(){var e,n=g();if(void 0!=n){e="";for(var i=0;i<n;i++){var o=t.getFromStorage(s+i);e+=o}}var a,u;if(e)try{a=r.deminifyData(e),a=a?a:void 0}catch(l){u=l}return(u||n>0&&!a)&&p(u),a};function p(e){n(e,"Storage data is malformed, discarding it."),l.removeData()}l.removeData=function(){var n=g();if(t.saveToStorage(u,0,e),void 0!=n)for(var r=0;r<n;r++)t.saveToStorage(s+r,null,e)};function g(){return t.getFromStorage(u)}c.apply(null,arguments)}i.register("StringCache").asCtor(le).asProto();function le(){var e=5,t=[],n=[];this.set=function(r,i){t.push(r),n.push(i),t.length>e&&(t.shift(),n.shift())},this.getValue=function(e){for(var r=0;r<t.length;r++)if(t[r]==e)return n[r]},this.getKey=function(e){for(var r=0;r<n.length;r++)if(n[r]==e)return t[r]}}i.register("ButtonSiteConfigKeyGenerator").asCtor(ce);function ce(){var e=this;e.generateKey=t;function t(e){return e+"ButtonText"}}i.register("WelcomeButtonSiteConfigKeyGenerator").asCtor(de);function de(){var e=this;e.generateKey=t;function t(e){return"WelcomeStepButton"+e+"Text"}}i.register("BalloonButtonDataGenerator").asCtor(pe).dependencies("SiteConfigManager, ButtonSiteConfigKeyGenerator"),i.register("WelcomeBalloonButtonDataGenerator").asCtor(pe).dependencies("SiteConfigManager, WelcomeButtonSiteConfigKeyGenerator");function pe(e,t){var n=this;n.generateWithoutBackground=o,n.generate=i;function r(){}function i(e){return a(e,!1)}function o(e){return a(e,!0)}function a(n,r){var i=e.get(),o=t.generateKey(n);return{name:i[o],type:n.toLowerCase(),weak:r}}r()}i.register("AjaxProxyIframeManager").asCtor(ge).dependencies("CommonUtils");function ge(t){var n,r,i,o={},a=1,s="walkme-ap-iframe",u=3,l=this;l.init=c,l.postMessage=g,l.abort=f;function c(){i=e.Deferred(),n=t.getOrigin()+kf("/player/resources/AP/ajaxProxyIframe_v{0}.html",u),r=t.createIframe(n,s,!1,d,p)}function d(){i.resolve()}function p(e){if(n.toLowerCase().indexOf(e.origin)<0)return;var t=If(e.data);if(!t.wmAP)return;if(!o[t.requestIndex])return;t.data=If(t.data),o[t.requestIndex].requestDefer.resolve(t)}function g(e,t){h(a,t),m(e,a),a++}function f(e){delete o[e]}function h(t,n){o[t]={requestDefer:e.Deferred(),result:""},o[t].requestDefer.promise().then(function(e){delete o[t],n(e)})}function m(e,o){var a={origin:t.getWinOrigin(),requestIndex:o,message:e,wmAP:!0};i.promise().then(function(){r.contentWindow.postMessage(Cf(a),n)})}}i.register("ClassWalkMeAPI").asCtor(fe).dependencies("CommonEvents, Consts, AnalyticsPropertiesManager, DebuggerManager, SiteConfigManager, UIChangeTracker, Logger, WalkMeVisibilityChecker, HtmlDecoder, WalkthrusContainer, SettingsValuesRetriever, LabelsContainer, PageChangeTracker, DeployablesManagerFactory").asSingleton();function fe(n,r,o,a,s,u,l,c,d,p,g,f,h,m){var v=this;v.getPlayInitiatorEnum=T,v.getWalkthrus=y,v.getFlows=C,v.getWalkthrusLabels=b,v.startContentById=O,v.startSurveyById=N,v.startWalkthruById=D,v.startWalkthruByIndex=L,v.canStartWalkthru=x,v.setWalkthruVisibility=F,v.stopWalkthru=M,v.startFlowById=R,v.stopFlow=B,v.setAnalyticsCustomField=U,v.setAnalyticsProperty=V,v.enableLogs=W,v.loadTasks=G,v.getTasks=H,v.getWidgetMode=j,v.setWidgetMode=Y,v.getWidgetInitialState=z,v.changeLanguage=Q,v.getSupportedLanguages=K,v.getCurrentLanguage=q,v.getTree=X,v.triggerUIChange=J,v.triggerPageChange=$,v.launchTracker=Z,v.startTestMe=ee,v.log=l.getAPI(),v.getObjectsTree=te,v.getDeployableId=I;var S=l.wrapCustomerLog("walkmeAPI");function E(){n.raiseEvent(r.EVENTS.WalkmeApiStarted,{object:v})}function T(){return r.STEP_PLAY_INITIATOR_ENUM}function y(e){try{for(var t=p.getWalkthrus(),n=new Array,r=0;r<t.length;r++){var i=t[r].CustomField1;i&&(i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"));var o={Index:r,Name:t[r].Name,Id:t[r].TutorialId,Visible:t[r].IsVisible,CustomField1:i,Description:t[r].Description,Keywords:t[r].Keywords};e&&(o.ConditionsPassed=_walkMe.canShowTutorial(t[r]),o.isPackageHidden=_walkMe.isTutorialPackageHidden(t[r]),void 0==t[r].Keywords?o.Keywords=[]:o.Keywords=t[r].Keywords),n.push(o)}return n}catch(a){S("walkMeAPI - error running getWalkthrus.",3)}}function C(){try{for(var e=window._walkmeInternals.ctx,t=e.get("BusinessSolutionsManager").getAll(),n=e.get("CommonUtils").clone(t),r=0;r<n.length;r++){var i=n[r].Settings.CustomField1;i&&(n[r].Settings.CustomField1=d.decodeHtml(i,['"',"'","&"]))}return n}catch(o){S("walkMeAPI - error running getFlows.",3)}}function I(t,n){try{var r=m.get(t),i=r.getAll(),o=e.grep(i,function(e){return e.Name.toLowerCase()==n.toLowerCase()});return o.length>0&&o[0].Id}catch(a){S("walkMeAPI - error running getDeployableId. Error: "+a,3)}}function b(e){try{var t=w();if(null==t)return null;for(var n=this.getWalkthrus(e),r=_(t,n),i=s.get(),o=[],a=0;a<t.length;a++){var u={Name:t[a].Name,Id:t[a].Id,Walkthrus:P(n,t[a].LinkedTutorials,t[a].Id)};o.push(u)}return{unlabeledWalkthrus:r,labels:o,unlabeledFirst:i.Settings.labels&&1==i.Settings.labels.unlabeldOnTop}}catch(l){S("walkMeAPI - error running getWalkthrusLabels.",3)}}function w(){var e=g.getSettingsValue(s.get().Settings,"labels",null);if(e&&1==e.useLabels)return f.get();return null}function _(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=e[r].LinkedTutorials,o=0;o<i.length;o++)n.push(i[o]);for(var a=[],r=0;r<t.length;r++)A(t[r].Id,n)||a.push(t[r]);return a}function P(e,t,n){for(var r=[],i=0;i<e.length;i++)if(A(e[i].Id,t)){var o=mtjQuery.extend(!0,{},e[i]);o.labelId=n,r.push(o)}return r}function A(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function k(e){for(var t=p.getWalkthrus(),n=0;n<t.length;n++)if(t[n].TutorialId==e)return n;return-1}function O(e,t,n){try{if(e<0)return!1;t=void 0!==t?t:r.STEP_PLAY_INITIATOR_ENUM.API;var o={type:t};return ne(o),n&&(o.objectId=n),i.get("ContentsManager").activateById(e,o),!0}catch(a){S("walkMeAPI - error running startContentById.",3)}}function N(e,t){try{if(e<0)return!1;return t=t||{type:r.STEP_PLAY_INITIATOR_ENUM.API},ne(t),i.get("SurveysManager").activateById(e,t)}catch(n){S("walkMeAPI - error running startSurveyById.",3)}}function D(e,t){try{"object"!=typeof e&&(e={id:e,fromStep:t});var n=e.id,i=e.fromStep,o=e.playInitiator;if(n<0||"number"!=typeof n)return!1;var a=k(n);if(a<0)return!1;return o||(o={type:r.STEP_PLAY_INITIATOR_ENUM.API}),v.startWalkthruByIndex({index:a,fromStep:i,playInitiator:o})}catch(s){S("walkMeAPI - error running startWalkthruById.",3)}}function L(e,t){try{if(!c.isWalkMeVisible())return!1;"object"!=typeof e&&(e={index:e,fromStep:t});var n=e.index,i=e.fromStep,o=e.playInitiator;if(n<0||"number"!=typeof n)return!1;return o||(o={type:r.STEP_PLAY_INITIATOR_ENUM.API}),ne(o),_walkMe.startNewTutorial(n,i,!1,o)}catch(a){S("walkMeAPI - error running startWalkthruByIndex.",3)}}function x(e,t){try{if(!c.isWalkMeVisible())return!1;if(e<0||"number"!=typeof e)return!1;var n=k(e);if(n<0)return!1;return _walkMe.startNewTutorial(n,t,!0)}catch(r){S("walkMeAPI - error running canStartWalkthru.",3)}}function F(e,t){try{var n=p.getWalkthrus(),r=k(e);if(r<0)return!1;return n[r].IsVisible=t,!0}catch(i){S("walkMeAPI - error running setWalkthruVisibility.",3)}}function M(){try{_walkMe.stopTutorial()}catch(e){S("walkMeAPI - error running stopWalkthru.",3)}}function R(e,t){try{if(!c.isWalkMeVisible())return!1;var n={type:r.STEP_PLAY_INITIATOR_ENUM.API};return window._walkmeInternals.ctx.get("BusinessSolutionsManager").activateById(e,n,t)}catch(i){S("walkMeAPI - error running startFlowById.",3)}}function B(){try{if(!c.isWalkMeVisible())return!1;return window._walkmeInternals.ctx.get("BizflowApi").stop()}catch(e){S("walkMeAPI - error running stopFlow.",3)}}function U(e,t){try{if(e>r.ANALYTICS_CUSTOM_VARS.MaxCustomFields||e<1||t.length>r.ANALYTICS_CUSTOM_VARS.MaxVarLength)return!1;return i.get("WalkMeInfo").setAnalyticsCustomFields(e-1,t)}catch(n){S("walkMeAPI - error running setAnalyticsCustomField.",3)}}function V(e,t){try{o.setPredefinedPropertyValue(e,t)}catch(n){S("walkMeAPI - error running setAnalyticsProperty.",3)}}function W(e){try{return void 0==e&&(e=!0),this.log.enable(e)}catch(t){S("walkMeAPI - error running enableLogs.",3)}}function G(e,t){try{return window._walkmeInternals.ctx.get("TodoListManager").loadTasks(e,t)}catch(n){S("walkMeAPI - error running loadTasks.",3)}}function H(e){try{return window._walkmeInternals.ctx.get("TodoListManager").getApiTasks(e)}catch(t){S("walkMeAPI - error running getTasks.",3)}}function j(){return"Walkthrus"}function Y(e){return"Deprecated"}function z(){return"Closed"}function Q(e,t){try{return i.get("LibInitializer").changeLanguage(e,t)}catch(n){}}function K(){try{return t.ctx.get("LanguageManager").getMenuLanguages()}catch(e){S("walkMeAPI - error running getSupportedLanguages.",3)}}function q(){try{return t.ctx.get("LanguageManager").getCurrentLanguage()}catch(e){S("walkMeAPI - error running getCurrentLanguage.",3)}}function X(){try{return _walkMe.getUiDataProvider().uiObjectsTree()}catch(e){S("walkMeAPI - error running getTree.",3)}}function J(){try{return u.triggerUIChangeAPI()}catch(e){S("walkMeAPI - error running triggerUIChange.",3)}}function $(){try{return h.triggerPageChange()}catch(e){S("walkMeAPI - error running triggerPageChange.",3)}}function Z(e,t){try{return a.launchDebuggerIfEnabled(e,t)}catch(n){S("walkMeAPI - error running launchTracker.",3)}}function ee(e){try{var t=i.get("TestmeApi");t.rememberTestMeIsOn(),window.walkMeTestMeClearStorage=!0,window.walkmeTestMeFilter=e,window._testMe?(_testMe.exit(),_testMe.start()):t.loadTestMe()}catch(n){S("walkMeAPI - error running startTestMe.",3)}}function te(){try{return window._walkmeInternals.ctx.get("WidgetUiApi").getObjectsTree()}catch(e){S("walkMeAPI - error running getObjectsTree.",3)}}function ne(e){n.raiseEvent(r.EVENTS.ApiWasCalled,{initiator:e})}E()}i.register("WalkMeVisibilityChecker").asCtor(he).dependencies("SiteConfigManager, AbTestingManager");function he(e,t){var n=this;n.isWalkMeVisible=r;function r(){var n=0!==e.get().ShowWalkMe,r=t.shouldShowWidget();return n&&r}}var me=function(){function t(e,t,n){this.logger=t,this._handlers=[],this._teardownHandlers=[]}return t.prototype.listen=function(t){this._handlers.push(t),this._messageHandler||(this._messageHandler=e.proxy(function(){this.handleMessage.apply(this,arguments)},this),window.addEventListener?window.addEventListener("message",this._messageHandler,!1):window.attachEvent("onmessage",this._messageHandler))},t.prototype.addTeardownCallback=function(e){this._teardownHandlers.push(e)},t.prototype.cleanResources=function(){for(var e=this,t=[],n=0;n<this._teardownHandlers.length;n++)t.push(this._teardownHandlers[n]());return o.all(t).then(function(){return e.releaseEventHandlers()})},t.prototype.releaseEventHandlers=function(){if(!this._messageHandler)return;window.addEventListener?window.removeEventListener("message",this._messageHandler,!1):window.detachEvent("onmessage",this._messageHandler),this._messageHandler=null,this._handlers=[]},t.prototype.handleMessage=function(e){for(var t=0;t<this._handlers.length;++t)try{this._handlers[t].apply(null,arguments)}catch(n){this.logger.error(n)}},t}();i.register("PostMessageListener").asCtor(me).dependencies("Consts,Logger,WmInternals"),i.register("SiteConfigManager").asCtor(ve);function ve(){var e=this;e.get=n,e.set=r;var t=[];function n(){return t}function r(e){if(t=e,t!=[]){if(i.get("CustomCssSetter").setCustomCssIfNeeded(null)===!1&&!i.get("FeaturesManager").isFeatureEnabled("loadNoStyle"))return void i.get("LibDestroyer").removeWalkMe("set custom css failed",{sendLog:!0});i.get("PositionHelper").extendVisibilityFilters()}}}i.register("LibDestroyer").asCtor(Se).dependencies("WalkthruBalloonContainer, UiUtils, TimerManager, CommonEvents, Consts, PositionHelper, TopContainerProvider, CommonUtils");function Se(n,r,o,a,s,u,c,d){var p=this,g=!1,f=[];p.releaseAllElements=T,p.releaseBalloons=y,p.releaseShoutOuts=b,p.releaseFlow=P,p.removeWalkMe=k,p.destroyAll=h,p.releaseTeachMeElements=w;function h(e){if(e&&f.push(e),g)return void i.get("Logger").customerLog("destroyAll - already destroying",1);g=!0,i.get("Logger").customerLog("destroyAll - begin",1),i.get("WalkthrusModule").setMember("tutorialRunSettingsMap",{}),i.get("ClientStorageManager").releaseCallbacks(),i.get("WalkthrusModule").setMember("executeTutorialNextStepNotFinished",!1),i.get("ConditionCheckerType").cleanResources(),i.get("UIVisibilityManagerType").cleanResources(),i.get("DOMSessionManager").cleanResources(),i.get("BizFlowOnBeforeUnloadChecker").destroy(),i.get("FlowTransitionDelayer").destroy(),i.get("jQueryCacheCleaner").destroy(),v(),i.get("GoalsManager").cleanResources(),T().pipe(function(){i.get("Logger").customerLog("destroyAll - releaseAllElements finished",1)}).pipe(m).pipe(P).pipe(o.releaseAllTimeouts).pipe(function(){i.get("Logger").customerLog("destroyAll - calling user callbacks",1);for(var e=0;e<f.length;e++)f[e]();f=[],g=!1})}function m(){var e=i.get("CdnServer").get().replace("http://","").replace("https://","");if(mtjQuery("script[src*='"+e+"']").not("script[src*='maketutorial_lib']").not("[src*='jquery']").not("[src*='wmjQuery']").remove(),mtjQuery(".mt-to-destroy, .walkme-to-destroy").remove(),S(".mt-to-destroy, .walkme-to-destroy"),window._walkmePlayer&&window._walkmePlayer.destroyWalkMePlayer&&window._walkmePlayer.destroyWalkMePlayer(),window.walkmeWidget&&window.walkmeWidget.destroyWalkMePlayer&&window.walkmeWidget.destroyWalkMePlayer(),i.get("SmartTipSetActivationInitiator").stop(),i.get("AppletActivationListener").cleanResources(),i.entry("UIChangeTracker").wasReady()){var t=i.get("UIChangeTracker");t&&(t.stop(),t=null)}if(i.entry("PageChangeTracker").wasReady()){
var n=i.get("PageChangeTracker");n&&(n.stop(),n=null)}A()}function v(){window._testMe&&(_testMe.exit(),e("script[src*='waklme_testme']").remove(),window._testMe=void 0,window.walkMeTestMeLoad=void 0,i.get("ClientStorageManager").removeData(C),window.walkMeTestMeClearStorage=void 0,window.testMeData&&(window.testMeData=void 0,i.get("Logger").customerLog(E,"Test me data cleared",1)),i.get("Logger").customerLog(E,"_testMe cleared",1))}function S(t){if(!i.get("FramesetsUtils").isFramesetsPage())return;for(var n=i.get("FramesetsUtils").getAllFramesDocuments(),r=0;r<n.length;r++)e(t,n[r]).remove()}function T(t){var n=e.Deferred();return n.promise().then(t),a.raiseEvent(s.EVENTS.ReleaseAllElementsCalled),d.executeParallel({functionsToExecute:[y,i.get("LaunchersModule").releaseLaunchers,b,_,w],successCallback:n.resolve,failCallback:n.reject}),n.promise()}function y(e){i.get("Logger").customerLog("Releasing balloons",5,l),i.get("TriggersManager").releaseAllEventBindings(),i.get("WalkthrusModule").cleanCurrentStepResources(),d.executeParallel({functionsToExecute:[I,i.get("OldBalloonNotifier").closePopup,function(e){i.get("OldBalloonNotifier").removeOverlayIfNotInSequencedPopup(),e&&e()}],successCallback:e})}function I(e){a.raiseEvent(s.EVENTS.CallReleaseElementsFromBalloons);var t=n.getAll();n.removeAll(),d.executeParallel({objectsArray:t,functionsToExecute:[function(e,t){e.destroy(!1,t)}],successCallback:e})}function b(e){i.get("ShoutOutsManager").releaseAll(e)}function w(e){i.get("CoursesManager").releaseAll(e)}function _(e){i.get("AttentionGrabberManagerAPI").remove(e)}function P(){return i.get("SmartTipSetActivationInitiator").stop(),i.get("BusinessSolutionsManager").releaseAll()}function A(e){i.get("TrackedPagesManager").releaseAll(),i.get("TrackedElementsManager").releaseAll(),i.entry("PageVisitGuidProvider").wasReady()&&i.get("PageVisitGuidProvider").releaseResources()}function k(n,r){if(r=r||{},r.sendLog){var o=i.get("EventSenderErrorLogger");o.logError("WalkMe was removed",{subType:"RemoveWalkMe",removeWalkMeReason:n,errorCode:r.errorCode})}p.removingWalkMe=!0,i.get("Logger").customerLog(kf("removeWalkMe called with reason {0}",n)),t.removeWalkMeReason=n;try{i.get("EventSenderDisabler").disable()}catch(l){}var g={reason:n,errorCode:r.errorCode};a.raiseEvent(s.EVENTS.BeforeWalkmeRemoved,g);try{window.walkme_remove_walkme_callback&&walkme_remove_walkme_callback(n)}catch(l){}h(function(){O().then(function(){var n=i.get("CdnServer").get().replace("http://","").replace("https://","");e("script[src*='"+n+"']").remove(),e("script[src*='maketutorial']").remove(),e("script[src*='wmjQuery']").remove(),e("script[id='mt_script']").remove(),e("link[id^='mt-css']").remove();c.getTopContainer();e(".walkme-to-remove").remove(),u.removeScrollAndResizeEvents(),d.unregisterEventHandler("load",e.ready,!1,window),e(window).unbind(),e(t).unbind(),N(),a.raiseEvent(s.EVENTS.AfterWalkmeRemoved,g),D()})})}function O(){return o.clearGlobalTimeouts(),i.get("CrossDomainManager").get().stop(),i.get("ResourceManager").emptyStyleSheets(),i.get("IFramesManager").releaseEvents(),i.get("AutoStartRunningState").cleanResources(),i.get("SessionPersister").cleanResources(),i.get("WindowBeforeUnloadHandler").cleanResources(),i.get("PostMessageListener").cleanResources()}function N(){if(!window._walkmeInternals)return;for(var e=i.get("WalkmeInternalsPersistWhitelist"),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];window._walkmeInternals=n}function D(){for(var e=["wmjQuery","mtjQuery","_walkmeConfig","_walkMe","_makeTutorial","MaeTutorialAPI","WalkMeAPI","WalkMePlayerAPI","WalkMeDataClass","WalkmeWidget","_makeTutorialEv","wmContext","WalkmeSnippet","wmPreviewSnippet","wmSnippet","walkme_lib_in_dev","walkme_lib_notify_ServerName","walkme_lib_upload_date","walkme_lib_uploader","walkme_lib_version","ClassMakeTutorial","loadWidgetWrap","loadWidget","walkme_event","walkme_post_lib_loaded","walkme_pre_lib_loaded",,"_walkmeWebpackJP","mt_cdn_server_name","mt_get_user_settings_url"],t=0;t<e.length;t++)window[e[t]]=void 0}}i.register("endUserGuidValidator").asCtor(Ee).dependencies("Consts, ServerStorageSettingsService, EndUsersManager, AuditSourceProvider, Lib,EventSenderErrorLogger, IsInEditor");function Ee(e,t,n,r,i,o,a){var s=this;s.validate=l;var u=[c,d];function l(){if(!r.isInPreviewMode()&&a.get())return;for(var e=0;e<u.length;e++){var t=u[e]();if(t)return o.logError(t.message),t}}function c(){if(!t.isServerStorageOn()||!n.isWalkMeGeneratedEndUserType())return;return{message:"Unique User Settings are not supported by server storage",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.cannotHaveBothUniqueUserAndServerStorage}}function d(){if(n.isEndUserGuidValid())return;return{message:"Could not retrieve end user identifier",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.missingUserIdentifyer}}}function Te(){this.encode=function(e){return encodeURIComponent(e)},this.decode=function(e){return decodeURIComponent(e)}}function ye(){var e={},t=[{from:33,to:33},{from:35,to:36},{from:38,to:43},{from:45,to:58},{from:60,to:91},{from:93,to:126}];this.encode=function(t){for(var r,i="",o=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);if(!n(s)){r=t.charAt(a);var u=t.substring(o,a);e[r]||(e[r]=encodeURIComponent(r)),i+=u+e[r],o=a+1}}return i+=t.substring(o)},this.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}};function n(e){for(var n in t)if(t.hasOwnProperty(n)&&e>=t[n].from&&e<=t[n].to)return!0;return!1}}function Ce(){this.encode=function(e){return e.replace(/,/g,"%2C").replace(/"/g,"%00").replace(/'/g,"%01").replace(/;/g,"%3B")},this.decode=function(e){return e.replace(/%2C/g,",").replace(/%00/g,'"').replace(/%01/g,"'").replace(/%3B/g,";")}}i.register("DataEncoderFactory").asCtor(Ie).dependencies("SettingsFile");function Ie(e){var t="et",n=0,r={0:ye,1:Te,3:Ce},o="logger=Logger";this.registerEncoders=function(){i.has("DataValueEncoder")||i.register("DataValueEncoder").asCtor(a()).dependencies(o).injectToProperty(),i.has("DataNameEncoder")||i.register("DataNameEncoder").asCtor(Te).dependencies(o).injectToProperty()};function a(){var i=e.getStorageType();if(i&&void 0!==i[t])return r[i[t]];return r[n]}}i.register("CommonEvents").asCtor(be).dependencies("Logger,ApiEventRouter,CurrentWalkthruData,EventsTriggerSyncer,WmInternals").asSingleton();function be(t,n,r,i,o){var a=this;a.raiseEvent=u,a.deprecatedRaiseEvent=l,a.sendInternalEvent=l,a.sendAutomationEvent=c;var s=window.wmjQuery&&e(o);function u(e,t){l(e,t)}function l(e,r,a){try{if(!window.wmjQuery)return;s.trigger(e,[r,a]),o.dbgr&&s.trigger("AllEvents",[e,r,a]),n.route(e,r,a),i.sync(e,r)}catch(u){t.error(u)}}function c(n,r){try{var i=d(n);if(r){if(!window.wmjQuery)return;e.extend(i,r)}window.walkme_automation_event&&walkme_automation_event(i)}catch(o){t.error(o)}}function d(e){var t={Type:e},n=r.getCurrentWalkthru();return n&&(t.WalkthruId=n.TutorialId,t.StepIndex=r.currentStep),t}}i.register("MessageSender").asCtor(we).dependencies("CommonEvents");function we(e){var t=this;t.send=n;function n(t,n){return e.raiseEvent(t,n),n.returnValue}}i.register("ApiEventForwarder").asCtor(_e).asProto().dependencies();function _e(e){var t=this;t.forward=o;var n,r;function i(){n=e.apiEventsConfigProvider.get(),r=e.apiEventRaiser}function o(e,t,i){var o=n[e];if(o.transform){var a=o.transform(t,i);r.raise(a.name,a.data)}else r.raise(e,t)}i()}i.register("ApiEventRaiser").asCtor(Pe).asProto().dependencies("Logger, CurrentWalkthruData, win");function Pe(e,t,n,r){var i=this;i.raise=s;var o=r.windowFuncName;function a(){}function s(t,r){try{var i=u(t);r&&(i.ExtraData=r),n[o]&&n[o](i),walkme_event_custom(i)}catch(a){e.error(a)}}function u(e){var n={Type:e},r=t.getCurrentWalkthru();if(r){n.WalkthruId=r.TutorialId;var i=t.getCurrentStep();i&&(n.StepIndex=i.StepIndex)}return n}a()}i.register("ApiEventRouter").asCtor(Ae).dependencies("NewApiEventsConfigProvider, NewApiEventForwarder, OldApiEventsConfigProvider, OldApiEventForwarder, EditorApiEventForwarder");function Ae(e,t,n,r,i){var o=this;o.route=s;function a(){}function s(o,a,s){var u=!!e.get()[o];u&&(t.forward(o,a,s),i.forward(o,a,s));var l=!!n.get()[o];l&&r.forward(o,a,s)}a()}var ke=function(){function e(){}return e.prototype.sync=function(e,t,n){return n},e}();i.register("EventsTriggerSyncer").asCtor(Oe).dependencies("EventsTrigger");function Oe(t){var n=this;n.sync=i;function r(){}function i(n,r){var i=r?r.defaultValue:void 0,o=t.sync(n,r,i);r&&void 0!==o&&(r.returnValue=o),r&&r.asyncCallback&&(o&&o.then?o.then(r.asyncCallback,r.asyncFailback):e.when(o).then(r.asyncCallback,r.asyncFailback))}r()}i.has("EventsTrigger")||i.register("EventsTrigger").asInstance(new ke),i.register("NewApiEventForwarder").dependencies("NewApiEventsConfigProvider").asFunction(function(e){var t={apiEventsConfigProvider:e,apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"walkme_event"})};return i.create("ApiEventForwarder",t)}),i.register("NewApiEventsConfigProvider").asCtor(Ne).dependencies("Consts");function Ne(e){var t=this;t.get=r;function n(){}function r(){var t={};return t[e.EVENTS.Walkthrus.StepShown]={transform:o},t[e.EVENTS.Launchers.LauncherIsShown]={transform:i},t[e.EVENTS.TaskCompleted]={},t[e.EVENTS.TasksLoaded]={},t[e.EVENTS.Launchers.LauncherClicked]={},t[e.EVENTS.Goals.GoalReached]={},t.ABTestingGoalsFetched={},t[e.EVENTS.UIComponentDestroyed]={},t[e.EVENTS.DeployableCreated]={},t.SurveyPlayed={},t.SurveyCompleted={},t.BalloonCreated={},t.WalkthruAborted={},t.WalkthruStopped={},t.UserStoppedWalkthru={},t.UserStoppedWalkthruAfterStop={},t.WalkthruFailedToStart={},t.WalkthruCompleted={},t.BeforeNewStepShown={},t.BackButtonClicked={},t.NextButtonClicked={},t.DoneButtonClicked={},t.SfVarsExposed={},t.BBCodeLinkClicked={},t.FailureMessageOkButtonPressed={},t.StorageManagerInitialized={},t[e.EVENTS.StorageLoaded]={},t[e.EVENTS.WalkmeLoaded]={},t[e.EVENTS.Flows.UIFlowStageShown]={},t[e.EVENTS.Flows.FlowCompleted]={},t[e.EVENTS.Flows.FailedToStart]={},t[e.EVENTS.Flows.FlowStopped]={},t[e.EVENTS.Flows.FlowStarted]={},t[e.EVENTS.Flows.BeforeExecutingFlowStage]={},t[e.EVENTS.Flows.AfterCompletingFlowStage]={},t[e.EVENTS.SmartTips.TooltipShown]={},t[e.EVENTS.SmartTips.SmartTipIconShown]={},t[e.EVENTS.BeforeWalkmeRemoved]={},t[e.EVENTS.AfterWalkmeRemoved]={},t}function i(t,n){return{name:e.EVENTS.Launchers.LauncherIsShown,data:n}}function o(t,n){return{name:e.EVENTS.Walkthrus.StepShown,data:n}}n()}i.register("EditorApiEventsConfigProvider").asCtor(De).dependencies("NewApiEventsConfigProvider");function De(e){var t=this;t.get=n;function n(){var t=e.get();return t.WalkthruCompleted={transform:function(e,t){return{name:"WalkthruCompleted",data:{WalkThru:e,AdditionalData:t}}}},t}}i.register("OldApiEventForwarder").dependencies("OldApiEventsConfigProvider").asFunction(function(e){var t={apiEventsConfigProvider:e,apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"mt_event"})};return i.create("ApiEventForwarder",t)}),i.register("OldApiEventsConfigProvider").asCtor(Le).dependencies("Consts");function Le(e){var t=this;t.get=r;function n(){}function r(){var t={};return t[e.EVENTS.Walkthrus.StepShown]={transform:o},t.WalkthruStopped={transform:i("TutorialStopped")},t.UserStoppedWalkthru={transform:i("UserStoppedTutorial")},t.UserStoppedWalkthruAfterStop={transform:i("UserStoppedTutorialAfterStop")},t.WalkthruCompleted={transform:i("TutorialCompleted")},t.BeforeNewStepShown={},t.BackButtonClicked={},t.NextButtonClicked={},t.DoneButtonClicked={},t}function i(e){return function(t,n){return{name:e,data:t}}}function o(t,n){return{name:e.EVENTS.Walkthrus.StepShown,data:n}}n()}i.register("EditorApiEventForwarder").dependencies("EditorApiEventsConfigProvider").asFunction(function(e){var t={apiEventsConfigProvider:e,apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"walkme_editor_event"})};return i.create("ApiEventForwarder",t)}),i.register("PostMessage").asInstance(window.postMessage),i.register("NativeTimerFunctionsProvider").asCtor(xe).asSingleton();function xe(){var e=this;e.get=function(){return{clearTimeout:window.NREUM&&NREUM.o&&NREUM.o.CT||window.clearTimeout,clearInterval:window.clearInterval,setTimeout:window.NREUM&&NREUM.o&&NREUM.o.ST||window.setTimeout,setInterval:window.setInterval}}}i.register("TimerManager").asCtor(Fe).asSingleton().dependencies("CommonEvents,Consts,NativeTimerFunctionsProvider,Logger");function Fe(e,n,r,o){var a=this;a.setWalkmeTimeout=A,a.setWalkmeInterval=k,a.playSetTimeout=v,a.playSetInterval=E,a.libSetTimeout=S,a.releaseAllTimeouts=y,a.clearGlobalTimeouts=_,a.releaseTimeoutsArray=b,a.stopTimeoutsArray=b,a.pauseAllTimeouts=C,a.pauseTimeoutsArray=w,a.resumeTimeoutsArray=T,a.resumeAllTimeouts=I,a.overrideTimeouts=P;var s=r.get(),u={libTimeouts:{},playTimeouts:{}},l=[],c="wm-",d={};e.raiseEvent(n.EVENTS.TimerManagerCreationStarted,{object:a});var p=s.setTimeout,g=s.setInterval,f=s.clearTimeout,h=s.clearInterval;function m(e,t){var n=void 0!==d[c+e];if(n)return;t(e)}function v(e,t){return new x(e,t,u.playTimeouts)}function S(e,t){return new x(e,t,u.libTimeouts)}function E(e,t){return new F(e,t,u.playTimeouts)}function T(e){var t=u[e];if(t){for(var n=0;n<l.length;n++)l[n].resume();l.length=0}}function y(){a.releaseTimeoutsArray("libTimeouts"),a.pauseTimeoutsArray("playTimeouts")}function C(){for(var e in u)a.pauseTimeoutsArray(e)}function I(){for(var e in u)a.resumeTimeoutsArray(e)}function b(e){var t=u[e];t&&M(t,function(e){e.clear()})}function w(e){var t=u[e];t&&M(t,function(e){l.push(e),e.pause()})}function _(){for(var e in d)e&&e.indexOf&&0===e.indexOf(c)&&N(d[e])}function P(){var e=i.get("FeaturesManager");e.isFeatureEnabled("overridetimeouts")&&(window.clearTimeout=function(e){m(e,N)},window.clearInterval=function(e){m(e,D)})}function A(e,t){return new x(e,t)}function k(e,t){return g(O(e),t)}function O(e){return t.walkmeWrap?function(){t.walkmeWrap.apply(this,[e])}:e}function N(e){f(e)}function D(e){h(e)}function L(e,t){var n=t&&/function ([\w\d\_]+)\(/.exec(t.toString());i.has("EventSenderErrorLogger")&&i.get("EventSenderErrorLogger").logError(e.message,{functionName:n&&n[1]}),o.customerLog("TimerManager error: "+(e&&e.message))}function x(e,t,n){this.fn=e,this.interval=t,this.timeoutsDict=n||{};var r=this;this.id=p(function(){r.run()},t),this.timeoutsDict[this.id]=this,d[c+this.id]=this.id}x.prototype.timeoutWrap=function(){this.clear();try{this.fn.apply(window)}catch(e){L(e,this.fn)}},x.prototype.run=function(){if(t.walkmeWrap){var e=this;t.walkmeWrap(function(){e.timeoutWrap()})}else this.timeoutWrap()},x.prototype.resume=function(){if(this.cleared)return;var e=this;this.id=p(function(){e.run()},10),this.timeoutsDict[this.id]=this},x.prototype.id=null,x.prototype.cleared=!1,x.prototype.clear=function(){if(this.cleared)return;N.call(window,this.id),this.cleared=!0,delete this.timeoutsDict[this.id],delete d[c+this.id]},x.prototype.pause=function(){if(this.cleared)return;delete this.timeoutsDict[this.id],N.call(window,this.id)};function F(e,n,r,i,o){this.timeoutsDict=r,i=i||window;var a=function(){e.apply(i,o||arguments)},s=function(){t.walkmeWrap?t.walkmeWrap(a):a()};this.id=g(s,n),r[this.id]=this,d[c+this.id]=this.id}F.prototype.id=null,F.prototype.cleared=!1,F.prototype.clear=function(){N(this.id),this.cleared=!0,delete d[c+this.id],delete this.timeoutsDict[this.id]};function M(e,t){for(var n in e)if(e.hasOwnProperty(n))try{t(e[n])}catch(r){}}}i.register("MutationObserverWrapper").asCtor(Me);function Me(){var e=this;e.isEnabled=n,e.watchElement=r;var t={childList:!0,attributes:!0,subtree:!0};function n(){return!1}function r(e,n){var r=new MutationObserver(n);return r.observe(e[0],t),{unbind:function(){r.disconnect()}}}}!function(){var e="mt",t=0,n={0:Re,2:Be};i.has("DataMinifier")||i.register("DataMinifier").asFunction(function(r,i,o){var a=s();return new a(r,o);function s(){var r=i.getStorageType(),o=r&&r[e];return n[o||t]}}).dependencies("CommonUtils,SettingsFile,Logger")}();function Re(){var e,t=this;function n(t,n){e=i.get("CJson")}t.minifyData=function(t){if(!t||0==t.length)return;return e.stringify(t)},t.deminifyData=function(t){if(!t)return;return e.parse(t)},n.apply(null,arguments)}function Be(){var e,t=this;function n(t,n){e=t}t.minifyData=function(t){if(!t||0==t.length)return;return e.toJSON(t)},t.deminifyData=function(t){if(!t)return;return e.secureEvalJSON(t)},n.apply(null,arguments)}i.register("TypedDataSender").asCtor(Ue).asProto();function Ue(){var e,t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E=this,T=[],y="wm-nx",C=10;function I(c){e=c.serverDataSenderManager,r=c.actionUrl,n=c.beforeSendingManipulationFunc,i=c.technicalSuccessHandler,o=c.sendingThreshold,a=c.dataType,s=c.dateSenderLogFeature,l=c.requestParamsFunc,d=c.logError,u=c.logger.wrapCustomerLog(s),p=c.dataIdFieldName||"iN",h=c.successCallback,m=c.failCallback,S=c.shouldTruncateData,v=c.storageEnabled!==!1,v&&(f=c.defaultDataStorageLifeSeconds,g=new ua(c.stateManager,c.twoLettersDataType),t=new ue(g,f,d,c.recursiveMinification),T=E.data())}function b(){var e=0;return v&&(e=g.getFromStorage(y,0),g.saveToStorage(y,e+1,f)),e}E.isStorageEnabled=function(){return v},E.sendData=function(t){if("object"!=typeof t){var r=kf("TypedDataSender - got object with value {0} of type {1} instead of object ({2}).",t,typeof t,a);return void u(r,1)}function i(){if(c)return void u("Not accepting anymore data",3);if(T=E.data(),e.isServerSick()){if(S===!1&&T.length<C)o();else{var t=kf("TypedDataSender - Server is sick, ignoring new data of type {0} for now",a);u(t,3)}return}o(),e.sendData()}function o(){v||(T.length=0),n&&n(T,t),t[p]=b(),T.push(t),v&&w()}v?g.refreshGetData(null,i):i()},E.persistData=function(){v&&(w(),T&&0!=T.length||g.removeFromStorage(y))};function w(){t.saveData(T)}E.data=function(){return v&&_(),T=T?T:[]};function _(){T=t.getData()}E.actionUrl=function(){return r},E.sendingThreshold=function(){return o},E.dataType=function(){return a},E.truncateData=function(){v&&(T=E.data(),T.splice(1,T.length-1),E.persistData())},E.clearAndStopSavingData=function(){c=!0,T.length=0,v&&t.removeData()},E.technicalSuccessHandler=function(){return i},E.successCallback=function(){return h},E.failCallback=function(){return m},E.requestParamsFunc=function(){return l},E.getDataIdFieldName=function(){return p},E.shouldTruncateData=function(){return S},I.apply(null,arguments)}i.register("ServerDataSenderManagerParams").asInstance({defaultDataStorageLifeSeconds:900,dateSenderLogFeature:"serverDataSender"}),i.register("ServerDataSenderManager").asCtor(Ve).dependencies("Lib,Logger,RecorderServerManager,ServerDataSenderManagerParams,ClientStorageManager,WmAjax,FeaturesManager,TimerManager,Consts");function Ve(e,t,n,r,i,o,a,s,u){var l,c,d,p,g,f,h,m,v,S,E,T=1e3,y=60*T,C="wm-sk",I="wm-sat",b="wm-sst",w=2,_=3*T,P=60*T,A={1:y,2:4*y},k={Success:0,LogicalError:1,TechnicalError:2},O=this,N={};function D(){p=r.defaultDataStorageLifeSeconds,g=r.dateSenderLogFeature,h=r.maxSickAttemps||w,v=r.sendDataAjaxTimeout||P,m=r.checkDataToSendInterval||_,E=r.attemptsWaitTime||A,f=t.wrapCustomerLog(g)}O.register=function(e,n){if(N[e])return N[e];var r=new Ue({beforeSendingManipulationFunc:n.beforeSendingManipulationFunc,actionUrl:n.actionUrl,technicalSuccessHandler:n.technicalSuccessHandler,successCallback:n.successCallback,failCallback:n.failCallback,dataType:n.dataType,twoLettersDataType:e,serverDataSenderManager:O,sendingThreshold:n.sendingThreshold,stateManager:i,storageEnabled:n.storageEnabled!==!1,dateSenderLogFeature:g,requestParamsFunc:n.requestParamsFunc,dataIdFieldName:n.dataIdFieldName,defaultDataStorageLifeSeconds:void 0!=n.dataStorageLifetimeSeconds?n.dataStorageLifetimeSeconds:p,logError:t.error,logger:t,recursiveMinification:n.recursiveMinification,shouldTruncateData:n.shouldTruncateData!==!1});return N[e]=r,r},O.start=function(e){O.sendData()},O.stop=function(e){R(),O.removeAllData(),null!=d&&(d.clear(),d=null),null!=S&&(S.clear(),d=null)},O.sendData=function(){var e=L();if(!e||B())return;var t=e.dataSender,n=e.data;if(O.isServerSick())return f("Waiting for server's health in sendData",3),void V();if(n.length>=t.sendingThreshold())f(kf("sendData - Got {0} {1}s to send, starting now",n.length,t.dataType()),3),null!=d&&(d.clear(),d=null),Y(n,t);else if(null==d||d.cleared){var r=kf("Got {0} {1}s to send, waiting {2}",n.length,t.dataType(),m);f(r,3),d=s.libSetTimeout(function(){d=null,i.refreshGetData(null,function(){var e=L();if(!e||B())return;var t=e.dataSender,n=e.data;Y(n,t)})},m)}else f("sendData - timeout already exists",5)},O.isServerSick=function(){return M(),i.getData(C)||!1};function L(){var e=x();if(!e)return f("serverDataSenderManager - no data to send. marking it healthy",3),void j();return e}function x(){for(var e=F(),t=e.length-1;t>=0;t--){var n=e[t],r=n.data();if(r.length>0)return{dataSender:n,data:r}}}function F(){return Df(N)}function M(){var e=x(),t=e&&e.data;t||j()}function R(){i.removeData(C),i.removeData(I),i.removeData(b)}function B(){if(l)return f("There's already a pending request to server",3),!0;return!1}function U(){var e=L();if(!e||B())return;var t=e.dataSender,n=e.data;f(kf("Got {0} {1}s to send, starting now",n.length,t.dataType()),3),Y(n,t)}function V(){if(c)return void f("Already waiting for server's health",5);null!=d&&(d.clear(),d=null),c=!0;var e=i.getData(I);if(e=e?++e:1,e>h){var t=kf("Server wasn't healthy for more than {0} attempts, restarting sick mode",e);f(t,0),i.removeData(b),i.removeData(I),c=!1,V()}else{var n=W(e),r=kf("Sick attempts: {0}, time before next retry: {1} second(s)",e,n/1e3);f(r,3),S=s.libSetTimeout(function(){i.refreshGetData(null,function(){i.removeData(b),i.saveData(I,e,p),c=!1,U()})},n)}}function W(e){var t=i.getData(b);if(!t){var n=G(e);t=(new Date).getTime()+n,i.saveData(b,t,p)}var r=t-(new Date).getTime();return r}function G(e){return E[e]}function H(){i.getData(C);j(),l=!1,U()}function j(){i.removeData(C),i.removeData(I),i.removeData(b),c=!1}function Y(e,t){if(0==n.get().length)return void f(kf("RecorderServerName is {0}, can't send data of type {1}",n.get(),t.dataType()),2);if(0==e.length)return void f("dataArray's length is 0, no data to send",3);null!=d&&(d.clear(),d=null),l=!0;var r=t.sendingThreshold(),i=Af(e);i.length>r&&(i=i.splice(0,r));var s=t.requestParamsFunc()(i);a.isFeatureEnabled(u.FEATURES.DontMaskEndUserAddress)&&(s.dmeua=1);var c=o.execute({url:n.get()+t.actionUrl(),dataType:"jsonp",data:s,timeout:v});a.isFeatureEnabled("bypassAuditServer")?Q(i,c,t):K(i,c,t);var p=kf("Sent {0} data of type {1} to server at {2}",i.length,t.dataType(),(new Date).toString());f(p,3)}function z(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r],o=i[t];o&&o>n&&(n=o)}return n}function Q(e,t,n){t.error(function(t,r,i){if(200==t.status&&"parsererror"==r)X(e,n);else{var o=kf("Server technical (AJAX) error (2) jqXHR:{0}, textStatus:{1}, errorThrown:{2}",Cf(t),r,i);f(o,3),ee(i,n)}}),t.success(function(e){var t="Got success while in bypass player server mode";f(t,3),_makeTutorial.Logger.error(null,t)})}function K(e,t,n){t.success(function(t){if(f("Sending data ajax success",3),!window._walkMe)return;q(t,e,n)}),t.error(function(t,r,i){200==t.status&&"parsererror"==r?Z(e,n,i):ee(i,n)})}function q(e,t,n){if(n.technicalSuccessHandler&&n.technicalSuccessHandler())n.technicalSuccessHandler()(e,function(){var r=e.Data||e;Z(t,n,r)},function(){ee(e.Data||e,n)},function(){var r=e.Data||e;X(t,n,r)},t);else switch(e.WMResultCode){case k.Success:X(t,n,e.Data);break;case k.LogicalError:f(n.dataType()+" : Logical error sending data. "+e.Data,3),Z(t,n,e.Data);break;case k.TechnicalError:f(n.dataType()+" : Technical error sending data",3),ee(e.Data||e,n);break;default:f(n.dataType()+" : No error code received - treated as technical error",3),ee(e.Data||e,n)}}function X(e,t,n){if(f("The technical success was also logical success",3),J(e,t),H(),t.successCallback){var r=t.successCallback();r&&r(n)}}function J(e,t){$(e,t)}function $(e,t){for(var n=t.getDataIdFieldName(),r=z(e,n),i=t.data(),o=i.length-1;o>=0;o--){var a=i[o];a[n]<=r&&i.splice(o,1)}t.persistData()}O.removeAllData=function(){for(var e=F(),t=e.length-1;t>=0;t--)e[t].clearAndStopSavingData()};function Z(e,t,n){if(f(kf("Logical error happened, discarding {0} {1}",e.length,t.dataType()),3),$(e,t),H(),l=!1,U(),t&&t.failCallback){var r=t.failCallback();r&&r(n)}}function ee(e,t){if(i.saveData(C,1,p),f("Truncating data due to sick server",3),te(),l=!1,t&&t.failCallback){var n=t.failCallback();n&&n(e)}V()}function te(){for(var e=F(),t=e.length-1;t>=0;t--){var n=e[t];n.shouldTruncateData()&&n.truncateData()}}D.apply(null,arguments)}i.register("AjaxManager").asCtor(We).dependencies("FeaturesManager, WmjQueryAjaxProvider, AjaxProxyProvider, Consts, win");function We(e,t,n,r,i){var o=this,a=r.AJAX_PROVIDERS.wmjQueryAjaxProvider;function s(){}o.init=function(){a=r.AJAX_PROVIDERS.wmjQueryAjaxProvider,i._walkmeInternals&&i._walkmeInternals.bind&&i._walkmeInternals.bind("dataFilesLoaded",function(){e.isFeatureEnabled("ajaxProxy")&&(n.init(),a=r.AJAX_PROVIDERS.ajaxProxyProvider)})},o.getProvider=function(){var e;switch(a){case r.AJAX_PROVIDERS.ajaxProxyProvider:e=n;break;default:e=t}return e},s.apply(null,arguments)}i.register("AjaxProxyProvider").asCtor(Ge).dependencies("AjaxProxyIframeManager");function Ge(t){var n=this;n.init=r,n.callAjax=i;function r(){t.init()}function i(n){var r=e.Deferred(),i=o(r);return t.postMessage(n,r.resolve),n.success&&i.success(n.success),n.error&&i.error(n.error),i}function o(e){return{success:function(t){e.promise().then(function(e){e.success&&t(e.data)})},error:function(t){e.promise().then(function(e){e.success||t(e.data.jqXHR,e.data.textStatus,e.data.errorThrown)})},abort:function(){e.promise().then(function(e){t.abort(e.requestIndex)})}}}}i.register("WmjQueryAjaxProvider").asCtor(He);function He(){var t=this;t.callAjax=n;function n(t){return e.ajax(t)}}i.register("WmAjax").asCtor(je).dependencies("CommonEvents, FeaturesManager, AjaxManager, CorsSupportIndicator");function je(e,t,n,r){var i,o,a=this,s=e;function u(){}a.setFeatures=function(e,t){i=e,o=t},a.execute=function(e){return e.dataType=e.dataType?e.dataType:"jsonp","jsonp"===e.dataType&&(i||o&&r.hasCorsSupport())&&l(e),s.sendAutomationEvent("ajaxSent",e),n.getProvider().callAjax(e)},a.loadTextFile=function(e,t,n,r,i){r=r||function(e,t,n){},mtjQuery.ajax(e,{cache:!!i,dataType:"jsonp",jsonpCallback:t,success:n,error:r})};function l(e){e.dataType="json"}u.apply(null,arguments)}var Ye;!function(e){var t=function(){function e(e,t){this.callback=t,this.timeoutMs=e}return e.prototype.start=function(e){var t=this;if(!this.enabled){this.enabled=!0;var n=e||this.timeoutMs;this.timerHandle=i.get("TimerManager").setWalkmeTimeout(function(){t.onTick()},n)}},e.prototype.onTick=function(){this.enabled=!1,this.callback()},e.prototype.stop=function(){this.timerHandle&&(this.timerHandle.clear(),this.timerHandle=null),this.enabled=!1},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.isEnabled=function(){return this.enabled},e}();e.SimpleTimer=t,function(e){e[e.Chrome=6]="Chrome"}(e.BrowserConnectionLimit||(e.BrowserConnectionLimit={}));e.BrowserConnectionLimit}(Ye||(Ye={}));var Ye;!function(t){var n;!function(n){var r=function(){function n(e){this.maxConnections=t.BrowserConnectionLimit.Chrome,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.retryParameterName=e.retryParameterName,this.allocateImages()}return n.prototype.getChannelType=function(){return"ImageChannel"},n.prototype.getChannelMethod=function(){return"GET"},n.prototype.setBaseUrl=function(e){this.baseUrl=e},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},n.prototype.getRetryParamName=function(){return this.retryParameterName},n.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},n.prototype.getLineBreak=function(){return"\n"},n.prototype.checkHealth=function(){e.get(this.getHealthCheckUrl())},n.prototype.send=function(e,t,n,r){var i=this,o=encodeURIComponent(e),a=this.assertFree();a.attr(this.getBusyFlag(),"true");var s=this.getPostEventUrl()+"?"+this.getURLQueryParamKey()+"="+o;r&&(s+="&"+this.getRetryParamName()+"="+r),a.load(function(){a.unbind("load"),a.attr(i.getBusyFlag(),"false"),i.whenFreeCallback&&i.whenFreeCallback(),t&&t(),i.successCallback&&i.successCallback()}).error(function(){n&&n(null,null,null),i.failCallback&&i.failCallback(null,null,null)}),a.attr("src",s)},n.prototype.isInitialized=function(){return!!this.baseUrl},n.prototype.isAvailable=function(){var e=this.getFreeImg();return null!==e},n.prototype.isIdle=function(){for(var e=0;e<this.images.length;e++)if(!this.isImageFree(this.images[e]))return!1;return!0},n.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},n.prototype.estimateDataSize=function(e){return encodeURIComponent(e).length},n.prototype.maxPacketSize=function(){var e="?"+this.getURLQueryParamKey()+"=&"+this.getRetryParamName()+"=";return this.getMaxUrlSize()-this.getPostEventUrl().length-e.length-2},n.prototype.channelBandwidth=function(){return t.BrowserConnectionLimit.Chrome*this.maxPacketSize()},n.prototype.whenFree=function(e){this.whenFreeCallback=e},n.prototype.fail=function(e){this.failCallback=e},n.prototype.success=function(e){this.successCallback=e},n.prototype.getFreeImg=function(){for(var e=0;e<this.images.length;e++)if(this.isImageFree(this.images[e]))return this.images[e];return null},n.prototype.isImageFree=function(e){return"false"===e.attr(this.getBusyFlag())},n.prototype.allocateImages=function(){this.images=[];for(var e=0;e<this.maxConnections;e++){var t=this.createImage();this.images.push(t)}},n.prototype.createImage=function(){var t=e("<img/>");return t.css("width","1px"),t.css("height","1px"),t.attr(this.getBusyFlag(),"false"),t},n.prototype.getMaxUrlSize=function(){return 2048},n.prototype.getBusyFlag=function(){return"_WM_BUSY_"},n.prototype.getURLQueryParamKey=function(){return"ed"},n.prototype.assertFree=function(){var e=this.getFreeImg();if(!e)throw"Channel is at max capacity. Can't send anymore data.";return e},n.prototype.getCurrentImages=function(){return this.images.slice(0)},n.prototype.dispose=function(){for(var e=0;e<this.images.length;e++)this.images[e].remove()},n}();n.ImageChannel=r}(n=t.Channels||(t.Channels={}))}(Ye||(Ye={}));var Ye;!function(t){var n;!function(n){var r=function(){function n(e){this.maxConnections=t.BrowserConnectionLimit.Chrome,this.currentOpenConnections=0,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.requestTimeoutMs=e.requestTimeoutMs,this.retryParameterName=e.retryParameterName}return n.prototype.getChannelType=function(){return"AjaxChannel"},n.prototype.getChannelMethod=function(){return"POST"},n.prototype.setBaseUrl=function(e){this.baseUrl=e},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},n.prototype.getRetryParamName=function(){return this.retryParameterName},n.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},n.prototype.getLineBreak=function(){return"\n"},n.prototype.checkHealth=function(){e.get(this.getHealthCheckUrl())},n.prototype.send=function(e,t,n,r){if(!this.isAvailable())throw new Error("Channel is at max capacity. Can't send anymore data.");var o=this;this.currentOpenConnections++;var a=this.getPostEventUrl();r&&(a+="?"+this.getRetryParamName()+"="+r);var s=i.get("WmAjax").execute({url:a,data:e,contentType:"text/plain",type:"POST",dataType:"html",timeout:this.requestTimeoutMs||2e3});s.success(function(e){t&&t(),o.successCallback&&o.successCallback(),
o.singleLinkFree()}),s.error(function(e,t,r){n&&n(e,t,r),o.failCallback&&o.failCallback(e,t,r),o.singleLinkFree()})},n.prototype.isInitialized=function(){return!!this.baseUrl},n.prototype.isAvailable=function(){var e=this.currentOpenConnections<this.maxConnections;return e},n.prototype.isIdle=function(){return 0===this.currentOpenConnections},n.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},n.prototype.estimateDataSize=function(e){return e.length},n.prototype.maxPacketSize=function(){return 9e3},n.prototype.channelBandwidth=function(){return t.BrowserConnectionLimit.Chrome*this.maxPacketSize()},n.prototype.whenFree=function(e){this.whenFreeCallback=e},n.prototype.fail=function(e){this.failCallback=e},n.prototype.success=function(e){this.successCallback=e},n.prototype.singleLinkFree=function(){this.currentOpenConnections--,this.whenFreeCallback&&this.whenFreeCallback()},n}();n.AjaxChannel=r}(n=t.Channels||(t.Channels={}))}(Ye||(Ye={}));var Ye;!function(t){var n;!function(t){!function(e){e[e.PostNativeCors=0]="PostNativeCors",e[e.GetImage=1]="GetImage",e[e.PostIECorsPlugin=2]="PostIECorsPlugin"}(t.CompatibilityChannelMode||(t.CompatibilityChannelMode={}));var n=t.CompatibilityChannelMode,r=function(){function r(e){var n=this;this.config=e,this.sendFn=function(i,o,a,s){var u=!1,l=function(s,l,c,d){if(!u){u=!0;var p=new t.ImageChannel(e);p.setBaseUrl(n.underlyingChannel.getBaseUrl()),n.underlyingChannel=p,r(i,o,a,d)}};try{r(i,o,function(e,t,n,r){l(e,t,n,r)},s)}catch(c){l(null,null,null)}n.sendFn=r};var r=function(e,t,r,i){n.underlyingChannel.send(e,t,r,i)}}return r.prototype.getChannelType=function(){return"CompatibilityChannel."+this.underlyingChannel.getChannelType()},r.prototype.getChannelMethod=function(){return n[this.mode]},r.prototype.getBaseUrl=function(){return this.underlyingChannel.getBaseUrl()},r.prototype.setBaseUrl=function(e){var t=this.checkCompatibility(),n=new RegExp("^(//|"+location.protocol+")","i"),r=n.test(e),i=this.pickChannel(t,this.config,r);i.setBaseUrl(e),this.underlyingChannel=i},r.prototype.getPostEventUrl=function(){return this.underlyingChannel.getPostEventUrl()},r.prototype.getHealthCheckUrl=function(){return this.underlyingChannel.getHealthCheckUrl()},r.prototype.getRetryParamName=function(){return this.underlyingChannel.getRetryParamName()},r.prototype.getLineBreak=function(){return this.underlyingChannel.getLineBreak()},r.prototype.checkHealth=function(){e.get(this.underlyingChannel.checkHealth())},r.prototype.send=function(e,t,n,r){this.sendFn(e,t,n,r)},r.prototype.isInitialized=function(){return!!this.underlyingChannel&&this.underlyingChannel.isInitialized()},r.prototype.isAvailable=function(){return this.underlyingChannel.isAvailable()},r.prototype.isIdle=function(){return this.underlyingChannel.isIdle()},r.prototype.withinSizeLimit=function(e){return this.underlyingChannel.withinSizeLimit(e)},r.prototype.estimateDataSize=function(e){return this.underlyingChannel.estimateDataSize(e)},r.prototype.maxPacketSize=function(){return this.underlyingChannel.maxPacketSize()},r.prototype.channelBandwidth=function(){return this.underlyingChannel.channelBandwidth()},r.prototype.whenFree=function(e){this.underlyingChannel.whenFree(e)},r.prototype.fail=function(e){this.underlyingChannel.fail(e)},r.prototype.success=function(e){this.underlyingChannel.success(e)},r.prototype.pickChannel=function(e,r,i){switch(this.mode=e,e){case n.PostIECorsPlugin:return i?new t.AjaxChannel(r):new t.ImageChannel(r);case n.PostNativeCors:return new t.AjaxChannel(r);case n.GetImage:return new t.ImageChannel(r)}},r.prototype.checkCompatibility=function(){return void 0!==(new XMLHttpRequest).withCredentials?n.PostNativeCors:"undefined"!=typeof window.XDomainRequest?n.PostIECorsPlugin:n.GetImage},r}();t.CompatibilityChannel=r}(n=t.Channels||(t.Channels={}))}(Ye||(Ye={}));var Ye;!function(t){var n;!function(t){var n=function(){function t(e){this.buffer=[],this.reduceFn=e.reduce}return t.prototype.getStorageType=function(){return"ArrayBuffer"},t.prototype.push=function(e){this.buffer.push(e)},t.prototype.pull=function(){var e=this.buffer.shift();return e},t.prototype.peek=function(){var e=this.buffer[0];return e},t.prototype.count=function(){return this.buffer.length},t.prototype.clear=function(){this.buffer=[]},t.prototype.dataSize=function(){var e=this.reduceFn(this.buffer,function(e,t){return e+t.length},0);return e},t.prototype.isEmpty=function(){return 0===this.count()},t.prototype.getRawData=function(){return this.buffer},t.prototype.set=function(e){this.pushAll(e)},t.prototype.pushAll=function(t){if(e.isArray(t))for(var n=0,r=t.length;n<r;n++)this.push(t[n])},t.prototype.pullAll=function(){var e=this.buffer;return this.clear(),e},t}();t.ArrayBuffer=n}(n=t.Storage||(t.Storage={}))}(Ye||(Ye={}));var Ye;!function(t){var n;!function(t){var n=function(){function t(e){this.buffer={},this.runningId=0,this.getDictionaryKeys=e.getDictionaryKeys}return t.prototype.getStorageType=function(){return"DictionaryBuffer"},t.prototype.generateId=function(){return""+ ++this.runningId},t.prototype.push=function(e){var t=this.generateId();return this.buffer[t]=e,t},t.prototype.pull=function(e){var t=this.buffer[e];return delete this.buffer[e],t},t.prototype.peek=function(e){return this.buffer[e]},t.prototype.count=function(){return this.getAllIds().length},t.prototype.clear=function(){this.buffer={}},t.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=this.buffer[t].length);return e},t.prototype.isEmpty=function(){return 0===this.count()},t.prototype.getRawData=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&e.push(this.peek(t));return e},t.prototype.set=function(e){return this.pushAll(e)},t.prototype.pushAll=function(t){var n=[];if(e.isArray(t))for(var r=0,i=t.length;r<i;r++)n.push(this.push(t[r]));return n},t.prototype.pullAll=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++)t.push(this.pull(e[n]));else for(var i in this.buffer)this.buffer.hasOwnProperty(i)&&t.push(this.pull(i));return t},t.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},t}();t.DictionaryBuffer=n}(n=t.Storage||(t.Storage={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.buffer={},this.inputMapper=t,this.outputMapper=n,this.getDictionaryKeys=e.getDictionaryKeys,this.mapFn=e.map,this.reduceFn=e.reduce}return e.prototype.getStorageType=function(){return"ReduceBuffer"},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=t.length+(""+this.buffer[t]).length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.buffer=e},e.prototype.pushAll=function(e){var t=this,n=this.mapFn(e,function(e){return t.inputMapper.convert(e)}),r=this.reduceFn(n,function(e,t){return e[t]=(e[t]||0)+1,e},this.buffer);this.set(r)},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e.prototype.pullAll=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e.push(this.format(t)),delete this.buffer[t]);return e},e.prototype.format=function(e){return this.outputMapper.convert({type:e,count:this.buffer[e]})},e}();e.ReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.expiresSeconds=e.expiresSeconds||600,this.storageTypesEnum=n.STORAGE_TYPE,this.clientStorageManager=t,this.buffer=r}return e.prototype.save=function(){var e=Cf(this.getRawData());this.clientStorageManager.saveData(this.keyName,e,this.expiresSeconds)},e.prototype.load=function(){this.buffer.clear();var e=this.clientStorageManager.getData(this.keyName);if(e)try{this.set(If(e))}catch(t){this.buffer.clear()}},e.prototype.count=function(){return this.buffer.count()},e.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},e.prototype.dataSize=function(){return this.buffer.dataSize()},e.prototype.maxSize=function(){var e,t=.5;switch(this.clientStorageManager.getStorageType().type){case this.storageTypesEnum.JStorage:case this.storageTypesEnum.CrossDomainLocalStorage:case this.storageTypesEnum.CrossDomain:e=2621440;break;case this.storageTypesEnum.Extension:case this.storageTypesEnum.ProxyIframe:e=524288;break;case this.storageTypesEnum.CrossDomainCookies:case this.storageTypesEnum.Cookie:e=2048;break;default:e=2048}return e*t},e.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},e.prototype.getRawData=function(){return this.buffer.getRawData()},e}();e.BaseClientStorageBuffer=t}(t=e.Storage||(e.Storage={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageArrayBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},t.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},t.prototype.peek=function(){var e=this.getBuffer().peek();return e},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageArrayBuffer=t}(t=e.Storage||(e.Storage={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageDictionaryBuffer::"+this.buffer.getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},t.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},t.prototype.peek=function(e){var t=this.getBuffer().peek(e);return t},t.prototype.set=function(e){return this.getBuffer().set(e)},t.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},t.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},t}(e.BaseClientStorageBuffer);e.ClientStorageDictionaryBuffer=t}(t=e.Storage||(e.Storage={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageReduceBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r,i){this.buffer=t,this._isEnabled=!1,this.dataChannel=e,this._eventsErrorLogger=i,r?this._logger=r.wrapCustomerLog("newSender"):this._logger=function(){}}return e.prototype.checkHealth=function(){return this.dataChannel.checkHealth()},e.prototype.getBaseUrl=function(){return this.dataChannel.getBaseUrl()},e.prototype.setBaseUrl=function(e){this.dataChannel.setBaseUrl(e)},e.prototype.getPostEventUrl=function(){return this.dataChannel.getPostEventUrl()},e.prototype.getHealthCheckUrl=function(){return this.dataChannel.getHealthCheckUrl()},e.prototype.enable=function(){var e=this;if(!this._isEnabled)try{this._logger(this.getSenderType()+"::enable. Enabling new data sender. \r\n [channel : "+this.dataChannel.getChannelType()+" , method : "+this.dataChannel.getChannelMethod()+" ,max packet size: "+this.dataChannel.maxPacketSize()+" ] \r\n [storage : "+this.buffer.getStorageType()+" , max storage size: "+this.buffer.maxSize()+"] \r\n",3),this._isEnabled=!0,this.dataChannel.whenFree(function(){e.linkIsFree()}),this.registerToUnload(function(){return e.sleep()}),this.wakeUp()}catch(t){this.logError(t,"Enable")}},e.prototype.logError=function(e,t){if(this._eventsErrorLogger){var n=this.dataChannel&&this.buffer?{storage:this.buffer.getStorageType(),channel:this.dataChannel.getChannelType()}:{};n.sender=this.getSenderType()+(t?"::"+t:""),this._eventsErrorLogger.logError(Cf(e.message),n)}},e.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1)},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.isIdle=function(){return this._isEnabled&&this.dataChannel.isIdle()&&this.buffer.isEmpty()},e.prototype.clearStorage=function(){this.buffer.clear()},e.prototype.registerToUnload=function(e){i.get("WindowBeforeUnloadHandler").register(e)},e}();e.SuperSender=t}(t=e.Managers||(e.Managers={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return t.prototype.getBuffer=function(){return this.buffer},t.prototype.getSenderType=function(){return"ImmediateSender"},t.prototype.send=function(e){if(!this.isEnabled())return!1;return this.dataChannel.isAvailable()?this.dataChannel.send(e):this.getBuffer().push(e),!0},t.prototype.wakeUp=function(){if(!this.isEnabled())return!1;this.loadFromStorage()},t.prototype.sleep=function(){if(!this.isEnabled())return!1;this.getBuffer().save()},t.prototype.linkIsFree=function(){if(!this.isEnabled())return!1;this.sendFromBuffer()},t.prototype.loadFromStorage=function(){if(!this.isEnabled())return!1;for(this.getBuffer().load();this.dataChannel.isAvailable()&&this.getBuffer().count();)this.sendFromBuffer()},t.prototype.sendFromBuffer=function(){if(!this.isEnabled())return!1;var e=this.getBuffer().pull();e&&this.dataChannel.send(e)},t}(e.SuperSender);e.ImmediateSender=t}(t=e.Managers||(e.Managers={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(t){var n=function(t){__extends(n,t);function n(n,r,i,o,a,s,u,l,c,d){var p=this;t.call(this,n,r,s,c,d),this.estimatedPacketSize=0,this.cycleTimer=new e.SimpleTimer(s.sendingIntervalMs,function(){return p.doCycle()}),this.retryTimer=new e.SimpleTimer(s.retryIntervalMs,function(){return p.doCycle()}),this.maxRetries=s.maxRetries,this.maxRetryTimeoutSec=s.maxRetryTimeoutSec,this.minRetryTimeoutSec=s.minRetryTimeoutSec,this.currentRetries=0,this.isHealthy=!0,this.needMoreLink=!1,this.isLogFailed=s.isLogFailed,this.memoryBuffer=o,this.stagingMemoryBuffer=a,this.stagingBuffer=i,this.failureBuffer=u,this.dataSenderLogFailure=l}return n.prototype.getSenderType=function(){return"AccumulationSender"},n.prototype.getBuffer=function(){return this.buffer},n.prototype.send=function(e){try{if(this._logger(this.getSenderType()+"::Send. called for: "+Cf(e),5),!this.isEnabled())return!1;var t=this.dataChannel.estimateDataSize(e);if(!this.dataChannel.withinSizeLimit(t))throw new Error("Data exceeds channel packet size");if(this.getBuffer().withinSizeLimit(e.length))return this.getBuffer().isEmpty()||(this.estimatedPacketSize+=this.dataChannel.estimateDataSize(this.dataChannel.getLineBreak())),this.estimatedPacketSize+=t,this.getBuffer().dataSize()+e.length>this.getBuffer().maxSize()&&this.sendBuffer(),this.getBuffer().push(e),this.estimatedPacketSize>=this.dataChannel.channelBandwidth()?(this.sendBuffer(),this.getTimer().restart()):this.getTimer().start(),!0;this.dataChannel.isAvailable()?this.stageAndSend({memory:[e],persist:[]}):this.memoryBuffer.push(e)}catch(n){throw this.logError(n,"Send"),n}},n.prototype.wakeUp=function(){if(!this.isEnabled())return;try{this._logger(this.getSenderType()+"::WakeUp. buffer size before load. "+this.getBuffer().dataSize(),3),this.loadFromStorage(),this._logger(this.getSenderType()+"::WakeUp. buffer size after load. "+this.getBuffer().dataSize(),3)}catch(e){throw this.logError(e,"WakeUp"),e}},n.prototype.sleep=function(){if(!this.isEnabled())return;try{this._logger(this.getSenderType()+"::Sleep. buffer size before flush: "+this.getBuffer().dataSize(),3),this.sendBuffer(),this._logger(this.getSenderType()+"::Sleep. buffer size after flush: "+this.getBuffer().dataSize(),3),this.getBuffer().save(),this.stagingBuffer.save(),this.failureBuffer.save()}catch(e){throw this.logError(e,"Sleep"),e}},n.prototype.isIdle=function(){return t.prototype.isIdle.call(this)},n.prototype.linkIsFree=function(){if(!this.isEnabled())return;this.needMoreLink&&this.sendBuffer()},n.prototype.doCycle=function(){if(!this.isEnabled())return;this._logger(this.getSenderType()+"::doCycle. buffer size before flush. "+this.getBuffer().dataSize(),4),this.sendBuffer(),this._logger(this.getSenderType()+"::doCycle. buffer size after flush. "+this.getBuffer().dataSize(),4)},n.prototype.getSeperator=function(){return this.dataChannel.getLineBreak()},n.prototype.getTimer=function(){return this.isHealthy?this.cycleTimer:this.retryTimer},n.prototype.hasBufferEvents=function(){return!this.getBuffer().isEmpty()||!this.memoryBuffer.isEmpty()},n.prototype.getPriorityBuffer=function(){return this.memoryBuffer.isEmpty()?this.getBuffer():this.memoryBuffer},n.prototype.sendBuffer=function(){if(!this.isEnabled())return;try{for(var e=this.dataChannel.maxPacketSize();this.hasBufferEvents()&&this.dataChannel.isAvailable();){var t={persist:[],memory:[]},n=0;do{var r=this.getPriorityBuffer(),i=this.dataChannel.estimateDataSize(r.peek()),o=0;if(0!==n&&(o=this.dataChannel.estimateDataSize(this.getSeperator())),o+=i,n+o>e){if(n>0)break;r.pull(),this.logError(new Error("Tried to send too long message"),"SendBuffer");continue}var a=r===this.memoryBuffer?"memory":"persist";t[a].push(r.pull()),n+=o,this.estimatedPacketSize-=o}while(this.hasBufferEvents()&&n<e);n>0&&this.stageAndSend(t)}this.needMoreLink=this.hasBufferEvents()}catch(s){throw this.logError(s,"SendBuffer"),s}},n.prototype.stageAndSend=function(e){var t=this,n={persist:this.stagingBuffer.pushAll(e.persist),memory:this.stagingMemoryBuffer.pushAll(e.memory)},r=e.persist.concat(e.memory).join(this.getSeperator());this._logger(this.getSenderType()+"::sendBuffer. packet size "+r.length,3),this._logger(this.getSenderType()+"::sendBuffer. sending packet :"+Cf(r),4),this.dataChannel.send(r,function(){try{t.isHealthy=!0,t.currentRetries=0,t.stagingBuffer.pullAll(n.persist),t.stagingMemoryBuffer.pullAll(n.memory),t.isLogFailedEnabled()&&t.logFailedEvents()}catch(e){}},function(){try{if(t.isHealthy=!1,t.getBuffer().pushAll(t.stagingBuffer.pullAll(n.persist)),t.memoryBuffer.pushAll(t.stagingMemoryBuffer.pullAll(n.memory)),t.currentRetries++,t.currentRetries>t.maxRetries){if(t.isLogFailedEnabled()){var e=t.getBuffer().pullAll().concat(t.memoryBuffer.pullAll());t.failureBuffer.pushAll(e)}t.currentRetries=0,t.getBuffer().clear(),t.memoryBuffer.clear()}else{var r=t.getNextRetryTime();t.getTimer().start(r)}}catch(i){}},this.currentRetries||void 0)},n.prototype.getNextRetryTime=function(){if(this.maxRetries<=1)return;var e,t=1e3*(this.minRetryTimeoutSec+(this.maxRetryTimeoutSec-this.minRetryTimeoutSec)*(this.currentRetries-1)/(this.maxRetries-1));return e=Math.min(1e3*this.maxRetryTimeoutSec,Math.random()*(.25*t)+.75*t)},n.prototype.loadFromStorage=function(){if(!this.isEnabled())return;this.getBuffer().load(),this.stagingBuffer.load(),this.failureBuffer.load(),this.getBuffer().pushAll(this.stagingBuffer.pullAll()),this.stagingBuffer.save(),this._logger(this.getSenderType()+"::loadFromStorage. buffer size after load : "+this.getBuffer().dataSize(),4),this.sendBuffer()},n.prototype.isLogFailedEnabled=function(){return this.isLogFailed},n.prototype.logFailedEvents=function(){if(this.failureBuffer.count()<=0)return;for(var e=this.failureBuffer.pullAll(),t=0;t<e.length;t++){var n=e[t];this.dataSenderLogFailure.log.warn(n.message,n.extraData)}},n}(t.SuperSender);t.AccumulationSender=n}(t=e.Managers||(e.Managers={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){var t=If(e);return t.data.type+":"+t.type},e}();e.EventTypeMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(Ye||(Ye={}));var Ye;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){return{message:"Event failed to send [type "+e.type+", count "+e.count+"]",extraData:{evType:e.type,count:e.count}}},e}();e.EventLogMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(Ye||(Ye={})),i.register("DataChannelConfig").asInstance({postEventAction:"/event/postEvent",healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r"}),i.register("DataChannelConfigLog").asInstance({postEventAction:"/event/log",healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r"}),i.register("DataSenderConfig").asInstance({sendingIntervalMs:250,retryIntervalMs:3e3,maxRetries:3,isLogFailed:!0,maxRetryTimeoutSec:960,minRetryTimeoutSec:3}),i.register("DataSenderConfigLog").asInstance({sendingIntervalMs:5e3,retryIntervalMs:5e3,maxRetries:3,isLogFailed:!1}),i.register("EventTypeMapper").asCtor(Ye.Manipulation.EventTypeMapper),i.register("EventLogMapper").asCtor(Ye.Manipulation.EventLogMapper),i.register("ArrayBuffer").asCtor(Ye.Storage.ArrayBuffer).asProto().dependencies("GeneralUtils"),i.register("DictionaryBuffer").asCtor(Ye.Storage.DictionaryBuffer).asProto().dependencies("GeneralUtils"),i.register("ReduceBuffer").asCtor(Ye.Storage.ReduceBuffer).asProto().dependencies("GeneralUtils,EventTypeMapper,EventLogMapper"),i.register("DataSenderMethod").asCtor(Ye.Channels.CompatibilityChannel).dependencies("DataChannelConfig"),i.register("DataSenderStorageConfig").asInstance({keyName:"wm-ds-b",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageStagingConfig").asInstance({keyName:"wm-ds-s",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorage").asCtor(Ye.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfig,ClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderStagingStorage").asCtor(Ye.Storage.ClientStorageDictionaryBuffer).dependencies("DataSenderStorageStagingConfig,ClientStorageManager,Consts,DictionaryBuffer"),i.register("DataSender").asCtor(Ye.Managers.AccumulationSender).dependencies("DataSenderMethod,DataSenderStorage,DataSenderStagingStorage,ArrayBuffer,DictionaryBuffer,DataSenderConfig,DataSenderStorageLogFailure,EventCollectorLoggerPixel,Logger,EventSenderErrorLogger"),i.register("DataSenderMethodLog").asCtor(Ye.Channels.CompatibilityChannel).dependencies("DataChannelConfigLog"),i.register("DataSenderStorageConfigLog").asInstance({keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageLog").asCtor(Ye.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLog,ClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderLog").asCtor(Ye.Managers.ImmediateSender).dependencies("DataSenderMethodLog,DataSenderStorageLog,DataSenderConfigLog,Logger,EventSenderErrorLogger"),i.register("DataSenderStorageConfigLogPixel").asInstance({keyName:"wm-ds-lbp",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageLogPixel").asCtor(Ye.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLogPixel,ClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderMethodLogPixel").asCtor(Ye.Channels.ImageChannel).dependencies("DataChannelConfigLog"),i.register("DataSenderLogPixel").asCtor(Ye.Managers.ImmediateSender).dependencies("DataSenderMethodLogPixel,DataSenderStorageLogPixel,DataSenderConfigLog,Logger,EventSenderErrorLogger"),i.register("DataSenderStorageConfigLogFailure").asInstance({keyName:"wm-ds-lfb",autoSave:!0,expiresSeconds:86400}),i.register("DataSenderStorageLogFailure").asCtor(Ye.Storage.ClientStorageReduceBuffer).dependencies("DataSenderStorageConfigLogFailure,ClientStorageManager,Consts,ReduceBuffer"),i.register("InitiatorManager").asCtor(ze);function ze(){var e=this;e.get=r,e.setForScope=i;var t;function n(){t=[]}function r(){var e=t[t.length-1];return e}function i(e,n){t.push(e),n(),t.pop()}n()}i.register("UserTimeMonitor").asCtor(Qe).dependencies("ClientStorageManager, EndUsersManager");function Qe(e,t){var n=this;n.wasActionPerformed=r,n.logActionPerformed=i,n.ACTION_NAMES={walkmeVisibleReported:"wm-wmv"};function r(n){return e.getData(n)==t.getEndUserGuid()}function i(n,r){e.saveData(n,t.getEndUserGuid(),r)}}i.register("EventSender").asCtor(Ke).dependencies("Consts, DeployableTypeToEventSenderAppTypeMapper, EventsCollectorAuditingEnabledIndicator, EventCollectorEventSender, Logger");function Ke(e,t,n,r,i){var o=this;o.isEnabled=u,o.postEvent=s,o.getEventAppByDeployable=t.map,o.isReportingEnabled=u,o.EVENT_TYPES=e.EVENT_SENDER_EVENT_TYPES,o.EVENT_APPS=e.EVENT_SENDER_EVENT_APPS,o.CANCEL_REASONS=e.EVENT_SENDER_CANCEL_REASONS;function a(){}function s(e,t){if(!u())return;try{r.postEvent(e,t)}catch(n){i.error(n)}}function u(){return n.isEnabled()}a.apply(this,arguments)}i.register("EventSenderEnvironmentDataProvider").asCtor(qe).dependencies("HostData, FeaturesManager, Consts, CommonUtils");function qe(e,t,n,r){var o=this;o.getEnvironmentData=s;function a(){}function s(){var o={browser:e.browser,os:e.os,mobile:e.isMobile()};return r.isMobileNative()&&(o.browser.version=i.get("MobileUtils").getSdkVersion()),!t.isReady()||t.isFeatureEnabled(n.FEATURES.DisableWidgetOpenFullUrl)||t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageUrl)?(o.url="",o.urlWithoutQueryString=""):(o.url=e.getUrl(),o.urlWithoutQueryString=e.getUrlWithoutQueryString()),t.isReady()&&!t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageTitle)?o.pageTitle=e.getPageTitle():o.pageTitle="",o}a.apply(this,arguments)}i.register("WalkmeVisibleReporter").asCtor(Xe).dependencies("EventSender, UserTimeMonitor, Consts, Logger, EndUserLoggerManager, AuditSourceProvider, IsInEditor");function Xe(e,t,n,r,i,o,a){var s=this;s.report=c;var u=t.ACTION_NAMES.walkmeVisibleReported;function l(){}function c(){try{if(o.isInPreviewMode()||o.isInPlayMode()||a.get())return;if(i.reportEndUser(void 0,!0),t.wasActionPerformed(u))return;e.postEvent(e.EVENT_TYPES.Visible,{type:e.EVENT_APPS.Walkme}),t.logActionPerformed(u,n.TIME_PERIODS.DaySeconds)}catch(s){r.error(s)}}l.apply(null,arguments)}i.register("ErrorLogFilter").asCtor(Je).dependencies();function Je(){var t=this,n=5;t.filter=r;function r(t){var r=e.Deferred();return n<=0?r.reject():(r.resolve(t),n--),r.promise()}}i.register("EventSenderErrorLogger").asCtor($e).dependencies("DataChannelConfigLog,HostData,WalkMeInfo,ErrorLogFilter");function $e(t,n,r,i){var o,a,s=this;function u(e){a=e.postEventAction}s.setBaseUrl=function(e){o=e},s.isReady=function(){return!(!o||!a)},s.logError=function(t,n){if(!s.isReady())return;var r;try{r=d()}catch(o){}var a=e.extend({time:(new Date).getTime(),level:"error",app:"player",message:t},c(),r,n||{});i.filter(a).then(l)};function l(t){e.ajax({url:o+a,data:Cf(t),contentType:"text/plain",dataType:"json",type:"POST"})}function c(){return{url:n.getUrl(),browser:n.browser,os:n.os,screen:n.getWinSize(),mobile:n.isMobile()}}function d(){return{uId:r.getUserGuid(),euId:r.getEndUserGuid(),euIdSource:r.getEndUserGuidSource(),permId:r.getPermutationId(),language:r.getLanguage(),cVars:r.getCustomVars(),env:r.getEnvironmentId()}}u.apply(s,arguments)}i.register("EventSenderInitializer").asCtor(Ze).dependencies("EventServerBaseUrl, EventSenderErrorLogger, DataSender, DataSenderLog, DataSenderLogPixel, EventSenderEventListener, win");function Ze(e,t,n,r,i,o,a){var s=this;s.init=u;function u(){var a=l(e.get());t&&t.setBaseUrl(a),n.setBaseUrl(a),n.enable(),r.setBaseUrl(a),r.enable(),i.setBaseUrl(a),i.enable(),o.init()}function l(e){var t=c(),n=a.location.protocol,r=/^http[^s]/i,i=r.test(n),o=new RegExp("^(//|"+n+")","i"),s=o.test(e);if(i&&!s&&t)return e.replace(/^https:/,"http:");return e}function c(){return void 0===(new XMLHttpRequest).withCredentials&&"undefined"!=typeof window.XDomainRequest}}i.register("EventSenderDisabler").asCtor(et).dependencies("DataSender");function et(e){var t=this;t.disable=n;function n(){e.sleep(),e.disable()}}i.register("EventSenderEventListener").asCtor(tt).dependencies("Consts, WmInternals, GoalReachedEventSender, SmartTipEventSender, LauncherEventSender, BizFlowEventSender, QuizEventSender, SessionEventSender");function tt(e,t,n,r,i,o,a,s){var u=this;u.init=c;function l(){}function c(){d(),p(),g(),f(),h(),m()}function d(){v(e.EVENTS.Goals.GoalReached,n.postEvent),v(e.EVENTS.AbExperimentLinkedGoalReached,n.postEvent)}function p(){v(e.EVENTS.SmartTips.ValidationFailed,r.postValidationFailedEvent),v(e.EVENTS.SmartTips.ValidationPassed,r.postValidationPassedEvent),v(e.EVENTS.SmartTips.TooltipShown,r.postTooltipShownEvent),v(e.EVENTS.SmartTips.SetTurnedOn,r.postSetActivatedEvent),v(e.EVENTS.SmartTips.SmartTipSegmented,r.postSmartTipSegmentedEvent),v(e.EVENT_SENDER_EVENT_TYPES.Focus,r.postElementEvent),v(e.EVENT_SENDER_EVENT_TYPES.Blur,r.postElementEvent),v(e.EVENT_SENDER_EVENT_TYPES.Click,r.postElementEvent)}function g(){v(e.EVENTS.Launchers.LauncherIsShown,i.postLauncherIsShownEventIfWasntSent)}function f(){v(e.EVENTS.Flows.FlowStarted,o.postFlowStartedEvent),v(e.EVENTS.Flows.FlowBranched,o.postFlowBranchedEvent),v(e.EVENTS.Flows.BeforeExecutingFlowStage,o.postBeforeExecutionStageEvent),v(e.EVENTS.Flows.UIFlowStageShown,o.postUIFlowStageShownEvent),v(e.EVENTS.Flows.AfterCompletingFlowStage,o.postAfterCompletionStageEvent),v(e.EVENTS.Flows.FlowStopped,o.postFlowStoppedEvent),v(e.EVENTS.Flows.SafeStartStatusChanged,o.postFlowSafeStartStatusChangedEvent)}function h(){v(e.EVENTS.Quizzes.QuizPlay,a.postQuizPlayEvent),v(e.EVENTS.Quizzes.QuizSubmitted,a.postQuizSubmittedEvent),v(e.EVENTS.Quizzes.QuizAnswerSubmitted,a.postAnswerSubmittedEvent),v(e.EVENTS.Quizzes.QuizPass,a.postQuizPassEvent),v(e.EVENTS.Quizzes.QuizFail,a.postQuizFailEvent)}function m(){v(e.EVENTS.WalkmeReadyNewSession,s.postNewSessionEvent)}function v(e,n){t.bind(e,function(e,t){n(t)})}l.apply(this,arguments)}i.register("GoalReachedEventSender").asCtor(nt).dependencies("EventSender, Logger, Consts, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, WalkMeGoalsManager");function nt(e,t,n,r,i,o){var a=this;a.postEvent=u;function s(){}function u(a){try{var s=a.goal,u=i.get(s.GoalType),l=u.getById(s.RelatedObjectId),c=o.getGoalsFromDeployable(l),d=r.map(s.GoalType);return e.postEvent(n.EVENT_SENDER_EVENT_TYPES.GoalReached,{type:d,oId:s.Id,oName:s.Name,pId:a.identifier?a.identifier:-1,total:c.length,owId:l.Id,owName:l.Name,owType:d,main:s.IsMainGoal,interactionGuid:a.interactionGuid})}catch(p){return t.error(p),!0}}s.apply(null,arguments)}i.register("SmartTipEventSender").asCtor(rt).dependencies("EventSender, Logger, Consts, InteractionManager, BusinessSolutionsManager, WalkmeVisibleReporter, InitiatorManager, ReportInitiatorMapper");function rt(t,n,r,i,o,a,s,u){var l=this;l.postSetActivatedEvent=d,l.postSmartTipSegmentedEvent=p,l.postValidationFailedEvent=g,l.postValidationPassedEvent=f,l.postTooltipShownEvent=h,l.postElementEvent=v;function c(){}function d(e){var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,oId:e.setId,oName:y(e.setId)};return t=E(t,e),S(r.EVENT_SENDER_EVENT_TYPES.Play,t)}function p(e){a.report();var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owId:e.setId,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:y(e.setId)};return t=E(t,e),S(r.EVENT_SENDER_EVENT_TYPES.Play,t)}function g(e){return m(r.EVENT_SENDER_EVENT_TYPES.Failed,e)}function f(e){return m(r.EVENT_SENDER_EVENT_TYPES.Passed,e)}function h(e){return m(r.EVENT_SENDER_EVENT_TYPES.Visible,e)}function m(e,t){var n={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:t.smartTipModel.Id,
oName:t.smartTipModel.Name,owId:t.setId,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:y(t.setId),aoId:t.uiComponent&&t.uiComponent.Id,aType:t.uiComponent&&t.uiComponent.Type,aAppType:r.EVENT_SENDER_EVENT_APPS.SmartTipUiComponent};return n=E(n,t),S(e,n)}function v(e){var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owId:e.setId,owName:y(e.setId)};return t=E(t,e),S(e.eventType,t)}function S(e,r){try{return t.postEvent(e,r)}catch(i){return n.error(i),!0}}function E(t,n){var r=T(n);return e.extend(r,t)}function T(e){return{interactionGuid:i.getCurrentInteractionGuid(),pId:e.playGuid,pInit:u.map(s.get())}}function y(e){var t=o.getById(e);return t.Name}c()}i.register("LauncherEventSender").asCtor(it).dependencies("EventSender, Consts, Logger");function it(t,n,r){var i=this;i.postLauncherIsShownEventIfWasntSent=s;var o=[];function a(){}function s(n){var i=n.getId(),a=e.inArray(i,o)!=-1;if(a)return;var s={type:t.EVENT_APPS.Launcher,oId:i,oName:n.getName()};try{var u=t.postEvent(t.EVENT_TYPES.Play,s);return o.push(i),u}catch(l){return r.error(l),!0}}a.apply(null,arguments)}i.register("BizFlowEventSender").asCtor(ot).dependencies("EventSender, Consts, ReportInitiatorMapper, PlayGuidGenerator, FlowsContainer, BizFlowStepEventParamsCalculator, BizFlowStepEventStatusProvider, FlowDataPersister");function ot(e,t,n,r,i,o,a,s){var u=this;u.postFlowStartedEvent=l,u.postFlowBranchedEvent=c,u.postBeforeExecutionStageEvent=d,u.postUIFlowStageShownEvent=p,u.postAfterCompletionStageEvent=g,u.postFlowStoppedEvent=f,u.postFlowSafeStartStatusChangedEvent=m;function l(i){var o=s.getPlayInitiator(),a=r.generateNewPlayGuid(i.businessSolutionId);s.savePlayGuid(a);var u={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:i.businessSolutionId,oName:i.businessSolutionName,pId:a,pInit:n.map(o),oRequestedSubObject:i.requestedStageId,oActualSubObject:i.startingStageId};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,u)}function c(r){var i={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:r.businessSolutionId,oName:r.businessSolutionName,pId:s.getPlayGuid(),pInit:n.map({type:r.isBbCodeTrigger?t.STEP_PLAY_INITIATOR_ENUM.BBCODE:t.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:r.branchOriginStageId,appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep}),oRequestedSubObject:r.requestedStageId,oActualSubObject:r.startingStageId};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,i)}function d(e){var t=i.getNodeById(e.flowId,e.stageId),n=a.getBeforeExecutionEventStatus(t);h(e,n)}function p(e){var t=a.getUIFlowStageShownEventStatus();h(e,t)}function g(e){var t=a.getAfterCompletionEventStatus(e.isFlowGoingBack);h(e,t,!0)}function f(e){if(!e.flowId||!e.wasClosedByUser)return;var t=a.getFlowStoppedEventStatus(e.wasClosedByUser);h(e,t)}function h(n,r,a){var u=i.getNodeById(n.flowId,n.stageId),l=a&&o.getValue(u,n.value),c=a&&o.getBbCodeData(l,n.firedTrigger),d={type:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,oId:n.uiElementId?n.uiElementId:u.Id,aoId:u.Id,oName:o.getName(u,n.uiElementId),aType:o.getNodeActionName(u),aAppType:o.getNodeActionAppType(u),oType:o.getNodeType(u),owId:n.businessSolutionId,owName:n.businessSolutionName,owType:t.EVENT_SENDER_EVENT_APPS.BizFlow,total:o.getTotalNodes(n.flowId),pId:s.getPlayGuid(),status:r,value:l,pInit:c};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,d)}function m(r){var i=s.getPlayInitiator(),o={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:r.businessSolutionId,oName:r.businessSolutionName,pId:s.getPlayGuid(),pInit:n.map(i),oRequestedSubObject:r.requestedStageId,oActualSubObject:r.startingStageId,status:r.status};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.PlayFailed,o)}}i.register("BizFlowStepEventParamsCalculator").asCtor(at).dependencies("Consts, BizFlowStepActionToEventSenderActionAppTypeMapper, BizFlowStepActionToEventSenderStepActionNameMapper, FlowsContainer, FlowPlayerMetadata, BizFlowOnPageActionTypeToEventSenderStepActionNameMapper, ReportInitiatorMapper");function at(t,n,r,i,o,a,s){var u=this;u.getNodeActionName=l,u.getNodeActionAppType=c,u.getTotalNodes=d,u.getName=p,u.getNodeType=g,u.getValue=f,u.getBbCodeData=h;function l(e){return e.ActionType!=t.FLOW_ACTION_TYPE.OnPageAction?e.ActionType?r.map(e.ActionType):"":a.map(e.Settings.actionArgs.onElementAction)}function c(e){return e.ActionType?n.map(e.ActionType):""}function d(e){var t=i.getFlowById(e),n=0;for(var r in t.Nodes)n++;return n}function p(n,r){if(n.Type!=t.FLOW_STEP_TYPE.UI)return n.Name;if(r){var i=e.grep(n.UIElements,function(e){return e.Id==r});return i[0].Title}return e.map(n.UIElements,function(e){return e.Title}).join(", ")}function g(e){return e.Type==t.FLOW_STEP_TYPE.Action?t.STEP_TYPE.Action:e.UIElements[0].Type==t.FLOW_UIELEMENT_TYPE.Popup?t.STEP_TYPE.Popup:t.STEP_TYPE.Normal}function f(e,n){if(e.Type==t.FLOW_STEP_TYPE.Action)return n;return o.lastTriggerFired&&o.lastTriggerFired.Type}function h(e,n){if(e&&e==t.FLOW_TRIGGER_TYPE.BbCode)return s.map({objectId:n.Id,type:n.Name})}}i.register("BizFlowStepEventStatusProvider").asCtor(st).dependencies("Consts");function st(e){var t=this;t.getBeforeExecutionEventStatus=n,t.getUIFlowStageShownEventStatus=r,t.getAfterCompletionEventStatus=i,t.getFlowStoppedEventStatus=o;function n(t){return"UI"==t.Type?e.STEP_STATUS.SupposedToShow:e.STEP_STATUS.Shown}function r(){return e.STEP_STATUS.Shown}function i(t){return t?e.STEP_STATUS.MovedBack:e.STEP_STATUS.Performed}function o(t){if(t)return e.STEP_STATUS.Exited}}i.register("QuizEventSender").asCtor(ut).dependencies("EventSender, Consts, InitiatorManager, ReportInitiatorMapper, QuizStatusManager, QuizEventParamCalculator");function ut(t,n,r,i,o,a){var s=this;s.postQuizPlayEvent=u,s.postQuizSubmittedEvent=l,s.postAnswerSubmittedEvent=c,s.postQuizPassEvent=d,s.postQuizFailEvent=p;function u(s){var u=r.get(),l=e.extend({},f(s),h(s.quiz),{pInit:i.map(u),globalRatio:a.getCourseCompletionPrecentage(s.quiz),status:o.getQuizStatus(s.quiz)});t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Play,l)}function l(r){var i=e.extend({},f(r),h(r.quiz));t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Submitted,i)}function c(r){var i=e.extend({},f(r),h(r.quiz,!0),{type:n.EVENT_SENDER_EVENT_APPS.QuizQuestion,oId:r.questionId,aAppType:n.EVENT_SENDER_EVENT_APPS.QuizAnswer,aoId:r.answerId,aType:n.EVENT_SENDER_EVENT_APPS.QuizAnswer,value:r.answer,oName:r.question});t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Submitted,i)}function d(e){g(e,!0)}function p(e){g(e,!1)}function g(r,i){var o=i?n.EVENT_SENDER_EVENT_TYPES.Passed:n.EVENT_SENDER_EVENT_TYPES.Failed,a=e.extend({},f(r),h(r.quiz),{passmark:r.quiz.Passmark,score:r.score});t.postEvent(o,a)}function f(e){return{pId:e.currentPlayGuid}}function h(e,t){var r,i={};return t?(i.owType=n.EVENT_SENDER_EVENT_APPS.Quiz,r="ow"):(i.type=n.EVENT_SENDER_EVENT_APPS.Quiz,r="o"),i[r+"Id"]=e.Id,i[r+"Name"]=a.getQuizName(e),i}}i.register("QuizEventParamCalculator").asCtor(lt).dependencies("CoursesManager");function lt(e){var t=this;t.getQuizName=n,t.getCourseCompletionPrecentage=o,t.getQuizCourseId=r;function n(e){var t=a(e);return t.Name+" Quiz"}function r(e){var t=a(e);return t.Id}function o(t){var n=i.get("LmsProgressProvider"),r=i.get("ObjectsTreeGenerator"),o=e.getCourseByQuizId(t.Id),a=r.generate([o]);return n.getCourseProgress(a[0])}function a(t){return e.getCourseByQuizId(t.Id)}}i.register("EventsCollectorAuditingEnabledIndicator").asCtor(ct).dependencies("EventsCollectorFeatureEnabledIndicator, AuditingEnabledIndicator, Consts, WalkMeInfo, IsInEditor");function ct(e,t,n,r,i){var o=this;o.isEnabled=a;function a(){return e.isFeatureEnabled()&&r.getEnvironmentId&&r.getEnvironmentId()!=n.SOURCES.preview&&!i.get()&&t.isEnabled()}}i.register("EventCollectorLogger").asCtor(dt).dependencies("DataSenderLog,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,EventSenderEnvironmentDataProvider,EventCollectorWalkMeDataProvider,WalkMeInfo,SettingsFile"),i.register("EventCollectorLoggerPixel").asCtor(dt).dependencies("DataSenderLogPixel,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,EventSenderEnvironmentDataProvider,EventCollectorWalkMeDataProvider,WalkMeInfo,SettingsFile");function dt(t,n,r,i,o,a,s){var u=this;u.log=f,u.log.debug=c,u.log.info=d,u.log.warn=p,u.log.error=g,u.isLoggingEnabled=m;function l(){}function c(e,t){return f("debug",e,t)}function d(e,t){return f("info",e,t)}function p(e,t){return f("warn",e,t)}function g(e,t){return f("error",e,t)}function f(e,r,i){if(!m())return;try{var o=Cf(h(e,r,i));t.send(o)}catch(a){throw n&&n.logError(Cf(a.message)),a}}function h(t,n,r){var u=i.getEnvironmentData(),l=o.getWalkMeData();r&&"object"!=typeof r&&(r=null);var c=window.walkme_lib_in_dev===!0?{local:!0}:{};return e.extend({time:(new Date).getTime(),app:"player",level:t,message:n,libVersion:a.getLibVersion(),publishDate:a.getPublishDate(),publishEnv:s.getSettingsFile().Environment},u,l,c,r||{})}function m(){return r.isFeatureEnabled()}l.apply(this,arguments)}i.register("EventCollectorEventSender").asCtor(pt).dependencies("DataSender, EventSenderErrorLogger, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider, SessionManager, CommonUtils, CommonEvents, Consts");function pt(e,t,n,r,i,o,a,s){var u=this;u.postEvent=l;function l(n,r){try{var i=d(n,r);e.send(o.toJSON(i)),c(i)}catch(a){throw t&&t.logError(o.toJSON(a.message)),a}}function c(e){var t={eventData:e};a.raiseEvent(s.EVENTS.AnalyticsEventSent,t)}function d(e,t){var i=p(e);return"[object Function]"===Object.prototype.toString.call(t)?i.data=t():i.data=t,i.env=n.getEnvironmentData(),i.wm=r.getWalkMeData(),i}function p(e){return{time:(new Date).getTime(),sId:g(),pgId:f(),type:e}}function g(){return i.getCurrentSession()}function f(){return"-1"}}i.register("EventBinder").asCtor(gt);function gt(){var e=this;e.bind=t,e.unbind=n;function t(e,t,n){return e.on(t,n)}function n(e,t,n){return e.off(t,n)}}i.register("EventCollectorWalkMeDataProvider").asCtor(ft).dependencies("WalkMeInfo, InteractionManager, ExternalWalkMeConfig, EventCollectorUserDataProvider, ExtensionConfigManager");function ft(e,t,n,r,i){var o=this;o.getWalkMeData=a;function a(){var o={uId:e.getUserGuid(),euId:e.getEndUserGuid(),euIdSource:e.getEndUserGuidSource(),permId:e.getPermutationId(),language:e.getLanguage(),cVars:e.getCustomVars(),env:e.getEnvironmentId(),interactionGuid:t.getCurrentInteractionGuid(),platform:n.get("platform"),userVars:r.getUserVars()},a=i.get("globalGuid");a&&(o.extensionInstallationGuid=a);var s=i.get("extVersion");return s&&(o.extensionVersion=s),o}}i.register("EventCollectorUserDataProvider").asCtor(ht).dependencies("AnalyticsPropertiesManager");function ht(e){var t=this;t.getUserVars=n;function n(){var t={name:e.getPropertyValue("name"),role:e.getPropertyValue("role"),type:e.getPropertyValue("type"),status:e.getPropertyValue("status"),info:e.getPropertyValue("info")};return t}}i.register("EventsCollectorFeatureEnabledIndicator").asCtor(mt).dependencies("Consts, HostData, FeaturesManager");function mt(e,t,n){var r=this;r.isFeatureEnabled=i;function i(){return n.isReady()&&!n.isFeatureEnabled(e.FEATURES.DisableEventCollection)&&!t.isIE(7)}}i.register("DeployableTypeToEventSenderAppTypeMapper").asCtor(vt).dependencies("Consts");function vt(e){var t=this;t.map=i;var n;function r(){n={},n[e.DEPLOYABLE_TYPE.Task]=e.EVENT_SENDER_EVENT_APPS.Task,n[e.DEPLOYABLE_TYPE.Tutorial]=e.EVENT_SENDER_EVENT_APPS.Walkthru,n[e.DEPLOYABLE_TYPE.Shuttle]=e.EVENT_SENDER_EVENT_APPS.Shuttle,n[e.DEPLOYABLE_TYPE.Launcher]=e.EVENT_SENDER_EVENT_APPS.Launcher,n[e.DEPLOYABLE_TYPE.Content]=e.EVENT_SENDER_EVENT_APPS.Content,n[e.DEPLOYABLE_TYPE.ShoutOut]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,n[e.DEPLOYABLE_TYPE.Survey]=e.EVENT_SENDER_EVENT_APPS.Survey,n[e.DEPLOYABLE_TYPE.AbExperiment]=e.EVENT_SENDER_EVENT_APPS.AbTesting,n[e.AUDIT_TYPE.OPEN_TICKET]=e.EVENT_SENDER_EVENT_APPS.Ticket,n[e.DEPLOYABLE_TYPE.BusinessSolution]=e.EVENT_SENDER_EVENT_APPS.BizFlow}function i(t){return t in n?n[t]:e.EVENT_SENDER_EVENT_APPS.None}r.apply(null,arguments)}i.register("ReportInitiatorMapper").asCtor(St).dependencies("Mapper, InitiatorTypeToAppTypeMapper");function St(e,t){var n=this;n.map=r,n.mapForExtend=o;function r(t){if(!t)return;var n={};e.setIfDefined(n,t.objectId,"id"),e.setIfDefined(n,t.type,"type");var r=i(t);return e.setIfDefined(n,r,"appType"),n}function i(e){if(e.appType)return e.appType;return e.type?t.map(e.type):null}function o(e){return{pInit:r(e)}}}i.register("InitiatorTypeToAppTypeMapper").asCtor(Et).dependencies("Consts");function Et(e){var t=this;t.map=i,t.mapBbcodeInitiator=o;var n;function r(){n={},n[e.STEP_PLAY_INITIATOR_ENUM.LAUNCHER]=e.EVENT_SENDER_EVENT_APPS.Launcher,n[e.STEP_PLAY_INITIATOR_ENUM.TASK]=e.EVENT_SENDER_EVENT_APPS.Task,n[e.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,n[e.STEP_PLAY_INITIATOR_ENUM.WALKTHRU]=e.EVENT_SENDER_EVENT_APPS.Walkthru,n[e.STEP_PLAY_INITIATOR_ENUM.STEP]=e.EVENT_SENDER_EVENT_APPS.Step}function i(e){return n[e]}function o(t){if(!t)return;var n=i(t.type);return{objectId:t.objectId,type:e.STEP_PLAY_INITIATOR_ENUM.BBCODE,appType:n}}r.apply(null,arguments)}i.register("InitiatorTypeToDeployableTypeMapper").asCtor(Tt).dependencies("Consts");function Tt(e){var t=this;t.map=i;var n;function r(){var t=e.STEP_PLAY_INITIATOR_ENUM,r=e.DEPLOYABLE_TYPE;n={},n[t.LAUNCHER]=r.Launcher,n[t.TASK]=r.Task,n[t.SHOUTOUT]=r.ShoutOut,n[t.WALKTHRU]=r.Tutorial,n[t.STEP]=r.Step}function i(e){return n[e]}r.apply(null,arguments)}i.register("StepActionToEventSenderActionAppTypeMapper").asCtor(yt).dependencies("Consts");function yt(e){var t=this;t.map=i;var n;function r(){var t=e.STEP_ACTION,r=e.EVENT_SENDER_EVENT_APPS;n={},n[t.PlayStep]=r.Step,n[t.Branch]=r.Walkthru}function i(e){if(e in n)return n[e];return""}r.apply(null,arguments)}i.register("StepActionToEventSenderStepActionNameMapper").asCtor(Ct).dependencies("Consts, Logger");function Ct(e,t){var n=this;n.map=o;var r;function i(){var t=e.STEP_ACTION,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Redirect]=n.Redirect,r[t.PlayStep]=n.PlayStep,r[t.WaitForCondition]=n.WaitForCondition,r[t.Branch]=n.Branch,r[t.StopWt]=n.StopWt,r[t.Delay]=n.Delay,r[t.Refresh]=n.Refresh,r[t.OpenPlayerMenu]=n.OpenPlayerMenu,r[t.SetWalkMeData]=n.SetWalkMeData,r[t.PassOwnership]=n.PassOwnership}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'step action' to 'event sender action name' for step action: "+e),"")}i.apply(null,arguments)}i.register("BizFlowStepActionToEventSenderActionAppTypeMapper").asCtor(It).dependencies("Consts");function It(e){var t=this;t.map=i;var n;function r(){var t=e.FLOW_ACTION_TYPE,r=e.EVENT_SENDER_EVENT_APPS;n={},n[t.ConnectToBizflow]=r.BizFlow}function i(e){if(e in n)return n[e];return""}r.apply(null,arguments)}i.register("BizFlowStepActionToEventSenderStepActionNameMapper").asCtor(bt).dependencies("Consts, Logger");function bt(e,t){var n=this;n.map=o;var r;function i(){var t=e.FLOW_ACTION_TYPE,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Redirect]=n.Redirect,r[t.WaitForCondition]=n.WaitForCondition,r[t.ConnectToBizflow]=n.Branch,r[t.Stop]=n.StopWt,r[t.Delay]=n.Delay,r[t.Refresh]=n.Refresh,r[t.OpenMenu]=n.OpenPlayerMenu,r[t.Style]=n.Style,r[t.SetData]=n.SetWalkMeData,r[t.PassOwnership]=n.PassOwnership,r[t.ErrorHandling]=n.ErrorHandling,r[t.Split]=n.Split}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for step action: "+e),"")}i.apply(null,arguments)}i.register("BizFlowOnPageActionTypeToEventSenderStepActionNameMapper").asCtor(wt).dependencies("Consts, Logger");function wt(e,t){var n=this;n.map=o;var r;function i(){var t=e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Click]=n.OnPageActionClick,r[t.Hover]=n.OnPageActionHover,r[t.Focus]=n.OnPageActionFocus,r[t.FillText]=n.OnPageActionFillText,r[t.SelectListValue]=n.OnPageActionSelectListValue}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for On-Page-Action: "+e),"")}i.apply(null,arguments)}i.register("SessionManager").asCtor(_t).asSingleton().dependencies("GuidGenerator, CommonEvents, Consts, Logger, WmInternals");function _t(e,t,n,r,i){var o=this;o.getCurrentSession=l,o.setCurrentSession=c,o.beginNewSession=d;var a,s;function u(){s=r.wrapCustomerLog(n.FEATURES_LOGS.WalkMeSession)}function l(){if(!a)return null;return a}function c(e){a=e}function d(){a=e.generateGuid(),t.raiseEvent(n.EVENTS.NewSession,a),i.bind(n.EVENTS.WalkmeReady,function(){t.raiseEvent(n.EVENTS.WalkmeReadyNewSession,a)});var r="New session guid was created : "+a;s(r,2)}u.apply(this,arguments)}i.register("SessionPersister").asCtor(Pt).asSingleton().dependencies("ClientStorageManager, SessionManager, TimerManager, SiteConfigManager, Consts, Logger");function Pt(e,t,n,r,i,o){var a=this;a.loadOrCreate=f,a.startPersisting=m,a.cleanResources=E,a.isNewSession=h;var s,u,l,c=6e4,d=1800,p="wm-ssn";function g(){s=o.wrapCustomerLog(i.FEATURES_LOGS.WalkMeSession)}function f(){var n=e.getData(p);n?(l=!1,s("WalkMe Session restored from storage: "+n,1),t.setCurrentSession(n)):(s("WalkMe Session doesnt exist in storage. Starting new one",1),t.beginNewSession(),l=!0,S())}function h(){return l}function m(){var e=r.get(),t=e.Custom&&e.Custom.sessionLengthOverride;t&&(d=t),v()}function v(){S(),u=n.setWalkmeTimeout(v,c)}function S(){var n=t.getCurrentSession();e.saveData(p,n,d),s("WalkMe Session ("+n+") was saved for "+d+" seconds.",3)}function E(){u&&(u.clear(),u=null)}g.apply(this,arguments)}i.register("SessionEventSender").asCtor(At).dependencies("EventSender, Consts");function At(e,t){var n=this;n.postNewSessionEvent=r;function r(n){var r={type:"walkme"};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.SessionStart,r)}}i.register("InteractionEventsInitiatorsProvider").asCtor(kt).dependencies("Consts, InteractionEventInitiatorFactory, ApiWasCalledNewInteractionIndicator, WidgetOpenedNewInteractionIndicator");function kt(e,t,n,r){var i=this;i.get=s;var o;function a(){o=[],u(e.EVENTS.PlayerClicked),u(e.EVENTS.Launchers.LauncherClicked),u(e.EVENTS.AutoStart.Activated),u(e.EVENTS.PermalinkClicked),u(e.EVENTS.ApiWasCalled,n),u(e.EVENTS.WidgetOpening,r)}function s(){return o}function u(e,n){var r=t.get(n);o.push({eventName:e,callback:r.initiateInteraction})}a.apply(this,arguments)}i.register("InteractionManager").asCtor(Ot).asSingleton().dependencies("GuidGenerator, Logger");function Ot(e,t){var n=this;n.getCurrentInteractionGuid=s,n.setCurrentInteractionGuid=u,n.beginNewInteraction=l;var r,i,o="interaction";function a(){i=t.wrapCustomerLog(o)}function s(){if(!r)return null;return r}function u(e){r=e}function l(){r=e.generateGuid();var t="New interaction guid was created : "+r;i(t,3)}a.apply(this,arguments)}i.register("InteractionInitiationEventListener").asCtor(Nt).dependencies("WmInternals, InteractionEventsInitiatorsProvider");function Nt(e,t){var n=this;n.init=i;function r(){}function i(){for(var e=t.get(),n=0;n<e.length;n++){var r=e[n];o(r)}}function o(t){e.bind(t.eventName,function(e,n){t.callback(n)})}r.apply(this,arguments)}i.register("InteractionEventInitiatorFactory").asCtor(Dt).dependencies("InteractionManager");function Dt(e){var t=this;t.get=n;function n(e){return new r(e)}function r(t){var n=this;n.initiateInteraction=r;function r(n){n=i(n),t&&!t.shouldInitiateNewInteraction(n)||e.beginNewInteraction()}function i(e){var t=o(e);return t&&(e.actualInitiatorType=t),e}function o(e){if(e&&e.initiator&&void 0!=e.initiator.type)return e.initiator.type;return}}}i.register("ApiWasCalledNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.CHAT_AGENT]};return i.create("NewInteractionIndicator",n)}),i.register("WidgetOpenedNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.ATTENTION_GRABBER]};return i.create("NewInteractionIndicator",n)}),i.register("NewInteractionIndicator").asCtor(Lt).asProto().dependencies("inArrayFunc");function Lt(e,t){var n=this;n.shouldInitiateNewInteraction=o;var r;function i(e){r=e.initiatorsThatBeginNewInteraction}function o(t){var n=void 0==t.actualInitiatorType||e(t.actualInitiatorType,r)!=-1;return n}i.apply(this,[t])}i.register("EmbedmentTypeProvider").asCtor(xt).dependencies("Consts, EmbedInElementCompatibilityChecker, EmbedInOwnerDocumentCompatibilityChecker, EmbedInElementJspChecker");function xt(e,t,n,r){var i=this;i.get=o;function o(i,o){var a=i||r.shouldUseEmbedInElementBecauseInJspPane(o);if(a){var s=t.canEmbedInElement(o);return s?e.EMBEDMENT_TYPE.EmbedInElement:e.EMBEDMENT_TYPE.EmbedInElementParent}var u=n.canEmbedInOwnerDocument(o);return u?e.EMBEDMENT_TYPE.EmbedInOwnerDocument:e.EMBEDMENT_TYPE.EmbedInTopDocument}}i.register("EmbedInOwnerDocumentCompatibilityChecker").asCtor(Ft).dependencies("Consts, FeaturesManager, FramesetsUtils, ElementInIframeIndicator");function Ft(e,t,n,r){var i=this;i.canEmbedInOwnerDocument=o;function o(i){var o=r.isInIframe(i),a=!o;return a||t.isFeatureEnabled(e.FEATURES.ForceEmbedInOwnerDocument)||n.shouldHandlePageAsFramesets()}}i.register("EmbedInElementCompatibilityChecker").asCtor(Mt).dependencies("HostData, EmbedInElementCompatibilityConfigProvider, CommonUtils");function Mt(e,t,n){var r=this;r.canEmbedInElement=i;function i(r){var i=e.browser.version,a=t.get(),s=n.doAllMeetCondition(a,function(e){return!r.is(e.elementType)||e.isSupported&&o(i,e)});return s}function o(e,t){return e>=t.minimalSupportedVersion}}i.register("EmbedInElementJspChecker").asCtor(Rt).dependencies("Consts, FeaturesManager, CommonUtils");function Rt(e,t,n){var r=this;r.shouldUseEmbedInElementBecauseInJspPane=i;function i(r){return t.isFeatureEnabled(e.FEATURES.JSP)&&!!n.findJspContainer(r)}}i.register("EmbedInElementCompatibilityConfigProvider").asCtor(Bt).dependencies("HostData");function Bt(e){var t=this;t.get=a;var n=[{elementType:"select",isSupported:!1}],r=[{elementType:"button",isSupported:!1},{elementType:"input",isSupported:!0,minimalSupportedVersion:9},{elementType:"img",isSupported:!0,minimalSupportedVersion:9},{elementType:"iframe",isSupported:!0,minimalSupportedVersion:9},{elementType:"textarea",isSupported:!1}],i=[{elementType:"textarea",isSupported:!1}];function o(){e.isIE()?n=n.concat(r):e.isEdge()&&(n=n.concat(i))}function a(){return n}o()}i.register("EmbedderElement").asCtor(Ut).asProto();function Ut(t){var n=this;n.getOriginElement=a,n.getTopMostElement=s,n.getElementSize=u;var r,i;function o(){i=e(t.topMostElement),r=e(t.originElement)}function a(){return r}function s(){return i}function u(){var e={width:r.outerWidth(),height:r.outerHeight()};return e}o.apply(null,arguments)}i.register("ElementEmbedderFactory").asCtor(Vt).dependencies("EmbedmentTypeProvider, Consts, EmbedInOwnerDocumentElementEmbedderCreator, EmbedInTopDocumentElementEmbedderCreator, EmbedInElementElementEmbedderCreator, EmbedInElementElementParentEmbedderCreator");function Vt(e,t,n,r,o,a){var s=this;s.get=l;function u(){}function l(i,o){var s=e.get(o,i);switch(s){case t.EMBEDMENT_TYPE.EmbedInElement:return c(i);case t.EMBEDMENT_TYPE.EmbedInElementParent:return a.create(i);case t.EMBEDMENT_TYPE.EmbedInOwnerDocument:return n.create(i);case t.EMBEDMENT_TYPE.EmbedInTopDocument:return r.create(i);default:throw new Error("unknown embedment type "+s)}}function c(e){var t=o.create(e),n=a.create(e),r=[t,n],s={elementEmbedders:r};return i.create("FallbackElementEmbedder",s)}u.apply(null,arguments)}i.register("ElementEmbedder").asCtor(Wt).asProto().dependencies("DOMSessionManager");function Wt(e,t){var n=this;n.embed=c,n.reposition=p,n.getElement=l,n.destroy=h;var r,a,s;function u(){r=t.elementEmbedderApi}function l(){return a}function c(t,n,r,i){return f(),s=function(){return s=null,d(t,n,r,i)},e.mutate(s)}function d(e,t,n,i){try{var s=r.embed(e)}catch(u){return o.reject(u)}return a=g(s),p(t,n,i)}function p(e,t,n){return r.reposition(a,e,t,n)}function g(e){var t={topMostElement:e,originElement:e},n=i.create("EmbedderElement",t);return n}function f(){s&&(e.remove(s),s=null)}function h(){f(),r.destroy()}u.apply(null,arguments)}var Gt=function(){function e(e,t,n,r){this.elementAttacher=e,this.elementPositioner=t,this.domSessionManager=n,this._elementToEmbedInto=r.elementToEmbedInto,this._elementContainerProvider=r.elementContainerProvider,this._positionProvider=r.positionProvider}return e.prototype.embed=function(e){var t=this._elementContainerProvider.get(this._elementToEmbedInto),n=this.elementAttacher.attachCopy(t,e);return n},e.prototype.reposition=function(e,t,n,r){var i=this;return this.cancelReposition(),this._repositionCallback=function(){try{return i.doReposition(e,t,n,r)}catch(a){return o.reject(a)}},this.domSessionManager.measure(this._repositionCallback)},e.prototype.destroy=function(){this.cancelReposition()},e.prototype.cancelReposition=function(){if(!this._repositionCallback)return;this.domSessionManager.remove(this._repositionCallback),this._repositionCallback=null},e.prototype.doReposition=function(e,t,n,r){var i=this;this._repositionCallback=null;var o=this.getPosition(e,t,n);return r&&(o=r.refine(o)),this.domSessionManager.mutate(function(){i.setPosition(e,o)})},e.prototype.getPosition=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto),i=this._positionProvider.getPosition(this._elementToEmbedInto,e,t,n,r);return i},e.prototype.setPosition=function(e,t){var n=e.getOriginElement();this.elementPositioner.setPosition(n,t)},e}();i.register("ElementEmbedderApi").asCtor(Gt).asProto().dependencies("ElementAttacher, ElementPositioner, DOMSessionManager"),i.register("EmbedInElementElementEmbedder").asCtor(Ht).asProto().dependencies("EmbedInElementWrapperCreator, ElementAttacher, DOMSessionManager");function Ht(e,t,n,r){var a=this;a.embed=p,a.reposition=f,a.getElement=d,a.destroy=v;var s,u,l;function c(){s=r.elementEmbedderApi}function d(){return u}function p(e,t,r,i){return m(),l=function(){return l=null,g(e,t,r,i)},n.mutate(l)}function g(n,r,i,a){var l=e.create(i);t.attach(l,n);try{var c=s.embed(l)}catch(d){return o.reject(d)}return u=h(c),f(r,i,a)}function f(e,t,n){return s.reposition(u,e,t,n)}function h(e){var t=e.children()[0],n={topMostElement:e,originElement:t},r=i.create("EmbedderElement",n);return r}function m(){l&&(n.remove(l),l=null)}function v(){m(),s.destroy()}c.apply(null,arguments)}i.register("FallbackElementEmbedder").asCtor(jt).asProto().dependencies("FallbackElementEmbedderVisibilityChecker");function jt(e,t){var n=this;n.embed=u,n.reposition=f,n.getElement=s,n.destroy=h;var r,i;function a(){r=t.elementEmbedders}function s(){return i.getElement()}function u(e,t,n,r){return d(e,t,n,r).then(l,function(){return c(e,t,n,r)})}function l(e){i=e}function c(e,t,n,o){return i=r[r.length-1],i.embed(e,t,n,o)}function d(e,t,n,i){for(var a=o.reject(),s=0;s<r.length-1;s++)a=a.then(null,function(r){return function(){return p(r,e,t,n,i)}}(r[s]));return a}function p(e,t,n,r,i){return e.embed(t,n,r,i).then(function(){return new o(function(t,n){g(e)?t(e):n()})})}function g(t){var n=t.getElement();if(e.isVisible(n))return!0;var r=n.getTopMostElement();return r.remove(),!1}function f(e,t,n,r){return i.reposition(e,t,n,r)}function h(){i.destroy()}a.apply(null,arguments)}i.register("FallbackElementEmbedderVisibilityChecker").asCtor(Yt).dependencies("HostData");function Yt(e){var t=this;t.isVisible=n;function n(e){var t=e.getOriginElement();return t.is(":mt_visible")}}i.register("DocumentHeadProviderFactory").asCtor(zt).dependencies("Consts, OwnerDocumentHeadProvider, TopDocumentHeadProvider");function zt(e,t,n){var r=this;r.get=o;function i(){}function o(r){if(r==e.EMBEDMENT_TYPE.EmbedInTopDocument)return n;return t}i()}i.register("OwnerDocumentHeadProvider").asCtor(Qt);function Qt(){var t=this;t.get=n;function n(t){return e("head",t[0].ownerDocument)}}i.register("TopDocumentHeadProvider").asCtor(Kt);function Kt(){var t=this;t.get=n;function n(){return e("head")}}i.register("EmbedInElementPositionProvider").asCtor(qt).dependencies("RelativeToElementElementPositionAndSizeProvider, PositionProvider");function qt(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,a,s){var u=r.getElementSize(),l=e.get(n),c=t.getPosition(l,u,i,a),d=o(c,s,r.getTopMostElement());return d}function o(e,t,n){var r=t.offset(),i=n.offset(),o={top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)};return o}r.apply(null,arguments)}i.register("EmbedInElementParentPositionProvider").asCtor(Xt).dependencies("EmbedInElementPositionProvider");function Xt(e){var t=this;t.getPosition=r;function n(){}function r(t,n,r,o,a){var s=e.getPosition(t,n,r,o,a),u=i(s,t,a);return u}function i(e,t,n){var r=t.offset(),i=n.offset(),o={top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)};return o}n.apply(null,arguments)}i.register("EmbedInOwnerDocumentPositionProvider").asCtor(Jt).dependencies("EmbedInOwnerDocumentElementPositionAndSizeProvider, PositionProvider");function Jt(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o,a){var s=e.get(n),u=r.getElementSize(),l=t.getPosition(s,u,i,o);return l}r.apply(null,arguments)}i.register("EmbedInTopDocumentPositionProvider").asCtor($t).dependencies("EmbedInTopDocumentElementPositionAndSizeProvider, PositionProvider");function $t(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o,a){var s=e.get(n),u=r.getElementSize(),l=t.getPosition(s,u,i,o);return l}r.apply(null,arguments)}i.register("RelativeToElementElementPositionAndSizeProvider").asCtor(Zt).dependencies("PositionHelper");function Zt(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getEmbedInElementPosition(t,n);return r}n.apply(null,arguments)}i.register("EmbedInOwnerDocumentElementPositionAndSizeProvider").asCtor(en).dependencies("PositionHelper");function en(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getElementBounds(t,!0,window,n);return r}n.apply(null,arguments)}i.register("EmbedInTopDocumentElementPositionAndSizeProvider").asCtor(tn).dependencies("PositionHelper");function tn(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getElementBounds(t,!1,window,n);return r}n.apply(null,arguments)}i.register("InsidePositionCalculator").asCtor(nn).dependencies("Consts");function nn(e){var t=this;t.calculate=r;function n(){}function r(t,n,r,i){var o,a;switch(t){case e.POSITION_TYPE.Top:o=n.top,a=r.left-i.width/2;break;case e.POSITION_TYPE.Right:o=r.top-i.height/2,a=n.right-i.width;break;case e.POSITION_TYPE.Bottom:o=n.bottom-i.height,a=r.left-i.width/2;break;case e.POSITION_TYPE.Left:o=r.top-i.height/2,a=n.left;break;case e.POSITION_TYPE.TopLeft:o=n.top,a=n.left;break;case e.POSITION_TYPE.TopRight:o=n.top,a=n.right-i.width;break;case e.POSITION_TYPE.BottomRight:o=n.bottom-i.height,a=n.right-i.width;break;case e.POSITION_TYPE.BottomLeft:o=n.bottom-i.height,a=n.left;break;case e.POSITION_TYPE.Center:o=r.top-i.height/2,a=r.left-i.width/2}return{top:o,left:a}}n.apply(null,arguments)}i.register("OutsidePositionCalculator").asCtor(rn).dependencies("Consts");function rn(e){var t=this;t.calculate=r;function n(){}function r(t,n,r,i){var o,a;switch(t){case e.POSITION_TYPE.Top:o=n.top-i.height,a=r.left-i.width/2;break;case e.POSITION_TYPE.Right:o=r.top-i.height/2,a=n.right;break;case e.POSITION_TYPE.Bottom:o=n.bottom,a=r.left-i.width/2;break;case e.POSITION_TYPE.Left:o=r.top-i.height/2,a=n.left-i.width;break;case e.POSITION_TYPE.TopLeft:o=n.top-i.height,a=n.left-i.width;break;case e.POSITION_TYPE.TopRight:o=n.top-i.height,a=n.right;break;case e.POSITION_TYPE.BottomRight:o=n.bottom,a=n.right;break;case e.POSITION_TYPE.BottomLeft:o=n.bottom,a=n.left-i.width}return{top:o,left:a}}n.apply(null,arguments)}i.register("PositionCalculatorFactory").asCtor(on).dependencies("Consts, InsidePositionCalculator, OutsidePositionCalculator");function on(e,t,n){
var r=this;r.get=o;function i(){}function o(r){switch(r){case e.POSITION_PERIMETER_TYPE.Outside:return n;case e.POSITION_PERIMETER_TYPE.Inside:return t}}i.apply(null,arguments)}i.register("ElementPositioner").asCtor(an);function an(){var e=this;e.setPosition=n;function t(){}function n(e,t){e.css("top",t.top+"px"),e.css("left",t.left+"px")}t.apply(null,arguments)}i.register("PositionProvider").asCtor(sn).dependencies("PositionCalculatorFactory, PositionHelper");function sn(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o){var a=t.getCenterPositionByBounds(n),s=e.get(i),u=s.calculate(o,n,a,r);return u}r.apply(null,arguments)}i.register("EmbedInElementContainerProvider").asCtor(un);function un(){var e=this;e.get=n;function t(){}function n(e){return e}t.apply(null,arguments)}i.register("EmbedInElementParentContainerProvider").asCtor(ln);function ln(){var e=this;e.get=n;function t(){}function n(e){return e.parent()}t.apply(null,arguments)}i.register("EmbedInOwnerDocumentContainerProvider").asCtor(cn).dependencies("TopContainerProvider");function cn(e){var t=this;t.get=r;function n(){}function r(t){return e.getTopContainer(t)}n.apply(null,arguments)}i.register("EmbedInTopDocumentContainerProvider").asCtor(dn).dependencies("TopContainerProvider");function dn(e){var t=this;t.get=r;function n(){}function r(){return e.getTopContainer(null,!0)}n.apply(null,arguments)}i.register("ElementAttacher").asCtor(pn);function pn(){var e=this;e.attach=t,e.attachCopy=n,e.detach=r,e.detachByElement=i;function t(e,t){var n=t.appendTo(e);return n}function n(e,t){e.append(t[0].outerHTML);var n=e.children().filter(":last-child");return n}function r(e,t){var n=e.find(t);n&&n.remove()}function i(e){try{e&&e.remove()}catch(t){}}}i.register("EmbedInElementElementEmbedderCreator").asCtor(gn).dependencies("EmbedInElementContainerProvider, EmbedInElementPositionProvider");function gn(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("EmbedInElementElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInElementElementParentEmbedderCreator").asCtor(fn).dependencies("EmbedInElementParentContainerProvider, EmbedInElementParentPositionProvider");function fn(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("EmbedInElementElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInOwnerDocumentElementEmbedderCreator").asCtor(hn).dependencies("EmbedInOwnerDocumentContainerProvider, EmbedInOwnerDocumentPositionProvider");function hn(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("ElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInTopDocumentElementEmbedderCreator").asCtor(mn).dependencies("EmbedInTopDocumentContainerProvider, EmbedInTopDocumentPositionProvider");function mn(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("ElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInElementWrapperCreator").asCtor(vn).dependencies("Consts");function vn(e){var t=this;t.create=r;function n(){}function r(e){var t=mtjQuery(document.createElement("div"));return a(t),i(t,e),s(t),t}function i(e,t){e.css("position","relative"),e.css("display","inline-block"),e.css("float",o(t))}function o(t){var n="left";switch(t){case e.POSITION_TYPE.Right:case e.POSITION_TYPE.TopRight:case e.POSITION_TYPE.BottomRight:n="right"}return n}function a(e){e.css("display","-moz-inline-stack")}function s(e){e.css("zoom","1"),e.css("*display","inline")}n.apply(null,arguments)}i.register("ClickIconExecutionBehavior").asCtor(Sn).asProto().dependencies("CommonUtils");function Sn(t,n){var r=this;r.applyBehavior=u;var i,o,a=2e3;function s(e){i=e.clickAction}function u(e){var t=e.getTopMostElement();l(t)}function l(t){t.click(function(t){c()&&(e(this).blur(),i())})}function c(){var e=(new Date).getTime(),t=e-o;if(null!=o&&t<=a)return!1;return o=e,!0}s.apply(null,[n])}i.register("DefaultIconExecutionBehavior").asCtor(En);function En(){var e=this;e.applyBehavior=n;function t(){}function n(e){var t=e.getTopMostElement();r(t)}function r(e){e.click(function(e){e.preventDefault(),e.stopPropagation()}),e.hover(function(e){e.stopPropagation()})}t.apply(null,arguments)}i.register("DefaultIconUiBehavior").asCtor(Tn).dependencies("CommonUtils");function Tn(e){var t=this;t.applyBehavior=r;function n(){}function r(e){var t=e.getTopMostElement();i(t),o(t)}function i(t){e.addTabIndex(t)}function o(e){e.css("cursor","pointer")}n.apply(null,arguments)}i.register("TolltipIconUiBehavior").asCtor(yn).asProto().dependencies("HtmlDecoder");function yn(e,t){var n=this;n.applyBehavior=o;var r;function i(e){r=e.tooltipText}function o(e){a(e)}function a(e){var t=e.getTopMostElement(),n=s();t.attr("title",n)}function s(){var t=e.decodeHtml(r,["&",'"',"'",">","<"]);return t}i.apply(null,[t])}i.register("ContentIconCreator").asCtor(Cn).dependencies("Consts, DocumentHeadProviderFactory, EmbedmentTypeProvider, ElementEmbedderFactory");function Cn(e,t,n,r){var o=this;o.create=s;function a(){}function s(t){var n=c(t);if(t.contentData.kind==e.ICON_CONTENT_KIND.Image)return u(n,t);return l(n,t)}function u(e,t){var n={contentData:t.contentData,cssClasses:t.cssClasses,zindex:t.zindex,iconEmbedder:e,isAnimated:t.isAnimated};return i.create("ImageIcon",n)}function l(e,r){var o=n.get(r.isEmbedInElement,r.element),a=t.get(o),s={headToEmbedFontsIn:a.get(r.element),text:r.contentData.text,cssClasses:r.cssClasses,zindex:r.zindex,iconEmbedder:e};return r.contentData.cssClassName&&r.cssClasses.positionElementCssClassNames.push(r.contentData.cssClassName),i.create("TextIcon",s)}function c(e){var t=r.get(e.element,e.isEmbedInElement),n={embedder:t,perimeterType:e.perimeterType,attachmentSide:e.attachmentSide,positionCustomOffset:e.positionCustomOffset,growingDirection:e.growingDirection,element:e.element};return i.create("IconEmbedder",n)}a()}i.register("CustomTemplateIconParamsProvider").asCtor(In).dependencies("LauncherCustomImagesProvider, Consts");function In(e,t){var n=this;n.getFromCustomTemplate=r;function r(n){var r=e.getById(n);if(!r)return null;var i={mainImageUrl:r.Url,hoverImageUrl:r.Hover,clickImageUrl:r.Click,text:r.CustomText,cssClassName:"custom-launcher-"+n,kind:r.Url?t.ICON_CONTENT_KIND.Image:t.ICON_CONTENT_KIND.Text};return i}}i.register("Icon").asCtor(bn).asProto().dependencies("ElementAttacher, IconBehaviorsApplier");function bn(e,t,n){var r=this;r.show=l,r.destroy=p,r.reposition=g;var i,o,a,s;function u(){i=n.concreteIcon,o=n.iconElementUniqueIdentifier,a=n.behaviors}function l(){return i.show().then(function(e){return s=e,c(),d(),s})}function c(){var e=s.getTopMostElement();e.addClass(o),e.addClass("walkme-not-embed")}function d(){t.applyBehaviors(s,a)}function p(){s&&(e.detachByElement(s.getTopMostElement()),s=void 0),i.destroy()}function g(){i.reposition()}u()}i.register("IconBehaviorsApplier").asCtor(wn);function wn(){var e=this;e.applyBehaviors=n;function t(){}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.applyBehavior(e)}}t()}i.register("IconCreator").asCtor(_n).dependencies("ContentIconCreator, DefaultIconUiBehavior, DefaultIconExecutionBehavior");function _n(e,t,n){var r=this;r.create=a;function o(){}function a(r){var o=[t,n],a=e.create(r),s={concreteIcon:a,behaviors:o,iconElementUniqueIdentifier:"walkme-icon-root-"+r.uniqueIdentifierType+"-"+r.uniqueIdentifierId};return i.create("Icon",s)}o()}i.register("IconCreatorParamsProvider").asCtor(Pn).dependencies("Consts, CommonUtils");function Pn(e,t){var n=this;n.get=r;function r(n,r){var i=(t.defaultValue(r.isAnimated,!1),{element:n,uniqueIdentifierType:r.uniqueIdentifierType,uniqueIdentifierId:r.uniqueIdentifierId,isEmbedInElement:t.defaultValue(r.isEmbedInElement,!1),contentData:r.contentData,isAnimated:r.isAnimated,attachmentSide:r.attachmentSide,zindex:t.defaultValue(r.zindex,"2147483627"),perimeterType:parseInt(t.defaultValue(r.perimeterType,e.POSITION_PERIMETER_TYPE.Outside)),positionCustomOffset:{top:parseInt(t.defaultValue(r.positionTopCustomOffset,0)),left:parseInt(t.defaultValue(r.positionLeftCustomOffset,0))},cssClasses:{contentElementCssClassNames:r.contentElementCssClassNames,positionElementCssClassNames:r.positionElementCssClassNames}});return i}}i.register("IconEmbedder").asCtor(An).asProto().dependencies("IconPositionRefiner, ElementPositioner, CustomCssSetter");function An(e,t,n,r){var i=this;i.embed=p,i.reposition=g,i.destroy=f;var o,a,s,u,l,c;function d(){o=r.embedder,a=r.perimeterType,s=r.attachmentSide,u=r.positionCustomOffset,l=r.growingDirection,c=r.element}function p(e){return n.setCustomCssIfNeeded(c),o.embed(e,a,s,{refine:h}).then(function(){return o.getElement()})}function g(){return o.reposition(a,s,{refine:h})}function f(){o.destroy()}function h(t){var n=e.refine(t,u);return n}d()}i.register("IconHtmlElementCreator").asCtor(kn).dependencies("CssClassesAppender, IconPositionElementCreator");function kn(e,t){var n=this;n.createElement=i;function r(){}function i(e,n,r){o(e,n.contentElementCssClassNames);var i=t.create(r);return a(i,n.positionElementCssClassNames),i.html(e),i}function o(t,n){e.appendClasses(t,["walkme-icon-image-div"]),e.appendClasses(t,n)}function a(t,n){e.appendClasses(t,["walkme-custom-icon-outer-div"]),e.appendClasses(t,n)}r()}i.register("IconContentProvider").asCtor(On).dependencies("PredefinedShapeImageIconParamsProvider, CustomTemplateIconParamsProvider, PredefinedHtmlShapeIconParamsProvider");function On(e,t,n){var r=this;r.get=o;function i(){}function o(r){if(r.TemplateId)return"htmlShape"==r.Type?n.getFromCustomTemplate(r.TemplateId):t.getFromCustomTemplate(r.TemplateId);if("htmlShape"==r.Type)return n.getFromSettingsImageObject(r.Predefined);return e.getFromSettingsImageObject(r.Predefined)}i.apply(null,arguments)}i.register("IconsFilterer").asCtor(Nn).asProto();function Nn(t){var n=this;n.getById=o;var r;function i(){r=t.getImages}function o(t){var n=e(r()).filter(function(e,n){return n.Id==t});if(n)return n[0];return null}i()}i.register("LauncherCustomImagesProvider").dependencies("IconTemplates").asFunction(function(e){return i.create("IconsFilterer",{getImages:function(){return e.customImages}})}),i.register("LauncherHtmlShapesProvider").dependencies("IconTemplates").asFunction(function(e){return i.create("IconsFilterer",{getImages:function(){return e.htmlImages}})}),i.register("IconImageUrlsToAbsoluteUrlsConverter").asCtor(Dn).dependencies("PredefinedIconsFolderProvider");function Dn(e){var t=this;t.convert=n;function n(e){e.mainImageUrl=r(e.mainImageUrl),e.hoverImageUrl=r(e.hoverImageUrl),e.clickImageUrl=r(e.clickImageUrl)}function r(t){if(!t||i(t))return t;var n=e.get();return n+t}function i(e){return 0==e.indexOf("http")}}i.register("ImageIconAnimatedContentState").asCtor(Ln).asProto();function Ln(e){var t=this;t.applyState=o;var n,r;function i(e){n=e.imageSize,r=e.imageUrl}function o(e){e.stop(),a(e),s(e)}function a(e){e.css("background-image",'url("'+r+'")')}function s(e){e.animate({width:n.width+"px",height:n.height+"px"})}i.apply(null,[e])}i.register("ImageIconNotAnimatedContentState").asCtor(xn).asProto();function xn(e){var t=this;t.applyState=o;var n,r;function i(e){n=e.imageSize,r=e.imageUrl}function o(e){a(e),s(e)}function a(e){e.css("background-image",'url("'+r+'")')}function s(e){e.css("height",n.height+"px"),e.css("width",n.width+"px")}i.apply(null,[e])}i.register("ImageIconContentStateFactory").asCtor(Fn);function Fn(){var e=this;e.get=n;function t(){}function n(e,t,n){var r={imageUrl:t,imageSize:n};return e?i.create("ImageIconAnimatedContentState",r):i.create("ImageIconNotAnimatedContentState",r)}t.apply(null,arguments)}i.register("ImageIconStatesProvider").asCtor(Mn).dependencies("Consts, ImageIconContentStateFactory");function Mn(e,t){var n=this;n.getStates=i;function r(){}function i(n,r){var i={},o=t.get(r,n.mainImageUrl,n.mainImageSize);if(i[e.ICON_CONTENT_STATE.Regular]=o,n.clickImageSize){var a=t.get(r,n.clickImageUrl,n.clickImageSize);i[e.ICON_CONTENT_STATE.Click]=a}if(n.hoverImageSize){var s=t.get(r,n.hoverImageUrl,n.hoverImageSize);i[e.ICON_CONTENT_STATE.Hover]=s}return i}r()}i.register("ImageIcon").asCtor(Rn).asProto().dependencies("IconHtmlElementCreator, ImageIconElementCreator, ImageIconResourcesLoader, ImageIconEventsBinder, Consts, ImageIconStatesProvider");function Rn(e,t,n,r,i,o,a){var s=this;s.show=h,s.reposition=T,s.destroy=y;var u,l,c,d,p,g;function f(){u=a.contentData,l=a.cssClasses,c=a.zindex,d=a.iconEmbedder,p=a.isAnimated}function h(){return n.load(u).then(m).then(v)}function m(e){g=o.getStates(e,p)}function v(){var n=t.create();E(n,i.ICON_CONTENT_STATE.Regular);var o=e.createElement(n,l,c);return d.embed(o).then(function(e){return n=e.getOriginElement().children().first(),r.bind(n,g,S),e})}function S(e,t){E(e,t),T()}function E(e,t){g[t].applyState(e)}function T(){return d.reposition()}function y(){d.destroy()}f()}i.register("ImageIconElementCreator").asCtor(Bn);function Bn(){var e=this;e.create=n;function t(){}function n(){var e=mtjQuery(document.createElement("div"));return e.css("background-repeat","no-repeat"),e}t.apply(this,arguments)}i.register("ImageIconEventsBinder").asCtor(Un).dependencies("Consts");function Un(e){var t=this;t.bind=n;function n(t,n,o){n[e.ICON_CONTENT_STATE.Hover]&&r(t,o),n[e.ICON_CONTENT_STATE.Click]&&i(t,n,o)}function r(t,n){var r=function(){n(t,e.ICON_CONTENT_STATE.Hover)},i=function(){n(t,e.ICON_CONTENT_STATE.Regular)};t.hover(r,i)}function i(t,n,r){var i=o(n),a=function(){r(t,e.ICON_CONTENT_STATE.Click)},s=function(){r(t,i)};t.on("touchend mouseup",s).on("touchstart mousedown",a)}function o(t){return t[e.ICON_CONTENT_STATE.Hover]?e.ICON_CONTENT_STATE.Hover:e.ICON_CONTENT_STATE.Regular}}i.register("ImageIconResourcesLoader").asCtor(Vn).dependencies("ImageLoader, CommonUtils, IconImageUrlsToAbsoluteUrlsConverter");function Vn(e,t,n){var r=this;r.load=a;function i(){}function a(e){n.convert(e);var r={},i=[];return s(r,i,"mainImageUrl","mainImageSize",e),e.hoverImageUrl&&s(r,i,"hoverImageUrl","hoverImageSize",e),e.clickImageUrl&&s(r,i,"clickImageUrl","clickImageSize",e),new o(function(e,n){var o={functionsToExecute:i,successCallback:function(){e(r)},failCallback:n};t.executeParallel(o)})}function s(t,n,r,i,o){function a(e){t[i]=e,t[r]=o[r]}n.push(function(t){e.getImageSize(o[r],function(e){a(e),t()})})}i()}i.register("PredefinedIconsFolderProvider").asCtor(Wn).dependencies("ResourceManager");function Wn(e){var t=this;t.get=n;function n(){var t="/player/resources/launchers/",n=e.getResourcePath(t);return n}}i.register("IconPositionElementCreator").asCtor(Gn).dependencies("UiUtils, TopMostCssStyleSettter");function Gn(e,t){var n=this;n.create=i;function r(){}function i(n){var r=mtjQuery(document.createElement("div"));return e.addBrowserSpecificClasses(r),e.setLangAttribute(r),r.css("position","absolute"),r.css("display","inline"),r.css("left",0),r.css("top",0),t.setTopMostCssStyle(r,n),r}r.apply(null,arguments)}i.register("IconPositionRefiner").asCtor(Hn);function Hn(){var e=this;e.refine=t;function t(e,t){var r={top:e.top,left:e.left};return n(r,t),r}function n(e,t){e.top+=t.top,e.left+=t.left}}i.register("PredefinedShapeImageIconParamsProvider").asCtor(jn).dependencies("CommonUtils, Consts");function jn(e,t){var n=this;n.getFromSettingsImageObject=r;function r(n){var r=n.data.shape+"-"+n.data.color,i={mainImageUrl:r+".png",kind:t.ICON_CONTENT_KIND.Image,hoverImageUrl:e.isValueTrue(n.data.hover)?r+"-hover.png":null,clickImageUrl:e.isValueTrue(n.data.click)?r+"-click.png":null};return i}}i.register("PredefinedHtmlShapeIconParamsProvider").asCtor(Yn).dependencies("LauncherHtmlShapesProvider, Consts");function Yn(e,t){var n=this;n.getFromSettingsImageObject=r,n.getFromCustomTemplate=i;function r(e){var n={text:e.data.customText,cssClassName:e.data.customClass,kind:t.ICON_CONTENT_KIND.Text};return n}function i(n){var r=e.getById(n),i={text:r.Text,kind:t.ICON_CONTENT_KIND.Text,cssClassName:"html-launcher-"+r.Shape+"-"+r.Color};return i}}i.register("SmartTipIconCreator").asCtor(zn).dependencies("IconCreator, IconCreatorParamsProvider, IconContentProvider, SmartTipIconStylingProvider");function zn(e,t,n,r){var i=this;i.create=a;function o(){}function a(n,r,i,o){var a=s(n,r,o),u=t.get(i,a);return e.create(u,i)}function s(e,t,i){var o=r.get(t,i),a=n.get(o),s={uniqueIdentifierType:"SmartTip",uniqueIdentifierId:e.Id,isEmbedInElement:e.Settings.embedInParent,attachmentSide:e.Settings.Position,zindex:e.Settings["z-index"],perimeterType:e.Settings.context,isAnimated:e.Settings.animated,growingDirection:e.Settings.direction,positionTopCustomOffset:e.Settings.topOffset,positionLeftCustomOffset:e.Settings.leftOffset,contentElementCssClassNames:[],positionElementCssClassNames:u(e,a),contentData:a};return s}function u(e,t){var n=[];return n.push("walkme-icon-position-smartTip-id-"+e.Id),t.customClass&&n.push(t.customClass),n}o.apply(null,arguments)}i.register("SmartTipIconStylingProvider").asCtor(Qn);function Qn(){var e=this;e.get=n;function t(){}function n(e,t){if(e.TemplateId)return{TemplateId:e.TemplateId};if(e.Settings.imageObject){if("htmlShape"==e.Settings.imageObject.type)return{TemplateId:e.Settings.imageObject.data.id,Predefined:e.Settings.imageObject,Type:e.Settings.imageObject.type};return{Predefined:e.Settings.imageObject}}if(t.Icon.TemplateId)return{TemplateId:t.Icon.TemplateId};if("htmlShape"==t.Icon.Predefined.type)return{Predefined:t.Icon.Predefined,Type:t.Icon.Predefined.type};return{Predefined:t.Icon.Predefined}}t.apply(null,arguments)}i.register("TextIcon").asCtor(Kn).asProto().dependencies("TextIconResourcesLoader, IconHtmlElementCreator, TextIconElementCreator");function Kn(e,t,n,r){var i=this;i.show=d,i.reposition=g,i.destroy=f;var o,a,s,u,l;function c(){o=r.headToEmbedFontsIn,a=r.text,s=r.cssClasses,u=r.zindex,l=r.iconEmbedder}function d(){return e.load(o).then(p)}function p(){var e=n.create(a),r=t.createElement(e,s,u);return l.embed(r)}function g(){return l.reposition()}function f(){l.destroy()}c()}i.register("TextIconElementCreator").asCtor(qn);function qn(){var e=this;e.create=n;function t(){}function n(e){var t=mtjQuery(document.createElement("div"));return t.html(e),t}t.apply(null,arguments)}F.register(D.PLATFORM.Web,function(){i.register("TextIconResourcesLoader").asCtor(Xn).dependencies("ResourceManager, FontsData")}),F.register(D.PLATFORM.Android,function(){i.register("TextIconResourcesLoader").asCtor(Xn).dependencies("ResourceManager, FontsData")}),F.register(D.PLATFORM.iOS,function(){i.register("TextIconResourcesLoader").asCtor(Xn).dependencies("ResourceManager, FontsData")});function Xn(e,t){var n=this;n.load=r;function r(n){return new o(function(r,i){e.fonts([t.get("walkme-opensans")],n,r,i)})}}F.register(D.PLATFORM.MobileWeb,function(){i.register("TextIconResourcesLoader").asCtor(Jn).dependencies("ResourceManager, FontsData")});function Jn(e,t){var n=this;n.load=r;function r(n){return new o(function(r,i){e.fonts([t.get("walkme-opensans"),t.get("lib-font")],n,r,i)})}}i.register("AuditingEnabledIndicator").asCtor($n).dependencies("CommonUtils, FeaturesManager, SiteConfigManager, RecorderServerManager, CorsSupportIndicator");function $n(e,t,n,r,o){var a=this;a.isEnabled=s;function s(){return!u()}function u(){var a=!1,s=!!window.wm_no_audit,u=!!e.getWindowCookie("wm-no-audit"),l=!t.isFeatureEnabled("blockJsonp")||o.hasCorsSupport(),c=n.get(),d=!!c.Settings&&!!c.Settings.noAuditCond&&i.get("ConditionTreeEvaluator").evaluate(c.Settings.noAuditCond);return!l||!r.get()||t.isFeatureEnabled("noAudit")||a||s||u||d}}i.register("GoalsManagerParams").asInstance({checkInterval:2e3}),i.register("GoalsManager").asCtor(Zn).dependencies("GoalsManagerParams, Logger, HostData, ClientStorageManager, Consts, CommonEvents, ConditionCheckerFactory, UserGuidContainer");function Zn(e,t,n,r,i,o,a,s){var l,c,d=500,p=5e3,g="Conditions",f=this,h=null,m={},v=0,S={},E=0,T=!1,y="wm-gb",C=86400;function I(){h=void 0==e.checkInterval?p:e.checkInterval,l=t.wrapCustomerLog(u)}function b(e,t,n){S[e.Id]={relatedObjectId:e.RelatedObjectId,goalType:e.GoalType,evaluator:n,goalCompletedFunc:t.goalCompletedFunc,identifier:t.identifier,interactionGuid:t.interactionGuid}}function w(e,t){var p=m[e.Id];if(p){if(e.IsLinkedGoal){var g=kf("Skipping goal watch - Goal is already watched : {0}, type: {1}",e.Name,e.GoalType);return l(g,3),null}f.removeGoalWatch(e.Id)}var S={trackUIChange:!0,evaluationPollingIntervalMs:h,featureName:u,elementName:"Goal: "+e.Name},I=a.createOld(S);m[e.Id]=e,v++,b(e,t,I);var w=t.identifier,_=w?kf(", PlayGuid of : {0}",w):"",g=kf("Start watching Goal : {0}, type: {1} {2}",e.Name,e.GoalType,_);return l(g,3),I.onValueChanged(function(t){t&&P(e)}),I.onPreEvaluation(function(t,n){n||(T?T=!1:0===E&&(c=0,l("============================ CHECKING GOALS ==============================================================",2)),e.goalStart=(new Date).getTime()),o.sendAutomationEvent("CheckingGoal",{GoalId:e.Id,GoalName:e.Name});var r=n?" (async)":"",i=kf("Goal: {0} - Checking Goal , id : {1}, type: {2}, RelatedObjectId: {3}{4}",e.Name,e.Id,e.GoalType,e.RelatedObjectId,r);l(i,3)}),I.onEvaluated(function(t,a){var u=(new Date).getTime(),p=u-e.goalStart,h=a?" (async)":"";g=kf("Goal: {0} - checking finished, id : {1}, took {2} ms{3}",e.Name,e.Id,p,h),l(g,4),o.deprecatedRaiseEvent(i.EVENTS.Goals.ConditionEvaluated,{goal:e},{playGUID:w}),a||(E++,c+=p,E>=v&&(l("Done checking "+E+" Goals. took: "+c+" ms",2),l("============================ DONE CHECKING GOALS =========================================================",2),E=0),c>d&&(l("Goals tracking time until now is "+c+" ms. It broke the time limit of "+d+" ms. Stopped tracking current goals."),r.getData(y)||(g=kf("Goals tracking broke limit and was stopped - user id: {0}, end user id: {1}, time: {2}, browser: {3}, url: {4}",s.getUserGuid(),_makeTutorial.getEndUserId(),c,n.browser.string,window.location.href),_makeTutorial.Logger.error({},g),r.saveData(y,!0,C)),f.removeAllGoalsWatch()))}),e}this.addGoalsWatch=function(e,t){for(var n=e.length-1;n>=0;n--)for(var r=e[n],i=e.length-1;i>n;i--){var o=e[i];r.Id==o.Id&&e.splice(i,1)}for(var a=[],n=0;n<e.length;n++){var s=w(e[n],t);s&&a.push(s)}for(var n=0;n<a.length;n++){var u=a[n],l=_(u.Id);l.evaluateAsync(u.Settings[g])}},this.cleanResources=function(){for(var e in m){var t=_(e);t&&t.cleanResources()}},this.removeGoalWatch=function(e){if(l(e,5,"goalProblem"),l(m[e],5,"goalProblem"),!m[e])return;var t=_(e);--E,--v,0==E&&v>0&&(T=!0),t&&t.cleanResources(),delete m[e],delete S[e]},this.removeAllGoalsWatch=function(){f.cleanResources(),m={},S={},v=0,E=0},this.completeGoalById=function(e){var t=m[e];if(!t)return void l("Could not complete goal with id "+e+" - it was already completed or does not exist.",3);P(t)};function _(e){return S[e].evaluator}function P(e){l('Goal "'+e.Name+'" Reached! ',1);var n=e.Id,r=S[n],a=f.createGoalCompletedParams(e,r);try{r.goalCompletedFunc&&r.goalCompletedFunc(a)}catch(s){t.error(s,"completing goal callback threw an exception.")}f.removeGoalWatch(e.Id),o.raiseEvent(i.EVENTS.Goals.GoalReached,A(r,e)),o.sendAutomationEvent(i.EVENTS.Goals.GoalReached,{GoalId:e.Id,GoalName:e.Name})}function A(e,t){return{goal:t,identifier:e.identifier,interactionGuid:e.interactionGuid,GoalId:t.Id,GoalName:t.Name}}f.createGoalCompletedParams=function(e,t){var n={Id:e.Id,GoalType:t.goalType,RelatedObjectId:t.relatedObjectId,Name:e.Name,identifier:t.identifier,interactionGuid:t.interactionGuid};return n},f.getGoalsCountFromDictionary=function(){var e=f.getCheckedGoals(),t=0;for(var n in e)void 0!=m[n]&&void 0!=m[n].Id&&void 0!=m[n].Settings&&t++;return t},I.apply(null,arguments),f.getCheckedGoals=function(){return m},f.getGoalsCompletionParams=function(){return S}}i.register("WalkMeGoalsManager").asCtor(er).dependencies("ClientStorageManager,GoalsManager,DeployablesManagerFactory,WalkMeInfo,ServerDataSenderManager,Logger,TimerManager,CommonEvents, InteractionManager, Consts, AuditingEnabledIndicator, SafeFullUrlProvider, DeployableTypeNameProvider");function er(e,t,n,r,i,o,a,s,l,c,d,p,g){var f=this;f.onGoalCompleted=A,f.enableMultiUserStorage=k,f.startWatchingDeployable=O,f.stopWatchingDeployables=D,f.init=L,f.getCompletedGoals=B,f.getDeployableGoalsByIdAndType=Y,f.getWatchedDeployablesOfType=J,f.getGoalsFromDeployable=U,f.getGoalById=z;var h,m,v=3600,S="wm-wtchd",E="tID",T="plgd",y="fnsh",C="igd",I=!1,b=[],w={},_=2e3;function P(){h=o.wrapCustomerLog(u),m=i.register("go",{actionUrl:"/Statistics/AddCompletedGoal",technicalSuccessHandler:R,defaultDataStorageLifeSeconds:v,prefixForStorage:"go",sendingThreshold:1,dataType:"deployable goal",requestParamsFunc:function(e){var t=e[0],n=t.GoalType==c.DEPLOYABLE_TYPE.AbExperiment;return{goalId:t.Id,playGuid:t.identifier,permutationId:r.getPermutationId(),endUserGuid:r.getEndUserGuid(),source:r.getEnvironmentId(),localTime:Nf(),url:p.get(),isAbTesting:n}}})}function A(e){b.push(e)}function k(){I=!0}function O(e,n){var r=U(e);if(r.length>0){var i=r[0].GoalType,o=j(e,n);V(e,i,n,o);var a=N(o);t.addGoalsWatch(r,a);var s=g.getDeployableTypeNameByTypeNumber(i),u=kf("Started watching {0} : {1}",s,e.Name);h(u,2)}}function N(e){var t=e[T],n=(e[y],e[C]),r={identifier:t,interactionGuid:n,goalCompletedFunc:K};return r}function D(e){Z(e)}function L(e){var t=F(!0);h("Restoring watched Goals... "+t+" Walk-Thrus are watched.",2),e&&a.libSetTimeout(x,_)}function x(){var e=F(!1);e&&h("New watched deploybles... "+e+" more items are now watched.",2),a.libSetTimeout(x,_)}function F(e){var t=0;return mtjQuery.each(c.DEPLOYABLE_TYPE,function(n,r){var i=J(r);for(var o in i)if(void 0!=i[o]&&void 0!=i[o][E]){var a=i[o];(e||M(r,a))&&(Q(a,r),t++)}}),t}function M(e,t){if(!w[e])return!0;var n=t[E];if(w[e][n]!=t[T])return!0;return!1}function R(e,t,n,r){"true"==e?r(parseInt(e)):"error"==e?(h("Completed goal - Internal Error",3),n()):(h("Completed goal - Unknown Error",3),t())}function B(e,t){if(void 0==e||!t)return;var n=J(e);if(!n)return;var r=n[t];if(!r)return;var i=r[T],o=r[y];return{playGuid:i,finishedGoals:o}}function U(e){var t=e.Goals;return t||(t=[]),t.slice()}function V(e,t,n,r){var i=H(e);G(t,H(e),r),W(t,i,n)}function W(e,t,n){w[e]=w[e]||{},w[e][t]=n}function G(t,n,r){var i=ee(t);e.addToDictionary(i,n,r,v)}function H(e){return e.Id?e.Id:e.TutorialId}function j(e,t){var n={};return n[E]=H(e),n[T]=t,n[y]=[],n[C]=l.getCurrentInteractionGuid(),n}function Y(e,t){var r=n.get(t),i=r.getById(e);if(i)return U(i);return[]}function z(e,t){for(var n,r=0;r<e.length;r++)if(e[r].Id==t){n=e[r];break}return n}function Q(e,n){var r=e[E],i=Y(r,n);if(i.length>0){var o=e[T],a=e[y];te(i,a),W(n,r,o);var s=N(e);t.addGoalsWatch(i,s)}}var K=function(e){var t=r.getEnvironmentId();t!=c.SOURCES.preview&&q(e),X(e)};function q(e){if(!d.isEnabled())return!0;return h("Sending completed Goal info to server ("+e.Name+", "+e.identifier+")",3),m.sendData({Id:e.Id,GoalType:e.GoalType,identifier:e.identifier}),!0}function X(e){var t=J(e.GoalType),n=t[e.RelatedObjectId];if(n&&e.identifier==n[T]){n[y].push(e.Id);var r=n[y].length,i=Y(e.RelatedObjectId,e.GoalType).length;i==r?$(e.GoalType,e.RelatedObjectId):G(e.GoalType,e.RelatedObjectId,n)}for(var o=0;o<b.length;o++)b[o](e)}function J(t){var n=ee(t),r=e.getData(n,{});return r}function $(t,n){var r=ee(t);e.removeFromDictionary(r,n,v)}function Z(t){var n=ee(t);e.removeData(n)}function ee(e){var t=kf("{0}-{1}",S,e);if(I){var n=r.getEndUserGuid();n&&(t+="-"+n)}return t}function te(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].Id;if(o==r){e.splice(i,1);break}}}P.apply(null,arguments)}var tr=function(){function e(e,t,n){this.balloonSettingsKey="stepHlObj",this.MULTI_STEP_CLASS="walkme-mltstep",this._element=null,this.settings=null,this.highlighterDivs=[],this.balloonSettings={},this._logger=e,this._commonUtils=t,this._lib=n.lib,this._drawableType=n.drawableType,this._drawableId=n.drawableId,this._useDefaultSettings=n.defaultSettings,this._cssKeysValues=n.cssKeysValues,this._useExistingHighlighter="undefined"!=typeof n.useExistingHighlighter&&n.useExistingHighlighter,this._useExisitingHighlighterArray=n.useExisitingHighlighterArray,this._highlighterService=i.get("HighlighterService"),this._element=n.element,this.balloonSettings=n.settings,this.customerLog=e.wrapCustomerLog(m)}return e.prototype.shouldShow=function(){},e.prototype.getSettings=function(e,t){return this._highlighterService.getDefaultSettings()},e.prototype.init=function(e){this.settings=this.initSettings(e,this._useDefaultSettings),this._cssClasses=this._highlighterService.generateCssClasses(this.getInstanceName(),this._cssKeysValues)},e.prototype.initSettings=function(e,t){var n=this.getSettings(e,t),r=this._commonUtils.getSettingsValue(e,this.balloonSettingsKey);return!t&&r&&(this._highlighterService.copyFloatProperties(n,r),n.color=r.color||n.color),n},e.prototype.highlight=function(e){try{this.unhighlightElement(),this.createHighlighterDivs(),this.applyStyle(this.highlighterDivs)}catch(t){this._logger.error(t)}},e.prototype.createHighlighterDivs=function(){for(var e=0;e<4;e++)this.highlighterDivs.push(this.createHighlighterDiv(e))},e.prototype.removeHighlighterDiv=function(e){if(e)try{e.remove()}catch(t){this.customerLog("[highlighter] error removing div",3)}},e.prototype.createHighlighterDiv=function(e){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,e,this._drawableId),n=this.createDiv(t);return n.addClass(this._cssClasses),n.addClass("walkme-custom-"+this.getInstanceName()+"-position-"+e),n},e.prototype.unhighlightElement=function(){for(var e=0;e<this.highlighterDivs.length;e++)this.removeHighlighterDiv(this.highlighterDivs[e]);this.highlighterDivs.length=0},e}(),nr=function(t){__extends(n,t);function n(r,i,o,a,s,u,l,c,d){t.call(this,u,i,d),this.timerManager=c,this._embeddedElements=[],this._consts=o,this._commonUtils=i,this._siteConfigManager=r,this._highlighterService=a,this._positionHelper=s,this._customerLog=u.wrapCustomerLog(m),this._element=d.element,this._drawableId=d.drawableId,this._drawableType=d.drawableType,this._cssKeysValues=d.cssKeysValues,this._embedInElement=d.embedInElement,this._balloonSettings=d.settings,this._useDefaultSettings=d.defaultSettings,this._shouldDrawInSetTimeout=l.isIEOlderThan(8);var p=this._commonUtils.getSettingsValue(this._balloonSettings,n.STEP_HL_OBJ);this._settings=this.getSettings(p,d.defaultSettings),this._monitor=d.monitor&&!this._settings.doNotHideOnHover,this._handlerEnterWrapper=e.proxy(this.handlerEnter,this),this._handlerLeaveWrapper=e.proxy(this.handlerLeave,this)}return n.prototype.shouldShow=function(){return this._highlighterService.shouldShow(this._balloonSettings)},n.prototype.applyStyle=function(){var e=this;return this._customerLog("Highlighter applyStyle start creating highlighter",3),o.all([this.embedHighliterDiv(this._consts.POSITION_TYPE.Top),this.embedHighliterDiv(this._consts.POSITION_TYPE.Right),this.embedHighliterDiv(this._consts.POSITION_TYPE.Bottom),this.embedHighliterDiv(this._consts.POSITION_TYPE.Left)]).then(function(){e._customerLog("Highlighter applyStyle finished creating highlighter",3)})},n.prototype.embedHighliterDiv=function(t){var n=this,r=this._element,o=this._settings.thickness,a=this._settings.color,s=this._settings.zIndex;this._customerLog("embed Highlighter to div"+this._element,3);var u=this._consts.POSITION_PERIMETER_TYPE.Outside,l=this.createDiv(t),c=this._positionHelper.getMultipleElementsRect(r),d=c.right-c.left,p=c.bottom-c.top;switch(t){case this._consts.POSITION_TYPE.Top:
case this._consts.POSITION_TYPE.Bottom:l.css({height:o+"px",width:d+2*o+this._settings.width+"px","background-color":a,"z-index":s});break;case this._consts.POSITION_TYPE.Right:case this._consts.POSITION_TYPE.Left:l.css({height:p+2*o+this._settings.height+"px",width:o+"px","background-color":a,"z-index":s});break;default:return}var g=i.get("ElementEmbedderFactory"),f=g.get(e(this._element),this._embedInElement);return f.embed(l,u,t).then(function(){var e=f.getElement();n.applyDivSettings(e.getOriginElement(),t),n._embeddedElements.push(e.getTopMostElement())})},n.prototype.createDiv=function(t){var r=this._highlighterService.generateId(n.CLASS_NAME,this._drawableType,t,this._drawableId),i=this._highlighterService.generateCssClasses(n.INSTANCE_NAME,this._cssKeysValues);i+=" walkme-custom-highlighter-position-"+t;var o=e("<div/>",{id:r,"class":i,style:"position:absolute; left: 0px; top: 0px;"});return this._customerLog("Highlighter createDiv id="+r+" classes="+i,3),o},n.prototype.applyDivSettings=function(e,t){var n=parseFloat(e.css("top").replace("px","")),r=parseFloat(e.css("left").replace("px",""));switch(this._customerLog("Highlighter applyDivSettings before top="+n+" left="+r,3),t){case this._consts.POSITION_TYPE.Top:n=n+this._settings.top-this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Bottom:n=n+this._settings.top+this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Right:n=n+this._settings.top+"px",r=r+this._settings.left+this._settings.width/2+"px";break;case this._consts.POSITION_TYPE.Left:n=n+this._settings.top+"px",r=r+this._settings.left-this._settings.width/2+"px"}this._customerLog("Highlighter applyDivSettings after top="+n+" left="+r,3),e.css({top:n,left:r})},n.prototype.getSettings=function(e,t){var r=this._highlighterService.getDefaultSettings();return t?(r.color=n.DEFAULT_COLOR,r.thickness=n.DEFAULT_THINKNESS):(this._highlighterService.copyFloatProperties(r,e),r.color=r.color||this._siteConfigManager.get().BalloonSettings.HighlighterColor||n.DEFAULT_COLOR,r.thickness=r.thickness||this._siteConfigManager.get().BalloonSettings.HighlighterThickness||n.DEFAULT_THINKNESS),r.zIndex=this.getZIndex(),this._customerLog("Highlighter getSettings highlight settings",3),this._customerLog(r,3),r},n.prototype.getZIndex=function(){var e=this.getDefaultZIndex(),t=this._commonUtils.getSettingsValue(this._balloonSettings,"z-index",e);return t},n.prototype.getDefaultZIndex=function(){return this._shouldDrawInSetTimeout?n.DEFAULT_ZINDEX-1:n.DEFAULT_ZINDEX},n.prototype.highlight=function(e){return this.unhighlightElement(),this.drawAndHandleEvents()},n.prototype.drawAndHandleEvents=function(){var e=this;return this.applyStyle().then(function(){e._monitor&&(e.unregisterMonitorEvents(),e._commonUtils.registerEventHandler(n.ENTER_ELEMENT_EVENT,e._handlerEnterWrapper,!0,e._element[0]),e._commonUtils.registerEventHandler(n.EXIT_ELEMENT_EVENT,e._handlerLeaveWrapper,!0,e._element[0]))})},n.prototype.handlerEnter=function(t){e.each(this._embeddedElements,function(e,t){t.hide()})},n.prototype.handlerLeave=function(t){e.each(this._embeddedElements,function(e,t){t.show()})},n.prototype.unregisterMonitorEvents=function(){try{this._commonUtils.unregisterEventHandler(n.EXIT_ELEMENT_EVENT,this._handlerLeaveWrapper,!0,this._element[0]),this._commonUtils.unregisterEventHandler(n.ENTER_ELEMENT_EVENT,this._handlerEnterWrapper,!0,this._element[0])}catch(e){}},n.prototype.unhighlightElement=function(){this.unregisterMonitorEvents(),e.each(this._embeddedElements,function(e,t){t.remove()}),this._embeddedElements=[]},n.prototype.getClassName=function(){return n.CLASS_NAME},n.prototype.getInstanceName=function(){return n.INSTANCE_NAME},n.STEP_HL_OBJ="stepHlObj",n.DEFAULT_COLOR="#55aaff",n.DEFAULT_ZINDEX=2147483630,n.DEFAULT_THINKNESS=1,n.INSTANCE_NAME="highlighter",n.CLASS_NAME="highlightDiv",n.ENTER_ELEMENT_EVENT="mouseover",n.EXIT_ELEMENT_EVENT="mouseout",n}(tr);i.register("Highlighter").asCtor(nr).asProto().dependencies("SiteConfigManager, CommonUtils, Consts, HighlighterService, PositionHelper, Logger, HostData, TimerManager"),i.register("HighlighterService").asCtor(rr).asProto().dependencies("SiteConfigManager, CommonUtils, Logger");function rr(e,t,n){var r;function i(){r=n.wrapCustomerLog(m)}this.shouldShow=function(n){var r=t.getSettingsValue(e.get().Settings,"hlType","none"),i=t.getSettingsValue(n,"hlType",r);return"rect"===i},this.generateId=function(e,t,n,r){var i=e+"-"+t+"-"+n+"-"+r;return i},this.generateCssClasses=function(e,t){var n="walkme-custom-"+e+" walkme-to-remove ";if(t)for(var r=0;r<t.length;r++)n+=" walkme-custom-"+e+"-"+t[r].name+"-"+t[r].id;return n},this.copyFloatProperties=function(e,n){for(var r in n)n.hasOwnProperty(r)&&(t.isNumber(n[r])?e[r]=parseFloat(n[r]):e[r]=n[r])},this.getDefaultSettings=function(){return{left:0,top:0,width:0,height:0}},i.apply(null,arguments)}i.register("HighlighterSettingsProvider").asCtor(ir).dependencies("CommonUtils");function ir(e,t){function n(){}this.getHighlighterSettings=function(t,n,r){var i={element:n,settings:t,embedInElement:e.getSettingsValue(t,"embed",!1),drawableType:"balloon",drawableId:r.balloonEntityId,monitor:!r.isViewStep&&!r.isCapture,defaultSettings:!!r.isCapture,cssKeysValues:[{id:r.balloonEntityId,name:"step"},{id:r.containerEntityId,name:"walkthru"}]};return i},n.apply(null,arguments)}var or=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u){var l=t.call(this,e,i,u)||this;return l.topMostCssStyleSettter=s,l.STEP_IO_OBJ="stepIoObj",l.DEFAULT_ZINDEX="2147483629",l.DEFAULT_COLOR="#000000",l.containerDiv=null,l._hostData=n,l._positionHelper=r,l._siteConfigManager=o,l._elementInIframeIndicator=a,l.balloonSettingsKey=l.STEP_IO_OBJ,t.prototype.init.call(l,u.settings),l}return n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,n){var r=t.prototype.getSettings.call(this,e,n);return r.color=this.DEFAULT_COLOR,r.opacity=.5,r.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),r},n.prototype.getDocumentSize=function(){var t=e(document),n=document.documentElement.clientWidth,r=t.height();return{height:r,width:n}},n.prototype.getContainer=function(){return e(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=this._element.length>1?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e)},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin(),s=[0,o.height],u=s[0],l=s[1];this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],u,e+n,Math.floor(o.width-n-e),l),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],u,0,e-.5,l)},n.prototype.setDivCss=function(e,t,n,r,i){if(!e)return;e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("position","absolute").css("background-color",this.settings.color)},n.prototype.createContainerDiv=function(){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,"main",this._drawableId),n=e('<div id="'+t+'" class="wm-insideouter-container" />').addClass(this._cssClasses).appendTo(this.getContainer());return this.setCssStyle(n,this.settings.zindex),n.css("opacity",this.settings.opacity).css("background-color","").css("display","block").css("top",0).css("left",0).css("width",0).css("height",0),n},n.prototype.createHighlighterDivs=function(){this.containerDiv&&this.unhighlightElement(),this.containerDiv=this.createContainerDiv(),t.prototype.createHighlighterDivs.call(this)},n.prototype.unhighlightElement=function(){this.containerDiv&&this.containerDiv.remove(),this.containerDiv=null,this.highlighterDivs.length=0},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(t){var n=e("<div id="+t+" />");return this.containerDiv.append(n),n},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n}(tr);i.register("Insideout").asCtor(or).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter");var ar=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u){var l=t.call(this,e,i,u)||this;return l.topMostCssStyleSettter=s,l.STEP_IO_OBJ="stepIoObj",l.DEFAULT_ZINDEX="2147483629",l.DEFAULT_COLOR="#000000",l._hostData=n,l._positionHelper=r,l._siteConfigManager=o,l._elementInIframeIndicator=a,l.balloonSettingsKey=l.STEP_IO_OBJ,t.prototype.init.call(l,u.settings),l}return n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,n){var r=t.prototype.getSettings.call(this,e,n);return r.color=this.DEFAULT_COLOR,r.opacity=.5,r.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),r},n.prototype.getDocumentSize=function(){var t=e(document),n=document.documentElement.clientWidth,r=t.height();return{height:r,width:n}},n.prototype.getContainer=function(){return e(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=this._element.length>1?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e)},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin();this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],t,e+n,Math.floor(o.width-n-e),r),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],t,0,e-.5,r)},n.prototype.setDivCss=function(e,t,n,r,i){if(!e)return;this.setCssStyle(e,this.settings.zindex),e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("background-color",this.settings.color).css("opacity",this.settings.opacity)},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(t){var n=e("<div id="+t+" />");return e(document).find("body").append(n),n},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n}(tr);i.register("OldInsideout").asCtor(ar).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter"),i.register("Animator").asCtor(sr).asProto().dependencies("TimerManager, UiUtils, Consts, FeaturesManager, CommonUtils, Positions");function sr(e,t,n,r,i,o,a){var s=this,u=null,l=null,c=null,d=!1,p=!0,g=!1,f=!1,h=!1,m=null,v=!1,S=!1,E=!1,T=null,y=null,C=[],I=null,b=null,w=1,_=150,P="animations",A="marginLeft",k="marginRight",O=250,N=10,D=.3,L=50,x={0:"Top",1:"Left",2:"Top",3:"Left"},F="inline",M={InitCSS:{display:F},Properties:{},Options:{}};function R(){var e=a.config;Z();var t=e?e:M;u=W(t.InitCSS),l=W(t.Properties),c=W(t.Options),ge(t.MetaData),S=a.isVibrating}function B(){return!0}this.disableAnimation=function(){p=!1},this.setPosition=function(e){m=e,oe()},this.setPagePositionOffset=function(e,t){re(e,t)},this.postAnimation=function(e){e&&C.push(e)},this.prepare=function(e,t){T=e,y=t,I=G(T),ee(),Q(),we()?(H(),j(),Y(),s.postAnimation($),c.complete=q):s.postAnimation(ue),_e()&&s.postAnimation(Se)},this.animate=function(e){if(!T)return void(e&&e());this.postAnimation(e),we()?(d=!0,pe(T),T.animate(l,c),X()):(J(),q())},this.stop=function(){T.stop(!0,!1)},this.destroy=function(e){var t=T;if(y)for(var n=0;n<y.length;n++)try{t=t.add(y[n])}catch(r){}try{we()?U(t,e):V(t,e)}catch(r){e&&e()}};function U(e,n){e.removeAttr("id").find("div").removeAttr("id"),e.fadeOut(_,function(){t.destroyDivWithIframes(e,n)})}function V(e,n){t.destroyDivWithIframes(e,n)}function W(e){return mtjQuery.extend({},e)}function G(e){return{filter:e.css("filter")}}function H(){h&&y?te(se):C.push(ue)}function j(){f&&(fe(),te(he))}function Y(){if(K()){var e=me(T,z());s.postAnimation(function(){ve(e)})}}function z(){if(g)return Ie;if(E)return Ce}function Q(){r.isFeatureEnabled("dontPrepForScrl")||T.css({display:"block",visibility:"hidden",filter:""})}function K(){return g||E}function q(e){for(var t=0;t<C.length;t++)"function"==typeof C[t]&&C[t].apply(null,arguments);C.length=0}function X(){var t=c.duration*w;e.setWalkmeTimeout(ne,t)}function J(){mtjQuery(T).css({display:F,visibility:""}).css(I)}function $(){T&&T.css(I)}function Z(){b=mtjQuery({})}function ee(){b.clearQueue(P)}function te(e){b.queue(P,e)}function ne(){b.dequeue(P)}function re(e,t){ie(u,e,t),l.marginTop=e.marginTop,l.marginLeft=e.marginLeft,l.marginRight=e.marginRight,l.marginBottom=e.marginBottom,delete l.margin}function ie(e,t,n){if(parseInt(e.margin)<0)switch(e.marginTop=0,e.marginLeft=0,e.marginRight=0,e.marginBottom=0,n){case o.Bottom:case o.Top:e.marginLeft=t.marginLeft;break;case o.Right:case o.Left:e.marginTop=t.marginTop}else e.marginTop=t.marginTop,e.marginLeft=t.marginLeft,e.marginRight=t.marginRight,e.marginBottom=t.marginBottom}function oe(){var e={},t={};ce()?(e.size="height",e.osize="width"):(e.size="width",e.osize="height"),!g&&l.size&&(m==n.POSITION_TYPE.Top&&"height"==e.size||m==n.POSITION_TYPE.Left&&"width"==e.size)&&(E=!0),t.marginTop=m==n.POSITION_TYPE.Bottom?-1:1,t.marginLeft=m==n.POSITION_TYPE.Right?-1:1,e.margin="margin"+x[m],l=ae(l,e,t),u=ae(u,e,t)}function ae(e,t,n){if(!e)return;var r={};for(var o in e)if(e.hasOwnProperty(o)){var a=i.isDefined(t[o])?t[o]:o;if(r[a]=e[o],i.isDefined(n[a])){var s=r[a].toString().replace("px","");r[a]=n[a]*s+"px"}}return r}function se(){le(y),e.setWalkmeTimeout(function(){ne()},O)}function ue(){mtjQuery(y).each(function(){this.show()}),ne()}function le(e){var t,r,i=ce(),o=i?"marginTop":"marginLeft",a=de(),s=a?1:-1,u=e.length-1;m==n.POSITION_TYPE.Top&&(t="border-top-width",r="borderTopWidth"),m==n.POSITION_TYPE.Bottom&&(t="border-bottom-width",r="borderBottomWidth"),m==n.POSITION_TYPE.Right&&(t="border-right-width",r="borderRightWidth"),m==n.POSITION_TYPE.Left&&(t="border-left-width",r="borderLeftWidth"),mtjQuery(e).each(function(e,n){this.css("visibility","hidden").css("display","block");var i=(parseInt(this.css(t),10)+2)*s,l=this.css(t),c=this[0].style.zIndex,d={};d[r]=l,d.opacity=1,a&&(d[o]=1);var p={};p.duration=O,p.complete=function(e,t){return function(){e.css(o,""),e.css("zIndex",t)}}(this,c),e==u&&this.css("zIndex",c-1),this.css("visibility",""),a&&this.css(o,i),this.css(t,"0px"),this.animate(d,p)})}function ce(){if(m==n.POSITION_TYPE.Bottom||m==n.POSITION_TYPE.Top)return!0;return!1}function de(){if(m==n.POSITION_TYPE.Bottom||m==n.POSITION_TYPE.Right)return!0;return!1}function pe(e){!m&&u.margin&&(u.margin=0),mtjQuery(e).css({display:"none",visibility:""}).css(I).css(u)}function ge(e){e&&(g=i.defaultValue(e.center,!1),f=i.defaultValue(e.hwa,!1),h=i.defaultValue(e.are,!1),w=i.defaultValue(e.delay,1))}function fe(){T.children(":visible").addClass("walkme-balloon-hidden-content").css("display","none")}function he(){T.children(".walkme-balloon-hidden-content").removeClass("walkme-balloon-hidden-content").fadeIn(250,function(){mtjQuery(this).css("direction",mtjQuery(this).css("direction"))})}function me(e,t){var n={position:"absolute",top:e.css("top"),left:e.css("left"),height:e.height(),width:e.width(),zIndex:e[0].style.zIndex},r=mtjQuery("<div />").css(n);return e.css({top:0,left:0}).wrap(r),t(r,e),n}function ve(e){E&&(T.css("bottom",""),T.css("right","")),T.unwrap().css(e)}function Se(){T.bind("click.wm_animation",function(){if(!v){v=!0;var e=parseInt(T.css(k))>0?k:A;if(Te(T,N,e),y)for(var t=0;t<y.length;t++)Te(y[t],N,e)}}),Ee(T)}function Ee(e){e.find("button,a,.walkme-custom-balloon-close-button").bind("click.wm_animation",function(e){e.stopPropagation()})}function Te(e,t,n){if(t<=0)return e.css(n,l[n]),void(v=!1);var r=parseInt(e.css(n))-ye(t),i=[];i[n]=r,e.animate(i,L,function(){Te(e,t-1,n)})}function ye(e){var t=e%2*2-1,n=e*D;return n*t}function Ce(e,t){var n=parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10),r=parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10);t.css("top",""),t.css("left",""),t.css("bottom","-"+n+"px"),t.css("right","-"+r+"px")}function Ie(e,t){be(e,t),c.step=function(){be(e,t)}}function be(e,t){var n=e.height()/2-t.height()/2,r=e.width()/2-t.width()/2;t.css("top",n),t.css("left",r)}function we(){if(d||!B()||!p)return!1;return!0}function _e(){if(S)return!0;return!1}R.apply(null,arguments)}mtjQuery.extend(mtjQuery.easing,{easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n}}),i.register("PublishDataManager").asCtor(ur).dependencies("Lib, ClientOrServerStorageManager, Logger");function ur(e,t,n){var r,i,o=this,a="wm-ldv";o.init=s;function s(e){i=e&&e.dataVersion||0}o.hasNewDeployables=function(){if(r)return r;var e=t.getData(a)||i;return r=e<i},o.saveDataVersion=function(){t.saveData(a,i,A)}}function lr(){var e=this;e.init=r,e.load=o,e.remove=a,e.creataImageAG=s,e.createAG=u;var t,n;function r(e){t=e}function o(){c(function(e){e.init(t),e.load()})}function a(e){n?n.remove(e):e&&e()}function s(e){l(function(t){var n=t.getImageAG(e);n.setupAttenGrab()})}function u(e){l(function(t){var n=t.create(e);n.setupAttenGrab()})}function l(e){__webpack_require__.e(1,function(t){var r=[t(55),t(56),t(57)];(function(){n=i.get("AttentionGrabberManager"),e&&e(n)}).apply(null,r)})}function c(e){__webpack_require__.e(3,function(t){var r=[t(55),t(56)];(function(){n=i.get("AttentionGrabberManager"),e&&e(n)}).apply(null,r)})}}i.register("AttentionGrabberManagerAPI").asCtor(lr);function cr(){var e=this;function t(){}e.getBody=function(e){return e.body},t.apply(null,arguments)}i.register("RegularBodyUtils").asCtor(cr);var cr;function dr(){var t=this;function n(){}t.getBody=function(t){return e("body",t)[0]},n.apply(null,arguments)}i.register("TagBodyUtils").asCtor(dr);var dr;i.register("CommonUtils").asCtor(pr).dependencies("TimerManager,HostData,AuditSourceManager,Consts,RegularBodyUtils,CookiesManager,SettingsValuesRetriever, ExternalWalkMeConfig,PostMessageListener,win,CdnServer,ObjectJpath,FeaturesManager, Logger, ArrayUtils, SiteConfigManager, AttentionGrabberManagerAPI");function pr(n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E){var T,y,C,I,b=this;b.settingsFieldValid=l.settingsFieldValid,b.isSettingsValueExists=l.isSettingsValueExists,b.getSettingsValue=l.getSettingsValue,b.doAllMeetCondition=P,b.doesAnyMeetCondition=A,b.getInt=_,b.filter=v.filter;function w(){y=s,C=i.get("CommonEvents")}function _(e,t){return b.isNumber(e)?parseInt(e,10):t}function P(e,t){return k(e,t,e.length)}function A(e,t){return k(e,t,1)}function k(e,t,n){for(var r=0,i=0;i<e.length;i++){var o=e[i],a=t(o);if(a&&(r++,r>=n))return!0}return!1}b.isNumber=function(e){if("boolean"==typeof e)return!1;return!isNaN(e-0)},b.formatString=function(){return kf.apply(null,arguments)},b.isMobileNative=function(){return c.get("platform")==a.PLATFORM.iOS||c.get("platform")==a.PLATFORM.Android},b.isIOS=function(){return c.get("platform")==a.PLATFORM.iOS},b.isAndroid=function(){return c.get("platform")==a.PLATFORM.Android},b.getJQueryElementFinder=function(){return i.get("JQueryElementFinder")},b.waitForCondition=function(t,r,i,o){var a=e.Deferred();function s(e){if(e>=r)return a.reject();var u=t();if(u)return a.resolve(u);o&&m.customerLog(o),n.libSetTimeout(function(){s(++e)},i)}return s(0),a.promise()},b.sendMenuEvent=function(e,t,n){try{var r={Type:e};t&&(r.WalkthruId=t),n&&window.mtjQuery.extend(r,n),C.raiseEvent(e,r),walkme_player_event(r)}catch(i){}},b.isIe7or8=function(){return r.isIE(8,"lte")},b.libSetTimeout=n.libSetTimeout,b.toJSON=function(e){return Cf(e)},b.secureEvalJSON=function(e){return If(e)},b.clone=function(e){return Af(e)},b.elementLastKeeper=i.get("ElementLastKeeper"),b.attentionGrabberFactory={create:function(e){return{setupAttenGrab:function(){return E.createAG(e)}}}},b.attentionGrabberClass=function(e){return{setupAttenGrab:function(){E.creataImageAG(e)},remove:function(e){E.remove(e)}}},b.isValidMailTo=function(e){return e&&0==e.indexOf("mailto:")},b.isValidUrl=function(e){if(e&&0!=e.indexOf("http")&&0!=e.indexOf("/"))return!1;return!0},b.setDefault=function(e,t,n){void 0===e[t]&&(e[t]=n)},b.isUiObjectActivatable=function(e){return"category"!=e.type()&&"tab"!=e.type()},b.isTrue=function(e,t,n){var r=b.getSettingsValue(e,t,n);return b.isValueTrue(r)},b.isValueTrue=function(e){return e&&(1==e||"True"==e||"1"==e)},b.isLike=function(e,t){t=t.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp("[.]","g"),"\\."),t=t.replace(new RegExp("[*]","g"),".*"),e=e.toString().toLowerCase(),t=t.toLowerCase();try{return e.match(t)[0]==e}catch(n){return!1}},b.isBigger=function(e,t){return e=N(e),t=N(t),e=parseFloat(e),t=parseFloat(t),!(!b.isNumber(e)||!b.isNumber(t))&&e>t},b.isSmaller=function(e,t){return e=N(e),t=N(t),e=parseFloat(e),t=parseFloat(t),!(!b.isNumber(e)||!b.isNumber(t))&&e<t};function N(e){if(!e||"string"!=typeof e||!e.replace)return e;return e.replace(/,|\$|\u20AC|\u20AA|||/g,"")}b.addTabIndex=function(e,t,n){if(C.raiseEvent(a.EVENTS.AddFocusTraits,{element:e,order:t,focusClass:n}),!h.isFeatureEnabled("accessibility"))return;t=b.defaultValue(t,0),e.attr("tabIndex",t),e.keyup(function(t){13!=t.keyCode||t.shiftKey||(e.click(),t.stopPropagation())})},b.handleAccessibleElement=function(e,t){b.addTabIndex(e),b.setRole(e,t)},b.setRole=function(e,t){e.attr("role",t||"complementary")},b.getCustomConfiguration=function(){var e=S.get(),t=h.isFeatureEnabled("configurationTab")?e.Settings.configuration:e.Custom;return t||{}},b.isGradientUsingFilter=function(t){var n=e("<div style='"+t+"' />"),r=n.css("background-image").indexOf("gradient")==-1;return r},b.handleCrossDomainError=function(e){if(!L(e))throw e},b.encloseCall=function(e){var t=function(){var t=arguments;return function(){return e.apply(null,t)}},n=D(arguments,0),r=t.apply(null,n);return r};function D(e,t){for(var n=[],r=0;r<e.length;r++)t!=r&&n.push(e[r]);return n}function L(e){var t=e&&18==e.code,n=e&&e.message&&e.message.indexOf("denied")>=0;return t||n}b.registerEventHandler=function(e,t,n,r){r=r||window;var i=x(t);return r.attachEvent?r.attachEvent("on"+e,i):r.addEventListener&&r.addEventListener(e,i,!!n),function(){b.unregisterEventHandler(e,i,n,r)}};function x(e){var n=t.walkmeWrap;if(!n)return e;return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(e),n.apply(this,t)}}b.unregisterEventHandler=function(e,t,n,r){r=r||window,r.detachEvent?r.detachEvent("on"+e,t):r.removeEventListener&&r.removeEventListener(e,t,!!n)},b.setBodyUtils=function(e){y=e},b.getBody=function(e){return y.getBody(e)},b.postMessageToAllFramesChain=function(e,t){var n=0;if(e)try{e.postMessage(t,"*"),n++,e!=e.parent&&(n+=b.postMessageToAllFramesChain(e.parent,t))}catch(r){m.customerLog("Error in postMessage to frames chain "+r,4)}return n},b.postMessageToFrameAndDescendants=function(e,t){function n(e,t){r(e,t);for(var i=e.frames,o=0;o<i.length;o++){var a=i[o];n(a,t)}}function r(e,t){try{e!=window&&e.postMessage(t,"*")}catch(n){}}n(e,t)},b.getFrameIndex=function(e){var t=F(top,e||window).frameIndex;return t};function F(e,t){if(e==t)return{frameIndex:0};for(var n=0,r=0;r<e.frames.length;r++){n++;var i=e.frames[r],o=F(i,t);if(void 0!==o.frameIndex)return o.frameIndex+=n,o;n+=o.totalFrames}return{totalFrames:n}}b.doForFramesChain=function(e,t){if(!e)return;try{t(e)}catch(n){}e!=e.parent&&b.doForFramesChain(e.parent,t)},b.addScript=function(e,t,n){if(!e)return;var r=M(e);t&&(r.onload=onloadRunner,r.onreadystatechange=onloadRunner),n&&(r.onerror=n),R(r)};function M(e){var t=document.createElement("script");return t.async=!0,t.src=e,t.id="mt_script",t}function R(e){var t=document.getElementsByTagName("head")[0];t.appendChild(e)}b.addScriptWithCallback=function(e,t,r,i){var o="readyState";if(!e||!t)return;var a=M(e),s=!1;r&&B(t,u),i&&(a[o]?a.onreadystatechange=c:a.onerror=i);function u(){return s=!0,r.apply(this,arguments)}function l(){if(s)return;return i.apply(this,arguments)}function c(){"loaded"!=a.readyState&&"completed"!=a.readyState||n.libSetTimeout(function(){l()})}R(a)};function B(e,t){var n=window._walkmeInternals[e];window._walkmeInternals[e]=function(r){window._walkmeInternals[e]=n,t(r)}}b.checkElementText=function(e){return e.is("input")||e.is("textarea")?e.val():e.is("select")?e.find("option:selected").text():e.text()},b.getElementDocument=function(e){try{return e[0].ownerDocument}catch(t){}return document},b.getDateAtUTC=function(){var e=new Date;return e.getTime()},b.nl2br=function(e){return e?e.replace(/\n/g,"<br/>"):""},b.getTimer=function(e){function t(){var t=new Date;return function(n){var r=new Date,i=r-t;return e("Measurer - "+n+" ("+i+" ms)"),t=r,i}}return new t},b.defaultValue=function(e,t){return"undefined"!=typeof e&&null!=e?e:t},b.isLocalStorageEnabled=function(){if(void 0!==T)return T;try{if(!window.localStorage)return T=!1,!1}catch(e){return T=!1,!1}try{window.localStorage.getItem("wm-test")}catch(t){return T=!1,!1}return T=!0,!0},b.createElementInDocument=function(t,n){var r=n.createElement("div");return e(r).html(t).children()},b.createIframe=function(e,t,n,r,o,a,s){var u=document.createElement("iframe");u.id=t,s||(u.className="walkme-to-remove"),n||(u.style.cssText="display:none;"),a=a||i.get("TopContainerProvider").getTopContainer(null,!0)[0],a.appendChild(u);function l(e){u.removeEventListener?u.removeEventListener("load",l):u.detachEvent&&u.detachEvent("onload",l),r&&r(e)}return u.addEventListener?u.addEventListener("load",l,!1):u.attachEvent&&u.attachEvent("onload",l,!1),o&&d.listen(x(o)),u.src=e,u},b.removeIframeListeners=function(e,t,n){e.removeEventListener?window.removeEventListener(t,n,!1):e.detachEvent&&window.detachEvent("on"+t,n)},b.getTrackData=function(e){return{Id:e.Id,Name:e.Name}},b.getStepTrackData=function(e,t){var n={Id:e.Id,Name:e.StepTitle||e.StepText};return t&&(n.TutorialId=t.Id,n.TutorialName=t.Name),n},b.isImpersonated=function(){return window.editorAPI&&editorAPI.isImpersonated&&editorAPI.isImpersonated()},b.getWindowData=function(e,t){var n=void 0;if(t)switch(e){case O.Cookie:n=b.getWindowCookie(t),n||(n=void 0);break;case O.Var:n=b.getWindowVar(t)}return n},b.getWindowCookie=function(e){return u.getCookie(e)},b.getInputGenerator=function(e){return i.get("InputGenerator")},b.encodeText=function(t){var n=e("<div></div>");return n.text(t),n.html()},b.getWindowVar=function(e){var t=window;return f.getValue(t,e)},b.getPropertyValue=function(e,t,n){var r=f.getValue(e,t);return r||(r=n),r},b.getValue=f.getValue,b.findJspContainer=function(t,n){var r=b.getJspParent(t);return r?e(r).find(".jspPane"):n},b.getJspParent=function(e){var t=b.getClientjQuery();if(!t)return;var n=e.parents("div");return b.firstMatch(n,function(e){var n=t(e);if(void 0!=n.data&&void 0!=n.data("jsp"))return n})},b.getClientjQuery=function(){var e=window.jQuery||window.$;if(e&&e.fn&&e.fn.jquery)return e;return},b.firstMatch=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},b.generateGUID=function(){var e=i.get("GuidGenerator");return e.generateGuid()},b.isDefined=U;function U(e){return null!=e&&void 0!=e}b.definedOrDefault=function(e,t){return U(e)?e:t},b.executeParallel=function(e){var t,n=e.objectsArray,r=e.selectorFunc,i=e.functionsToExecute,o=e.successCallback,a=e.failCallback,s=!1;n?u():l();function u(){if(0==n.length)return void(o&&o());t=i.length*n.length;for(var e=i.length-1;e>=0;e--)for(var a=n.length-1;a>=0;a--){if(s)return;var u=r?r(n[a]):n[a];i[e](u,c)}}function l(){if(0==i.length)return void(o&&o());t=i.length;for(var e=i.length-1;e>=0;e--){if(s)return;i[e](c,d)}}function c(){t--,0==t&&o&&o()}function d(){if(s)return;s=!0,a&&a()}},b.getWinOrigin=function(){return p.location.origin||p.location.protocol+"//"+p.location.hostname+(p.location.port?":"+p.location.port:"")},b.getOrigin=function(){var e=g.get();return V(e)?W()+e:e};function V(e){var t=0===e.indexOf("/");return t}function W(){if(!I){var e=window.location;I=e.origin,I||(I=e.protocol+"//"+e.hostname,e.port&&(I+=":"+e.port))}return I}b.getWalkmeInternals=function(){return t},b.isUrlEncoded=function(e){return e=e||"",e!==decodeURIComponent(e)},w.apply(null,arguments)}var pr;i.register("SettingsValuesRetriever").asCtor(gr);function gr(){var e=this;e.getSettingsValue=t,e.isSettingsValueExists=n,e.settingsFieldValid=r;function t(t,n,r){if(!e.settingsFieldValid(t))return r;if(!e.isSettingsValueExists(t,n))return r;return t[n]}function n(t,n){if(!e.settingsFieldValid(t))return!1;return n in t}function r(e){if(!e||0==e.length)return!1;return!0}}i.register("UiUtils").asCtor(fr).dependencies("FramesetsUtils, TimerManager, DocumentsManager, HostData, TopContainerProvider, FeaturesManager, Consts, CommonEvents");function fr(){var t,n,r,o,a,s,u,l="walkme-ie-",c="walkme-ie-bm-",d=" walkme-override walkme-css-reset",p=" walkme-to-destroy",g=this,f=null,h=!1,m=[],v="Parent has no style",S="Parent is not ':wm_can_embed'";function E(e,i,l,c,d,p,g,h){f=e,t=i,n=l,r=c,o=d,a=p,s=g,u=h}g.canDisplayOverlay=function C(){var C=!(r.isQuirksMode()||f.shouldHandlePageAsFramesets());return C},this.removeOverlay=function(t){var n=m.pop();n&&n.exist()&&(t?n.fadeOut("slow",function(){e(this).remove()}):n.remove(),n=null)},g.displayOverlay=function(t,n,r,i){var a=mtjQuery("#walkme-popup-background").filter(function(){return"none"!=e(this).css("display")});if(a.length>0)return a[0];void 0==r&&(r="walkme-popup-background");var s=o.getTopContainer();s.append(kf('<div id="{0}" class="mt-to-destroy"></div>',r));var u=mtjQuery("#"+r,s);return u.css({opacity:i?i.opct:"0.7",display:"none",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:i?i.color:"#000000","z-index":t-1}),g.addBrowserSpecificClasses(u),n?u.fadeIn("slow"):u.css("display",""),m.push(u),u},g.getStyle=function(e,t){try{return t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle}catch(n){return null;
}},g.getAnimationDimentionSize=function(e,t){var n;return n="top"==t||"bottom"==t?"height":"width",e.css(n)},g.addBrowserSpecificClasses=function(t){if(r.isMobile()&&t.addClass("walkme-mobile-device"),!r.isIE())return;var n=document.documentMode||Number(e.browser.version),i=window.mtjQuery.browser.version.slice(0,window.mtjQuery.browser.version.indexOf(".")),o=l+n,a=c+i;t.addClass(o),t.addClass(a)},g.addWalkmeClasses=function(e){e[0].className+=p+d,e.find("*").each(T)};function T(e,t){t.className+=d}g.addBrowserClass=function(e){var t=r.browser.name.replace(/ /g,"").toLowerCase();e.addClass("walkme-"+t)},g.setLangAttribute=function(e){var t=i.get("LanguageManager").getCurrentLanguage();if(!t)return;e.attr("lang",t)},g.bindFocusAndBlur=function(e,t){e.focus(function(){e.val()==t&&e.val("")}),e.blur(function(){""==e.val()&&e.val(t)})},g.fixFlash=function(){if(h||!a.isFeatureEnabled("flashTransparent"))return;n.foreachDocument(y,!0)};function y(e){var t=r.browser,n='<PARAM NAME="WMode" VALUE="Window">';t.name.indexOf("Firefox")!=-1?i():t.name.indexOf("IE")!=-1&&o(),h=!0;function i(){a().append("<param name='wmode' value='transparent'>").wrap("<div></div>").unwrap(),mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",e).attr("wmode","transparent").wrap("<div></div>").unwrap()}function o(){var r=mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",e);if(r.attr("wmode","transparent"),l(r),t.version>=9){var i=s();mtjQuery("param[name='wmode']",i).remove(),i.append("<param name='wmode' value='transparent'>"),l(i)}t.version<=8&&l(u(),function(e){var t=e.outerHTML;return t.indexOf(n)==-1?t:e.outerHTML.replace(n,'<PARAM NAME="WMode" VALUE="transparent">')})}function a(){return mtjQuery("object:has('param[name='wmode'][value!='transparent'][value!='opaque']')",e)}function s(){return mtjQuery("object:has('param[name*='wmode'][value!='transparent'][value!='opaque']'), object:not(:has(param[name='wmode']))",e)}function u(){return mtjQuery("object[classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000']:not(:has(param[name*='wmode']))",e)}function l(e,t){for(var n=0;n<e.length;n++){var r=e[n].parentNode,i=t?t(e[n]):e[n].outerHTML;e[n].insertAdjacentHTML("beforeBegin",i),r.removeChild(e[n])}}}g.hexToRgba=function(e,t){var n=e.replace("#",""),r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=255&r;return"("+i+","+o+","+a+","+t+")"},g.closestCanEmbed=function(e){for(var t=e.parent(),n={originalElement:e,currentParent:t};t&&t.exist();){if(n.currentParent=t,n.reason="",!t[0].style)return n.reason=v,u.raiseEvent(s.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,n),o.getTopContainer(e);if(t.is(":wm_can_embed"))return t;n.reason=S,u.raiseEvent(s.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,n),t=t.parent()}return o.getTopContainer(e)},g.destroyDivWithIframes=function(e,n){if(!e)return void(n&&n());var r=mtjQuery("iframe",e);0==r.length?t.libSetTimeout(function(){e.remove(),n&&n()},1):(r.attr("src",""),t.libSetTimeout(function(){r.hide(),r.remove(),e.remove(),n&&n()},1))},E.apply(null,arguments)}i.register("Balloon").asCtor(hr).asProto().dependencies("TimerManager, BalloonEmbedder, Consts, UiUtils, PositionHelper, CommonUtils, Logger, FeaturesManager, BalloonUtils, HostData, FramesetsUtils, BBCodeParser, Lib, ElementUtils, CommonEvents, ScrollUtils, ElementInIframeIndicator, MoveBalloonByIntervalsHelper, BalloonElementPositionChangedChecker,CurrentWalkthruData, WalkthrusModule, LibDestroyer, CustomCssSetter, DirectHeadProvider, TopMostCssStyleSettter, UserGuidContainer, HighlighterSettingsProvider, Positions");function hr(t,n,r,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I,b,w,_,P,A,k,O,N){var D,L,x,F,M,R,B,U,V,W,G,H,j,Y,z,Q,K,q,X,J,$,Z,ee,te,ne,re,ie=this,oe=null,ae=null,se=!0,ue=!1,le=!1,ce=!1,de=!1,pe="",ge="",fe="",he="",me="",ve="",Se=!1,Ee="",Te="",ye=0,Ce=0,Ie=0,be="step",we=0,_e="walkthru",Pe=!1,Ae=[],ke=[],Oe=null,Ne=null,De=null,Le=null,xe=null,Fe=null,Me="scroll",Re=800,Be="displayTO",Ue=r.POSITION_TYPE.Bottom,Ve={},We="trigger",Ge="balloon",He=500;function je(){x=r.STEP_TYPE.Normal,oe=N.element,N.parentElement&&(oe=N.parentElement,ae=N.element),z=N.forceEmbedBalloonInIframe,X=N.dontShowIoBalloon,Pe=N.isFirstStep,L=N.isViewStep,j=N.siteConfig,te=N.placeholderConfigurations,ne=N.placeholderVariableValues,re=N.initiatorData,N.fixedSize&&(ye=N.fixedSize.width,Ce=N.fixedSize.height),Te=N.stepSettings,H=u.getSettingsValue(Te,Be)||u.getSettingsValue(j.Settings,Be)||Re,N.text&&(pe=N.text.title,fe=N.text.subText,ge=u.nl2br(N.text.content)),F=N.end,N.buttons&&(ue=N.buttons.next,le=N.buttons.done,ce=N.buttons.back,de=N.buttons.submit),ve=N.htmlContent,he=N.innerHtml,me=N.outterHtml,D=N.position,N.data&&(Ie=N.data.balloonEntityId||N.data.stepId,we=N.data.containerEntityId||N.data.tutorialId,x=N.data.type,be=N.data.balloonEntityType||"step",_e=N.data.containerEntityType||"walkthru"),ze(N.isCaptureBalloon,L),Ee=N.configuration,d.fixConfiguration(Ee),J=l.wrapCustomerLog(Ge),w.setCustomCssIfNeeded(oe),M=N.drawer;var e={element:oe,balloonDrawer:M,settings:Te};if(Y=i.create("ScrollManager",e),!oe)return void(se=!0);var t=E.isInIframe(oe);se=!(!u.getSettingsValue(Te,"embed",!1)&&t&&!z&&!c.isFeatureEnabled(r.FEATURES.ForceEmbedInOwnerDocument))||g.shouldHandlePageAsFramesets(),N.isCaptureBalloon&&Xe(),ee=N.bindButtonsFunc,qe(Ee)}function Ye(e){J(e,5,Ge)}function ze(e,t){var n={balloonEntityId:Ie,containerEntityId:we,isCapture:e,isViewStep:t},r=k.getHighlighterSettings(Te,oe,n);Q=i.create("Highlighter",r),ae&&(r.element=ae,r.drawableType=We,K=i.create("Highlighter",r));var o=Qe()?"OldInsideout":"Insideout";q=i.create(o,r)}function Qe(){var e=c.isFeatureEnabled("oldSpotlight"),t=p.isIE()&&p.isIEOlderThan(9);return e||t}this.onDestroy=function(e){Ae.push(e)},this.setReleaseEvents=function(e){ke=e},this.releaseEvents=function(e){for(var t,n=0;n<ke.length;n++)try{ke[n](e)&&(t=!0)}catch(r){}return t},this.SetTimeoutOn=function(){bt()||R||(R=t.playSetTimeout(function(){ie.elementDisplayTimeoutFunction()},200))},this.getArrowHeight=function(){return M.arrowHeight()};function Ke(){var e=ve?ve.html():f.parse(ge),t={title:f.parse(pe),content:e,customHtml:{inner:he,outter:me},stepIndexText:fe},n={balloonData:t,userGuid:A.getUserGuid(),nextButton:ue,doneButton:le,backButton:ce,configuration:Ee,content:ge,title:pe,subtext:fe,settings:Te,end:F,stepType:x,submitButton:de,contentDiv:ve};return n}function qe(e){var t=e.AnimateFirst&&!Pe||Se||L,n=e.Vibrate&&!Se,r={config:e.Animation,isVibrating:n};Fe=i.create("Animator",r),t&&Fe.disableAnimation()}this.AddSubmitButton=function(){de=!0};function Xe(){Se=!0,se=!1,Se&&Fe&&Fe.disableAnimation()}function Je(e,t,r){var i={};return U=n.getContainer(Te,e,se,i),W=M.generateBalloonDiv(U,Se,we,Ie,x,Ke(),be,_e,te,ne,re),n.handleEmbedding(Te,W,i),V=M.fixSize(W,e,se,t,r),ie.showPopupBalloon(W),W}function $e(e,t,n,r){var i=lt(e),o={element:e,elementBounds:i,fixedMaxWidth:t,fixedHeight:n,isScrollNeeded:r},a=Ze(o)||tt(o);if(!a)return;return se&&W.data("iframe",N.element.data("iframe")),pt(a,V,i),ot(W,a),W}function Ze(e){if(e.isScrollNeeded||!n.isEmbeded(Te)||c.isFeatureEnabled("disableStrongEmbed"))return;var t=Ke(),i=(new Date).getTime();for(U=e.element;U&&U.exist();){var o=nt(e,t,U);et(r.EVENTS.BalloonLogs.BalloonPopLocationCalculated,o);var a=!!o&&dt(W,ct);et(r.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,a);var s=!!o&&a;if(s)return o;W&&W.remove();var u=(new Date).getTime(),l=He<u-i,d=U.is("body");if(l||d)return void(U=void 0)}}function et(e,t){var r={isEmbeded:n.isEmbeded(Te),containerEntityType:_e,containerEntityId:we,balloonEntityType:be,balloonEntityId:Ie,extraData:t};v.raiseEvent(e,r)}function tt(e){var t=Ke(),n=nt(e,t,e.element);return n}function nt(e,t,r){var i={};if(U=n.getContainer(Te,r,se,i),!U.exist())return;W=M.generateBalloonDiv(U,Se,we,Ie,x,t,be,_e,te,ne,re),n.handleEmbedding(Te,W,i),V=M.fixSize(W,e.element,se,e.fixedMaxWidth,e.fixedHeight),rt();var o=ut(W,V,U,e.elementBounds);return o}function rt(){var e={};if(null==Ne&&null==De){var e=it(oe);Dt(e.top,e.left,e.height,e.width)}}function it(e){var t={};if(se){var r=oe.offset();t.top=Math.floor(r.top),t.left=Math.floor(r.left)}else{var i=s.getPosRelativeToWindow(oe[0],window,!0);t.top=i.top,t.left=i.left}return t.height=oe.height(),t.width=oe.width(),s.fixOffsetForIE(oe,t),n.fixPosition(t,Te,U),t}function ot(e,t){Fe.setPosition(t.positionType);var n=1==u.getSettingsValue(Te,"isInvisible",0);if(n){e.hide();for(var r=0;r<G.length;r++)G[r].hide()}else Fe.prepare(e,G)}this.showPopupBalloon=function(e){var t=O.Center;Te.hasOwnProperty("pagePosition")&&(t=parseInt(Te.pagePosition,10));var n=i.create("PopupPosition",{animator:Fe,pagePosition:t}),o=u.getSettingsValue(Te,"z-index",r.POPUP_BALLOON_Z_INDEX);e.css({"z-index":o,"min-width":M.minPopupWidth()+"px"});var l=parseInt(u.getSettingsValue(Te,"leftOffset",0)),c=parseInt(u.getSettingsValue(Te,"topOffset",0)),d={top:c,left:l};n.positionElementInPage(e,d);var g=a.canDisplayOverlay(),f=1==u.getSettingsValue(Te,"fadeBackground",1)||1==u.getSettingsValue(Te,"fadeBackground",!0)||"True"==u.getSettingsValue(Te,"fadeBackground","True");g&&f&&a.displayOverlay(o,!0,void 0,Te.overlay);var h=p.isQuirksMode(oe[0]);h&&M.fixQuirksMode(e),Fe.prepare(e),Fe.postAnimation(function(){s.registerResizeAndScrollEvents({element:e,offset:d,callback:t!==O.Center?n.positionElementInPage:void 0})})},this.getBalloonDiv=function(){return W},this.getElement=function(){return oe},this.getBalloonHTML=function(){return M.generateHtml(Ke())},this.Show=function(t,n){$=u.getTimer(Ye);var r=se?_.getDirectHead(oe):e("head"),i=function(){st().then(function(){at(t,n)})};Se?i():M.loadResources(r,i)};function at(e,t){try{var n=se?oe:mtjQuery("body"),r=m.getElementViewport(n),i=ye>0?ye:0,o=Ce>0?Ce:0;r.width()<=200?0!=D&&2!=D&&void 0!=D||(i=r.width()-oe.position().left-20,i<120&&(i=120)):!c.isFeatureEnabled("noHgtLmt")&&r.height()<=200&&(0!=D&&2!=D&&void 0!=D||(D=1)),!X&&q.shouldShow(oe,Te)&&q.highlight(),Et(e,t,i,o)}catch(a){l.error(a)}}function st(){var e=[];return bt()||!Se&&!Q.shouldShow(oe,Te)||(e.push(Q.highlight()),K&&e.push(K.highlight())),o.all(e)}this.stop=function(){Fe.stop()},this.destroy=function(e,t){v.raiseEvent(r.EVENTS.Walkthrus.DestroyStepBalloon),e||(B=!0,mt(),vt()),St(W),Fe.disableAnimation(),Fe.destroy(function(){try{Q.unhighlightElement(oe,"balloon"),K&&K.unhighlightElement(ae,We),q.unhighlightElement(oe,"balloon")}catch(e){l.error(e,"error removing highlighting elements for balloon")}t&&t()})};function ut(e,t,i,o){var a=u.definedOrDefault(D,Ue),l=M.arrowHeight()+1,c=s.getDrawingArea(oe,!se,M.shouldScrollToElement()),d=M.decideWhereToPop(o,t,a,l,c);if(!d)return;d=ht(d,t,o,i),n.fixPosition(d,Te,i),M.addPositionClass(e,d);var g=Ee.BalloonBorderWidth*(M.hasBorder()?1:0);ft(e,d,g,t);var f=u.getSettingsValue(Te,"z-index",r.NORMAL_BALLOON_Z_INDEX);return P.setTopMostCssStyle(e,f),p.isQuirksMode(oe[0])&&M.fixQuirksMode(e),d}function lt(e){if(Oe)return Oe;return s.getElementBounds(e,se,window,Te)}function ct(e){return e.is(":wm_interact_all_points")}function dt(e,t){var n=e.css("display"),r="none"==n;r&&W.css("display","block");var i=t(W);return r&&W.css("display",n),i}function pt(e,t,n){G=M.drawArrows(oe,Ie,e,t,n,U,be);for(var i=u.getSettingsValue(Te,"z-index",r.NORMAL_BALLOON_Z_INDEX),o=0;o<G.length;o++)P.setTopMostCssStyle(G[o],i);M.fixArrows({balloonDiv:W,arrowsDivs:G,result:e,isInCaptureMode:Se,isQuirksMode:p.isQuirksMode(oe[0])})}function gt(){if(!ee)return;var e={objectId:Ie,type:r.STEP_PLAY_INITIATOR_ENUM.STEP};ee(W,e)}function ft(e,t,n,i){e.css("top",t.top-n+"px"),e.css("left",t.left-n+"px");var o=p.isQuirksMode(oe[0]);t.positionType==r.POSITION_TYPE.Top&&e.css("top",t.top-2*n+1+"px"),t.positionType==r.POSITION_TYPE.Bottom&&e.css("top",t.top-1+"px"),t.positionType==r.POSITION_TYPE.Left&&(e.css("left",t.left-2*n+1+"px"),o&&e.css("left",t.left-2*n+"px")),t.positionType==r.POSITION_TYPE.Right&&e.css("left",t.left-1+"px"),e.css("width",i.width+"px"),o&&e.css("width",i.width+2*n+"px"),e.css("height",i.height+"px")}function ht(e,t,n,i){var o=u.definedOrDefault(Ee.BalloonRadius,15);if(e.positionType==r.POSITION_TYPE.Right||e.positionType==r.POSITION_TYPE.Left){var a,s=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;if(isFinite(s)&&0!==s||(s=1),a=Se||Te.lv&&Te.lv>0?mtjQuery(u.getElementDocument(i)).height()*s:mtjQuery(u.getElementDocument(oe)).height()*s,t.height+e.top>a){var l=M.arrowHeight()+1,c=n.top+n.height/2,d=c-t.height/2,p=c-t.height+l+o/2;p=Math.max(0,p);var g=c-l-o/2,f=a-t.height-1,h=Math.min(f,g);e.top=d,e.top=Math.min(h,e.top),e.top=Math.max(e.top,p),e.top=Math.max(0,e.top)}}return e}function mt(){R&&(R.clear(),R=null)}function vt(){for(var e=0;e<Ae.length;e++)try{Ae[e]()}catch(t){}Ae.length=0}function St(e){if(!e)return;try{e.unbind(),mtjQuery("*",e).unbind()}catch(t){}}function Et(e,t,n,i){var o=c.isFeatureEnabled("noScrlAnm")?S.SCROLL_MODES.Normal:S.SCROLL_MODES.Animated,a=u.getSettingsValue(Te,Me,o);e=e&&S.shouldScroll(oe,a,x);var s=!1;e&&(s=S.jspScrollAttempt(oe));var l;if(l=x&&x==r.STEP_TYPE.Popup?Je(oe,n,i):$e(oe,n,i,e),!l)return void(t&&t());gt(l),Lt(l),v.raiseEvent("BalloonCreated",{Element:l,Configuration:Ee,PageElement:oe}),Ve.balloonDrawTime=$("Done drawing balloon"),Z=u.getTimer(Ye);var d=function(){Ve.balloonShowTime=Z("Done showing balloon"),t&&t(Ve,l)};!s&&e?Y.scrollToElementIfNeeded(oe,null,function(){var e=function(){Y.scrollToBalloon(oe,Y.getScrollOptions(Te),W)};Se||!wt(e)?Fe.animate(d):d()},Te,D,a,W,G):Fe.animate(d),M.manipulationsForInlineCss(l)}this.elementDisplayTimeoutFunction=function(){var e=s.isElementVisible(oe,Te.filter);e?(wt(),R=t.playSetTimeout(ie.elementDisplayTimeoutFunction,H)):(J("Element not visible anymore.",5,Ge),ie.destroy(!1,function(){Tt()&&yt()}))};function Tt(){switch(C.state){case r.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case r.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case r.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}}function yt(){Ct()?(J("Sticky - keep looking for element.",5),b.releaseBalloons(),C.state=r.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,I.executeCurrentStep()):It()?(I.setMember("dontContinueTutorial",!1),J("Skippable - continue to next step."),I.executeTutorialNextStep()):C.state!=r.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(J("Stopping walk-thru."),b.releaseBalloons(),C.state=r.WALKTHRU_STATE.PAUSED,v.raiseEvent("WalkthruAborted"),v.raiseEvent("WalkthruStopped"))}function Ct(){return u.getSettingsValue(C.getCurrentStep().Settings,"sticky",0)}function It(){return C.getCurrentStep().IsSkippable}function bt(){return x==r.STEP_TYPE.Popup}function wt(e){var t=!1,n=!1,r=it(oe);!se&&Ot()&&(t=!0),S.isBalloonPositionVisibleRelativeToParents(oe,D)||(t=!0),Oe=null;var i=Nt(r.top,r.left,r.height,r.width),o=Pt();return i&&o?(n=!0,T.shouldMoveByIntervals(t,W,Te)?At(r,e):(J("Element position changed, destroying it",5,Ge),Dt(r.top,r.left,r.height,r.width),_t(),ie.destroy(!0,function(){J("Finished destorying balloon",5,Ge),t||B||(J("Redrawing balloon",5,Ge),ie.Show(!1,function(){Oe=null,e&&e()}))}))):e&&e(),n}function _t(){c.isFeatureEnabled(r.FEATURES.CalculateElementBoundsBeforeRedraw)&&(Oe=s.getElementBounds(oe,se,window,Te))}function Pt(){var e={stepId:Ie,balloonDiv:W,defaultValue:!0};return v.raiseEvent(r.EVENTS.ShouldChangeBalloonPosition,e),e.returnValue}function At(e,n){var r=0;function i(){if(r<10){r++;var o=oe.height(),a=oe.width(),s=T.getDeltaLeft(xe,a,De,e.left),u=T.getDeltaTop(Le,o,Ne,e.top);Dt(e.top,e.left,o,a),kt(W,s,u);for(var l=0;l<G.length;l++)kt(G[l],s,u);bt()||!Se&&!Q.shouldShow(oe,Te)||(Q.highlight(),K&&K.highlight()),!X&&q.shouldShow(oe,Te)&&q.highlight(),t.playSetTimeout(i,30)}else n&&n()}i()}function kt(e,t,n){var r=parseFloat(e.css("left")),i=parseFloat(e.css("top")),o=r-t+"px",a=i-n+"px";e.css("left",o),e.css("top",a)}function Ot(){var e=oe.data("iframe");return e&&s.isElementScrolledOut(oe,e,D)}function Nt(e,t,n,r){return null!=Ne&&null!=De&&null!=Le&&null!=xe&&(y.check(Ne,e)||y.check(De,t)||y.check(Le,n)||y.check(xe,r))}function Dt(e,t,n,r){Ne=e,De=t,Le=n,xe=r}function Lt(e){Ee.classes&&mtjQuery.each(Ee.classes,function(t,n){e.addClass(n)})}je.apply(null,arguments)}i.register("BalloonLogEventHandler").asCtor(mr).dependencies("Logger, WmInternals, Consts");function mr(e,t,n){this.init=s;var r,i="[BalloonLogEventHandler] ",o="balloonLogEventHandler";function a(){r=e.wrapCustomerLog(o)}function s(){t.bind(n.EVENTS.BalloonLogs.BalloonPopLocationCalculated,u),t.bind(n.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,l),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,c),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,c)}function u(e,t){t&&t.isEmbeded&&!t.extraData&&d(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": Something happened while calculaing the position of the balloon, trying to attach it to another element",3)}function l(e,t){t&&t.isEmbeded&&!t.extraData&&d(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": The balloon is partly covered by an element, trying to attach it to another element",3)}function c(e,t){d(t.reason+", trying to attach the balloon to another element. Invalid parent:",3),r(t.currentParent[0])}function d(e,t){r(i+e,t)}a()}i.register("MoveBalloonByIntervalsHelper").asCtor(vr).asProto().dependencies("FeaturesManager");function vr(e){var t=this;t.shouldMoveByIntervals=n,t.getDeltaLeft=i,t.getDeltaTop=r;function n(t,n,r){return e.isFeatureEnabled("moveByIntervals")}function r(e,t,n,r){return parseFloat(e)-parseFloat(t)}function i(e,t,n,r){return parseFloat(e)-parseFloat(t)}}i.register("BalloonElementPositionChangedChecker").asCtor(Sr).asProto().dependencies();function Sr(){var e=this;e.check=t;function t(e,t){return e!=t}}i.register("SafeFullUrlProvider").asCtor(Er).dependencies("FeaturesManager, HostData");function Er(e,t){var n=this;n.get=r;function r(){return e.isFeatureEnabled("disableWidgetOpenFullUrl")?"":t.getUrl()}}i.register("DeployableSafeStartExecuter").asCtor(Tr).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, SafeStartHandlerProvider, SafeStartRedirectService, SafeStartMessageDisplayer");function Tr(e,t,n,r,i,o){var a=this;a.handleSafeStart=s;function s(e,t,a){var s=r.get(e),l=u(t);if(null!=l&&1==l.enabled){var c=o.showAndGetStatus(l,a,e,s);return s.auditSafeStartFirstStatus(c,a),c==n.SAFESTART_ACTION.AutoRedirect&&i.redirect(l.url,n.SAFESTART_ACTION.AutoRedirect,a,s),!0}return s.auditSafeStartDisabled(a),!1}function u(n){var r=e.getSettingsValue(n.Settings,"SafeStart",!1);return r&&"0"!=r.enabled||(r=e.getSettingsValue(t.get().Settings,"SafeStart",null)),r}}i.register("SafeStartMessageDisplayer").asCtor(yr).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, CommonUtils, HtmlDecoder, LibDestroyer, RedirectService, SafeStartRedirectService");function yr(e,t,n,r,o,a,s,u){var l=this;l.showAndGetStatus=c,l.closePopup=d;function c(e,t,r,i){var o,a=e.url;return 1==e.autoRedirect?o=n.SAFESTART_ACTION.AutoRedirect:s.canRedirect(a)&&!s.isUrlDifferentFromCurrentOnlyInHash(a)?(o=n.SAFESTART_ACTION.PopupShown,f(a,t,i)):(o=n.SAFESTART_ACTION.FailOnUrl,p(v(r))),o}function d(){a.releaseBalloons()}function p(e){var t=g();t.enabled&&(e+=kf(" or contact <a href='{0}' target='_blank' style='text-decoration: underline; color: blue;'>support.</a>",t.url));var n=S(e),r={popupStepButtons:[{id:0,name:"OK",action:7}]},o=!0;i.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:n},400,r,function(e){mtjQuery(".walkme-action-ok",e).click(function(){d()})},o)}function g(){var n={},i=t.get();return n.enabled=r.isTrue(i.Settings,"openATicketEnabled",!1),n.url=e.getSettingsValue(i.Settings,"openATicketUrl",""),n.url&&r.isValidUrl(n.url)?(n.url=encodeURI(n.url),n.url=o.decodeHtml(n.url,["&"])):(n.enabled=!1,n.url=null),n}function f(e,n,r){var o=t.get(),a=S(o.SafeStartPopupText),s={popupStepButtons:[{id:0,name:o.RedirectButtonText,action:5},{id:1,name:o.StayButtonText,action:6}]};i.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:a},400,s,function(t){h(t,e,n,r)})}function h(e,t,r,i){mtjQuery(".walkme-action-redirect",e).click(function(){u.redirect(t,n.SAFESTART_ACTION.RedirectClicked,r,i).then(d)}),mtjQuery(".walkme-action-stay",e).click(function(){m(r,i)}),mtjQuery(".walkme-action-close",e).attr("onclick","").unbind("click"),mtjQuery(".walkme-action-close",e).click(function(){m(r,i)})}function m(e,t){t.auditStayButtonClicked(e),d()}function v(e){return"Sorry about that! The "+n.DEPLOYABLE_DISPLAY_NAME[e]+" cannot be played right now. Please try again later"}function S(e){var t=mtjQuery("<div></div>");return e=r.nl2br(e),t.append(e),t}}i.register("SafeStartRedirectService").asCtor(Cr).dependencies("TimerManager");function Cr(e){var t=this;t.redirect=n;function n(t,n,r,i){var o=mtjQuery.Deferred(),a=function(){i.redirect(t,r),o.resolve()};return i.auditSafeStartStatus(n,r),e.setWalkmeTimeout(a),o.promise()}}i.register("SafeStartHandlerProvider").asCtor(Ir).dependencies("DeployableTypes, FlowSafeStartHandler, WalkthruSafeStartHandler");function Ir(e,t,n){var r=this;r.get=i;function i(r){if(r==e.Tutorial)return n;if(r==e.BusinessSolution)return t}}i.register("Encryptor").asCtor(br).dependencies("Base64");function br(e){var t=this;t.encrypt=n;function n(t){return e.btoa(unescape(encodeURIComponent(t)))}}i.register("SearchResultActivator").asCtor(wr).dependencies("CommonUtils, LightboxDisplayer, Logger, CommonEvents, SiteConfigManager, Mustache");function wr(e,t,n,r,i,o){var a=this,s=n.wrapCustomerLog(h),u=[".zendesk.com"],l={width:900,height:500};function c(){return!0}function d(e){e=e.toLowerCase();for(var t=0;t<u.length;t++)if(e.indexOf(u[t].toLowerCase())>=0)return!0;return!1}function p(n){var r=t.getSize(),i='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',a=o.to_html(i,{width:r.width,height:r.height,url:e.isUrlEncoded(n)?n:encodeURI(n)}),s=mtjQuery(a);return s}function g(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://"),n=t||d(e);return n&&s("Can't play content in lightbox",3),n}a.openSearchResult=function(t){if(!e.isValidUrl(t))return void s(kf("Content url is invalid: {0}",t),3);s(kf("Content url is :{0}",t),3),r.raiseEvent("LoadingContent",t);var n="true"===i.get().Custom.lightboxEnabled;g(t)||!n?m(t):f(t)};function f(e){s("Started playing content in lightbox",3),WalkMePlayerAPI.isMenuOpen()&&WalkMePlayerAPI.toggleMenu(),v(),t.activate(e,l,"searchResult",c(),p,m)}function m(e){s("Started playing content in new tab",3),window.open(e,"_blank")}function v(e){t&&t.remove()}}i.register("InfoAndValidationsSmartTipComponentsActivator").asCtor(_r).asProto().dependencies("PromiseUtils");function _r(e,t){var n=this;n.activate=a,n.destroy=s;var r,i;function o(){r=t.infoComponentActivator,i=t.validationsComponentActivator}function a(t){s();var n=[r.activate(t),i.activate(t)];return e.executeParallely(n)}function s(){var t=[r.destroy(),i.destroy()];return e.executeParallely(t)}o()}i.register("InfoSmartTipComponentsActivator").asCtor(Pr).asProto().dependencies("SmartTipComponentDrawerFactory");function Pr(t,n){var r=this;r.activate=s,r.destroy=u;var i,o;function a(){i=n.smartTipModel}function s(e){return o=t.get(i,i.Info),o.draw(e)}function u(){if(o)return o.destroy();return e.when()}a()}i.register("SmartTipComponentsActivatorFactory").asCtor(Ar).dependencies("Consts");function Ar(e){var t=this;t.get=r;function n(){}function r(t){switch(t.Mode){case e.SMART_TIP.MODE.OnlyInfo:return o(t);case e.SMART_TIP.MODE.OnlyValidations:return a(t);case e.SMART_TIP.MODE.InfoAndValidations:return s(t);default:throw new Error("Unsupported smartTipMode: "+t.Mode)}}function o(e){var t={smartTipModel:e};return i.create("InfoSmartTipComponentsActivator",t)}function a(e){var t={smartTipModel:e};return i.create("ValidationsSmartTipComponentsActivator",t)}function s(e){var t=o(e),n=a(e),r={infoComponentActivator:t,validationsComponentActivator:n};return i.create("InfoAndValidationsSmartTipComponentsActivator",r)}n()}i.register("ValidationsSmartTipComponentsActivator").asCtor(kr).asProto().dependencies("Consts, ValidationsSmartTipComponentDrawerCreator, ValidationsSmartTipStateMachineProvider, DocumentElementEventsBinder, TimerManager");function kr(t,n,r,i,o,a){var s=this;s.activate=m,s.destroy=h;var u,l,c,d,p,g;function f(){c=n.create(a.smartTipModel),g=a.smartTipModel}function h(){return T(),C(),d&&(d.reset(),d=null),l=null,u=null,c.removeValidationFeedback()}function m(t){return u=t,T(),y(),v(),C(),I(),e.when()}function v(){var e=r.get(g,u,E);l=e.activationElementsSelector,d=e.stateMachine,p=e.elementEvents}function S(){return c.drawValidationFeedback(u)}function E(e,t,n){t&&t.shouldValidate&&u&&o.libSetTimeout(function(){S().then(function(){var e=n&&n.sender==u[0];c.applyBehaviorOnFeedback({tooltipStartShown:e})})},0)}function T(){e(g).off(t.SMART_TIP_INNER_EVENTS.CheckValidations)}function y(){e(g).on(t.SMART_TIP_INNER_EVENTS.CheckValidations,S)}function C(){if(!p||!u)return;var e=w(p);i.off(u,l,e)}function I(){if(!p||!u)return;for(var e=w(p),t=0;t<e.length;t++)i.on(u,l,e[t],b(p[t]))}function b(e){return function(t){d.evaluate(e,{sender:t.target})}}function w(e){for(var t=[],n=0;n<e.length;n++){var r=e[n]+"."+g.Id;t.push(r)}return t}f()}i.register("ValidationsSmartTipStateMachineConfiguration").asFunction(Or).dependencies("Consts");function Or(e){var t={dontCheck:"dontCheck",delayValidationCheck:"delayValidationCheck",checkValidation:"checkValidation"},n=".walkme.smarttip.validation",r={onFocusOut:"blur"+n,onFocus:"focus"+n,onKeyDown:"keydown"+n,onChange:"change"+n},i=[{toState:t.checkValidation,valueToReturn:{shouldValidate:1}}],o=[{fromState:t.delayValidationCheck,timeout:500,toState:t.checkValidation}],a=[{fromState:"*",onAction:r.onKeyDown,toState:t.delayValidationCheck}],s=[{fromState:"*",onAction:r.onFocusOut,toState:t.checkValidation},{fromState:"*",onAction:r.onFocus,toState:t.dontCheck}],u=[{fromState:"*",onAction:r.onChange,toState:t.checkValidation}];return{initialState:t.dontCheck,timedOutTransitions:o,defaultTransitionValuesToReturn:i,keyDownTransitions:a,keyDownEvents:[r.onKeyDown],focusTransitions:s,focusEvents:[r.onFocus,r.onFocusOut],changeTransitions:u,changeEvents:[r.onChange]}}i.register("ValidationsSmartTipStateMachineProvider").asCtor(Nr).dependencies("ValidationsSmartTipStateMachineConfiguration, StatesMachineCreator, HtmlElementsDataProvider, Consts, ValidationsComplexConditionIndicator");function Nr(e,t,n,r,i){var o=this;o.get=u;var a="*";function s(){}function u(t,r,o){var s=e.focusTransitions,u=e.focusEvents,c=i.containsComplexCondition(t.Validations);t.Settings.validateWhileTyping&&(s=s.concat(e.keyDownTransitions),u=u.concat(e.keyDownEvents)),(n.isSelectInput(r)||c)&&(s=s.concat(e.changeTransitions),u=u.concat(e.changeEvents));var d=l(s,o);return{stateMachine:d,elementEvents:u,activationElementsSelector:c?a:r}}function l(n,r){var i={initState:e.initialState,timedOutTransitions:e.timedOutTransitions,defaultTransitionValuesToReturn:e.defaultTransitionValuesToReturn,onStateChangedCallback:r,transitions:n},o=t.create(i);return o}s()}i.register("ValidationsComplexConditionIndicator").asCtor(Dr).dependencies("ConditionTreeUtils");function Dr(e){var t=this;t.containsComplexCondition=n;function n(t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(i.ConditionTrees&&i.ConditionTrees.Validation){var o=e.anyMatchesCondition(i.ConditionTrees.Validation,r);if(o)return!0}}return!1}function r(e){if("Func"!=e.nodeType)return!1;var t=0===e.funcName.indexOf("Element"),n=0===e.funcName.indexOf("jQuery");return t||n}}i.register("ChainedSmartTipComponentDrawer").asCtor(Lr).asProto().dependencies("PromiseUtils, inArrayFunc");function Lr(t,n,r){var i=this;i.draw=p,i.applyBehavior=g,i.destroy=f;var o,a,s,u={Drawing:"drawing",Drawn:"drawn",Destroying:"destroying",Destroyed:"destroyed"},l=[u.Drawing,u.Drawn],c=[u.Destroying,u.Destroyed];function d(){o=r.drawers}function p(t){var n=function(){return v(e(t))};return h(n,l,u.Destroying)}function g(e){for(var t=0;t<o.length;t++)o[t].applyBehavior&&o[t].applyBehavior(e)}function f(){return h(S,c,u.Drawing)}function h(e,t,n){if(m(t))return a;return a=s==n?a.then(e):e()}function m(e){return n(s,e)!=-1}function v(e){s=u.Drawing;for(var n=[],r=0;r<o.length;r++){var i=o[r];n.push(E(i))}var a=t.executePromiseChain(n,e);return a.always(function(){s=u.Drawn}),a}function S(){s=u.Destroying;for(var e=[],n=o.length-1;n>=0;n--){var r=o[n];e.push(T(r))}var i=t.executePromiseChain(e);return i.always(function(){s=u.Destroyed}),i}function E(e){return e.draw}function T(e){return e.destroy}d()}i.register("SmartTipComponentDrawerFactory").asCtor(xr).dependencies("SmartTipComponentDrawerConfigurationProvider, SmartTipGlobalStylingProvider, SmartTipDrawersCreator");function xr(e,t,n){var r=this;r.get=a;function o(){}function a(e,n){var r=t.get(n.GlobalStyleId),i=s(e,n,r);return i}function s(t,r,o){var a=e.getConfig(r),s=[];if(a.shouldDrawHighlighter){var u=n.getHighlighterDrawer(t,r,o);s.push(u)}if(a.shouldDrawIcon){var l=n.getIconDrawer(t,r,o);s.push(l)}if(a.shouldDrawTooltip){var c=n.getInteractiveTooltipDrawer(r,o,t);s.push(c)}return i.create("ChainedSmartTipComponentDrawer",{drawers:s})}o()}i.register("SmartTipDrawersCreator").asCtor(Fr).dependencies("SmartTipHighlighterDrawerCreator");function Fr(t){var n=this;n.getIconDrawer=o,n.getStaticTooltipDrawer=a,n.getInteractiveTooltipDrawer=s,n.getHighlighterDrawer=u;function r(){}function o(e,t,n){var r={smartTipModel:e,smartTipUiComponentModel:t,globalStyling:n};return i.create("SmartTipIconDrawer",r)}function a(e,t,n){var r={smartTipModel:n,smartTipUiComponentModel:e,globalStyling:t};return i.create("SmartTipTooltipDrawer",r)}function s(e,t,n){var r=a(e,t,n),o={smartTipComponentModel:e,tooltipDrawer:r};return i.create("SmartTipInteractiveTooltipDrawer",o)}function u(n,r,i){var o={};return o["z-index"]=n&&n.Settings&&n.Settings["z-index"],o=e.extend({},i.Highlighter,o),t.create(r.Id,"smartTipUiComponent",o,n)}r()}i.register("SmartTipComponentDrawerConfigurationProvider").asCtor(Mr);function Mr(){var e=this;e.getConfig=n;function t(){}function n(e){var t=e.IsWithIcon,n=!!e.TooltipText,r=e.IsWithHighlighter;return{shouldDrawIcon:t,shouldDrawTooltip:n,shouldDrawHighlighter:r}}t()}i.register("SmartTipIconDrawer").asCtor(Rr).asProto().dependencies("SmartTipIconCreator, Consts");function Rr(t,n,r){var i=this;i.draw=c,i.destroy=d;var o,a,s,u;function l(){a=r.smartTipModel,s=r.smartTipUiComponentModel,u=r.globalStyling}function c(r){o=t.create(a,s,r,u);var i=e.Deferred();return o.show().then(function(e){p();var t=e.getOriginElement();t&&t[0]?i.resolve(t):i.reject()}),e(a).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,g),i.promise()}function d(){return o&&(o.destroy(),o=null),e(a).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,g),e.when()}function p(){e(s).trigger(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:n.EVENTS.SmartTips.SmartTipIconShown})}function g(e){o.reposition()}l()}i.register("SmartTipTooltipDrawer").asCtor(Br).asProto().dependencies("TooltipCreator, Consts, SmartTipDrawerOptionsProvider");function Br(t,n,r,i){var o=this;o.draw=g,o.destroy=f;var a,s,u,l,c=null,d=e.when();function p(){s=i.smartTipUiComponentModel,l=i.globalStyling,u=i.smartTipModel}function g(e){return c=e,h()}function f(){return c=null,d=d.pipe(v)}function h(){return d=d.pipe(v).pipe(m)}function m(){if(!c)return e.when();var i=s.TooltipStyle||l.Tooltip,o=r.getTooltipDrawerOptions(s,u);a=t.create(c,s.TooltipText,i,o);var d=e.Deferred(),p=d.promise();return a.show().pipe(function(e){S(),d.resolve(e)}),e(u).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,E),p}function v(){if(!a)return e.when();e(u).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,E);var t=a.destroy();return a=void 0,t}function S(){e(s).trigger(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{
eventType:n.EVENTS.SmartTips.TooltipShown})}function E(e){h()}p()}i.register("SmartTipDrawerOptionsProvider").asCtor(Ur).dependencies("Consts, ObjectMapper");function Ur(e,t){var n=this;n.getTooltipDrawerOptions=i;var r={"uiComponent.Id":"itemId","smartTip.Settings.z-index":"stepSettings.z-index","smartTip.Settings.embedInParent":"stepSettings.embed","smartTip.Settings.tooltipPosition":"tooltipPosition","smartTip.Settings.tooltipPositionOffset":{destination:"tooltipPositionOffset",where:function(e,t){return void 0!==t("smartTip.Settings.tooltipPosition")}},"smartTip.Settings.Position":{destination:"directionToAvoid",transform:function(t){return e.OPPOSITE_POSITION_TYPE[t]},where:function(e,t){return!!t("uiComponent.IsWithIcon")}}};function i(e,n){var i={smartTip:n,uiComponent:e},o={};return t.merge(i,o,r),o.cssClasses=[],n&&o.cssClasses.push("walkme-tooltip-smarttip-"+n.Id),e&&o.cssClasses.push("walkme-tooltip-uicomponent-"+e.Id),o}}i.register("SmartTipInteractiveTooltipDrawer").asCtor(Vr).asProto().dependencies("TooltipControllerCreator, TooltipVisibilityEventsProvider, WmInternals, Consts");function Vr(t,n,r,i,o){var a=this;a.draw=d,a.applyBehavior=p,a.destroy=g;var s,u,l;function c(){s=o.tooltipDrawer,l=o.smartTipComponentModel}function d(r){var i=n.getEventsByElement(r);return u=t.create(s,r,i),u.setEvents(),f(),e.when(r)}function p(e){e&&e.tooltipStartShown&&u&&u.show()}function g(){if(r.unbind(i.EVENTS.SmartTips.TooltipShown,h),!u)return e.when();var t=u.clean();return u=null,t}function f(){r.bind(i.EVENTS.SmartTips.TooltipShown,h)}function h(e,t){if(!t||!t.uiComponent||!u)return;t.uiComponent.Id!=l.Id&&u.hide()}c()}i.register("SmartTipHighlighterDrawer").asCtor(Wr).asProto().dependencies("CommonUtils, Consts");function Wr(t,n,r){var o=this;o.draw=p,o.destroy=f;var a,s,u,l,c;function d(){l=r.drawableType,c=r.drawableId,s=r.highlighterCustomStyling,u=r.smartTipModel}function p(t){return a=g(t),a.highlight(),e(u).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,h),e.when(t)}function g(e){var n=s,r=t.isTrue(u.Settings,"embedInParent",!1),o={element:e,settings:n,drawableType:l,drawableId:c,monitor:!0,defaultSettings:!1,embedInElement:r,cssKeysValues:[{id:c,name:l},{id:u.Id,name:"smarttipid"}]};return i.create("Highlighter",o)}function f(){return a&&(a.unhighlightElement(),a=null),e(u).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,h),e.when()}function h(e){a.highlight()}d()}i.register("SmartTipHighlighterDrawerCreator").asCtor(Gr);function Gr(){var e=this;e.create=n;function t(){}function n(e,t,n,r){var o={drawableType:t,drawableId:e,highlighterCustomStyling:n,smartTipModel:r};return i.create("SmartTipHighlighterDrawer",o)}t()}i.register("ValidationsSmartTipComponentDrawer").asCtor(Hr).asProto().dependencies("SmartTipComponentDrawerFactory, SmartTipValidationFeedbackComponentProvider, PromiseUtils, Consts");function Hr(t,n,r,i,o){var a=this;a.drawValidationFeedback=p,a.removeValidationFeedback=m,a.applyBehaviorOnFeedback=f;var s,u,l,c;function d(){l=o.smartTipModel,c=!0}function p(t){var r=n.getFeedbackComponent(l,t);if(!h(r)&&!c)return e.when();return c=!1,g(t,r).then(function(){return E(r)})}function g(e,t){var n=[],i=void 0!=u;i&&(u=null,n.push(v));var o=void 0!=t;if(o){u=t;var a=function(){return S(e,t)};n.push(a)}return r.executePromiseChain(n)}function f(e){s&&s.applyBehavior&&s.applyBehavior(e)}function h(e){return e!=u}function m(){return u=null,v()}function v(){if(!s)return e.when();var t=s.destroy();return s=null,t}function S(e,n){return s=t.get(l,n),s.draw(e)}function E(e){e&&e.Type==i.SMART_TIP.COMPONENT_TYPE.Validation?T(i.EVENTS.SmartTips.ValidationFailed,e):T(i.EVENTS.SmartTips.ValidationPassed,e)}function T(t,n){var r={uiComponent:n,eventType:t};e(l).trigger(i.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,r)}d()}i.register("ValidationsSmartTipComponentDrawerCreator").asCtor(jr);function jr(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e},n=i.create("ValidationsSmartTipComponentDrawer",t);return n}t()}i.register("SmartTip").asCtor(Yr).asProto().dependencies("SmartTipVisiblityWatchCreator, Consts, ElementInteractionEventsBinder, SmartTipComponentsIterator, UiChangesTrackerWrapper, SmartTipDrawerCreator, CommonEvents, wmjQuery");function Yr(e,t,n,r,i,o,a,s,u){var l=this;l.activate=v,l.deactivate=w;var c,d,p,g,f,h=".wmst";function m(){c=u.smartTipModel,g=o.create(c),A()}function v(){f=!0,d=e.createVisibilityWatch(c,S,C),d.watchForVisibility()}function S(e){if(!f)return;p=e,g.drawSmartTipElements(p),O(),P(),T(),E(e)}function E(e){var n={smartTip:c,element:e};a.raiseEvent(t.EVENTS.SmartTips.SmartTipElementShown,n)}function T(){var e={isEmbedInElement:c.Settings.embedInParent,element:p,callback:y};i.trackChanges(e)}function y(){s(c).trigger(t.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned)}function C(){b(),I()}function I(){var e={smartTip:c};a.raiseEvent(t.EVENTS.SmartTips.SmartTipElementRemoved,e)}function b(){return i.stopTrackingChanges(),p&&(_(),p=null),g.removeSmartTipElements()}function w(){return f=!1,d&&d.cleanResources(),d=null,b()}function _(){n.unbind(p,h)}function P(){n.bind(p,h,N)}function A(){r.doOnAllComponents(c,k)}function k(e){s(e).on(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(n,r){r.uiComponent=e,s(c).trigger(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,r)})}function O(){N(t.EVENTS.SmartTips.SmartTipSegmented)}function N(e){s(c).trigger(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:e})}m()}i.register("SmartTipSetActivationInitiator").asCtor(zr).dependencies("ElementFinder, SmartTipSetsActivatorFactory, InitiatorManager, Consts");function zr(e,t,n,r){var i=this,o=[];i.start=s,i.stop=l;function a(){}function s(){e.wrapSession(function(){var e={type:r.STEP_PLAY_INITIATOR_ENUM.AUTOSTART};n.setForScope(e,u)})}function u(){o=t.get();for(var e=0;e<o.length;e++)o[e].start()}function l(){for(var e=0;e<o.length;e++)o[e].stop()}a()}i.register("SmartTipDrawer").asCtor(Qr).asProto().dependencies("SmartTipHighlighterDrawerCreator, SmartTipComponentsActivatorFactory, PromiseUtils");function Qr(e,t,n,r){var i=this;i.drawSmartTipElements=l,i.removeSmartTipElements=p;var o,a,s;function u(){o=r.smartTipModel,a=t.get(o)}function l(e){c()&&d(e),a.activate(e)}function c(){return void 0!=o.Settings.hlType}function d(t){s=e.create(o.Id,"smartTip",o.Settings,o),s.draw(t)}function p(){var e=[a.destroy()];return s&&e.push(s.destroy()),n.executeParallely(e)}u()}i.register("SmartTipDrawerCreator").asCtor(Kr);function Kr(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e};return i.create("SmartTipDrawer",t)}t()}i.register("SmartTipGlobalStylingProvider").asCtor(qr).dependencies("SiteConfigManager");function qr(e){var t=this;t.get=r;function n(){}function r(t){var n=e.get(),r=n.SmarttipSettings,i=r[t];return i}n()}i.register("SmartTipCreator").asCtor(Xr);function Xr(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e};return i.create("SmartTip",t)}t()}i.register("SmartTipFirstFailedValidationProvider").asCtor(Jr).dependencies("ConditionCheckerFactory");function Jr(e){var t=this;t.getFirstFailedValidation=n;function n(e,t){if(!e.Validations)return null;for(var n=0;n<e.Validations.length;n++){var i=e.Validations[n];if(i.ConditionTrees&&i.ConditionTrees.Validation){var o=i.ConditionTrees.Validation,a=r(o,t);if(!a)return i}}return null}function r(t,n){var r=e.createNew({getSelectedElement:function(){return n}});return r.getCurrentEvaluationValueAndStopEvaluating(t)}}i.register("SmartTipSetManager").asCtor($r).asProto().dependencies("SmartTipCreator, Consts, PromiseUtils, CommonEvents, GuidGenerator");function $r(t,n,r,i,o,a){var s=this;s.turnOnWithLazyValidations=f,s.turnOnWithImmediateValidations=h,s.turnOff=m;var u,l,c,d,p=!1;function g(){u=a.smartTipModels,c=a.setId,l={},y()}function f(){p||(d=o.generateGuid(),S(),T(),k(),p=!0)}function h(){f(),C(_)}function m(){if(!p)return e.when();return p=!1,E(),v()}function v(){var t=e.map(u,function(e){return l[e.Id]});return r.executeParallelyOnArray(t,b)}function S(){C(I)}function E(){C(P)}function T(){C(A)}function y(){C(w)}function C(t){u&&e.each(u,function(e,n){t(n)})}function I(e){var t=l[e.Id];return t.activate()}function b(e){return e.deactivate()}function w(e){var n=t.create(e);l[e.Id]=n}function _(t){e(t).trigger(n.SMART_TIP_INNER_EVENTS.CheckValidations)}function P(t){e(t).off(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix)}function A(t){e(t).on(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(n,r){var i={smartTipModel:t};i=e.extend(i,r),O(r.eventType,i)})}function k(){O(n.EVENTS.SmartTips.SetTurnedOn)}function O(t,n){var r={setId:c,playGuid:d};n=e.extend(r,n||{}),i.raiseEvent(t,n)}g()}i.register("SmartTipSetsManager").asCtor(Zr).dependencies("SmartTipSetManagerCreator, PromiseUtils, DictionaryUtils");function Zr(t,n,r){var i=this;i.init=u,i.getAll=c,i.getSetManagerById=d,i.turnOffAllSets=p;var o,a;function s(){}function u(e){a=e,l()}function l(){o={};for(var e=a.length-1;e>=0;e--){var n=a[e],r=t.create(n.SmartTips,n.Id);o[n.Id]=r}}function c(){return a}function d(e){return o[e]}function p(){if(!o)return e.when();var t=r.getDictionaryValues(o);return n.executeParallelyOnArray(t,g)}function g(e){return e.turnOff()}s()}i.register("SmartTipSetManagerCreator").asCtor(ei);function ei(){var e=this;e.create=t;function t(e,t){return i.create("SmartTipSetManager",{smartTipModels:e,setId:t})}}i.register("SmartTipValidationFeedbackComponentProvider").asCtor(ti).dependencies("SmartTipFirstFailedValidationProvider");function ti(e){var t=this;t.getFeedbackComponent=r;function n(){}function r(t,n){var r=e.getFirstFailedValidation(t,n);return r||t.PositiveFeedback}n()}i.register("SmartTipVisiblityWatchCreator").asCtor(ni).dependencies("Consts, UIElementVisibilityAttributes");function ni(e,t){var n=this;n.createVisibilityWatch=o;function r(){}function o(e,n,r){var o=e.ConditionTrees.SmartTip,s={logContext:e.Id,stickyType:t.getStickyType(e.Settings),elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings}},isRemoveByCondition:t.getIsRemoveByCondition(e.Settings),conditionCheckerParams:a(e),conditionTree:o&&o.Root?o:void 0,onShow:n,onRemove:r,trackUIChanges:!0},u=i.create("UIVisibilityManager",s);return u}function a(t){return{featureName:e.CONDITION_CHECKER.FEATURE_NAMES.SmartTipSegmentation,elementName:t.Name}}r.apply(null,arguments)}i.register("SmartTipSetActivator").asCtor(ri).asProto().dependencies("SmartTipSetsManager");function ri(e,t){var n=this;n.start=u,n.stop=l;var r,o,a;function s(){r=t.set;var n=e.getSetManagerById(r.Id);o={logContext:r.Id,trackUIChanges:!0,conditionTree:r.ConditionTrees.DisplayRules,onShow:n.turnOnWithLazyValidations,onRemove:n.turnOff,conditionCheckerParams:{elementName:r.Name}}}function u(){if(a)return;a=i.create("UIVisibilityManager",o),a.watchForVisibility()}function l(){a&&a.cleanResources(),a=null}s()}i.register("SmartTipSetsActivatorFactory").asCtor(ii).dependencies("SmartTipSetsManager");function ii(e){var t=this;t.get=r;function n(){}function r(){for(var t=[],n=e.getAll(),r=0;r<n.length;r++){var i=n[r],a=o(i);t.push(a)}return t}function o(e){return i.create("SmartTipSetActivator",{set:e})}n()}i.register("SmartTipComponentsIterator").asCtor(oi);function oi(){var e=this;e.doOnAllComponents=n;function t(){}function n(e,t){if(e.Info&&t(e.Info),e.PositiveFeedback&&t(e.PositiveFeedback),e.Validations)for(var n=0;n<e.Validations.length;n++){var r=e.Validations[n];t(r)}}t()}i.register("DisabledSmartTipsRemover").asCtor(ai).dependencies("DisabledElementsRemover");function ai(e){var t=this;t.remove=n;function n(t){for(var n=0;n<t.length;n++){var i=t[n].SmartTips;e.remove(i,r)}}function r(e){return!e.IsEnabled}}var si=function(){function e(e){this.deployablesDict={},this.lib=e.lib,this.setDeployables(e.deployables)}return e.prototype.setDeployables=function(e){if(!e)return;for(var t=0;t<e.length;t++)this.deployablesDict[e[t].Id]=e[t]},e.prototype.getActionData=function(e){return{Type:"",ItemId:"",Name:""}},e.prototype.isWithAction=function(e){return!1},e.prototype.activateById=function(e,t,n){},e.prototype.getById=function(e){return this.deployablesDict[e]},e.prototype.getAll=function(){var e=[],t=this.deployablesDict;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(e,t){if(void 0===e.OrderIndex||void 0===t.OrderIndex)return 0;return e.OrderIndex-t.OrderIndex})},e.prototype.getDeployablesDict=function(){return this.deployablesDict},e.prototype.releaseAll=function(e){},e.prototype.autoStartEnabled=function(e){return!1},e.prototype.name=function(){return this._name},e}();i.register("DeployablesManagerFactory").asCtor(ui).dependencies("Consts");function ui(e){var t=this;t.get=a;var n;function r(){}function o(){n={},n[e.DEPLOYABLE_TYPE.Tutorial]=i.get("TutorialsManager"),n[e.DEPLOYABLE_TYPE.Content]=i.get("ContentsManager"),n[e.DEPLOYABLE_TYPE.Task]=i.get("TodoListManager"),n[e.DEPLOYABLE_TYPE.Launcher]=i.get("LaunchersManager"),n[e.DEPLOYABLE_TYPE.Category]=i.get("CategoriesManager"),n[e.DEPLOYABLE_TYPE.Collection]=i.get("CollectionsManager"),n[e.DEPLOYABLE_TYPE.Shuttle]=i.get("ShuttlesManager"),n[e.DEPLOYABLE_TYPE.AbExperiment]=i.get("ExperimentsManager"),n[e.DEPLOYABLE_TYPE.Survey]=i.get("SurveysManager"),n[e.DEPLOYABLE_TYPE.ShoutOut]=i.get("ShoutOutsManager"),n[e.DEPLOYABLE_TYPE.ConditionBlock]=i.get("ConditionBlocksManager"),n[e.DEPLOYABLE_TYPE.Tag]=i.get("TagsManager"),n[e.DEPLOYABLE_TYPE.BusinessSolution]=i.get("BusinessSolutionsManager"),n[e.DEPLOYABLE_TYPE.TrackedPage]=i.get("TrackedPagesManager"),n[e.DEPLOYABLE_TYPE.Course]=i.get("CoursesManager"),n[e.DEPLOYABLE_TYPE.Lesson]=i.get("LessonsManager"),n[e.DEPLOYABLE_TYPE.Spotlight]=i.get("SpotlightsManager"),n[e.DEPLOYABLE_TYPE.Tooltip]=i.get("TooltipsManager"),n[e.DEPLOYABLE_TYPE.TrackedElement]=i.get("TrackedElementsManager"),n[e.DEPLOYABLE_TYPE.SearchProviderUrl]=i.get("SearchProviderUrlsManager")}function a(e){return n||o(),n[e]}r()}i.register("DeployableSurveyActivator").asCtor(li).dependencies("Logger, SurveysManager, AutoStartManager");function li(e,t,n){var r=this;r.activateSurvey=i;function i(n,r,i,a,s){e.customerLog("Checking if need to open survey");var u=o(n,r,i);if(u.shouldStart){e.customerLog("Starting survey");var l=t.activateById(n,a,s);if(l)for(var c=0;c<u.cookiesToSave.length;c++)u.cookiesToSave[c]()}}function o(r,i,o){var s={shouldStart:!1,cookiesToSave:[]},u=t.getById(r);if(!u)return e.customerLog("Couldn't find survey with id:"+r,0,"survey"),s;var l=n.checkRepeatCookie("wm-SrvRep-"+u.Id,a(u.Settings));return l&&l.shouldStart&&(s.cookiesToSave.push(l.store),l=n.checkRepeatCookie(i+"-"+u.Id,o),s.cookiesToSave.push(l.store),s.shouldStart=l.shouldStart),s}function a(e){return e.repeat||"visit"}}i.register("DeployableTypeNameProvider").asCtor(ci).dependencies("Consts");function ci(e){var t=this;t.getDeployableTypeNameByTypeNumber=n;function n(t){var n=void 0;return mtjQuery.each(e.DEPLOYABLE_TYPE,function(e,r){if(t==r)return n=e,!1}),n}}i.register("TagsInjector").asCtor(di).dependencies("ConditionsCombinerFactory");function di(e){var t=this;t.inject=n;function n(t,n,i){var o=i.isNewConditions?"ConditionTrees":"Settings";t[o]||(t[o]={});var a=t[o][i.name];if(!n)return a;r(t,i.enabled)&&(t.Settings[i.enabled]=1,a=void 0);var s=e.get(i.isNewConditions),u=s.combine("And",n,a);return t[o][i.name]=u,u}function r(e,t){return t&&"true"!==e.Settings[t]&&!e.Settings[t]}}i.register("TagsSegmentationProperties").asCtor(pi).dependencies("Consts");function pi(e){var t=this;t.properties={},t.properties[e.DEPLOYABLE_TYPE.Tutorial]={name:"DOCT",enabled:"DOCTEnabled"},t.properties[e.DEPLOYABLE_TYPE.Task]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},t.properties[e.DEPLOYABLE_TYPE.Launcher]={name:"PlayLauncherConditionTree"},t.properties[e.DEPLOYABLE_TYPE.Shuttle]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},t.properties[e.DEPLOYABLE_TYPE.Content]={name:"DisplayCondition"},t.properties[e.DEPLOYABLE_TYPE.BusinessSolution]={name:"DisplayRules",enabled:"segmentationEnabled",isNewConditions:!0,dontInjectTagsIntoAutoStartFeature:"SWT_AutoPlayIgnoreTags"},t.properties[e.DEPLOYABLE_TYPE.Course]={name:"DisplayCondition"},t.properties[e.DEPLOYABLE_TYPE.SearchProviderUrl]={name:"DisplayCondition"}}var gi=function(){function e(e){this.eventSender=e}return e.prototype.map=function(e,t){return{type:this.eventSender.EVENT_APPS.Question,oType:e.getType(),owId:t.surveyJson.Id,owName:t.surveyJson.Name,owType:this.eventSender.EVENT_APPS.Survey,pInit:this.getPInit(t)}},e.prototype.getPInit=function(e){if(e.tutorialId)return this.getTutorialPInit(e);if(e.businessSolutionId)return this.getBusinessSolutionPInit(e)},e.prototype.getTutorialPInit=function(e){return{id:e.tutorialId,appType:"wt"}},e.prototype.getBusinessSolutionPInit=function(e){return{id:e.businessSolutionId,appType:"bizFlow"}},e}();i.register("QuestionToEventMapper").asCtor(gi).dependencies("EventSender"),i.register("AnalyticsTrackerConsts").asCtor(fi);function fi(){var e=this;e.EVENT_NAMESPACE=".wmte",e.LOG_LEVEL_DEFAULT=3,e.FEATURES={analyticsTracking:"analyticsTracking",autoTracking:"autoTracking",pageChangeTracking:"pageChangeTracking"}}i.register("AnalyticsTrackerLogger").asCtor(hi).dependencies("Logger, AnalyticsTrackerConsts, Consts");function hi(e,t,n){var r=this;r.customerLog=i,r.error=o;function i(r){e.customerLog(r,t.LOG_LEVEL_DEFAULT,n.FEATURES_LOGS.AnalyticsTracking)}function o(t){e.error(t)}}i.register("TrackedElementEventBinder").asCtor(mi).dependencies("AnalyticsTrackerConsts, AnalyticsTrackerLogger, TrackedElementEventDataSender, ElementInteractionEventsBinder, PageVisitGuidProvider, ChangesTrackerFactory");function mi(e,t,n,r,i,o){var a=this;a.bind=s,a.unbind=u;function s(a,s,u){t.customerLog(kf("TrackedElementEventBinder - binding events to element with id {0}",s.Id)),r.bind(a,e.EVENT_NAMESPACE,function(e){i.get(o.get().getCurrentIndex()).then(function(t){n.send(e,t,s,u,a)})})}function u(n,i){t.customerLog(kf("TrackedElementEventBinder - unbinding events from element with id {0}",i.Id)),r.unbind(n,e.EVENT_NAMESPACE)}}i.register("TrackedElementEventDataSender").asCtor(vi).dependencies("Consts, EventSender, CommonEvents");function vi(e,t,n){var r=this;r.send=i;function i(r,i,o,a,s){var u={type:e.EVENT_SENDER_EVENT_APPS.TrackedElement,oId:o.Id,oName:o.Name,owType:e.EVENT_SENDER_EVENT_APPS.TrackedPage,pId:(a?a.Id:"0")+"_"+i};a?(u.owId=a.Id,u.owName=a.Name):(u.owId=0,u.owName="Site-Wide");var l={eventName:r,eventData:u,trackedElement:o,trackedPage:a,element:s};n.raiseEvent(e.EVENTS.TrackedElementBeforeSendEvent,l),t.postEvent(r,u)}}i.register("TrackedElementInteractionsToggler").asCtor(Si).dependencies("TrackedElementEventBinder");function Si(e){var t=this;t.toggleBinder=n,t.stopBinder=r;function n(t,n,r,i){i?e.bind(t,n,r):e.unbind(t,n)}function r(t,n){t&&e.unbind(t,n)}}var Ei=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.TrackedElement}),this.arrayUtils=r,this.trackedElementsVisibilityTrackerFactory=i,this._name="TrackedElement",this.setDeployables([])}return t.prototype.getAllByPageId=function(e){return this.arrayUtils.filter(this.getAll(),function(t){return t.TrackedPageId==e})},t.prototype.start=function(){this._trackedElementsVisibilityTracker=this.trackedElementsVisibilityTrackerFactory.create({}),this._trackedElementsVisibilityTracker.startTrack()},t.prototype.releaseAll=function(){if(!this._trackedElementsVisibilityTracker)return;this._trackedElementsVisibilityTracker.stopTrack()},t}(si);i.register("TrackedElementsManager").asCtor(Ei).dependencies("Lib, Consts, ArrayUtils, TrackedElementsVisibilityTrackerFactory");function Ti(t,n,r){var i=this;i.stopTrack=u,i.startTrack=l;var o,a=[];function s(){a=t.getAllByPageId(r.trackedPage&&r.trackedPage.Id),o=n.create(r)}function u(){o.stopTrack()}function l(){e(a).each(function(e,t){o.startTrack(t)})}s()}function yi(e,t,n,r){var i=this;i.evaluateAsync=s,i.cleanResources=l,i.getElement=u;var o,a;function s(i){var s=-1;a=t.getStickyType(r.trackedElement.Settings),a!=e.STICKY_TYPE.ONCE&&(s=2e3);var u={logContext:r.trackedElement.Id,findElementParams:{IdentifySettings:r.trackedElement.IdentifySettings},trackUIChanges:!0,elementEvaluationIntervalMs:s};o=n.create(u),o.setOnVisibilityChanged(function(t){i(t==e.VISIBILITY_STATE.VISIBLE),t==e.VISIBILITY_STATE.VISIBLE&&a!=e.STICKY_TYPE.STRONG&&o.cleanResources()}),o.evaluateElementVisibilityAsynch()}function u(){if(o)return o.getElement()}function l(){o&&o.cleanResources()}}i.register("TrackedPageEventDataSender").asCtor(Ci).dependencies("Consts, EventSender");function Ci(e,t){var n=this;n.send=r;function r(n,r){var i={type:e.EVENT_SENDER_EVENT_APPS.TrackedPage,oId:r.Id,oName:r.Name,pId:r.Id+"_"+n};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Play,i)}}var Ii=function(e){__extends(t,e);function t(t,n,r){e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.TrackedPage}),this.trackedPagesEventsListener=r,this._name="TrackedPage",this.setDeployables([])}return t.prototype.start=function(){this.trackedPagesEventsListener.startListen()},t.prototype.setDeployables=function(t){if(!t)return;e.prototype.setDeployables.call(this,t),this.trackedPagesEventsListener.init(t)},t.prototype.releaseAll=function(){this.trackedPagesEventsListener.stopListen()},t}(si);i.register("TrackedPagesManager").asCtor(Ii).dependencies("Lib, Consts, TrackedPagesEventsListener");function bi(e,t){var n=this;n.evaluate=o;var r;function i(){var n={featureName:"evaluate tracked page segmentation",elementName:t.trackedPage.Name,stopPollingAfterEvaluateTrue:!1};r=e.createNew(n)}function o(){if(!t.trackedPage.ConditionTrees||!t.trackedPage.ConditionTrees.DisplayRules)return!0;var e=t.trackedPage.ConditionTrees.DisplayRules;return r.getCurrentEvaluationValueAndStopEvaluating(e)}i()}function wi(e,t,n,r,i,o,a,s){var u=this;u.stopListen=g,u.evaluateAndUpdateContainer=f;var l,c,d;function p(){l=o.create(s),c=a.create(s),d=s.trackedPage}function g(){l.stopTrack()}function f(n){var i=c.evaluate();e.customerLog(kf("TrackedPageEventsListener - for page with id {0}, segmentation condition was{1}met",d.Id,i?" ":" not ")),i?(r.get(n).then(h),l.startTrack(),d.IsComplex&&t.add(d)):(l.stopTrack(),d.IsComplex&&t.remove(d))}function h(e){i.isAutoTrackingOn()||n.send(e,d)}p()}i.register("TrackedPagesEventsListener").asCtor(_i).dependencies("AnalyticsTrackerLogger, ChangesTrackerFactory, TrackedActivatedPagesContainer, TrackedPageEventsListenerFactory");function _i(t,n,r,i){var o,a=this,s=[];a.init=l,a.startListen=c,a.stopListen=d;var u;function l(e){t.customerLog("TrackedPagesEventsListener - init"),o=e,u=n.get()}function c(){t.customerLog("TrackedPagesEventsListener - startListen"),u.bind(p),e(o).each(function(e,t){var n={trackedPage:t},r=i.create(n);s.push(r)}),p({uiChangeIndex:0})}function d(){t.customerLog("TrackedPagesEventsListener - stopListen"),u.unbind(p);for(var e=0;e<s.length;e++)s[e].stopListen();s=[]}function p(e){for(var t=0;t<s.length;t++)s[t].evaluateAndUpdateContainer(e.uiChangeIndex);r.resolveUIChange(e.uiChangeIndex)}}i.register("PageVisitGuidProvider").asCtor(Pi).dependencies("ChangesTrackerFactory, GuidGenerator, Consts");function Pi(e,n,r){var i,o,a,s=this;s.get=d,s.releaseResources=g;var u;function l(){o=0,u=e.get(),u.bind(c),p(),a=mtjQuery.Deferred(),mtjQuery(t).on(r.EVENTS.NewSession,p)}function c(e){o=e.uiChangeIndex,p(),a&&a.resolve(i),a=mtjQuery.Deferred()}function d(e){return e<o?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):void 0===e||e==o?mtjQuery.Deferred().resolve(i):a.promise()}function p(){i=n.generateGuid(!0)}function g(){mtjQuery(t).off(r.EVENTS.NewSession,p),u.unbind(c)}l()}i.register("TrackedElementIndicatorService").asCtor(Ai).dependencies("FeaturesManager, AnalyticsTrackerConsts");function Ai(e,t){var n=this;n.isAutoTrackingOn=r;function r(){return e.isFeatureEnabled(t.FEATURES.autoTracking)}}i.register("TrackedActivatedPagesContainer").asCtor(ki).dependencies("DictionaryUtils");function ki(e){var t,n,r=this;r.add=s,r.remove=u,r.getAll=l,r.resolveUIChange=a;var i;function o(){i={},t=0,n=mtjQuery.Deferred()}function a(e){t=e,n&&n.resolve(c()),n=mtjQuery.Deferred()}function s(e){i[e.Id]=e}function u(e){delete i[e.Id]}function l(e){return e<t?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):void 0===e||e==t?mtjQuery.Deferred().resolve(c()):n.promise()}function c(){return e.getDictionaryValues(i)}o()}function Oi(e,t){var n=this;n.startTrack=r,n.stopTrack=i;function r(e){(e.IdentifySettings.IsJquerySelector||1==e.IsViewsOnly)&&t.startTrack(e,o)}function i(){t.stopTrack(a)}function o(t){0==t.trackedElement.IsViewsOnly&&e.toggleBinder(t.element,t.trackedElement,t.trackedPage,t.isVisible)}function a(t,n){0==n.IsViewsOnly&&e.stopBinder(t,n)}}function Ni(e,t){var n=this;n.startTrack=r,n.stopTrack=i;function r(e){t.startTrack(e,o)}function i(){t.stopTrack(e.stopBinder)}function o(t){e.toggleBinder(t.element,t.trackedElement,t.trackedPage,t.isVisible)}}function Di(t,n,r,i,o,a,s){var u=this;u.startTrack=d,u.stopTrack=p;var l;function c(){l={}}function d(e,t){if(l[e.Id])return;n.customerLog(kf("TrackedElementVisibilityTracker - trackVisibility for element with id {0}",e.Id));var r={trackedElement:e},i=a.create(r);l[e.Id]={evaluator:i,trackedElement:e},i.evaluateAsync(function(n){var r={isVisible:n,trackedElement:e,trackedPage:s.trackedPage,visibilityCallback:t};g(r)})}function p(t){n.customerLog(kf("TrackedElementVisibilityTracker - stopTrack")),e.each(l,function(e,n){var r=n.evaluator.getElement();t&&t(r,n.trackedElement),n.evaluator.cleanResources()}),l={}}function g(e){n.customerLog(kf("TrackedElementVisibilityTracker - visibility changed for element with id {0} to {1}",e.trackedElement.Id,e.isVisible));var a=l[e.trackedElement.Id].evaluator.getElement();e.isVisible&&i.get(o.get().getCurrentIndex()).then(function(n){r.send(t.EVENT_SENDER_EVENT_TYPES.Visible,n,e.trackedElement,e.trackedPage,a)}),e.element=a,e.visibilityCallback&&e.visibilityCallback(e)}c()}i.register("ElementVisibilityEvaluatorFactory").asCtor(Li).dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator");function Li(e,t,n,r,i,o,a){var s=this;s.create=u;function u(s){return new Nd(e,t,n,r,i,o,a,s)}}i.register("TrackedElementsVisibilityTrackerFactory").asCtor(xi).dependencies("TrackedElementVisibilityTrackerFactory");function xi(e){var t=this;t.create=n;function n(t){var n=i.get("TrackedElementsManager");return new Ti(n,e,t)}}i.register("TrackedElementVisibilityEvaluatorFactory").asCtor(Fi).dependencies("Consts, UIElementVisibilityAttributes, ElementVisibilityEvaluatorFactory");function Fi(e,t,n){var r=this;r.create=i;function i(r){return new yi(e,t,n,r)}}i.register("TrackedElementVisibilityTrackerFactory").asCtor(Mi).dependencies("TrackedElementIndicatorService, Consts, AnalyticsTrackerLogger, TrackedElementEventDataSender, PageVisitGuidProvider, ChangesTrackerFactory, TrackedElementInteractionsToggler, TrackedElementVisibilityEvaluatorFactory");function Mi(e,t,n,r,i,o,a,s){var u,l=this;l.create=d;function c(){u=e.isAutoTrackingOn()}function d(e){var l=new Di(t,n,r,i,o,s,e);return u?new Oi(a,l):new Ni(a,l)}c()}i.register("TrackedPageEventsListenerFactory").asCtor(Ri).dependencies("AnalyticsTrackerLogger, TrackedActivatedPagesContainer, TrackedPageEventDataSender, PageVisitGuidProvider, TrackedElementIndicatorService, TrackedElementsVisibilityTrackerFactory, TrackedPageSegmentConditionCheckerFactory");function Ri(e,t,n,r,i,o,a){var s=this;s.create=u;function u(s){return new wi(e,t,n,r,i,o,a,s)}}i.register("TrackedPageSegmentConditionCheckerFactory").asCtor(Bi).dependencies("ConditionCheckerFactory");function Bi(e){var t=this;t.create=n;function n(t){return new bi(e,t)}}i.register("ChangesTrackerFactory").asCtor(Ui).dependencies("FeaturesManager, AnalyticsTrackerConsts, UIChangeTracker, PageChangeTracker");function Ui(e,t,n,r){var i=this;i.get=s;var o;function a(){o=e.isFeatureEnabled(t.FEATURES.pageChangeTracking)?r:n}function s(){return o}a()}function Vi(e,t,n){var r,o=i.create("WalkmeOOP",this),a=o.Prop.Public("contentMargin",15);o.Override("manipulationsForInlineCss",function(e){if(t.isIE(8,"lte"))return;r.balloonSettings()}),o.Override("createTemplateData",function(){var n=r.createTemplateData();return n.outerDiv=r.getCustomDivHtml("inner-div"),n.colors.xBtn=r.balloonSettings().XButtonColor,n.top={minHeight:30,textAlign:n.direction.side,content:{sideMargin:a(),oppositeSideMargin:a()-2}},n.shadow=e.calculate(r.balloonSettings().ShadowType,r.balloonSettings().ShadowLevel,r.balloonSettings().ShadowColor),n.isNotIe7=!t.isIEBrowser(7),n}),o.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-tooltip-outer-div walkme-tooltip-v1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-tooltip-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; -webkit-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); -moz-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); font-family: walkme-opensans; border-radius:3px; overflow: hidden;'><div class='walkme-tooltip-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius: 3px; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-tooltip-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius: 3px;'><div class='walkme-tooltip-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'>"),r.s(r.d("data.content",e,t,1),e,t,0,1006,1264,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-tooltip-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; padding: 9px 9px 8px 9px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b("; overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div></div></div></div>"),r.fl()};return e});function s(){o.ExtendsInstance(i.create("BaseBalloon",n)),r=o._base}s.apply(null,arguments)}i.register("TooltipV1").asCtor(Vi).asProto().dependencies("ShadowCalculator, HostData"),i.register("TooltipDrawerV1").asCtor(Wi).asProto().dependencies("CommonUtils, ResourceManager, UiUtils, Consts, BalloonPositionProvider, PlatformsService, FeaturesManager, ContainerAppender");function Wi(t,n,r,o,a,s,u,l,c){var d,p=i.create("WalkmeOOP",this),g=[];p.Override("addBalloonDiv",function(n,i){var o=t.createElementInDocument(n,i[0].ownerDocument);return u.isFeatureEnabled("accessibility")&&(focusableElements=o.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),t.addTabIndex(focusableElements),focusableElements.on("focus",function(){e(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){e(this).css({outline:"none","outline-offset":"0px"})})),r.setLangAttribute(o),o.css("display","none"),l.appendToContainer(i,o)}),p.Override("decideWhereToPop",function(e,t,n,r,i,o){if(void 0!=c.tooltipPosition)return a.getPredefinedPosition(e,t,r,i,c.tooltipPosition,c.tooltipPositionOffset);
return a.findBestPosition(e,t,r,i,c.directionToAvoid)}),p.Override("loadResources",function(e,t){var r=d.balloonSettings().FontsData;r?n.fonts(r,e,t,t):t&&t()}),p.Override("fixWidth",function(e,t,n,r){d.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),p.Override("getArrowsColors",function(e){var t=d.balloonSettings(),n=t.Color,r=t.BorderColor;return{innerArrow:n,outterArrow:r}}),p.Override("fixArrows",function(e){var t=e.balloonDiv,n=e.arrowsDivs,r=e.result,i=e.isInCaptureMode,a=e.isQuirksMode,s=d.balloonSettings().direction,u=r.positionType==o.POSITION_TYPE.Left||r.positionType==o.POSITION_TYPE.Right;u?S(t,n,r,s,a):i&&r.positionType==o.POSITION_TYPE.Top&&E(n),e.isQuirksMode&&y(t)}),p.Override("fixQuirksMode",function(e){}),p.Override("finalizeArrowsPosition",function(e,t,n){switch(e){case o.POSITION_TYPE.Top:t.top--;break;case o.POSITION_TYPE.Bottom:t.top++;break;case o.POSITION_TYPE.Left:t.left--;break;case o.POSITION_TYPE.Right:t.left++}}),p.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-tooltip-content",t);n.css("width",e+"px"),t.css("width","auto");var r=t.width();t.css("width",r+"px")});p.Override("generateIdForBalloon",f);function f(e){return"walkme-tooltip-"+c.itemId}p.Override("generateClassesForBallon",h);function h(e,t,n){return g}p.Override("generateClassesForArrows",m);function m(e,t,n){return["walkme-custom-tooltip-arrow","walkme-custom-tooltip-arrow-"+t,"walkme-custom-tooltip-arrow-"+e,"walkme-custom-tooltip-arrow-"+e+"-"+t,"walkme-custom-tooltip-item-"+c.itemId]}function v(){p.ExtendsInstance(i.create("BaseBalloonDrawer",c));var e=c.balloonSettings.minPopupWidth?c.balloonSettings.minPopupWidth:300;g=c.cssClasses||[],d=p._base,T(),d.balloonClass("TooltipV1"),d.minWidth(0),d.minPopupWidth(e),d.arrowHeight(5),d.arrowBaseWidth(9),d.hasBorder(!1),d.shouldScrollToElement(!1),d.balloonTitleSelector(".walkme-tooltip-content"),d.balloonContentSelector(".walkme-tooltip-content")}function S(e,t,n,r,i){e.show();var o=d.arrowBaseWidth(),a=parseFloat(t[0].css("top")),s=parseFloat(e.css("top")),u=e[0]?e[0].offsetHeight:0,l=a-s,c=u;if(e.hide(),c-l<o&&c>l){var p=s-(c-l);e.css("top",p+"px")}}function E(e){e[0].css("border-top-color",d.balloonSettings().Color)}function T(){s.getCurrentPlatform()==o.PLATFORM.MobileWeb&&d.defaultMaxWidth(230)}function y(t){var n,r=e(".walkme-tooltip-arrow-inner",t.parent()),i=e(".walkme-tooltip-arrow-outer",t.parent());if(r.hasClass("walkme-tooltip-arrow-right"))n="right";else{if(!r.hasClass("walkme-tooltip-arrow-left"))return;n="left"}r.css("border-"+n+"-color",d.balloonSettings().Color),i.css("border-"+n+"-color",d.balloonSettings().BorderColor)}v.apply(null,arguments)}i.register("Tooltip").asCtor(Gi).asProto().dependencies("TooltipBalloonAdapter");function Gi(t,n){var r=this;r.show=a,r.destroy=s;var i;function o(){i=t.createBalloon(n)}function a(){var t=e.Deferred();return i.Show(!1,function(e,n){t.resolve(n)}),t.promise()}function s(){var t=e.Deferred();return i.destroy(!1,function(){t.resolve()}),t.promise()}o.apply(null,arguments)}i.register("TooltipBalloonAdapter").asCtor(Hi).dependencies("Consts, PositionHelper, Logger, BalloonButtonsEventsBinder, SiteConfigManager");function Hi(t,n,r,o,a){var s=this;s.createBalloon=u;function u(s){var u=a.get(),c=l(u,s.styling),d=e.extend(!0,{},s.drawingOptions);d.balloonSettings=c;var p={element:s.element,forceEmbedBalloonInIframe:!1,positionHelper:n,stepSettings:d.stepSettings||{},text:{title:"",content:s.text,subText:""},data:{type:t.STEP_TYPE.Normal},configuration:c,logger:r,drawer:i.create("TooltipDrawerV1",d),siteConfig:u,bindButtonsFunc:o.addButtonEventsToBalloon},g=i.create("Balloon",p);return g}function l(e,t){var n=Af(e.BalloonSettings);return c(n,t),n.Vibrate=!1,d(n),n}function c(e,t){e.Color=t.backColor,e.BorderColor=t.borderColor,e.ContentColor=t.textColor,e.BalloonBorderWidth=1}function d(e){e.Animation&&(e.Animation={Id:t.ANIMATION_TYPES.None,InitCSS:{display:"block"},MetaData:{},Options:{},Properties:{}})}}i.register("TooltipCreator").asCtor(ji).dependencies();function ji(){var e=this;e.create=n;function t(){}function n(e,t,n,r){var o={element:e,text:t,styling:n,drawingOptions:r};return i.create("Tooltip",o)}t.apply(null,arguments)}i.register("TooltipActions").asCtor(Yi);function Yi(){var e=this;e.actions={element:{mouseover:"mouseover.element",mouseout:"mouseout.element",focus:"focus.element",blur:"blur.element",click:"click.element"},tooltip:{show:"show.tooltip",hide:"hide.tooltip"},document:{click:"click.document",touchstart:"touchstart.document"}}}i.register("TooltipController").asCtor(zi).asProto().dependencies("Consts, wmjQuerySafe, EventBinder, StatesMachineCreator, TooltipStatesMachineConfigProvider, TooltipEventsConfiguration, TooltipActions");function zi(t,n,r,i,o,a,s,u){var l=this;l.clean=T,l.setEvents=I,l.show=y,l.hide=C;var c,d,p,g,f,h,m=1e7,v=Math.floor(Math.random()*m),S=".Walkme.Tooltip."+v;function E(){d=u.tooltipDrawer,p=u.boundElement;var e=o.getConfig(k),t=a.get(u.events);g=t.eventsForElement,f=t.eventsForDocument,h=t.eventsForTooltip,c=i.create(e);for(var n=0;n<e.stateMachineInitialActions.length;n++){var r=e.stateMachineInitialActions[n];r.shouldSimulateAction(p)&&c.evaluate(r.action)}}function T(){var e=n(p);return _(e,g),_(e.getDocument(),f),c.reset(),d.destroy()}function y(){c.evaluate(s.actions.tooltip.show)}function C(){c.evaluate(s.actions.tooltip.hide)}function I(){w(p,g,P),w(e(p[0].ownerDocument),f,A)}function b(){d.draw(p).then(function(e){e&&w(e,h,P)})}function w(e,t,n){if(!t)return;for(var i=t.length-1;i>=0;i--){var o=t[i];r.bind(e,o+S,n(o))}}function _(e,t){if(!t)return;for(var n=t.length-1;n>=0;n--){var i=t[n];r.unbind(e,i+S)}}function P(e){return function(){c.evaluate(e)}}function A(t){return function(n){n.target==p[0]||e.contains(p[0],n.target)||c.evaluate(t)}}function k(e,t){if(!t)return;t.shouldShow?b():t.shouldHide&&d.destroy()}E()}i.register("TooltipControllerCreator").asCtor(Qi);function Qi(){var e=this;e.create=n;function t(){}function n(e,t,n){return i.create("TooltipController",{tooltipDrawer:e,boundElement:t,events:n})}t.apply(null,arguments)}i.register("TooltipVisibilityEventsProvider").asCtor(Ki).dependencies("Consts, HtmlElementsDataProvider");function Ki(e,t){var n=this;n.getEventsByElement=i;function r(){}function i(n){var r={};return r[e.TOOLTIPS_ACTIVATION_MODES.Mouse]=!0,t.isInput(n)&&(r[e.TOOLTIPS_ACTIVATION_MODES.Focus]=!0),r}r.apply(null,arguments)}i.register("TooltipStatesMachineConfigProvider").asCtor(qi).dependencies("Consts, TooltipActions");function qi(t,n){var r=this;r.getConfig=f;var i={mouseInside:1,focused:2},o={hidden:"hidden",delayShow:"delayShow",visible:"visible",delayHide:"delayHide"},a=([n.actions.element.mouseover,n.actions.element.mouseout],[n.actions.element.focus,n.actions.element.blur],{});a[n.actions.element.mouseover]={addFlag:[i.mouseInside]},a[n.actions.element.mouseout]={removeFlag:[i.mouseInside]},a[n.actions.element.focus]={addFlag:[i.focused]},a[n.actions.element.blur]={removeFlag:[i.focused]};var s=[{fromState:o.delayShow,toState:o.visible,valueToReturn:{shouldShow:1}},{fromState:o.delayHide,toState:o.hidden,valueToReturn:{shouldHide:1}},{fromState:o.visible,toState:o.hidden,valueToReturn:{shouldHide:1}},{fromState:o.hidden,toState:o.visible,valueToReturn:{shouldShow:1}}],u=[{fromState:o.delayShow,timeout:300,toState:o.visible},{fromState:o.delayHide,timeout:300,toState:o.hidden}],l=[{fromState:o.hidden,onAction:n.actions.tooltip.show,toState:o.delayShow},{fromState:o.delayHide,onAction:n.actions.tooltip.show,toState:o.visible},{fromState:o.visible,onAction:n.actions.tooltip.hide,toState:o.hidden,ifNotFlagged:[i.focused,i.mouseInside]},{fromState:o.delayShow,onAction:n.actions.tooltip.hide,toState:o.hidden}],c=[{fromState:o.hidden,onAction:n.actions.element.mouseover,toState:o.delayShow},{fromState:o.delayShow,onAction:n.actions.element.mouseout,toState:o.hidden},{fromState:o.visible,onAction:n.actions.element.mouseout,toState:o.delayHide,ifNotFlagged:[i.focused]},{fromState:o.delayHide,onAction:n.actions.element.mouseover,toState:o.visible},{fromState:o.hidden,onAction:n.actions.element.click,toState:o.visible},{fromState:o.visible,onAction:n.actions.element.click,toState:o.hidden},{fromState:o.visible,onAction:n.actions.document.click,toState:o.hidden,ifNotFlagged:[i.focused]},{fromState:o.visible,onAction:n.actions.document.touchstart,toState:o.hidden,ifNotFlagged:[i.focused]}],d=[{fromState:o.hidden,onAction:n.actions.element.focus,toState:o.visible},{fromState:o.visible,onAction:n.actions.element.blur,toState:o.hidden,ifNotFlagged:[i.mouseInside]},{fromState:o.delayShow,onAction:n.actions.element.focus,toState:o.visible},{fromState:o.delayHide,onAction:n.actions.element.focus,toState:o.visible}],p=[{shouldSimulateAction:function(t){return e(t).is(":focus")},action:n.actions.element.focus}];function g(){}function f(e){var t=l;return t=t.concat(c),t=t.concat(d),{initState:o.hidden,transitions:t,timedOutTransitions:u,globalActionFlags:a,defaultTransitionValuesToReturn:s,onStateChangedCallback:e,stateMachineInitialActions:p}}g()}F.register(D.PLATFORM.Web,function(){i.register("TooltipEventsConfiguration").asCtor(Xi).dependencies("Consts, TooltipActions")});function Xi(e,t){var n=this;n.get=r;function r(n){var r=[],i=[],o=[],a=[t.actions.element.mouseover,t.actions.element.mouseout],s=[t.actions.element.focus,t.actions.element.blur];return n[e.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat(a),o=o.concat(a)),n[e.TOOLTIPS_ACTIVATION_MODES.Focus]&&(r=r.concat(s)),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}}}F.register(D.PLATFORM.MobileWeb,function(){i.register("TooltipEventsConfiguration").asCtor(Ji).dependencies("Consts, TooltipActions")});function Ji(e,t){var n=this;n.get=r;function r(n){var r=[],i=[],o=[];return n[e.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat([t.actions.element.click]),o=o.concat([t.actions.element.click]),i=i.concat([t.actions.document.click,t.actions.document.touchstart])),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}}}i.register("DisabledCourseQuizzesRemover").asCtor($i);function $i(){var e=this;e.remove=t;function t(e){for(var t=0;t<e.length;t++){var n=e[t].Quiz;n&&!n.IsEnabled&&delete e[t].Quiz}}}i.register("QuizStatusManager").asCtor(Zi).dependencies("Consts, ServerStorageManager");function Zi(e,t){var n=this;n.setQuizStatus=r,n.getQuizStatus=i;function r(n,r){t.saveData(o(n),r,e.COOKIE_LIFE_10_YEARS)}function i(e){return t.getData(o(e),null)}function o(t){return e.TeachMe.QUIZ_RESULT_STORAGE_KEY_PREFIX+t.Id}}i.register("QuizPlayer").asCtor(eo).dependencies("UIComponentsFactory, QuizStatusManager, Consts, CommonEvents");function eo(t,n,r,o){var a=this;a.releaseAll=l,a.playQuiz=c;var s,u;function l(e){u&&u.destroy(),u=null,e&&e()}function c(e){return s=i.create("QuizPlayEventRaiser",{quiz:e}),s.raiseQuizPlayEvent(),d(e).pipe(p).pipe(g).pipe(f).always(function(){o.raiseEvent(r.EVENTS.UIComponentDestroyed),u=null})}function d(e){var n=e.WelcomePage,r=t.get(n.UiComponentId,[n,e]);return s.registerXButtonClickedEvent(r),h(r,"start-quiz").pipe(function(){return e})}function p(r){var i=t.get(r.UiComponentId,r);return s.registerXButtonClickedEvent(i),h(i,"quiz-submitted").then(function(e,t,n){for(var r=0;r<n.questionsResults.length;r++){var i=n.questionsResults[r];s.raiseQuizAnswerSubmittedEvent(i)}s.raiseQuizSubmittedEvent()}).pipe(function(t,r,i){var o=1==i.didPassQuiz,a=o?r.SuccessSummeryPage:r.FailSummeryPage;return s.raiseQuizCompletionEvent(o,i.score),n.setQuizStatus(r,i.didPassQuiz),e.Deferred().resolve(r,a,i)})}function g(e,n,r){var i=t.get(n.UiComponentId,[n,e,r]);return s.registerXButtonClickedEvent(i),h(i,"open-quiz-results").pipe(function(){return r})}function f(e){var t=i.create("QuizResultsDisplayer",{quizResults:e});return u=t,t.show()}function h(t,n){var r=e.Deferred();return u=t,t.once("append-end",function(){t.show(),r.notify("shown")}),t.once(n,function(){r.resolve.apply(null,arguments)}),"destroy-end"!=n&&t.once("destroy-end",function(){r.reject()}),t.append(),r.promise()}}i.register("QuizPlayEventRaiser").asCtor(to).asProto().dependencies("Consts, CommonEvents, PlayGuidGenerator");function to(t,n,r,i){var o=this;o.raiseQuizPlayEvent=l,o.raiseQuizSubmittedEvent=c,o.raiseQuizAnswerSubmittedEvent=d,o.raiseQuizCompletionEvent=p,o.registerXButtonClickedEvent=g;var a,s;function u(){a=i.quiz,s=r.generateNewPlayGuid(a.Id)}function l(){n.raiseEvent(t.EVENTS.Quizzes.QuizPlay,{currentPlayGuid:s,quiz:a})}function c(){n.raiseEvent(t.EVENTS.Quizzes.QuizSubmitted,{currentPlayGuid:s,quiz:a})}function d(r){for(var i={currentPlayGuid:s,quiz:a,questionId:r.questionId,question:r.question},o=0;o<r.userAnswersIds.length;o++)n.raiseEvent(t.EVENTS.Quizzes.QuizAnswerSubmitted,e.extend({},i,{answerId:r.userAnswersIds[o],answer:r.userAnswers||r.correctAnswers}))}function p(e,r){var i=e?t.EVENTS.Quizzes.QuizPass:t.EVENTS.Quizzes.QuizFail;n.raiseEvent(i,{currentPlayGuid:s,quiz:a,score:r})}function g(e){e.once("x-clicked",function(){n.raiseEvent(t.EVENTS.Quizzes.QuizXButtonClicked)})}u()}i.register("ContainerAppender").asCtor(no);function no(){var t=this;t.appendToContainer=n;function n(t,n){return e(n).appendTo(t)}}function ro(e,t,n,r,o){var a,s,u=i.create("WalkmeOOP",this),l=u.Prop.Protected("lib"),c=u.Prop.Protected("title"),d=u.Prop.Protected("content"),p=u.Prop.Protected("customHtml"),g=u.Prop.Protected("stepIndexText"),f=u.Prop.Protected("balloonSettings"),h=u.Prop.Protected("direction"),m=u.Prop.Protected("userGuid"),v=(u.Prop.Protected("contentDiv"),u.Prop.Protected("fixedWidth"),u.Prop.Protected("fixedHeight"),u.Prop.Protected("stepType")),S=u.Prop.Protected("buttons"),E=(u.Virtual.Public("generateHtml",function(){var e=E(),t=T(),n=r.to_html(e,t);return n}),u.Virtual.Protected("createHtmlTemplate")),T=u.Virtual.Protected("createTemplateData",function(){k("BalloonCloseTooltip");var r=1==e.getSettingsValue(a,"displayX",!0)||"True"==e.getSettingsValue(a,"displayX","True")||1==e.getSettingsValue(a,"displayX",1),i={data:{title:c(),content:d(),customHtml:p(),stepIndexText:g(),balloonCloseTooltip:t.get().BalloonCloseTooltip},font:f().Font,cssReset:n.CssResetRules,displayX:r,colors:{mainBg:f().Color,minorBg:f().BalloonColor2,border:f().BorderColor,header:f().HeaderColor,content:f().ContentColor,footerText:f().FooterTextColor,buttonBg:f().ButtonBgColor,buttonBg2:f().ButtonBgColor2,buttonBorder:f().ButtonBorderColor,buttonText:f().ButtonTextColor},radiuses:{balloon:f().BalloonRadius+"px",button:f().BalloonButtonRadius+"px"},direction:{basic:h(),side:"rtl"==h()?"right":"left",oppositeSide:"rtl"==h()?"left":"right"},poweredBy:{showText:"txt"==f().showPoweredByFormat,link:f().showPoweredBy?"http://www.walkme.com/?u="+m():""},buttons:S().buttonsArr,border:{size:f().BalloonBorderWidth+"px"}};return i}),y=(u.Virtual.Public("manipulationsForInlineCss",function(){}),u.Protected("getCustomDivHtml",function(e){return"<div class='walkme-custom-balloon-custom-div-"+e+"' style='display:none;' ></div>"}),u.Virtual.Protected("generateNormalButtonClasses",function(e,t){return P(t,e)}));u.Public("initButtons",function(e){var t={back:e.backButton,next:e.nextButton,done:e.doneButton,submit:e.submitButton},n=C(),r=b(t,n);S(r)});function C(){var t=e.getSettingsValue(a,"customButtons",[]);if(0==t.length){var n=v()==D.STEP_TYPE.Popup,r=n?e.getSettingsValue(a,"popupStepButtons",[]):[];t=r}return t}function I(){l(o.lib),c(o.balloonData.title),d(o.balloonData.content),p(o.balloonData.customHtml),g(o.balloonData.stepIndexText),f(o.balloonSettings),h(o.balloonSettings.direction),m(o.userGuid),v(o.stepType),a=o.settings,s=o.end}function b(e,t){var n={};if(n.nextButton=n.doneButton=n.backButton=n.submitButton=!1,n.buttonsArr=[],0==t.length)v()!=D.STEP_TYPE.Popup&&(n=w(e.back,e.next,e.done,e.submit));else for(var r=0;r<t.length;r++){var i=t[r];if(0==i.action){var o=w(!1,e.next,e.done,!1);n.nextButton=o.nextButton,n.doneButton=o.doneButton,o.buttonsArr.length>0&&n.buttonsArr.push(o.buttonsArr[0])}else if(2==i.action){var a=w(e.back,!1,!1,!1);n.backButton=a.backButton,a.buttonsArr.length>0&&n.buttonsArr.push(a.buttonsArr[0])}else n.buttonsArr.push(_(i))}return n}function w(e,n,r,i){var o={},a=t.get();return o.backButton=o.nextButton=o.doneButton=o.submitButton=!1,o.buttonsArr=[],e&&(o.backButton={order:2,weak:!0,classes:y("back","weak"),buttonText:a.BackButtonText},o.buttonsArr.push(o.backButton)),n&&(o.nextButton={order:3,normal:!0,classes:y("next","normal"),buttonText:a.NextButtonText},A()&&(o.nextButton.buttonText=a.DoneButtonText),o.buttonsArr.push(o.nextButton)),r&&(o.doneButton={order:3,normal:!0,classes:y("done","normal"),buttonText:a.DoneButtonText},o.buttonsArr.push(o.doneButton)),i&&(o.submitButton={order:4,normal:!0,classes:y("submit","normal"),buttonText:a.SubmitButtonText},o.buttonsArr.push(o.submitButton)),o}function _(e){var n=t.get(),r=e.action||-1;switch(parseInt(r)){case 1:return{order:4,normal:!0,classes:P("normal","start"),buttonText:n.WelcomeStepButtonStartText};case 3:return{order:1,weak:!0,classes:P("weak","cancel"),buttonText:n.WelcomeStepButtonCancelText};case 4:return{order:4,normal:!0,classes:y("submit","normal"),buttonText:n.SubmitButtonText};case 5:return{order:4,normal:!0,classes:P("normal","redirect"),buttonText:e.name};case 6:return{order:2,weak:!0,classes:P("weak","stay"),buttonText:e.name};case 7:return{order:4,normal:!0,classes:P("normal","ok"),buttonText:e.name}}var i=e.name||"",o=e.type,a=e.weak?"weak":"normal";return{order:2,weak:e.weak,normal:!e.weak,classes:P(a,o),buttonText:i}}function P(e,t){var n="walkme-custom-balloon-button walkme-custom-balloon-"+e+"-button";return t&&(n+=" walkme-custom-balloon-"+t+"-button walkme-action-"+t),n}function A(){var t=e.getSettingsValue(a,"isNextToDone","0");return"1"==t}function k(e){if(t.get()[e]){var n=t.get()[e];n=n.replace(/&quot;/gi,'"'),n=n.replace(/&#39;/gi,"'"),n=n.replace(/&amp;/gi,"&"),t.get()[e]=n}}I.apply(null,arguments)}i.register("BaseBalloon").asCtor(ro).asProto().dependencies("CommonUtils, SiteConfigManager, BalloonTemplatesProvider, Mustache");function io(t){this.LocalSVNRevision="$Rev$";var n=this;function r(){}n.finalizeArrowsPosition=function(e,n){switch(e){case t.POSITION_TYPE.Top:n.top--;break;case t.POSITION_TYPE.Bottom:n.top++;break;case t.POSITION_TYPE.Left:n.left--;break;case t.POSITION_TYPE.Right:n.left++}},n.fixArrows=function(e){var n=e.balloonDiv,r=e.arrowsDivs,s=e.result,u=e.isInCaptureMode,l=e.isQuirksMode,c=e.balloonSettings,d=e.arrowBaseWidth,p=e.balloonSettings.Color,g=e.outerArrowColor,f=c.direction,h=s.positionType==t.POSITION_TYPE.Left||s.positionType==t.POSITION_TYPE.Right;h?i(c,n,r,s,f,d,l):u&&s.positionType==t.POSITION_TYPE.Top&&a(c,r),l&&o(n,g,p)};function i(t,n,r,i,o,a,u){n.show();var l=e(".walkme-custom-balloon-bottom-div",n),c=l[0]?l[0].offsetHeight:0,d=a,p=parseFloat(r[0].css("top")),g=parseFloat(n.css("top")),f=n[0]?n[0].offsetHeight:0,h=p-g,m=f-c;if(n.hide(),m-h<d&&m>h){var v=g-(m-h+1);n.css("top",v+"px"),s(t,r,o,i.positionType,u)}else m<=h&&s(t,r,o,i.positionType,u)}function o(t,n,r){var i,o=e(".walkme-custom-balloon-arrow-inner",t.parent()),a=e(".walkme-custom-balloon-arrow-outer",t.parent());if(o.hasClass("walkme-custom-balloon-arrow-right"))i="right";else{if(!o.hasClass("walkme-custom-balloon-arrow-left"))return;i="left"}o.css("border-"+i+"-color",r),a.css("border-"+i+"-color",n)}function a(e,t){t[0].css("border-top-color",e.Color)}function s(e,n,r,i,o){var a=i==t.POSITION_TYPE.Left&&"ltr"==r||i==t.POSITION_TYPE.Right&&"rtl"==r;if(a||o){var s=i==t.POSITION_TYPE.Left?"left":"right";n[0].css("border-"+s+"-color",e.BalloonColor2)}for(var u=0;u<n.length;u++)n[u].addClass("walkme-custom-balloon-arrow-footer")}r.apply(null,arguments)}i.register("ArrowsHelper").asCtor(io).asProto().dependencies("Consts"),i.register("BalloonV2").asCtor(oo).asProto().dependencies("CommonUtils, BalloonUtils, CdnServer, Consts");function oo(e,t,n,r,o){var a,s,u=i.create("WalkmeOOP",this);u.Override("generateHtml",function(){return a.customHtml()&&a.customHtml().inner||a.generateHtml()}),u.Override("generateNormalButtonClasses",function(e,t){return a.generateNormalButtonClasses(e,t)+" mt-custom-balloon-"+e+"-button CUSTOM-STEP-ID"}),u.Override("createTemplateData",function(){var r=a.createTemplateData(),i=n.get();r.outerDiv=a.getCustomDivHtml("outer-div"),r.title=a.getCustomDivHtml("title"),r.content=a.getCustomDivHtml("content"),r.poweredBy.showImage="img"==a.balloonSettings().showPoweredByFormat,r.buttonShadowWidth=a.balloonSettings().ButtonShadowWidth,r.serverName=i;var o="rtl"==a.direction()?"right":"left";r.data.stepIndexText=c(a.stepIndexText(),a.direction(),o),r.ie7LayoutFix="overflow: auto;zoom: 1;",r.buttonsExist=a.buttons().buttonsArr.length>0,r.showBottomDiv=!("no"==a.balloonSettings().showPoweredByFormat&&0==a.stepIndexText().length),t.fixGradientColorsInConfiguration(s,"ButtonBgColor"),t.fixGradientColorsInConfiguration(s,"ButtonBgColor2");var u=s.ButtonBgColor,l=s.ButtonBgColor2;return u==l?r.BackgroundCSS=" background-color: "+u+"; ":(r.BackgroundCSS="background:-moz-linear-gradient(top, "+u+" , "+l+" ); background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+u+"), color-stop(100%,"+l+")); background:-webkit-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:-o-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:-ms-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:linear-gradient(to bottom, "+u+" 0%,"+l+' 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="'+u+'", endColorstr="'+l+'",GradientType=0 ); ',t.isGradientWithBorderRadiusCompatible()||(r.radiuses.button="0"),e.isGradientUsingFilter(r.BackgroundCSS)&&(r.BackgroundCSS+="background: url("+i+"/player/resources/images/spacer.gif) repeat;")),r}),u.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div mt-custom-balloon-top-div CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";padding-top:5px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 3px; padding-bottom: 1px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 7px;margin:3px 3px 0 3px;direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='min-height: "),r.s(r.f("buttonsExist",e,t,1),e,t,0,388,390,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("30")}),e.pop()),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("0"),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,460,818,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-close-button walkme-action-close mt-custom-balloon-close-button CUSTOM-STEP-ID walkme-action-close' style='opacity:0.7; font-size: 16px; position: absolute; top: 2px; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 8px; cursor: pointer;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";font-weight:normal;font-family:;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title mt-custom-balloon-title CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";font-weight:bold;margin-top:2px;margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(":14px;font-size:15px;color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";font-family:"),r.b(r.t(r.f("font",e,t,0))),r.b(";'>"),r.b(r.t(r.f("title",e,t,0))),r.b(r.t(r.d("data.title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1134,1429,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content mt-custom-balloon-content CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(";margin-top: 4px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 6px; font-family:"),n.b(n.v(n.f("font",e,t,0))),n.b(";font-size:14px;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";"),n.b(n.v(n.f("ie7LayoutFix",e,t,0))),n.b("'>"),n.b(n.t(n.f("content",e,t,0))),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div><div class='walkme-custom-balloon-top-div-bottom mt-custom-balloon-top-div-bottom CUSTOM-STEP-ID' style='clear: both;'>"),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("<div class='walkme-custom-balloon-no-buttons-div' style='height: 10px'></div>"),r.s(r.f("buttonsExist",e,t,1),e,t,0,1699,2702,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-buttons-div mt-custom-balloon-buttons-div CUSTOM-STEP-ID' style='clear:both;padding:5px;text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(";direction:"),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("'>"),n.s(n.f("buttons",e,t,1),e,t,0,1902,2684,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b("' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(";-moz-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; -webkit-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.b(n.v(n.f("BackgroundCSS",e,t,0))),n.b("-moz-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); -webkit-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); border: 1px solid "),n.b(n.v(n.d("colors.buttonBorder",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal; font-family: Arial; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static; overflow: visible;' "),n.b(n.v(n.f("wtIdAttribute",e,t,0))),n.b(">"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</button>")}),e.pop()),n.b("</div>")}),e.pop()),r.b("</div></div>"),r.s(r.f("showBottomDiv",e,t,1),e,t,0,2749,4329,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-separator' style='display: block; margin: 0 10px; height: 1px; opacity: 0.2; filter: alpha(opacity=20); background-color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; line-height: 0px;'>&#160;</div><div class='walkme-custom-balloon-bottom-div' style='position: relative; height: 23px; display: block;'><div class='walkme-custom-balloon-subtext mt-custom-balloon-subtext CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; display:inline-block;font-family: "),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;margin-top:3px;margin-bottom:0px;color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>"),n.b(n.t(n.d("data.stepIndexText",e,t,0))),n.b("</div><div class='walkme-custom-balloon-powered-by-div mt-custom-balloon-powered-by-div CUSTOM-STEP-ID' style='display:inline-block;position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 10px; top: 3px;text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; width:100px; color:"),n.b(n.v(n.d("color.content",e,t,0))),n.b(";text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(" '>"),n.s(n.d("poweredBy.link",e,t,1),e,t,0,3744,3993,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<a class='walkme-custom-balloon-powered-by-link mt-custom-balloon-powered-by-link CUSTOM-STEP-ID' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank' style='text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>")}),e.pop()),n.s(n.d("poweredBy.showText",e,t,1),e,t,0,4035,4048,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("By WalkMe.com")}),e.pop()),n.s(n.d("poweredBy.showImage",e,t,1),e,t,0,4095,4251,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div title='WalkMe.com' style='border: none; background-image: url("),n.b(n.v(n.f("serverName",e,t,0))),n.b("/player/resources/images/by-walkme.png); width: 49px; height: 18px;'></div>")}),e.pop()),n.s(n.d("poweredBy.link",e,t,1),e,t,0,4294,4298,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("</a>")}),e.pop()),n.b("</div></div>")}),e.pop()),r.fl()};return e});function l(){u.ExtendsInstance(i.create("BaseBalloon",o)),a=u._base,s=o.balloonSettings}function c(e,t,n){return t="direction:"+t+";",d(e,t,n)}function d(e,t,n){if(e.indexOf(r.SUBTEXT_CURRENT_START)>-1&&e.indexOf(r.SUBTEXT_CURRENT_END)>-1&&e.indexOf(r.SUBTEXT_TOTAL_START)>-1&&e.indexOf(r.SUBTEXT_TOTAL_END)>-1){n="float:"+n+";";var i="<span style='"+n+"'>&nbsp;</span>";e="<div class='walkme-custom-balloon-current-step-text' style='"+t+n+"'>"+e,e=e.replace(r.SUBTEXT_CURRENT_START,"</div>"+i+"<div class='walkme-custom-balloon-current-step-number' style='"+n+"'>"),e=e.replace(r.SUBTEXT_CURRENT_END,"</div>"+i+"<div class='walkme-custom-balloon-total-steps-text' style='"+t+n+"'>"),e=e.replace(r.SUBTEXT_TOTAL_START,"</div>"+i+"<div class='walkme-custom-balloon-total-steps-number' style='"+n+"'>"),e=e.replace(r.SUBTEXT_TOTAL_END,"</div>"),e+="<div style='clear:both;'></div>"}return e}l()}function ao(e,t,n,r,o,a,s,u,l,c){var d,p,g,f=i.create("WalkmeOOP",this),h=8,m=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 "),r.b(r.v(r.f("designTemplateCssClass",e,t,0))),r.b("' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,331,415,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,803,830,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1218,1616,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" font-size: 12px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; margin-top: "),
n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size:14px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1963,2347,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; margin-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 10px; float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div><div class='walkme-custom-side-border' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; width: 4px; height: 100%;  top:0px; "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(":0px; border:"),r.b(r.v(r.d("border.side.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": none; border-top: none; border-bottom: none; position: absolute;'></div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3748,3776,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()},v=f.Prop.Public("contentMargin",15);f.Override("manipulationsForInlineCss",function(e){if(r.isIE(8,"lte"))return;var t=d.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}),f.Override("createTemplateData",function(){var n=d.createTemplateData();n.outerDiv=d.getCustomDivHtml("inner-div"),n.title=d.getCustomDivHtml("title"),n.colors.xBtn=d.balloonSettings().XButtonColor,n.colors.stepInfo=d.balloonSettings().StepInfoColor,n.colors.separator=d.balloonSettings().SeparatorColor,n.stepIndexHeight=46,n.top={minHeight:57,textAlign:n.direction.side,title:{paddingTop:12},content:{sideMargin:v(),oppositeSideMargin:v()-2}},n.data.title&&!n.data.content&&(n.top.minHeight=43),n.bottom={},n.bottom.stepIndexMarginTop=10,e.isDefined(n.buttons)&&0!=n.buttons.length||(n.stepIndexHeight-=h,n.bottom.stepIndexMarginTop-=h/2),n.stepIndexHeight+="px",n.bottom.poweredByHeight+="px",n.xBtn={marginTop:d.balloonSettings().BalloonBorderWidth+"px",marginHorizental:parseInt(d.balloonSettings().BalloonBorderWidth)+4+"px"};var i=d.balloonSettings().BalloonBorderWidth-4;return i<0&&(i=0),n.border.side={size:i+"px"},n.shadow=t.calculate(d.balloonSettings().ShadowType,d.balloonSettings().ShadowLevel,d.balloonSettings().ShadowColor),n.isNotIe7=!r.isIEBrowser(7),E(),n.buttonsHtml=T(n),n.designTemplateCssClass=o.get(p,a.templateEntityType.balloon),n}),f.Override("createHtmlTemplate",function(){if(g)return u.wrap(g);return m});function S(){f.ExtendsInstance(i.create("BaseBalloon",c)),d=f._base,p=c.entity,g=p&&s.get(p.DesignTemplateId)}function E(){d.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function T(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,906,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 21px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 5px; padding-right: 5px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,690,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 3px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 10px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1028,1546,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1051,1523,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top:6px; margin-bottom:6px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=l.to_html(t,e);return n}S.apply(null,arguments)}i.register("BalloonV3").asCtor(ao).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, DesignTemplateHtmlGetter, HtmlTemplateWrapper, Mustache");function so(e,t,n,r,o,a){var s,u=i.create("WalkmeOOP",this),l=8,c=5,d=u.Prop.Public("contentMargin",15);u.Override("manipulationsForInlineCss",function(e){if(r.isIE(8,"lte"))return;var t=s.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}),u.Override("createTemplateData",function(){var n=s.createTemplateData();return n.outerDiv=s.getCustomDivHtml("inner-div"),n.title=s.getCustomDivHtml("title"),n.colors.xBtn=s.balloonSettings().XButtonColor,n.colors.stepInfo=s.balloonSettings().StepInfoColor,n.colors.separator=s.balloonSettings().SeparatorColor,n.stepIndexHeight=46,n.top={minHeight:57,textAlign:n.direction.side,title:{paddingTop:12},content:{sideMargin:d(),oppositeSideMargin:d()-2}},n.data.title&&!n.data.content&&(n.top.minHeight=43),n.bottom={},n.bottom.stepIndexMarginTop=10,e.isDefined(n.buttons)&&0!=n.buttons.length||(n.stepIndexHeight-=l,n.bottom.stepIndexMarginTop-=l/2),n.stepIndexHeight+="px",n.bottom.poweredByHeight+="px",n.xBtn={marginTop:s.balloonSettings().BalloonBorderWidth-c+"px",marginHorizental:parseInt(s.balloonSettings().BalloonBorderWidth)+4+"px"},n.shadow=t.calculate(s.balloonSettings().ShadowType,s.balloonSettings().ShadowLevel,s.balloonSettings().ShadowColor),n.isNotIe7=!r.isIEBrowser(7),g(),n.buttonsHtml=f(n),n}),u.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-vm1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,305,389,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,779,806,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1194,1715,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" border-radius: 20px; font-size: 23px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; padding-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 18px; padding-bottom: 6px; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" line-height: 30px; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size: 16px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2082,2468,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:13px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: hidden;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" padding: 3px 3px 3px 0; min-height:36px; background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" position: absolute; color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; left: 50%; transform: translateX(-65%); float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3616,3644,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()};return e});function p(){u.ExtendsInstance(i.create("BaseBalloon",a)),s=u._base}function g(){s.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function f(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,920,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 25px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 7px; padding-right: 7px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,704,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; float: left; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 12px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1042,1581,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1065,1558,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top: 11px; margin-bottom:6px; margin-right: 5px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=o.to_html(t,e);return n}p.apply(null,arguments)}i.register("BalloonVM1").asCtor(so).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, Mustache");function uo(e,t,n,r,o,a,s,u,l,c,d,p,g,f,h){var m=["top","right","bottom","left"],v=["center","start","end"],S=i.create("WalkmeOOP",this),E=S.Prop.Protected("balloon"),T=S.Prop.Protected("balloonClass"),y=S.Prop.Protected("balloonSettings"),C=S.Prop.Protected("minWidth"),I=S.Prop.Protected("maxWidth"),b=S.Prop.Protected("defaultMaxWidth"),w=(S.Prop.Public("minPopupWidth"),S.Prop.Public("arrowHeight")),_=S.Prop.Public("arrowBaseWidth"),P=S.Prop.Public("hasBorder"),A=S.Prop.Public("shouldScrollToElement"),k=S.Prop.Public("balloonTitleSelector"),O=S.Prop.Public("balloonContentSelector"),N=S.Virtual.Protected("addBalloonDiv"),L=S.Virtual.Public("loadResources",function(e,t){t&&t()}),x=S.Virtual.Protected("getArrowsColors"),F=(S.Virtual.Public("fixSize",function(e,t,n,r,i){F(e,t,n,r),M(e,i);var o={width:e.width(),height:e.height()};return o}),S.Virtual.Protected("fixWidth",function(e,t,n,i,o){var a=0;a=r.isQuirksMode(t[0])?J(e):e.width();var s=0;s=!i||i<=0?b():i;var u=C();if(void 0!=o&&(u=o),a<u&&(a=u),a>s&&(a=s),e.css("width",a+"px"),!i||i<=0){var l=0;mtjQuery.each(mtjQuery("[width], [style*=width], [style*=WIDTH]",e),function(e,t){mtjQuery(t).width()>l&&(l=mtjQuery(t).width())}),l>a&&R(l,e)}})),M=S.Virtual.Protected("fixHeight",function(e,t){var n=e.height();t&&t>0&&(n=t),e.css("height",n+"px")}),R=S.Virtual.Protected("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t);n.css("width",e+"px"),t.css("width","auto")}),B=S.Virtual.Protected("generateHtmlParams",function(e){var t={balloonSettings:y(),balloonData:e.balloonData,userGuid:e.userGuid,settings:e.settings,end:e.end,stepType:e.stepType,contentDiv:e.contentDiv},n={nextButton:e.nextButton,doneButton:e.doneButton,backButton:e.backButton,submitButton:e.submitButton};return{balloonParams:t,buttonsParams:n}}),U=S.Public("generateHtml",function(e){var t=B(e);return E(i.create(T(),t.balloonParams)),E().initButtons(t.buttonsParams),E().generateHtml()}),V=(S.Public("manipulationsForInlineCss",function(e){return E().manipulationsForInlineCss(e)}),S.Public("generateBalloonDiv",function(e,t,n,i,o,a,s,u,l,c,h){var m=p(U(a));f.replaceAttributes(m,a),g.remove(m,a),d.replace(m,l||[],c||{},h||{});var v=r.isIE(7)?m[0].outerHTML:m,S=N(v,e,t);return H(S,n,i,o,a,s,u),S}),S.Virtual.Protected("generateIdForBalloon",function(e){return"walkme-balloon-"+e})),W=S.Virtual.Protected("generateClassesForBallon",function(e,t,n,r,i){return["walkme-custom-"+n+"-"+e,"walkme-custom-"+r+"-"+t,"walkme-custom-"+(i==D.STEP_TYPE.Popup?"popup":"simple")+"-step"]}),G=S.Virtual.Protected("generateClassesForArrows",function(e,t,n,r){return["walkme-custom-balloon-arrow","walkme-custom-balloon-arrow-"+t,"walkme-custom-balloon-arrow-"+e,"walkme-custom-balloon-arrow-"+e+"-"+t,"walkme-custom-"+r+"-"+n]}),H=S.Virtual.Protected("addIdentifiers",function(e,n,r,i,a,s,u){e.attr("id",V(r));for(var l=W(n,r,u,s,i),c=0;c<l.length;c++)e.addClass(l[c]);var d=o.getCurrentLanguage()||"default";e.addClass("walkme-custom-language-"+d),t.addBrowserSpecificClasses(e),oe(e,a)}),j=S.Virtual.Protected("addArrowClasses",function(e,t,n,r,i){for(var o=G(t,n,r,i),a=0;a<o.length;a++)e.addClass(o[a])}),Y=(S.Virtual.Public("fixArrows",function(){}),S.Virtual.Public("fixQuirksMode",function(){}),S.Virtual.Protected("finalizeArrowsPosition",function(){})),z=(S.Virtual.Public("drawArrows",function(e,t,n,i,o,s,u){var l=ne(n,i,o,e),c={top:l.top,left:l.left};n.positionType==a.POSITION_TYPE.Top&&(c.top=l.top,l.top=l.top-y().BalloonBorderWidth+1,c.left=l.left-1),n.positionType==a.POSITION_TYPE.Bottom&&(l.top=l.top+y().BalloonBorderWidth-1,c.top=l.top-y().BalloonBorderWidth,c.left=l.left-1),n.positionType==a.POSITION_TYPE.Left&&(r.isQuirksMode(e[0])?(l.left=l.left-y().BalloonBorderWidth+1,c.left=l.left+y().BalloonBorderWidth,c.top=l.top-1):(l.left=l.left-y().BalloonBorderWidth+1,c.left=l.left+y().BalloonBorderWidth-1,c.top=l.top-1)),n.positionType==a.POSITION_TYPE.Right&&(l.left=l.left+y().BalloonBorderWidth-1,c.left=l.left-y().BalloonBorderWidth,c.top=l.top-1),Y(n.positionType,l,c);var d="",p=null,g=m[n.positionType],f=x(g);y().BalloonBorderWidth>0&&(p=Z(c,n,s,f.outterArrow,w()+1,w()+1),j(p,"outer",g,t,u)),d=Z(l,n,s,f.innerArrow,w(),w()),j(d,"inner",g,t,u);var h=[d];return p&&h.push(p),h}),S.Protected("getBalloonBasicWidth",function(e,t,n){var i=0;i=r.isQuirksMode(t[0])?J(e):e.width();var o=0;return o=n||n<=0?I():n,i<C()&&(i=C()),i>o&&(i=o),i}),S.Public("setConfiguration",function(e){l.fixConfiguration(e),y(e),L()}));S.Public("decideWhereToPopForCaptureBalloon",function(t,n,r,i){try{var o={width:r,height:i},a=X(),s=q(t),u=K(),l=se(s,o,n,u,a,!0);return l}catch(c){e.error(c)}}),S.Public("getPossiblePositionsForCaptureBalloon",function(t,n,r){try{var i={width:n,height:r},o=X(),a=q(t),s=K(),u=ae(a,i,s,o);return u}catch(l){e.error(l)}}),S.Public("addPositionClass",function(e,t){var n="walkme-custom-position-"+m[t.positionType];n+=" walkme-custom-offset-"+v[t.positionOffset],e.addClass(n)});function Q(){I(400),b(400),P(!0),k(".walkme-custom-balloon-title"),O(".walkme-custom-balloon-content"),A(!0),z(h.balloonSettings)}function K(){return w()+1}function q(e){var t=e[0],r=t.getBoundingClientRect(),i=n.getElementDocument(e),o=s.getOffsetRect(t,i,window),a=s.getElementBoundsWithRectAndOffset(r,o);return a}function X(){var e=mtjQuery(document);return e.height=e.height(),e.width=e.width(),e.top=0,e.left=0,e}function J(e){var t=mtjQuery(k(),e).text(),r=0,i=0,o=0,a=mtjQuery(O(),e);if(a.length>0){for(var s=a.html().replace(/<br*">/g,"< >").split("< >"),l=0;l<s.length;l++){var c=s[l].replace(/(<([^>]+)>)/gi,"").length;o<c&&(o=c)}var d=mtjQuery(O()+" span",e);i=d.length>0?parseInt(d.css("font-size").replace(/px/,"")):parseInt(a.css("font-size").replace(/px/,""))}var p=mtjQuery(k()+" span",e);r=p.length>0?parseInt(p.css("font-size").replace(/px/,"")):parseInt(mtjQuery(k(),e).css("font-size").replace(/px/,""));var g=0;g=t.length*r>o*i?t.length*r:o*i;var f=parseFloat(n.getSettingsValue(u.get().Settings,"quirksModeFactor",.5));return g*=f}function $(e,t){var n=.5;return e==a.POSITION_OFFSET.Start?n=1:e==a.POSITION_OFFSET.End&&(n=0),2!=t&&3!=t||(n=1-n),n}function Z(e,t,n,r,i,o){var s=ee(i,o);s.color=r;var u=e.top,l=e.left;t.positionType==a.POSITION_TYPE.Bottom,t.positionType==a.POSITION_TYPE.Right,s.point_direction=t.positionType,s.angle=$(t.positionOffset,s.point_direction);var c=te(s,n[0].ownerDocument);return c.css("top",u+"px"),c.css("left",l+"px"),c.css("display","none"),mtjQuery(n.append(c)),c}function ee(e,t,n,r,i,o){return{width:e,height:t,point_direction:n||0,angle:r||0,color:i||"red",background:o||"transparent"}}function te(e,t){var n=mtjQuery(t.createElement("div"));return n.css("display","block"),n.css("width","0"),n.css("height","0"),n.css("border",e.width+"px solid transparent"),n.css("border-"+m[e.point_direction]+"-color",e.color),n.css("line-height","0"),n.css("border-"+m[(e.point_direction+2)%4],"0px"),3==e.point_direction||1==e.point_direction?n.css("border-style","outset solid solid solid"):n.css("border-style","solid outset solid solid"),n}function ne(e,t,n,i){var o,s;if(e.positionType==a.POSITION_TYPE.Top||e.positionType==a.POSITION_TYPE.Bottom){var u=e.left+t.width;o=re(e.left,u,_(),e.positionOffset,n.width,n.left),s=e.positionType==a.POSITION_TYPE.Top?e.top+t.height:e.top-w()}else if(e.positionType==a.POSITION_TYPE.Left||e.positionType==a.POSITION_TYPE.Right){var l=e.top+t.height;s=re(e.top,l,_(),e.positionOffset,n.height,n.top),e.positionType==a.POSITION_TYPE.Left?(o=e.left+t.width,r.isQuirksMode(i[0])&&(o-=2)):o=e.left-w()}return{top:s,left:o}}function re(t,n,r,i,o,s){var u;return i==a.POSITION_OFFSET.Center?u=(n+t-r)/2:i==a.POSITION_OFFSET.Start?u=s+(o-r)/2:i==a.POSITION_OFFSET.End?u=s+(o-r)/2:e.error(null,"incorrect offset type: "+i),ie(u,t,n,r)}function ie(e,t,n,r){var i=n-r;if(e>i)return i;if(e<t)return t;return e}function oe(e,t){var n=t.balloonData;n.title||e.addClass("walkme-custom-no-title"),n.content||n.customHtml&&(n.customHtml.inner||n.customHtml.outter)||e.addClass("walkme-custom-no-content");var r=t.settings.customButtons&&t.settings.customButtons.length>0,i=t.settings.popupStepButtons&&t.settings.popupStepButtons.length>0,o=i||r||t.nextButton||t.backButton||t.doneButton||t.submitButton;o||e.addClass("walkme-custom-no-buttons")}function ae(e,t,n,r){var i=e.top-t.height-n>r.top,o=e.right+t.width+n<r.width+r.left,a=e.bottom+t.height+n<r.height+r.top,s=e.left-t.width-n>r.left;return{top:i,right:o,bottom:a,left:s}}var se=S.Virtual.Public("decideWhereToPop",function(e,t,r,i,o,s){var u,l,d=e.left+e.width/2,p=e.top+e.height/2,g=ae(e,t,i,o),f=d-t.width/2>o.left,h=d+t.width/2<o.width+o.left,m=p-t.height/2>o.top,v=p+t.height/2<o.height+o.top,S=0;r==a.POSITION_TYPE.Top||r==a.POSITION_TYPE.Bottom?(f&&h?l=a.POSITION_OFFSET_TYPE.HorizontalCentered:f?h||(l=a.POSITION_OFFSET_TYPE.SnapToViewportRight):l=a.POSITION_OFFSET_TYPE.ToRight,u=r==a.POSITION_TYPE.Top?a.POSITION_TYPE.Top:a.POSITION_TYPE.Bottom,s&&(u=g.top&&r==a.POSITION_TYPE.Top||r==a.POSITION_TYPE.Bottom&&!g.bottom?a.POSITION_TYPE.Top:a.POSITION_TYPE.Bottom)):r!=a.POSITION_TYPE.Right&&r!=a.POSITION_TYPE.Left||(v&&m?l=a.POSITION_OFFSET_TYPE.VerticallyCentered:v?m||(l=a.POSITION_OFFSET_TYPE.Below,S=2-w()):(l=a.POSITION_OFFSET_TYPE.Below,S=2-w()),u=r==a.POSITION_TYPE.Left?a.POSITION_TYPE.Left:a.POSITION_TYPE.Right,s&&(u=g.left&&r==a.POSITION_TYPE.Left||r==a.POSITION_TYPE.Right&&!g.right?a.POSITION_TYPE.Left:a.POSITION_TYPE.Right));var E=c.getOrientationByName(u),T=c.getOffsetByName(l);return{top:Math.ceil(n.defaultValue(E.getTopPosition(e,t,i,o),T.getTopPosition(e,t,i,o)+S)),left:Math.ceil(n.defaultValue(E.getLeftPosition(e,t,i,o),T.getLeftPosition(e,t,i,o)+S)),positionType:E.type,positionOffset:T.type}});Q.apply(null,arguments)}i.register("BaseBalloonDrawer").asCtor(uo).asProto().dependencies("Logger, UiUtils, CommonUtils, HostData, LanguageManager, Consts, PositionHelper, SiteConfigManager, BalloonUtils, BalloonOrientationProvider, PlaceholdersReplacer, wmjQuery, FlowElementsRemover, FlowElementAttributesReplacer");function lo(t,n,r){var o,a=i.create("WalkmeOOP",this);a.Override("addBalloonDiv",function(e,r,i){var a=mtjQuery(r[0].ownerDocument.createElement("div"));return a.addClass("walkme-custom-balloon-outer-div"),a.addClass("mt-custom-balloon-outer-div"),a.css("display","none"),a.css("direction","ltr"),n.setStyleForBalloon(a,o.balloonSettings(),i),t.setLangAttribute(a),mtjQuery(r.append(a)),a.html(e),a}),a.Override("addIdentifiers",function(t,n,r,i,a,s,u){o.addIdentifiers(t,n,r,i,a,s,u),e("*",t).addClass("walkme-custom-step-"+r)}),a.Override("addArrowClasses",function(e,t,n,r,i){o.addArrowClasses(e,t,n,r,i),e.addClass("mt-custom-balloon-arrow-"+t)}),a.Override("getArrowsColors",function(e){var t=o.balloonSettings(),n=""==t.BalloonColor2?"transparent":t.BalloonColor2,r=t.BorderColor;switch(e){case"bottom":n=""==t.Color?"transparent":t.Color;break;case"top":break;case"left":case"right":n="transparent"==t.Color||"transparent"==t.BalloonColor2||"#00000000"==t.Color||"#00000000"==t.BalloonColor2?"transparent":u(t.Color,t.BalloonColor2)}return{innerArrow:n,outterArrow:r}});function s(){a.ExtendsInstance(i.create("BaseBalloonDrawer",r));var e=r.balloonSettings.minPopupWidth?r.balloonSettings.minPopupWidth:400;o=a._base,o.balloonClass("BalloonV2"),o.minWidth(190),o.arrowHeight(13),o.arrowBaseWidth(26),o.minPopupWidth(e)}function u(e,t){var n=function(e,t){return(e+t)/2},r=function(e){return parseInt((""+e).replace("#",""),16)},i=function(e){return(e>>0).toString(16)},o=r(e),a=r(t),s=function(e){return e>>16&255},u=function(e){return e>>8&255},l=function(e){return 255&e},c=i(n(s(o),s(a))),d=i(n(u(o),u(a))),p=i(n(l(o),l(a))),g="#"+(c.length<2?"0"+c:c)+(d.length<2?"0"+d:d)+(p.length<2?"0"+p:p);return g}s.apply(null,arguments)}i.register("BalloonDrawerV2").asCtor(lo).asProto().dependencies("UiUtils, BalloonUtils");function co(t,n,r,o,a,s,u,l,c){
var d,p,g=i.create("WalkmeOOP",this);g.Override("addBalloonDiv",function(e,t){var r=n.createElementInDocument(e,t[0].ownerDocument);return o.setLangAttribute(r),r.css("display","none"),s.appendToContainer(t,r)}),g.Override("loadResources",function(e,t){var n=d.balloonSettings().FontsData;n?r.fonts(n,e,t,t):t&&t()}),g.Override("fixWidth",function(e,t,n,r){d.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),g.Override("getArrowsColors",function(e){var t=d.balloonSettings(),n=t.Color,r=h(),i=t.direction;switch(e){case"bottom":n=t.Color;break;case"top":n=t.BalloonColor2;break;case"left":"ltr"==i?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor);break;case"right":"ltr"==i?(n=t.ButtonBgColor,r=t.ButtonBgColor):n=t.Color}return{innerArrow:n,outterArrow:r}}),g.Override("fixArrows",function(e){e.balloonSettings=d.balloonSettings(),e.arrowBaseWidth=d.arrowBaseWidth(),e.outerArrowColor=h(),t.fixArrows(e)}),g.Override("fixQuirksMode",function(t){var n=e(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",t);n.hide();var r=e(".walkme-custom-powered-by-div",t);if(r.length>0){var i=r.css("margin-bottom"),o=r.css("margin-top");r.css("margin-bottom","0px").css("margin-top","0px"),r.css("padding-bottom",i).css("padding-top",o)}}),g.Override("finalizeArrowsPosition",function(e,n,r){t.finalizeArrowsPosition(e,n)}),g.Override("generateHtmlParams",function(e){var t=d.generateHtmlParams(e);return t.balloonParams.entity=p,t}),g.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto");var i=t.width();t.css("width",i+"px"),r.css("width","auto")}),g.Override("generateClassesForArrows",function(e,t,n,r){var i=d.generateClassesForArrows(e,t,n,r),o=u.get(p,l.templateEntityType.balloon);return o&&i.push(o),i});function f(){g.ExtendsInstance(i.create("BaseBalloonDrawer",c));var e=c.balloonSettings.minPopupWidth?c.balloonSettings.minPopupWidth:300;d=g._base,d.balloonClass("BalloonV3"),d.minWidth(190),d.minPopupWidth(e),d.arrowHeight(10),d.arrowBaseWidth(18),d.hasBorder(!1),p=c.entity}function h(){return d.balloonSettings().BorderColor}f.apply(null,arguments)}i.register("BalloonDrawerV3").asCtor(co).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, ContainerAppender, SpecificEntityDesignTemplateCssClassGetter, SharedConsts"),i.register("BalloonDrawerVM1").asCtor(po).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, FeaturesManager");function po(t,n,r,o,a,s,u){var l,c=i.create("WalkmeOOP",this);c.Override("addBalloonDiv",function(t,r){var i=n.createElementInDocument(t,r[0].ownerDocument);return s.isFeatureEnabled("accessibility")&&(focusableElements=i.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),n.addTabIndex(focusableElements),focusableElements.on("focus",function(){e(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){e(this).css({outline:"none","outline-offset":"0px"})})),o.setLangAttribute(i),i.css("display","none"),r.append(i),i}),c.Override("loadResources",function(e,t){var n=l.balloonSettings().FontsData;n?r.fonts(n,e,t,t):t&&t()}),c.Override("fixWidth",function(e,t,n,r){l.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),c.Override("getArrowsColors",function(e){var t=l.balloonSettings(),n=t.Color,r=p();return n="top"==e?t.BalloonColor2:t.Color,{innerArrow:n,outterArrow:r}}),c.Override("fixArrows",function(e){e.balloonSettings=l.balloonSettings(),e.arrowBaseWidth=l.arrowBaseWidth(),e.outerArrowColor=p(),t.fixArrows(e)}),c.Override("fixQuirksMode",function(t){var n=e(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",t);n.hide();var r=e(".walkme-custom-powered-by-div",t);if(r.length>0){var i=r.css("margin-bottom"),o=r.css("margin-top");r.css("margin-bottom","0px").css("margin-top","0px"),r.css("padding-bottom",i).css("padding-top",o)}}),c.Override("finalizeArrowsPosition",function(e,n,r){t.finalizeArrowsPosition(e,n)}),c.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto");var i=t.width();t.css("width",i+"px"),r.css("width","auto")});function d(){c.ExtendsInstance(i.create("BaseBalloonDrawer",u));var e=u.balloonSettings.minPopupWidth?u.balloonSettings.minPopupWidth:300;l=c._base,l.balloonClass("BalloonVM1"),l.minWidth(190),l.minPopupWidth(e),l.arrowHeight(10),l.arrowBaseWidth(18),l.hasBorder(!1),l.defaultMaxWidth(230)}function p(){return l.balloonSettings().ButtonBgColor}d.apply(null,arguments)}i.register("BalloonDrawerFactory").asCtor(go);function go(){var e=this;function t(){}e.get=function(e,t){var n;switch(e){case"v3":n=i.create("BalloonDrawerV3",t);break;case"vm1":n=i.create("BalloonDrawerVM1",t);break;default:n=i.create("BalloonDrawerV2",t)}return n},t.apply(null,arguments)}function fo(){var t=this;function n(){}function r(t,n,r){e(t).css(n,r)}t.addClickAndHover=function(t){var n=t.cssProperty,i=t.regularColor,o=t.hoverColor,a=t.clickColor,s=t.elemSelector,u=!1,l=t.balloonDiv,c=l.find(s);c.mouseenter(d),c.mouseleave(p),c.mouseup(f),c.mousedown(g);function d(t){u=!0;var i=e(".walkme-click-and-hover:active")[0]==t.currentTarget;i?r(t.currentTarget,n,a):r(t.currentTarget,n,o)}function p(e){u=!1,r(e.currentTarget,n,i)}function g(e){r(e.currentTarget,n,a)}function f(e){u?r(e.currentTarget,n,o):r(e.currentTarget,n,i)}},n.apply(null,arguments)}i.register("ClickAndHoverAdder").asCtor(fo);function ho(e){var t=this,n={None:0,Shadow:1,Glow:2};function r(){}t.calculate=function(t,r,i){if(t==n.Shadow)switch(r){case 0:return"1px 1px 3px 0px rgba(0, 0, 0, 0.2)";case 1:return"0px 0px 13px 0px rgba(0, 0, 0, 0.2)";case 2:return"0px 0px 13px 5px rgba(0, 0, 0, 0.2)"}else if(t==n.Glow){var o=e.hexToRgba(i,.6);switch(r){case 0:return"0px 0px 7px 0px rgba"+o;case 1:return"0px 0px 14px 0px rgba"+o;case 2:return"0px 0px 26px 5px rgba"+o}}},r.apply(null,arguments)}i.register("ShadowCalculator").asCtor(ho).dependencies("UiUtils"),i.register("BalloonPositionProvider").asCtor(mo).dependencies("BalloonOrientationProvider, CommonUtils");function mo(e,t){var n=this;n.findBestPosition=r,n.getPredefinedPosition=o;function r(t,n,r,o,a){var s=e.getOrderedDirections({lowPriorityDirection:a}),u=e.getOrderedOffsets();return i({elementBounds:t,balloonSize:n,marginFromElement:r,drawingArea:o},{mainOrientations:s,offsets:u})}function i(e,t){for(var n={},r=0;r<t.mainOrientations.length;r++){var i=t.mainOrientations[r];u(n,i,e);for(var o=0;o<t.offsets.length;o++){var l=t.offsets[o];if(l.isRelevant(n)){var c=a(n,l,e);if(c&&s(c,e))return c}}}return}function o(t,n,r,i,o,s){var l={},c=e.getOrientationByName(o),d=e.getOffsetByName(s)||e.getOffsetByName(c.defaultOffset),p={elementBounds:t,balloonSize:n,marginFromElement:r,drawingArea:i};return u(l,c,p),a(l,d,p)}function a(e,n,r){var i=n.getLeftPosition(r.elementBounds,r.balloonSize,r.marginFromElement,r.drawingArea),o=n.getTopPosition(r.elementBounds,r.balloonSize,r.marginFromElement,r.drawingArea);return{left:t.defaultValue(e.left,i),top:t.defaultValue(e.top,o),positionType:e.positionType,positionOffset:n.type}}function s(e,t){var n=t.drawingArea.top<e.top,r=e.left+t.balloonSize.width<t.drawingArea.left+t.drawingArea.width,i=e.top+t.balloonSize.height<t.drawingArea.top+t.drawingArea.height,o=t.drawingArea.left<e.left;return n&&r&&i&&o}function u(e,t,n){e.top=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.left=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.positionType=t.type}}i.register("BalloonOrientationProvider").asCtor(vo).dependencies("Consts, SiteConfigManager");function vo(e,t){var n=this;n.getOrderedDirections=l,n.getOrderedOffsets=c,n.getOrientationByName=d,n.getOffsetByName=p;var r="Direction",i="rtl",o=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Right,e.POSITION_TYPE.Left],a=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Left,e.POSITION_TYPE.Right],s=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToRight,e.POSITION_OFFSET_TYPE.ToLeft],u=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToLeft,e.POSITION_OFFSET_TYPE.ToRight];function l(e){e=e||{};var t=g()?a:o;return f(m,t,e.lowPriorityDirection)}function c(){var e=g()?u:s;return f(v,e)}function d(e){return m[e]}function p(e){return v[e]}function g(){var e=t.get();return e&&e[r]==i}function f(e,t,n){for(var r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return void 0!==n&&h(r,n),r}function h(e,t){e.sort(function(e,n){return e.type==t?1:n.type==t?-1:0})}var m={};m[e.POSITION_TYPE.Top]={type:e.POSITION_TYPE.Top,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.top-t.height-n},getLeftPosition:function(e,t,n,r){return}},m[e.POSITION_TYPE.Bottom]={type:e.POSITION_TYPE.Bottom,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.bottom+n},getLeftPosition:function(e,t,n,r){return}},m[e.POSITION_TYPE.Right]={type:e.POSITION_TYPE.Right,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.right+n}},m[e.POSITION_TYPE.Left]={type:e.POSITION_TYPE.Left,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.left-t.width-n}};var v={};v[e.POSITION_OFFSET_TYPE.VerticallyCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return Math.ceil(e.top+e.height/2-t.height/2)},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.Above]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.bottom-t.height},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.Below]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.top},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.HorizontalCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return Math.ceil(e.left+e.width/2-t.width/2)}},v[e.POSITION_OFFSET_TYPE.ToRight]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.left}},v[e.POSITION_OFFSET_TYPE.ToLeft]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.right-t.width}},v[e.POSITION_OFFSET_TYPE.SnapToViewportRight]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return r.left+r.width-t.width-1}}}i.register("BalloonPositionVisibilityChecker").asCtor(So).dependencies("CommonUtils, FeaturesManager, Logger");function So(e,t,n){var r=this;r.isBalloonPositionVisibleRelativeToParents=function(e,n){if(t.isFeatureEnabled("disableIEVRTP"))return!0;var r=a(e);if(r)return!0;var u=i(e,n),c=e.parents("div"),d=!1,p=!1,g=!l(c,function(e){var e=mtjQuery(e);if(!t.isFeatureEnabled("disableAbsRTP")&&"absolute"==e.css("position"))return d=!0,!0;if(!t.isFeatureEnabled("disableFixRTP")&&"fixed"==e.css("position"))return p=!0,!0;var n=e.css("overflow"),r=o(n),i=s(u,e);return r&&i});return d||p||g};function i(e,t){var r=e.offset(),i=e.height(),o=e.width(),a={top:r.top,left:r.left};switch(t){case 0:a.left+=o/2;break;case 1:a.top+=i/2,a.left+=o;break;case 2:a.top+=i,a.left+=o/2;break;case 3:a.top+=i/2;break;default:n.error(new Error("Unknown balloon position"))}return a}function o(e){return"auto"==e||"scroll"==e||"hidden"==e}function a(e){var t=e.css("position");return"absolute"==t||"fixed"==t}function s(e,t){var n=t.offset();return u(e.top,n.top,t.outerHeight())||u(e.left,n.left,t.outerWidth())}function u(e,t,n){var r=t+n;return e<t||e>r}var l=function(t,n){return null!=e.firstMatch(t,n)}}i.register("PopupBalloonDisplayer").asCtor(Eo).dependencies("PopupStepElementProvider, SiteConfigManager, PositionHelper, Consts, Logger, WalkthruBalloonContainer, BalloonDrawerProvider, BalloonButtonsEventsBinder");function Eo(t,n,r,a,s,u,l,c){var d=this;d.showSpecialPopupBalloon=p;function p(d,p,g,f,h,m,v,S){var E=t.get(!0),T=Af(g);h&&(T.displayX=!1);var y=n.get().BalloonSettings;y=Af(y),e.extend(y,m);var C=i.create("Balloon",{element:E,forceEmbedBalloonInIframe:!1,positionHelper:r,fixedSize:{width:p,height:0},stepSettings:T,htmlContent:d.htmlContent,text:{title:d.title||"",content:d.text||"",subText:d.subText||""},data:{type:a.STEP_TYPE.Popup},configuration:y,logger:s,drawer:l.getBalloonDrawer(y,S),siteConfig:n.get(),bindButtonsFunc:v?void 0:c.addButtonEventsToBalloon});return new o(function(e){C.Show(!1,function(){var t=mtjQuery(C.getBalloonDiv());if(t.removeClass("walkme-custom-step-undefined"),mtjQuery("*",t).removeClass("walkme-custom-step-undefined"),t.removeClass("walkme-custom-walkthru-undefined"),mtjQuery("*",t).removeClass("walkme-custom-walkthru-undefined"),m&&m.surveyId){var n=m.surveyId;t.attr("id","walkme-survey-balloon-"+n)}f(t,y),e(C)}),u.add(C)})}}i.register("BalloonDrawerProvider").asCtor(To).dependencies("SiteConfigManager, BalloonDrawerFactory");function To(e,t){var n=this;n.getBalloonDrawer=i;function r(){}function i(e,n){var r=o(e),i={balloonSettings:r,entity:n},a=r.BalloonVersion;return t.get(a,i)}function o(t){var n=Af(t),r=e.get();return r&&(n.direction=r.Direction,n.showPoweredBy="1"==r.PoweredByLink,n.showPoweredByFormat=r.IsDisplayPoweredBy),n}r()}i.register("BalloonButtonsEventsBinder").asCtor(yo).dependencies("CurrentWalkthruData, Consts, Lib, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, WalkthruBalloonContainer, InitiatorTypeToAppTypeMapper, LibDestroyer, BBCodeEventsBinder, FeaturesManager");function yo(e,t,n,r,o,a,s,u,l,c,d){var p=this;p.addButtonEventsToBalloon=g,p.attachBalloonXButtonClickEvent=h;function g(e,t){f(e),h(e),c.bind(e,null,t),e.on("click mousedown mouseup",function(e){e.stopPropagation()})}function f(e){mtjQuery(".walkme-action-next, .walkme-action-start",e).click(function(e){E()}),mtjQuery(".walkme-action-back",e).click(function(e){v()}),mtjQuery(".walkme-action-done",e).click(function(e){T()})}function h(e){mtjQuery(".walkme-action-close, .walkme-action-cancel",e).click(function(e){m(e)})}function m(n){o.raiseEvent("XButtonClicked");var a={ClickEvent:n};o.raiseEvent("UserStoppedWalkthru",a);var s=e.currentStep==-1;s||i.get("AuditStepsManager").auditStep(e.getCurrentWalkthru(),e.getCurrentStep(),t.STEP_STATUS.Exited),r.stopTutorial(s),o.raiseEvent("UserStoppedWalkthruAfterStop",a)}function v(){o.raiseEvent("BackButtonClicked");var t=e.getCurrentStep();y(t),e.stepPlayStack.pop(),S()&&r.executePreviousStep()}function S(){if(d.isFeatureEnabled("backButtonAlways"))return!0;return!C(e.lastBackButtonStepIndex-1)}function E(){o.raiseEvent("NextButtonClicked");var n=e.getCurrentStep();o.deprecatedRaiseEvent(t.EVENTS.Walkthrus.StepTriggered,n),y(n);var i=C();i||(e.state=t.WALKTHRU_STATE.RUNNING,l.releaseBalloons(function(){I(n)||(r.stepWasCompleted(),r.executeTutorialNextStep())}))}function T(){o.raiseEvent("DoneButtonClicked");var n=e.getCurrentStep();if(o.deprecatedRaiseEvent(t.EVENTS.Walkthrus.StepTriggered,n),y(n),!I(n)){var i=C();i||(r.stepWasCompleted(),r.tutorialFinished())}}function y(e){e.durationHandler&&(e.durationHandler.clear(),e.durationHandler=null)}function C(e){for(var t,n=s.getAll(),r=0;r<n.length;r++)n[r].releaseEvents(e)&&(t=!0);return t}function I(e){return!(e.Type!=t.STEP_TYPE.Popup||!e.LinkedTutorialIds||!r.isTutorialIdsExist(e.LinkedTutorialIds.split(";")))&&(a.makeSplit(e.LinkedTutorialIds.split(";")),!0)}}i.register("Launcher").asCtor(Co).asProto().dependencies("IconCreatorParamsProvider, IconCreator, IconContentProvider, CommonEvents, Consts, ClickAuditManager, InitiatorManager, UiElementPositionTrackerCreator, HostData, SettingsValuesRetriever, LauncherDefaultIcon, WalkmeVisibleReporter, LauncherActions");function Co(e,t,n,r,o,a,s,u,l,c,d,p,g,f){var h=this;h.show=y,h.destroy=C,h.setTimeoutOn=I,h.isDrawn=b,h.display=w,h.removeDisplay=_,h.watchLauncherTimeout=null;var m,v,S,E;function T(){E=i.create("Highlighter",{element:f.element,settings:f.launcher.Settings,embedInElement:f.launcher.Settings.embedInParent,drawableType:"launcher",drawableId:f.launcher.Id,monitor:!0,defaultSettings:!1,cssKeysValues:[{id:f.launcher.Id,name:"launcher"}]})}function y(e){P().then(function(){p.report(),M(),e&&e(S)})}function C(e){v&&(v.destroy(),v=null),h.watchLauncherTimeout&&h.watchLauncherTimeout.clear(),R(),S=null,f.element=null,E=null,m=null,e&&e()}function I(){v=u.create(f.element,function(){m&&(m.reposition(),F())}),v.track()}function b(){try{return B()}catch(e){return!1}}function w(){S.show()}function _(){S.hide()}function P(){return m=A(),m.show().then(function(e){S=e.getOriginElement(),D(e);var t=U(f.launcher);t.applyBehavior(e);var n=L();n.applyBehavior(e),F(),"onHover"==f.launcher.Settings.displayStyle&&S.css("display","none")})}function A(){var n=k(),r=e.get(f.element,n);return t.create(r,f.element)}function k(){var e=O(),t={TemplateId:e.data.id,Type:e.type,Predefined:e},r=n.get(t);r||(r={mainImageUrl:e.data.url,hoverImageUrl:e.data.hover,clickImageUrl:e.data.click,text:e.data.customText,cssClassName:"custom-launcher-"+e.data.id,kind:e.data.url?o.ICON_CONTENT_KIND.Image:o.ICON_CONTENT_KIND.Text});var i={uniqueIdentifierType:"Launcher",uniqueIdentifierId:f.launcher.Id,isEmbedInElement:f.launcher.Settings.embedInParent,attachmentSide:f.launcher.Position,zindex:f.launcher.Settings["z-index"],perimeterType:f.launcher.Settings.context,isAnimated:f.launcher.Settings.animated,growingDirection:f.launcher.Settings.direction,positionTopCustomOffset:f.launcher.Settings.topOffset,positionLeftCustomOffset:f.launcher.Settings.leftOffset,contentElementCssClassNames:["walkme-launcher-image-div"],positionElementCssClassNames:N(),contentData:r};return i}function O(){return c.getSettingsValue(f.launcher.Settings,"imageObject",d)}function N(){var e=[];return e.push("walkme-launcher-id-"+f.launcher.Id),e.push("walkme-custom-launcher-outer-div"),e.push("walkme-text-launcher"),e}function D(e){if(f.launcher.Settings.embedInParent){var t=e.getTopMostElement();t.addClass("walkme-launcher-container"),t.addClass("walkme-launcher-container-id-"+f.launcher.Id)}}function L(){var e={clickAction:x()},t=i.create("ClickIconExecutionBehavior",e);return t}function x(){var e=function(){r.raiseEvent(o.EVENTS.Launchers.LauncherClicked,{launcherId:f.launcher.Id});var e={type:o.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,objectId:f.launcher.Id};s.setForScope(e,function(){g.getAction(f.launcher).doAction()}),a.SendClickAudit(o.DEPLOYABLE_TYPE.Launcher,f.launcher.Id)};return e}function F(){E.shouldShow()&&!l.isQuirksMode(f.element[0])&&E.highlight()}function M(){r.deprecatedRaiseEvent(o.EVENTS.Launchers.LauncherIsShown,{getId:function(){return f.launcher.Id},getName:function(){return f.launcher.Name}},{customText:O().data.customText,name:f.launcher.Name,launcherDiv:S,launcherId:f.launcher.Id})}function R(){m&&m.destroy(),E&&E.unhighlightElement()}function B(){var e=S.parents("html").length>0;return e}function U(e){var t=c.getSettingsValue(e.Settings,"tooltip",""),n={tooltipText:t},r=i.create("TolltipIconUiBehavior",n);return r}T()}i.register("LaunchersModule").asCtor(Io).dependencies("ActionsFactory, Consts, CommonUtils, CommonEvents, SettingsValuesRetriever, Logger,CustomCssSetter, TimerManager, TutorialsManager, ContentsManager, SurveysManager,FeaturesManager, ConditionCheckerFactory, LauncherActions");function Io(e,t,n,r,o,a,s,u,l,c,d,g,f,h){var m=this;m.getLaunchers=S,m.setLaunchers=E,m.showLauncher=I,m.showAllLaunchers=T,m.getLauncherAction=C,m.releaseLaunchers=x;var v=[];function S(){return v}function E(e){h.reset(),v=e}function T(){try{var e,t=0,n=0;function r(){try{e()}catch(t){}}function i(e,o){n++,n>=t&&(r(),w(!1,i))}try{window._walkmeInternals&&(e=profilerAPI.startProfile("showAllLaunchers"),e&&w(!0,i))}catch(o){w(!1,i)}for(var s=0;s<v.length;s++){var u=v[s],l=I(u);l&&t++,a.customerLog(kf("willDrawLauncher={0} for launcher with id {1}",l,u.Id),1,p)}e&&0==t&&(r(),w(!1,i))}catch(c){a.error(c)}}function y(e){for(var t=0;t<v.length;t++)if(v[t].Id==e)return v[t]}function C(e){var t=y(e);return h.getAction(t)}function I(e,t){var n=g.isFeatureEnabled("hideLauncherWithoutLink");if(n&&!O(e))return!1;var r=o.getSettingsValue(e.Settings,"PlayLauncherConditionTree",null);return _(e,t,r)}function b(e,t){var n={featureName:p,elementName:e.Name,stopPollingAfterEvaluateTrue:!1},r=f.createOld(n);e.hoverLauncherEvaluator&&e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=r,r.onValueChanged(function(t){if(!t)return e.hoverDestroyTimeout=u.libSetTimeout(function(){e.drawable&&e.drawable.isDrawn()&&(e.hoverLauncherEvaluator.getCachedValue()||e.drawable.removeDisplay())},300),!1;e.hoverDestroyTimeout&&(e.hoverDestroyTimeout.clear(),e.hoverDestroyTimeout=void 0),e.drawable&&e.drawable.display()});var i,o=".walkme-launcher-id-"+e.Id;if(e.IdentifySettings.IsJquerySelector)i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:e.IdentifySettings.JquerySelector},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0};else{var a=N(e.IdentifySettings);i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"ElementHoverSwitch",funcArgs:{IdentifySettings:a},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0}}r.evaluateAsync(i)}function w(e,t){var n=window._walkmeInternals;if(n){var r="LauncherIsShown";e?n.bind(r,t):n.unbind(r,t)}}function _(e,n,r){var a=!1,s=t.STICKY_TYPE.ONCE,l=o.getSettingsValue(e.Settings,t.IS_STICKY_SETTING_KEY,!1),c=!0;if(l&&parseInt(l)>0){var d=parseInt(o.getSettingsValue(e.Settings,t.STICKINESS_TYPE_SETTING_KEY,null));s=d==t.OLD_STICKIES.STICKINESS_TYPES.soft?t.STICKY_TYPE.SOFT:t.STICKY_TYPE.STRONG,c=!1}var g={logContext:e.Id,stickyType:s,isRemoveByCondition:1==e.Settings.condHide,elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings}},conditionCheckerParams:{featureName:p,elementName:e.Name},conditionTree:r,onShow:h,onRemove:v,trackUIChanges:!0},f=i.create("UIVisibilityManager",g);f.watchForVisibility();function h(t){a=!0,P(e,t,m)&&(e.drawable.uiVisibilityManager=f)}function m(){"onHover"===e.Settings.displayStyle&&b(e),S()}function v(){e.drawable&&e.drawable.destroy(),e.hoverLauncherEvaluator&&(e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=null)}function S(){e.drawable.watchLauncherTimeout=u.libSetTimeout(E,2e3)}function E(){e.drawable.isDrawn()?S():(v(),f.cleanResources(),f.watchForVisibility())}return a}function P(e,n,i){var u=o.getSettingsValue(e.Settings,"imageObject",""),l=A(n,u,e);if(l)return e.isContentSecure=!1,a.customerLog("Launcher ["+e.Id+"] will not be displayed. Launcher URL must be https in secure page",1),r.raiseEvent(t.EVENTS.Launchers.LauncherIsInsecure,{name:e.Name}),!1;e.isContentSecure=!0,s.setCustomCssIfNeeded(n);var c=F(n,e);e.drawable=c;var d=function(e){return function(){e.show(function(){e.setTimeoutOn(),i&&i()})}}(c);return k(e,d),!0}function A(e,t,n){if(void 0===typeof n.isContentSecure)return n.isContentSecure;var r=e[0].ownerDocument.location.href;if(!L(r)||"custom"!=t.type)return!1;if(!L(t.data.url)||!D(t.data.click)||!D(t.data.hover))return!0;return!1}function k(e,t){var r=n.isTrue(e.Settings,"hasDelay",!1);if(r){var i=o.getSettingsValue(e.Settings,"delayInSeconds",0);u.libSetTimeout(t,1e3*i)}else t()}function O(e){var t=e.Settings.action;switch(t.actionType){case"playWt":return null!=l.getById(parseInt(t.arguments.wtId));case"playContent":return null!=c.getById(parseInt(t.arguments.contentId));case"playSurvey":return null!=d.getById(parseInt(t.arguments.surveyId))}return!0}function N(e){var t=Af(e);return t.Sensitivity=e.StepSensitivity,t.StepSensitivity=void 0,t.IgnoreId=e.IsIgnoreId,t.IsIgnoreId=void 0,t.IgnoreText=e.IsIgnoreText,t.IsIgnoreText=void 0,t}function D(e){return!e||L(e)}function L(e){return/^https/i.test(e)}function x(e,t,r){var i=function(e,t){e.drawable?e.drawable.destroy(t):t&&t()};n.executeParallel({objectsArray:S(),functionsToExecute:[i],successCallback:function(){r||E([]),e&&e()}})}function F(e,t){return i.create("Launcher",{element:e,launcher:t})}}F.register(D.PLATFORM.Web,function(){i.register("LauncherDefaultIcon").asInstance({type:"shape",data:{shape:"round-question-mark",color:"blue"}})}),F.register(D.PLATFORM.MobileWeb,function(){i.register("LauncherDefaultIcon").asInstance({type:"htmlShape",data:{shape:"round-question-mark",color:"blue",customClass:"html-launcher-round-question-mark-blue",customText:"?"}})}),i.register("LauncherActions").asCtor(bo).dependencies("SettingsValuesRetriever, Logger, ActionsFactory, Consts");function bo(e,t,n,r){var i=this;i.reset=a,i.getAction=s;var o={};function a(){o={}}function s(i){if(o[i.Id])return o[i.Id];var a=e.getSettingsValue(i.Settings,"action",null);if(!a)return t.customerLog("No action core. aborting..."),null;return o[i.Id]=n.get(a.actionType,a.arguments,r.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,i),o[i.Id]}}i.register("AuditStepsManager").asCtor(wo).dependencies("Lib,ServerDataSenderManager,WalkMeInfo,Logger,HostData,WmAjax,Consts,StepUtils,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator, AuditingEnabledIndicator");function wo(e,t,n,r,i,o,a,u,l,c,d,p,g,f,h,m,v){var S=this;S.init=C,S.safeStartAudit=b,S.auditStep=w,S.removeAllStepAuditsLogs=L,this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=k;var E,T;function y(){E=r.wrapCustomerLog(s)}function C(){T=t.register("sa",{beforeSendingManipulationFunc:I,actionUrl:"/Statistics/AddStepsLogs",prefixForStorage:"sa",sendingThreshold:5,dataType:"step audit",dataIdFieldName:"Id",requestParamsFunc:function(e){return{stepActionsSerialized:l.toJSON(e),source:n.getEnvironmentId(),customFieldsSerialized:l.toJSON(n.getAnalyticsCustomFields()),browser:i.browser.string,os:i.os.name,domain:window.location.host,permutationId:n.getPermutationId(),endUserGuid:n.getEndUserGuid()}}})}function I(e,t){x(e,t)}function b(e,t){if(!v.isEnabled())return E("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var n={tutorialId:t.TutorialId,tutorialName:t.Name,playGuid:S._currentPlayGUID,playInitiator:S._currentPlayInitiator,status:e};d.send(n)}catch(i){r.error(i)}try{var o=N(t.Id,-1,-1,a.STEP_STATUS.SupposedToShow,t.Steps.length,!1);o.SafeStartAction=e,T.sendData(o)}catch(i){r.error(i)}}function w(e,t,n,i){O(n,t);var o=e.Steps.length;if(!v.isEnabled())return E("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(t.TutorialId<0)return void E(kf("Audit steps manager - Step with id {0} has negative tutorial id ({1})",t.Id,t.TutorialId),3);try{var a=N(t.TutorialId,t.Id,t.StepIndex+1,n,o,i);T.sendData(a);try{return _(t,e,o,n)}catch(s){return r.error(s,"Failed auditStep: stepId="+t.Id+", wtId="+e.TutorialId+", status="+n+", pId="+S._currentPlayGUID),!0}}catch(s){return r.error(s),s}}function _(e,t,n,r){var i=g.getSettingsValue(e.Settings,"action","");return c.postEvent(c.EVENT_TYPES.Play,{type:c.EVENT_APPS.Step,oId:e.Id,oName:e.StepTitle||"",aType:P(i),aAppType:A(i),oType:e.Type,indx:e.StepIndex+1,owId:t.TutorialId,owName:t.Name,owType:c.EVENT_APPS.Walkthru,total:n,status:r,pId:S._currentPlayGUID})}function P(e){return e?p.map(e.actionType):""}function A(e){return e?f.map(e.actionType):""}function k(e){void 0!=S._currentPlayGUID&&0!=S._currentPlayGUID.length||(S._currentPlayGUID=m.generateNewPlayGuid(e))}function O(e,t){if(e!=a.STEP_STATUS.SkippedByActionStep){var n=e==a.STEP_STATUS.SkippedStartedFromBiggerStep?"NewSkippedStep":"CheckNewStep";h.deprecatedRaiseEvent(n,t)}}function N(e,t,n,r,i,o){k(e);var a={};return a.tutorialID=e,a.stepId=t,a.stepIndex=n,a.totalSteps=i,a.playGuid=S._currentPlayGUID,a.TicksSince1970=l.getDateAtUTC(),a.StepStatus=r,D(a),l.defaultValue(o,!1)&&(a.isFirstStepError=!0),a}function D(e){if(!S._currentPlayInitiator||S._currentPlayInitiator.type==a.STEP_PLAY_INITIATOR_ENUM.NONE)return void(e.playInitiator=a.STEP_PLAY_INITIATOR_ENUM.NONE);e.playInitiator=S._currentPlayInitiator.type,void 0!=S._currentPlayInitiator.objectId&&S._currentPlayInitiator.objectId>-1&&(e.initObjId=S._currentPlayInitiator.objectId)}function L(){T.clearAndStopSavingData()}function x(e,t){var n=[];if(e.length<=0)return n;for(var r=0;r<e.length;r++)e[r].stepIndex==t.stepIndex&&e[r].playGuid==t.playGuid&&(n.push(e.splice(r,1)[0]),r--);return n}y.apply(null,arguments)}i.register("AuditWtsManager").asCtor(_o).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper, AuditingEnabledIndicator");function _o(e,t,n,r){var i=this;i.auditWalkthruStart=a;function o(){}function a(i,o,a,s,u){if(!r.isEnabled())return;var l=i.Steps;t.postEvent(t.EVENT_TYPES.Play,{type:t.getEventAppByDeployable(e.Tutorial),oId:i.TutorialId,oName:i.Name,pId:u||-1,pInit:n.map(o),oRequestedSubObject:l[a].Id,oActualSubObject:l[s].Id})}o.apply(null,arguments)}i.register("DocumentElementEventsBinder").asCtor(Po).asProto().dependencies("wmjQuerySafe");function Po(t){var n=this;n.on=r,n.off=i;function r(t,n,r,i){if(!r)return;r=[].concat(r);var o=e(t[0].ownerDocument);n=n||t;for(var a=0;a<r.length;a++)o.find(n).on(r[a],i)}function i(e,n,r){if(!r)return;r=[].concat(r);var i=t(e).getDocument();n=n||e;for(var o=0;o<r.length;o++)i.find(n).off(r[o])}}i.register("AuditTasksManager").asCtor(Ao).dependencies("EventSender, Consts, ReportInitiatorMapper, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, AuditingEnabledIndicator");function Ao(e,t,n,r,i,o){var a=this;a.auditTaskPlayed=u;function s(){}function u(a,s){if(!o.isEnabled())return;var u=i.get(a.RelatedDeployableType),l=u.getById(a.RelatedDeployableId);e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,{type:t.EVENT_SENDER_EVENT_APPS.Task,oId:a.Id,oName:a.Name,pId:"-1",aoId:l.Id,aoName:l.Name,aAppType:r.map(a.RelatedDeployableType),pInit:n.map(s)})}s.apply(null,arguments)}i.register("AuditSafeStartManager").asCtor(ko).dependencies("EventSender,ReportInitiatorMapper,Logger, Consts");function ko(e,t,n,r){var i=this;i.send=a;function o(){}function a(t){if(u(t)){var r=s(t);e.postEvent(e.EVENT_TYPES.PlayFailed,r)}else n.error(null,"params is not valid for send action in AuditSafeStartManager")}function s(e){return{oId:e.tutorialId,oName:e.tutorialName,pId:e.playGuid,pInit:t.map(e.playInitiator),status:e.status,type:r.EVENT_SENDER_ACTIONS.PlayWalkthru}}function u(e){return null!=e&&null!=e.tutorialId&&null!=e.playGuid&&null!=e.status}o.apply(null,arguments)}i.register("EndUsersManager").asCtor(Oo).dependencies("ClientStorageManager,Logger,JQueryElementFinder,GuidGenerator,CommonUtils, CommonEvents, Consts, MessageSender,IsInEditor");function Oo(e,t,n,r,i,o,a,s,u){var l=this;l.setEndUserSettings=S,l.getEndUserSettings=C,l.isWalkMeGeneratedEndUserType=I,l.getEndUserGuid=w,l.createEndUserGuid=b,l.getEndUserGuidSource=D,l.isEndUserGuidValid=E,l.calculateCustomEndUserGuid=P;var c,d,p,g,f="wm-ueug",h="wm-fgug",m="endUser";function v(){}
function S(e){c=e,o.raiseEvent(a.EVENTS.EndUserSettingsSet,{endUserSettings:e})}function E(){return!i.isValueTrue(c.FallbackDisabled)||y()||T()}function T(){var e=!0;return w(e)!==!1}function y(){return"walkme"==c.Method||"none"==c.Method}function C(){return c}function I(){var e=!0;return c&&(e=y()||!w(!0)),e}function b(){if(c||R("Cannot create end user guid before end user settings were set"),d)return;d=_(),d&&t.customerLog("getEndUserGuid: created endUserGuid-"+d,3,m)}function w(e){if(d||u.get()||R("Cannot get end user guid before it was created"),!e||!g)return d;return t.customerLog("Could not retrieve endUserGuid",3,m),!1}function _(){if(c){var e=l.calculateCustomEndUserGuid(c);return e?(p="Identifier",F(e)):e=k()||N(),e}}function P(e){if(!e)return;var r,o=e.Method,a=e.Parameters;switch(o){case"var":a.VarName&&(r=i.getWindowData(O.Var,a.VarName),x(r)&&(t.customerLog("endUserGuid - invalid variable name",1,m),r=void 0));break;case"salesforce":r=L();break;case"cookie":a.VarName&&(r=i.getWindowData(O.Cookie,a.VarName));break;case"jquery":a.VarName&&(r=n.getjQueryElementText(a.VarName))}var u={method:o,params:a};return r=s.send("EndUserRetrieved",u)||r}function k(){var e=M();if(e)return p="Cache",e}function N(){var e=!1;c&&"walkme"!=c.Method&&"none"!=c.Method?(p="Generated",e=!0):p="Identifier";var n=r.generateGuid();return t.customerLog("getEndUserGuid: generating new user guid-"+n+" isForced: "+e,3,m),F(n,e),n}function D(){return p}function L(){if(window.walkme_sf_vars)return window.walkme_sf_vars.userId}function x(e){return e&&e.nodeType}function F(t,n){e.saveData(f,t,A),n?(g=!0,e.saveData(h,1,A)):(g=!1,e.removeData(h))}function M(){return g=e.getData(h),e.getData(f)}function R(e){var n=new Error(e);throw t.error(n),n}v.apply(null,arguments)}i.register("EndUserLoggerManager").asCtor(No).dependencies("ClientStorageManager, Logger, EndUsersManager, SiteConfigManager, AbCurrentPermutationProvider, RecorderServerManager, HostData, FeaturesManager, WmAjax, AuditSourceManager, UserGuidContainer");function No(e,t,n,r,i,o,a,s,u,l,c){var d,p,g,f=this,h=1e4,m="endUser",v="wm-euaf";function S(){d=i.getCurrentPermutation}function E(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationName}function T(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationId}function y(){if(window.walkme_sf_vars)return window.walkme_sf_vars.roleId}function C(){if(!window.walkme_sf_vars)return;var e=Af(window.walkme_sf_vars);return delete e.organizationName,delete e.organizationId,delete e.userId,e}function I(){if(window.walkme_sf_vars&&window.walkme_sf_vars.walkme_error)return!0;return!1}function b(){return v+n.getEndUserGuid()}function w(){var e=window.walkme_sf_vars,n="walkme_sf_error:"+Cf(e);t.customerLog(n,1,m)}function _(){return void 0===p&&(p=r.get().EndUserSettings&&r.get().EndUserSettings.logWalkMeVisible),p}f.reportEndUser=function(e,i){if(g)return;var p=r.get().EndUserSettings?r.get().EndUserSettings.auditFreq:null,f=_();if(f&&!p&&(p=1440),!p||f&&!i)return;var v=A();if(v)return void(g=!0);if(0===v)return t.customerLog("Loading WalkMe Failed due to ISV Limitations",1),void(e&&e());if(I())return void w();var S={permutationId:d(),endUserGuid:n.getEndUserGuid(),domain:window.location.host,source:l.get(),browser:a.browser.string,os:a.os.name,userGuid:c.getUserGuid()};s.isFeatureEnabled("dontReportSF")||(S.organizationName=E(),S.organizationId=T(),S.roleId=y(),S.extraData=C());var b="Logging WalkMe EndUser ("+n.getEndUserGuid()+"). Caused by WalkMe Visible : "+!!i;t.customerLog(b,1,m);var k=Cf(S);g=!0;u.execute({dataType:"jsonp",url:o.get()+"/EndUser/AddEndUserData",data:{endUsersDataSerialized:k},timeout:h,success:function(t){"true"==t?P(p,1):"false"==t&&(P(p,0),e&&e())}})};function P(t,n){e.saveData(b(),n,60*t)}function A(){return e.getData(b())}S.apply(null,arguments)}F.register([D.PLATFORM.Web,D.PLATFORM.iOS,D.PLATFORM.Android],function(){i.register("screen").asInstance(screen)}),F.register(D.PLATFORM.MobileWeb,function(){i.register("screen").asCtor(Do).dependencies("ExternalWalkMeConfig")});function Do(e){var t=e.get("isEmulator");if(t)return{width:window.innerWidth,height:window.innerHeight};return screen}function Lo(e,t,n,r,o,a){var s=this,u="deviceSystemVersion",l={"Camera Access":"video","Location Services":"location",Contacts:"contacts","Photo Gallery":"photos","Sending Notifications":"notifications"},c=0;s.getFuncList=function(){return Q},s.getFuncAssert=function(){return K},s.getAsyncFuncs=function(){return q};function d(e,t,n,r){return p(e,{varName:t},n,r)}function p(e,t,n,r,o){var a=o?o:new Ro.regular,s=i.get("MobileUtils"),u=function(e){r&&r(e,a)},l=[{name:"success",callback:u}];return s.message(e+"_"+c,t,n,l),c++,a}function g(e){var n=function(n,r){r.setValue(n==t.ELEMENT_INTERACTION_TYPES.Visible),r.onRefresh(function(){r.setValue(!1),g(e.funcArgs,null,null,r)})};return p("Element_visible",{IdentifySettings:e.funcArgs.IdentifySettings},t.MOBILE_COMMANDS.GET_DATA.elementFinder,n,e.asyncResultObject)}function f(e){var n=function(n,r){r.setValue(n==t.ELEMENT_INTERACTION_TYPES.NotVisible),r.onRefresh(function(){r.setValue(!1),f(e.funcArgs,null,null,r)})};return p("Element_notVisible",{IdentifySettings:e.funcArgs.IdentifySettings},t.MOBILE_COMMANDS.GET_DATA.elementFinder,n,e.asyncResultObject)}function h(e,n,r){var i=l[n.PermissionsForApplicationVar];function o(e,t){t.setValue(void 0!==e[i]&&e[i]===r)}return d(e+i,i,t.MOBILE_COMMANDS.GET_DATA.permissions,o)}var m=function(e){return h("Permission_enabled_",e.funcArgs,!0)},v=function(e){return h("PermissionFor_notEnabled_",e.funcArgs,!1)};function S(e,t){if(e.toString()===t.toString())return!1;for(var n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length),o=0;o<i;){var a=Number(n[o]),s=Number(r[o]);if(a!=s)return a>s;o++}return n.length>r.length}function E(e,t){if(e.toString()===t.toString())return!1;return!S(e,t)}function T(e,t,n,r){var i=e[u];void 0===i||null===i?n.setValue(!1):n.setValue(r(i,t))}var y=function(e){function n(t,n){T(t,e.funcArgs.OSVersionInput,n,function(e,t){return e.toString().toLowerCase()==t.toString().toLowerCase()})}return d("OSVersion_is",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)},C=function(e){function n(t,n){T(t,e.funcArgs.OSVersionInput,n,function(e,t){return e.toString().toLowerCase()!=t.toString().toLowerCase()})}return d("OSVersion_isNot",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)},I=function(e){function n(t,n){T(t,e.funcArgs.OSVersionInput,n,function(e,t){return S(e.toString(),t.toString())})}return d("OSVersion_newerThan",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)},b=function(e){function n(t,n){T(t,e.funcArgs.OSVersionInput,n,function(e,t){return E(e.toString(),t.toString())})}return d("OSVersion_olderThan",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)};function w(e,n,r){return d(e.StorageVarName+n,e.StorageVarName,t.MOBILE_COMMANDS.GET_DATA.storageVar,r)}var _=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName],i=a.decodeHtml(e.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===r||null===r?n.setValue(!1):n.setValue(r.toString().toLowerCase()==i.toLowerCase())}return w(e.funcArgs,"_equals",t)},P=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName],i=a.decodeHtml(e.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===r||null===r?n.setValue(!0):n.setValue(r.toString().toLowerCase()!=i.toLowerCase())}return w(e.funcArgs,"_notEquals",t)},A=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName];void 0===i||null===i?r.setValue(!1):r.setValue(e.isBigger(i,t.funcArgs.StorageVarInput))}return w(t.funcArgs,"_bigger",n)},k=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName];void 0===i||null===i?r.setValue(!1):r.setValue(e.isSmaller(i,t.funcArgs.StorageVarInput))}return w(t.funcArgs,"_smaller",n)},O=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName],o=a.decodeHtml(t.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===i||null===i?r.setValue(!1):r.setValue(e.isLike(i.toString(),o))}return w(t.funcArgs,"_like",n)},N=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName],o=a.decodeHtml(t.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===i||null===i?r.setValue(!0):r.setValue(!e.isLike(i.toString(),o))}return w(t.funcArgs,"_notLike",n)},D=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName];void 0!==r&&null!==r?n.setValue(!0):n.setValue(!1)}return w(e.funcArgs,"_exists",t)},L=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName];void 0!==r&&null!==r?n.setValue(!1):n.setValue(!0)}return w(e.funcArgs,"_notExists",t)},x=function(e){var t=n.getVisitsNumber();return t==e.funcArgs.VisitsNumber},F=function(e){var t=n.getVisitsNumber();return t>e.funcArgs.VisitsNumber},M=function(e){var t=n.getVisitsNumber();return t==e.funcArgs.VisitsNumber},R=function(e){var t=n.getLastVisitDate();return H(t,new Date(e.funcArgs.LastVisitDate))},B=function(e){var t=n.getLastVisitDate();return t>new Date(e.funcArgs.LastVisitDate)},U=function(e){var t=n.getLastVisitDate();return t<new Date(e.funcArgs.LastVisitDate)},V=function(e){var t=n.getLastVisitDate(),r=G(new Date,e.funcArgs.NumberOfDays);return H(t,r)||t>r},W=function(e){var t=n.getLastVisitDate(),r=G(new Date,e.funcArgs.NumberOfDays);return t<r};function G(e,t){var n=new Date;return n.setDate(e.getDate()-t),n}function H(e,t){return e>=t&&e<=t}var j=function(e){return r.wasAppUpdated()},Y=function(e){var t=r.getAppVersion();return void 0!==t&&t<e.funcArgs.LatestVersion},z=function(e){var t=e.funcArgs.DeviceOS;return o.getCurrentPlatform()==t},Q={StorageVarEquals:_,StorageVarNotEquals:P,StorageVarBigger:A,StorageVarSmaller:k,StorageVarLike:O,StorageVarNotLike:N,StorageVarExists:D,StorageVarNotExists:L,OSVersionIs:y,OSVersionIsNot:C,OSVersionNewerThan:I,OSVersionOlderThan:b,PermissionEnabled:m,PermissionNotEnabled:v,NumberOfVisitsIs:x,NumberOfVisitsGreaterThan:F,NumberOfVisitsLessThan:M,LastVisitDateWasIn:R,LastVisitDateWasAfter:B,LastVisitDateWasBefore:U,UserActiveInPastDays:V,UserNonActiveInPastDays:W,WasAppUpdated:j,IsAppHasOutdatedVersion:Y,DeviceOSIs:z,NativeElementVisible:g,NativeElementNotVisible:f},K=[];K.StorageVarExists=!1,K.StorageVarNotExists=!1,K.StorageVarEquals=!1,K.StorageVarNotEquals=!1,K.StorageVarLike=!1,K.StorageVarNotLike=!1,K.StorageVarBigger=!1,K.StorageVarSmaller=!1,K.OSVersionIs=!1,K.OSVersionIsNot=!1,K.OSVersionNewerThan=!1,K.OSVersionOlderThan=!1,K.PermissionEnabled=!1,K.PermissionNotEnabled=!1,K.NativeElementVisible=!1,K.NativeElementNotVisible=!1;var q=["StorageVarExists","StorageVarNotExists","StorageVarEquals","StorageVarNotEquals","StorageVarLike","StorageVarNotLike","StorageVarBigger","StorageVarSmaller","OSVersionIs","OSVersionIsNot","OSVersionNewerThan","OSVersionOlderThan","PermissionEnabled","PermissionNotEnabled","NativeElementVisible","NativeElementNotVisible"]}i.register("mobileConditionFunctions").asCtor(Lo).asSingleton().dependencies("CommonUtils, Consts, VisitsManager, VersionsManager, PlatformsService, HtmlDecoder");function xo(){var e=this,t=i.get("screen");e.getFuncList=function(){return s},e.getFuncAssert=function(){return u},e.getAsyncFuncs=function(){return l};var n=function(e){if(t.width>e.funcArgs.WidthInput)return!0;return!1},r=function(e){if(t.width<e.funcArgs.WidthInput)return!0;return!1},o=function(e){if(t.height>e.funcArgs.HeightInput)return!0;return!1},a=function(e){if(t.height<e.funcArgs.HeightInput)return!0;return!1},s={widthMoreThan:n,widthLessThan:r,heightMoreThan:o,heightLessThan:a},u=[],l=[]}i.register("ScreenSizeConditionFunctions").asCtor(xo).asSingleton().dependencies("screen");function Fo(){var e=this,t=i.get("win");e.getFuncList=function(){return a},e.getFuncAssert=function(){return s},e.getAsyncFuncs=function(){return u};function n(e,t,n){if(t==e.WindowSizeInput)return!1;return t>e.WindowSizeInput===n}var r=function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!0);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!0)}},o=function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!1);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!1)}},a={WindowSizeMoreThan:r,WindowSizeLessThan:o},s=[],u=[]}i.register("WindowSizeConditionFunctions").asCtor(Fo).asSingleton().dependencies("win");var Mo=function(){function t(e,t,n,r,i){this.args=[];for(var o=0;o<arguments.length;o++)arguments[o]&&this.args.push(arguments[o])}return t.prototype.getFuncList=function(){var t={};return e.safeEach(this.args,function(n,r){r&&r.getFuncList&&e.extend(t,r.getFuncList())}),t},t.prototype.getFuncAssert=function(){var t=[];return e.safeEach(this.args,function(n,r){r&&r.getFuncAssert&&e.extend(t,r.getFuncAssert())}),t},t.prototype.getAsyncFuncs=function(){var t=[];return e.safeEach(this.args,function(e,n){n&&n.getAsyncFuncs&&t.push.apply(t,n.getAsyncFuncs())}),t},t}();i.register("ConditionFunctionsHandler").asCtor(Mo).asSingleton().dependencies("ScreenSizeConditionFunctions, mobileConditionFunctions, WindowSizeConditionFunctions, HistoricalConditionFunctions, OnboardingConditionFunctions");var Ro={};Ro.fixed=function(e){var t=new Ro.regular;return t.setValue(e),t},Ro.noMemory=function(){var e,t,n,r=this;function i(e){t=e}r.onGotValue=function(e){},r.getValue=function(e){if(e)return n;return n=t()},r.onResourceClean=function(t){e=t},r.cleanResources=function(){e&&e()},r.onRefresh=function(){},r.refresh=function(){},i.apply(null,arguments)},Ro.regular=function(){var e,t,n,r,i=this;function o(t){e=t}i.onGotValue=function(e){t=e},i.setValue=function(n){e=n,t&&t()},i.getValue=function(){return e},i.onResourceClean=function(e){n=e},i.cleanResources=function(){n&&n(),t=void 0},i.onRefresh=function(e){r=e},i.refresh=function(){r&&r()},o.apply(null,arguments)},Ro.complex=function(){var e,t,n,r,i,o=this;function a(e,i,o){t=e,n=i,r=o}o.getValue=function(e){if(e)return i;return i=r(t.getValue,n.getValue)},o.onGotValue=function(e){t.onGotValue(e),n.onGotValue(e)},o.cleanResources=function(){t.cleanResources(),n.cleanResources(),e=void 0},o.refresh=function(){t.refresh(),n.refresh()},a.apply(null,arguments)},i.register("SonarEventHandler").asCtor(Bo).dependencies("FeaturesManager, Logger, ElementFinder, MessageSender, EventBinder");function Bo(e,t,n,r,i){var o=this;o.handleEvent=s,o.unbindEvent=l;var a=".mtCond";function s(i,o,a,s){var c=function(u){t.customerLog("An event was fired for condition checker result. (event:'"+o+"', element specified below) ",3),t.customerLog(i[0],3);var l=r.send("SonarEventRaised",{event:u});if(l)return;if(e.isFeatureEnabled("verifySonarAfterEvent")){var c=s(),d=u.srcElement||u.target;if(!c||c.length>0&&d&&!c.is(d))return t.customerLog("triggered element does not match condition selector",5),void a.setValue(!1)}n.wrapSession(function(){a.setValue(!0)})};u(i,o,c),a.onResourceClean(function(){l(i,o,c)})}function u(e,n,r){if(t.customerLog("Listening to event on element. (event:'"+n+"', element specified below) ",5),t.customerLog(e,5),e){var o=c(n,a);i.bind(e,o,r)}}function l(e,n,r){try{if(t.customerLog("Stopped listening for event in condition checker result. (event:'"+n+"', element specified below) ",5),t.customerLog(e,5),e){var o=c(n,a);i.unbind(e,o,r)}}catch(s){}}function c(e,t){return e.replace(/ /g,t+" ")+t}}i.register("ConditionFunctions").asCtor(Uo).dependencies("Lib, JQueryElementFinder, CommonUtils, HostData, TimerManager, LanguageManager, ConditionFunctionsHandler, UrlCommonStringsRemover, StepRetriever, WalkthrusContainer, ConditionTreeUtils, Consts, WalkthrusModule, CurrentWalkthruData, ConditionBlocksManager, CookiesManager, ClientStorageManager, HtmlDecoder, LocationService, LocationMatcher, NewToOldConditionConverter, Logger, ArrayUtils, ClientOrServerStorageManager, AbTestingGoalsManagerInstance, SonarEventHandler");function Uo(t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I,b,w,_,P){var A=this,k={TRUE:0,FALSE:1,CANNOT_ASSERT:2},N="jQuery",D="SelectedElement",L="Element",x=function(){var e={Id:-1,TutorialId:-1,StepText:"",StepTitle:"",ElementDescription:"",StepIndex:-1,ConfigurationId:"1",Configuration:null,StepSensitivity:1,Type:-1,Settings:{},Duration:4,Delay:0};return e};function F(e,t){return r.isBigger(e,t)}function M(e,t){return r.isSmaller(e,t)}function R(e,t){return r.isLike(e,t)}function B(e,t){var n,r;try{t.regexText&&(r=new RegExp(t.regexText,t.regexFlags),n=r.exec(e))}catch(i){}return null!=n}function U(e){var t=e.split(":"),n=Number(t[0]),r=Number(t[1]);return 60*n+r}this.getElementTextForEditor=function(e){var t=If(e);return A.getElementText(t)},this.getElementStrength=function(e){var n=If(e),r=ye(n),i={score:-1},o=t.findElement(r,null,i);if(o)return i.score},this.getElementText=function(n){var i=ye(n),o=t.findElement(i,!1);return o!==!1&&r.checkElementText(e(o))};function V(t){var n=new RegExp("[ \t"+String.fromCharCode(160)+"\r\n\x0B\f]+","gi");return t=t.replace(n," "),t=e.trim(t)}function W(e){I.customerLog("jQuery find element for condition",5);var t=n.findElementsByjQueryComplexSelector(e.jQuerySelector);return I.customerLog(t,5),0===t.length&&(t=!1),t}function G(e,t){var n=function(){return W(e.funcArgs)};return De(t,e.pollingInterval,n)}function H(e,t,n,r){var i=function(){return W(e)};return xe(e,t,n,r,i)}var j=function(t){return t=e.extend(t,{pollingInterval:-1}),G(t,"hover")},Y=function(e){return G(e,"hover")},z=function(t){return t=e.extend(t,{pollingInterval:-1}),G(t,"click mouseup mousedown")},Q=function(e){return G(e,"click mouseup mousedown")},K=function(t){return t=e.extend(t,{pollingInterval:-1}),G(t,"swipe")},q=function(e){return G(e,"swipe")},X=function(e){return H(e.funcArgs,"mouseenter","mouseleave",e.pollingInterval)},J=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>0},$=function(e){return 0==n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},Z=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>parseInt(e.funcArgs.jQueryLength)},ee=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length<parseInt(e.funcArgs.jQueryLength)},te=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length==parseInt(e.funcArgs.jQueryLength)},ne=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length!=parseInt(e.funcArgs.jQueryLength)},re=function(e){for(var t=parseInt(e.funcArgs.StepId),n=h.stepPlayHistory,r=0;r<n.length;r++)if(n[r]==t)return!0;return!1},ie=function(e){return!re(e)},oe=function(e){for(var t=parseInt(e.funcArgs.StepId,10),n=0;n<h.stepCompletedHistory.length;n++)if(h.stepCompletedHistory[n]==t)return!0;return!1},ae=function(e){return!oe(e)},se=function(e){var t=new Date(E.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t-n==0},ue=function(e){return!se(e)},le=function(e){var t=new Date(E.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n>=t},ce=function(e){var t=new Date(E.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n<=t},de=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getDay()},pe=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getMonth()},ge=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getFullYear()},fe=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n>=U(e.funcArgs.TimeInput)},he=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n<=U(e.funcArgs.TimeInput)},me=function(e){var t=E.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(t.toLowerCase())==l.remove(T.getCurrentLocation().toLowerCase())},ve=function(e){return!me(e)},Se=function(e){var t=E.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(T.getCurrentLocation()).toLowerCase().indexOf(l.remove(t).toLowerCase())>=0},Ee=function(e){return!Se(e)};function Te(e){return"boolean"==typeof e?e:1===e||0!==e&&("string"==typeof e?"true"==e.toLowerCase()||"1"==e||"false"!=e.toLowerCase()&&"0"!=e&&void 0:void 0)}function ye(e){var t=x();return e.IdentifySettings?(t.ElementDescription=If(Cf(e.IdentifySettings.ElementDescription)),t.IsIgnoreText=void 0===e.IdentifySettings.IgnoreText?Te(e.IdentifySettings.IsIgnoreText):parseInt(e.IdentifySettings.IgnoreText),t.StepSensitivity=void 0===e.IdentifySettings.Sensitivity?parseInt(e.IdentifySettings.StepSensitivity):parseInt(e.IdentifySettings.Sensitivity),t.IsIgnoreId=void 0===e.IdentifySettings.IgnoreId?Te(e.IdentifySettings.IsIgnoreId):parseInt(e.IdentifySettings.IgnoreId),t.IgnorePosition=Te(e.IdentifySettings.IgnorePosition),t.IsIdentifyByText=Te(e.IdentifySettings.IsIdentifyByText)):t.ElementDescription=If(Cf(e.ElementDescription)),t}var Ce=function(e){var t=Oe(e.funcArgs);return l.remove(t).toLowerCase()==l.remove(T.getCurrentUrlPath()).toLowerCase()},Ie=function(e){return!Ce(e)},be=function(e){var t=Oe(e.funcArgs);return T.getCurrentUrlPath().toLowerCase().indexOf(t.toLowerCase())>=0},we=function(e){return!be(e)},_e=function(e){var t=Oe(e.funcArgs),n=l.remove(T.getCurrentUrlPath()),r=l.remove(t);return R(n,r)},Pe=function(e){return!_e(e)},Ae=function(e){var t=l.remove(T.getCurrentUrlPath()),n=e.funcArgs.UrlInput;return B(t,n)},ke=function(e){return!Ae(e)};function Oe(e){return E.decodeHtml(e.UrlInput,["&"])}var Ne=function(e){var n=ye(e.funcArgs);return 0!=t.findElement(n,!1)};function De(e,t,n){var r,i,o=new Ro.regular((!1));function s(){I.customerLog("Poll Element: start search for element (polling: "+t>"0)",5),r&&r.clear();var u=!!i&&Le(i);u||(P.unbindEvent(i,e),i=n(),I.customerLog("Poll Element: element matched: ",5),I.customerLog(i,5),i?P.handleEvent(i,e,o,n):t>=0&&o.setValue(!1)),t>=0&&(r=a.libSetTimeout(s,t))}return o.onResourceClean(function(){t=-1}),o.onRefresh(function(){o.getValue()&&o.setValue(!1),s()}),o.getValue()||s(),o}function Le(e){var t;try{t=e[0].ownerDocument}catch(n){return!1}var r=t.defaultView||t.parentWindow;if(!r||r.top!=window.top||!e.is(":mt_visible"))return!1;return!0}function xe(e,t,n,r,i){var o,a=function(e){return e?o:o=i()},s=new Ro.regular,u=De(t,r,function(){return a(!1)}),l=De(n,r,function(){return a(!0)});return u.onGotValue(function(){u.getValue()&&s.setValue(!0)}),l.onGotValue(function(){l.getValue()&&s.setValue(!1)}),s.onResourceClean(function(){u.cleanResources(),l.cleanResources()}),s}function Fe(e){var n=ye(e);I.customerLog("Find element for condition",5);var r=t.findElement(n,null);return I.customerLog(r,5),r}function Me(e,t){var n=function(){return Fe(e.funcArgs)};return De(t,e.pollingInterval,n)}function Re(e,t,n){var r=function(){return Fe(e.funcArgs)};return xe(e.funcArgs,t,n,e.pollingInterval,r)}var Be=function(t){return t=e.extend(t,{pollingInterval:-1}),Me(t,"hover")},Ue=function(e){return Me(e,"hover")},Ve=function(t){return t=e.extend(t,{pollingInterval:-1}),Me(t,"click mouseup mousedown")},We=function(e){return Me(e,"click mouseup mousedown")},Ge=function(t){return t=e.extend(t,{pollingInterval:-1}),Me(t,"swipe")},He=function(e){return Me(e,"swipe")},je=function(e){return Re(e,"mouseenter","mouseleave")},Ye=function(e){return!Ne(e)},ze=function(e){var n=ye(e.funcArgs);return 0!=t.findElement(n,!0)},Qe=function(e){return!ze(e)},Ke=function(n){var r=ye(n.funcArgs),i=t.findElement(r,!1);return e(i).is(":checked")},qe=function(e){return!Ke(e)};function Xe(e,t){return B(e,t)}function Je(e,t){return!Xe(e,t)}function $e(e,t){var n=E.decodeHtml(t,["&",'"',"'",">","<"]);return e!==!1&&V(e.toLowerCase())==V(n.toLowerCase())}function Ze(e,t){return!$e(e,t)}function et(e,t){var n=E.decodeHtml(t,["&",'"',"'",">","<"]);return e!==!1&&R(V(e),V(n))}function tt(e,t){return!et(e,t)}function nt(e,t){return e!==!1&&F(e,t)}function rt(e,t){return e!==!1&&M(e,t)}function it(t,n){return t=e.trim(t),t.length<parseInt(n)}function ot(t,n){return t=e.trim(t),t.length==parseInt(n)}function at(t,n){return t=e.trim(t),t.length>parseInt(n)}function st(t){var n=e.grep(t.split(/\s+/),function(e){return 0!=e.length}).length;return n}function ut(e,t){return st(e)<parseInt(t)}function lt(e,t){return st(e)==parseInt(t)}function ct(e,t){return st(e)>parseInt(t)}function dt(e){if(!e)return!1;if(!isNaN(e))return!0;if(/^[+-]?(?=.)(\d{1,3}(,\d{3})*)?(\.\d+)?$/.test(e))return!0;if(!isNaN(e.replace(",",".")))return!0;if(/^[+-]?(?=.)(\d{1,3}(\.\d{3})*)?(,\d+)?$/.test(e))return!0;return!1}function pt(e){return!dt(e)}function gt(e){var t="([1-9]\\d?|0?[1-9])",n="(\\d\\d\\d[1-9])",r="([.\\-\\/ ])",i=kf("(({0}{2}{0}\\4{1})|({1}{2}{0}\\9{0})|({0}{2}{0}\\14{0}))",t,n,r),o=new RegExp(i,"i"),a=o.exec(e);return null!=a&&e==a[0]}function ft(e){return!gt(e)}function ht(e){var t=/((2[0-4])|([0-1]?[0-9])):([0-5][0-9])[^:]*/,n=e.match(t);return null!=n&&e==n[0]}function mt(e){return!ht(e)}function vt(e){var t=/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,n=e.match(t);return null!=n&&e==n[0]}function St(e){return!vt(e)}function Et(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function Tt(e){return!Et(e)}function yt(e){var t=/(https?:\/\/)?[-a-zA-Z0-9@:%_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/,n=e.match(t);return null!=n&&e==n[0]}function Ct(e){return!yt(e)}var It=function(e){return!!e.funcArgs.getSelectedElement()},bt=function(e){return!It(e)},wt=function(t){return e(t.funcArgs.getSelectedElement()).is(":checked")},_t=function(e){return!wt(e)},Pt=function(e){return!!e.funcArgs.getSelectedElement()},At=function(e){return!Pt(e)},kt=function(e){var t=E.decodeHtml(e.funcArgs.UrlInput,["&"]);if(0==t.indexOf("regexp:"))return y.isLocationMatchString(t);var n=l.remove(T.getCurrentLocation()),r=l.remove(t);return R(n,r)},Ot=function(e){return!kt(e)},Nt=function(e){var t=l.remove(T.getCurrentLocation()),n=e.funcArgs.UrlInput;return B(t,n)},Dt=function(e){return!Nt(e)},Lt=function(e){var t=E.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(t.toLowerCase())==l.remove(Br().toLowerCase())},xt=function(e){return!Lt(e)},Ft=function(e){var t=E.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(Br().toLowerCase()).indexOf(l.remove(t.toLowerCase()))>=0},Mt=function(e){return!Ft(e)},Rt=function(e){var t=E.decodeHtml(e.funcArgs.UrlInput,["&"]),n=l.remove(Br()),r=l.remove(t);return R(n,r)},Bt=function(e){return!Rt(e)},Ut=function(e){var t=l.remove(Br()),n=e.funcArgs.UrlInput;return B(t,n)},Vt=function(e){return!Ut(e)},Wt=function(e){return R(o.browser.string,"*"+e.funcArgs.BrowserName+"*")},Gt=function(e){return!Wt(e)},Ht=function(e){return window.self!==window.top},jt=function(e){return!Ht(e)},Yt=4e3,zt=function(e){var t=S.getData(g.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY);if(!t)return!1;var n=((new Date).getTime()-t)/2,r=n>Yt?Yt:Kt(n,Yt)*Yt;return i.get("WalkmeLoadTimeManager").getWalkmeLoadTime()+r>t},Qt=function(e){return!zt(e)};function Kt(e,t){return e/=t,e--,Math.sqrt(1-e*e)}var qt=function(e){var t=v.getCookie(e.funcArgs.CookieName),n=E.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return t!==!1&&t.toLowerCase()==n.toLowerCase()},Xt=function(e){return!qt(e)},Jt=function(e){var t=v.getCookie(e.funcArgs.CookieName);return t!==!1&&F(t,e.funcArgs.CookieInput)},$t=function(e){var t=v.getCookie(e.funcArgs.CookieName);return t!==!1&&M(t,e.funcArgs.CookieInput)},Zt=function(e){var t=v.getCookie(e.funcArgs.CookieName),n=E.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return t!==!1&&R(t,n)},en=function(e){return!Zt(e)},tn=function(e){var t=v.getCookie(e.funcArgs.CookieName);return t!==!1},nn=function(e){return!tn(e)},rn=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;null===t&&(t="null");var n=E.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()},on=function(e){return!rn(e)},an=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;return F(t,e.funcArgs.DataValue)},sn=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;return M(t,e.funcArgs.DataValue)},un=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t||null===t)return!1;var n=E.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return R(t,n)},ln=function(e){return!un(e)},cn=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);return void 0!==t},dn=function(e){return!cn(e)},pn=function(e){var t=r.getWindowData(O.Var,e.funcArgs.WindowVarName),n=E.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return void 0!==t&&null!==t&&t.toString().toLowerCase()==n.toLowerCase()},gn=function(e){return!pn(e)},fn=function(e){var t=r.getWindowData(O.Var,e.funcArgs.WindowVarName);return void 0!==t&&F(t,e.funcArgs.WindowVarInput)},hn=function(e){var t=r.getWindowData(O.Var,e.funcArgs.WindowVarName);return void 0!==t&&M(t,e.funcArgs.WindowVarInput)},mn=function(e){var t=r.getWindowData(O.Var,e.funcArgs.WindowVarName),n=E.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return void 0!==t&&null!==t&&R(t.toString(),n)},vn=function(e){return!mn(e)},Sn=function(e){var t=r.getWindowData(O.Var,e.funcArgs.WindowVarName);return void 0!==t&&null!==t},En=function(e){return!Sn(e)},Tn=function(e){var t=r.getWindowData(O.Var,e.funcArgs.WindowVarName);return B(t,e.funcArgs.WindowVarInput)},yn=function(e){return!Tn(e)},Cn=function(e){var t=s.getCurrentLanguage();""===t&&(t="default");var n=E.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return n.toLowerCase()==t.toLowerCase()},In=function(e){return!Cn(e)},bn=function(e){var t=s.getCurrentLanguage();""===t&&(t="default");var n=E.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return R(t,n)},wn=function(e){return!bn(e)},_n=function(e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),i=d.getWalkthruById(r),o=c.getStepIndex(n,r);if(i&&o>-1){var a=i.Steps[o];return t.findElement(a,!1)!==!1}return!1},Pn=function(e){return!_n(e)},An=function(e){var t=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),r=d.getWalkthruIndexByWalkthruId(n),i=c.getStepIndex(t,n);if(i>-1&&r>-1){var o=f.checkIfStepExistsWithSkippables(r,i,void 0,void 0,void 0,g.CHECK_STEP_MODE.Sandbox);if(o>=0)return!0}return!1},kn=function(e){return!An(e)},On=function(e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),i=d.getWalkthruById(r),o=c.getStepIndex(n,r);if(i&&o>-1){var a=i.Steps[o];return t.findElement(a,!0)!==!1}return!1},Nn=function(e){return!On(e)},Dn=function(e){var t=parseInt(e.funcArgs.GoalId);return _.value&&_.value.isGoalReached(t)},Ln=function(e){return!Dn(e)},xn=function(e){return!!Mn(e)},Fn=function(e){var t=Mn(e);return null==t?null:!t};function Mn(e){var t=parseInt(e.funcArgs.TaskId),n=parseInt(e.funcArgs.GoalId);return i.get("TodoListManager").isTaskGoalReached(t,n)}var Rn=function(t){var n=e("#tsidLabel"),r=E.decodeHtml(t.funcArgs.SfTabInput.toString(),["&",'"',"'",">","<"]);return 0!=n.length&&V(n.text().toLowerCase())==V(r.toLowerCase())},Bn=function(e){return!Rn(e)},Un=function(t){var n=e("#tsidLabel"),r=E.decodeHtml(t.funcArgs.SfTabInput,["&",'"',"'",">","<"]);return 0!=n.length&&V(n.text().toLowerCase()).indexOf(V(r.toLowerCase()))>=0},Vn=function(e){return!Un(e)},Wn={Accounts:"salesforce.com/001/",Contacts:"salesforce.com/003/",Opportunities:"salesforce.com/006/",Documents:"salesforce.com/015/",Cases:"salesforce.com/500/",Solutions:"salesforce.com/501/",Contracts:"salesforce.com/800/",Reports:"salesforce.com/00O/",Leads:"salesforce.com/00Q/",Dashboards:"salesforce.com/01Z/",CustomTabs1:"salesforce.com/a00/",Products:"salesforce.com/a01/"},Gn={MainPage:"o",New:"e"},Hn=function(e){var t=e.funcArgs.SfType,n=e.funcArgs.SfModoule,r={funcArgs:{UrlInput:""+Wn[t]+Gn[n]}};return Se(r)},jn=function(e){return!Hn(e)},Yn=function(e){
if(e.funcArgs.conditionBlockId>0)return m.activateById(e.funcArgs.conditionBlockId,void 0);return!1},zn=function(e,t){var n=r.getWindowData(O.Var,e);return void 0!==n&&null!==n&&t(n)},Qn="walkMeWorkday.segmentation.flow.forms";this.WORKDAY_FORMS_VAR_NAME=Qn;var Kn=function(e){return zn(Qn,function(t){return t[e.funcArgs.FormInput]})},qn=function(e){return!Kn(e)},Xn=function(e){return zn(Qn,function(t){var n=E.decodeHtml(e.funcArgs.FormInput,["&",'"',"'"]);for(var r in t)if(r.toLowerCase().indexOf(n.toLowerCase())>=0)return!0;return!1})},Jn=function(e){return!Xn(e)},$n=function(e){return zn(Qn,function(t){var n=E.decodeHtml(e.funcArgs.FormInput,["&",'"',"'"]);for(var r in t)if(R(r,n))return!0;return!1})},Zn=function(e){return!$n(e)},er=function(e){return zn(Qn,function(t){var n=0;for(var r in t)n++;return n.toString()===e.funcArgs.FormInput})},tr=function(e){return r.getWindowData(O.Var,Qn)},nr=function(e){return!tr(e)},rr="walkMeWorkday.segmentation.flow.page";this.WORKDAY_PAGE_VAR_NAME=rr;var ir=function(e){return zn(rr,function(t){var n=E.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},or=function(e){return!ir(e)},ar=function(e){return zn(rr,function(t){var n=E.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},sr=function(e){return!ar(e)},ur=function(e){return zn(rr,function(t){var n=E.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return R(t,n)})},lr=function(e){return!ur(e)},cr=function(e){return zn(rr,function(e){if(""===e)return!1;return!0})},dr=function(e){return!cr(e)},pr="walkMeWorkday.segmentation.flow.subPage";this.WORKDAY_SUB_PAGE_VAR_NAME=pr;var gr=function(e){return zn(pr,function(t){var n=E.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},fr=function(e){return!gr(e)},hr=function(e){return zn(pr,function(t){var n=E.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},mr=function(e){return!hr(e)},vr=function(e){return zn(pr,function(t){var n=E.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return R(t,n)})},Sr=function(e){return!vr(e)},Er=function(e){return zn(pr,function(e){if(""===e)return!1;return!0})},Tr=function(e){return!Er(e)},yr="walkMeWorkday.segmentation.worklets";function Cr(e){return zn(yr,function(t){return t&&t[e.funcArgs.workletUid]})}function Ir(e){return!Cr(e)}var br="walkMeWorkday.segmentation.inbox";function wr(e){return zn(br,function(t){return t&&t[e.funcArgs.inboxItemUid]})}function _r(e){return!wr(e)}var Pr={jQueryTrue:J,jQueryFalse:$,jQueryLengthBigger:Z,jQueryClicked:z,jQueryClickedSticky:Q,jQueryHovered:j,jQueryHoveredSticky:Y,jQueryHoverSwitch:X,jQuerySwiped:K,jQuerySwipedSticky:q,jQueryLengthSmaller:ee,jQueryLengthEquals:te,jQueryLengthNotEquals:ne,StepPlayed:re,StepNotPlayed:ie,StepCanPlay:An,StepCannotPlay:kn,StepIsVisible:On,StepIsNotVisible:Nn,StepExists:_n,StepNotExists:Pn,StepCompleted:oe,StepNotCompleted:ae,UrlEquals:me,UrlNotEquals:ve,UrlContains:Se,UrlNotContains:Ee,UrlLike:kt,UrlNotLike:Ot,UrlIsPerRegularExpression:Nt,UrlIsNotPerRegularExpression:Dt,UrlPathEquals:Ce,UrlPathNotEquals:Ie,UrlPathContains:be,UrlPathNotContains:we,UrlPathLike:_e,UrlPathNotLike:Pe,UrlPathIsPerRegularExpression:Ae,UrlPathIsNotPerRegularExpression:ke,DateEquals:se,DateNotEquals:ue,DateFrom:le,DateUntil:ce,DateIsDay:de,DateIsMonth:pe,DateIsYear:ge,TimeFrom:fe,TimeUntil:he,ReferrerUrlEquals:Lt,ReferrerUrlNotEquals:xt,ReferrerUrlContains:Ft,ReferrerUrlNotContains:Mt,ReferrerUrlLike:Rt,ReferrerUrlNotLike:Bt,ReferrerUrlIsPerRegularExpression:Ut,ReferrerUrlIsNotPerRegularExpression:Vt,ElementExists:Ne,ElementNotExist:Ye,ElementVisible:ze,ElementNotVisible:Qe,ElementClicked:Ve,ElementClickedSticky:We,ElementHovered:Be,ElementHoveredSticky:Ue,ElementHoverSwitch:je,ElementSwiped:Ge,ElementSwipedSticky:He,ElementSelected:Ke,ElementNotSelected:qe,BrowserEquals:Wt,BrowserNotEquals:Gt,ContainerIsIframe:Ht,ContainerNotIframe:jt,WindowIsNew:zt,WindowIsNotNew:Qt,CookieExists:tn,CookieNotExists:nn,CookieEquals:qt,CookieNotEquals:Xt,CookieBigger:Jt,CookieSmaller:$t,CookieLike:Zt,CookieNotLike:en,WalkMeDataExists:cn,WalkMeDataNotExists:dn,WalkMeDataEquals:rn,WalkMeDataNotEquals:on,WalkMeDataBigger:an,WalkMeDataSmaller:sn,WalkMeDataLike:un,WalkMeDataNotLike:ln,LanguageEquals:Cn,LanguageNotEquals:In,LanguageLike:bn,LanguageNotLike:wn,WindowVarEquals:pn,WindowVarNotEquals:gn,WindowVarBigger:fn,WindowVarSmaller:hn,WindowVarLike:mn,WindowVarNotLike:vn,WindowVarExists:Sn,WindowVarNotExists:En,WindowVarIsPerRegularExpression:Tn,WindowVarIsNotPerRegularExpression:yn,TaskGoalReached:xn,TaskGoalNotReached:Fn,ExperimentGoalReached:Dn,ExperimentGoalNotReached:Ln,SalesforceTabEquals:Rn,SalesforceTabNotEquals:Bn,SalesforceTabContains:Un,SalesforceTabNotContains:Vn,SalesforceUrlEquals:Hn,SalesforceUrlNotEquals:jn,ConditionBlockTrue:Yn,FormEquals:Kn,FormNotEquals:qn,FormContains:Xn,FormNotContains:Jn,FormLike:$n,FormNotLike:Zn,FormCount:er,FormExists:tr,FormNotExists:nr,PageEquals:ir,PageNotEquals:or,PageContains:ar,PageNotContains:sr,PageLike:ur,PageNotLike:lr,PageExists:cr,PageNotExists:dr,SubPageEquals:gr,SubPageNotEquals:fr,SubPageContains:hr,SubPageNotContains:mr,SubPageLike:vr,SubPageNotLike:Sr,SubPageExists:Er,SubPageNotExists:Tr,SelectedElementVisible:It,SelectedElementNotVisible:bt,SelectedElementSelected:wt,SelectedElementNotSelected:_t,SelectedElementExists:Pt,SelectedElementNotExist:At,WorkletExists:Cr,WorkletNotExists:Ir,InboxItemExists:wr,InboxItemNotExists:_r},Ar={TextPerRegularExpression:Xe,TextNotPerRegularExpression:Je,TextEquals:$e,TextNotEquals:Ze,TextLike:et,TextNotLike:tt,TextEmpty:$e,TextNotEmpty:Ze,TextBigger:nt,TextSmaller:rt,TextLengthIsLessThan:it,TextLengthIsEqualTo:ot,TextLengthIsGreaterThan:at,TextWordCountIsLessThan:ut,TextWordCountIsEqualTo:lt,TextWordCountIsGreaterThan:ct,TextNumeric:dt,TextNotNumeric:pt,TextIsDate:gt,TextIsNotDate:ft,TextIsTime:ht,TextIsNotTime:mt,TextIsUSPhoneNumber:vt,TextIsNotUSPhoneNumber:St,TextIsEmail:Et,TextIsNotEmail:Tt,TextIsWebAddress:yt,TextIsNotWebAddress:Ct};for(var kr in Ar)Ar.hasOwnProperty(kr)&&(Or(Ar[kr],kr),Nr(Ar[kr],kr),Dr(Ar[kr],kr));function Or(e,t){var r=N+t;Pr[r]=function(t){var r=n.getjQueryElementText(t.funcArgs.jQuerySelector);return t.funcArgs.jQueryText||""==t.funcArgs.jQueryText?e.call(this,r,t.funcArgs.jQueryText):e.call(this,r)}}function Nr(t,n){var i=D+n;Pr[i]=function(n){var i=r.checkElementText(e(n.funcArgs.getSelectedElement()));return n.funcArgs.ElementText||""==n.funcArgs.ElementText?t.call(this,i,n.funcArgs.ElementText):t.call(this,i)}}function Dr(e,t){var n=L+t;Pr[n]=function(t){var n=A.getElementText(t.funcArgs);if(n===!1)return!1;return t.funcArgs.ElementText||""==t.funcArgs.ElementText?e.call(this,n,t.funcArgs.ElementText):e.call(this,n)}}e.extend(Pr,u.getFuncList());var Lr=[];Lr.StepPlayed=!1,Lr.StepNotPlayed=!1,Lr.StepCanPlay=!1,Lr.StepCannotPlay=!1,Lr.StepCompleted=!1,Lr.StepNotCompleted=!1,Lr.LanguageEquals=!1,Lr.LanguageNotEquals=!1,Lr.LanguageLike=!1,Lr.LanguageNotLike=!1,Lr.TaskGoalReached=!1,Lr.TaskGoalNotReached=!1,Lr.jQueryClicked=!1,Lr.jQueryClickedSticky=!1,Lr.jQueryHovered=!1,Lr.jQueryHoveredSticky=!1,Lr.jQuerySwiped=!1,Lr.jQuerySwipedSticky=!1,Lr.ElementClicked=!1,Lr.ElementClickedSticky=!1,Lr.ElementHovered=!1,Lr.ElementHoveredSticky=!1,Lr.ElementSwiped=!1,Lr.ElementSwipedSticky=!1,Lr.ExperimentGoalReached=!1,Lr.ExperimentGoalNotReached=!1,e.extend(Lr,u.getFuncAssert());var xr=["ElementClicked","ElementHovered","ElementHoverSwitch","jQueryClicked","jQueryHovered","jQueryHoverSwitch","jQuerySwiped","ElementSwiped"];xr.push.apply(xr,u.getAsyncFuncs()),this.isFuncAsync=function(e){return b.inArray(e,xr)>=0};var Fr=["jQueryHoveredSticky","jQueryClickedSticky","jQuerySwipedSticky","ElementClickedSticky","ElementHoveredSticky","ElementSwipedSticky"];this.isFuncSticky=function(e){return b.inArray(e,Fr)>=0},this.getFunctionsByLibNameType=function(e){return Pr[e]},this.canAssertFunction=function(e){return void 0==Lr[e]||0!=Lr[e]};function Mr(e,n){if(!n.identifySettings)return;if(p.checkIfTreeContainsSelectedElement(e)){var r=n.identifySettings;e.funcArgs.getSelectedElement=function(){return t.findElement(r,!1)}}}this.evaluationPreviewForEditor=function(e){var t=If(e);return Mr(t.node,t),A.evaluationPreview(t.node)},this.evaluationPreview=function(e){var t=this.getFunctionsByLibNameType(e.funcName);if(!this.canAssertFunction(e.funcName))return k.CANNOT_ASSERT;var n={funcArgs:e.funcArgs,conditionId:-1,pollingInterval:-1};return t(n)?k.TRUE:k.FALSE},this.evaluationTreePreviewForEditor=function(e){var t=If(e);return Rr(t),Ur(t)};function Rr(e){e.node&&e.node.Root&&(e.node=C.convert(e.node.Root))}var Br=function(){return document.referrer};function Ur(e){function t(n){if("Func"==n.nodeType)return Mr(n,e),A.evaluationPreview(n);var r=t(n.leftSon),i=t(n.rightSon);if("And"==n.nodeType){if(r==k.TRUE&&i==k.TRUE)return k.TRUE;if(r==k.CANNOT_ASSERT||i==k.CANNOT_ASSERT)return k.CANNOT_ASSERT;return k.FALSE}if("Or"==n.nodeType){if(r==k.TRUE||i==k.TRUE)return k.TRUE;if(r==k.CANNOT_ASSERT||i==k.CANNOT_ASSERT)return k.CANNOT_ASSERT;return k.FALSE}}var n=e.node;if(null==n)return k.TRUE;return t(n)}}var Vo=function(){function e(t,n,r,i,o,a,s,u,l,c){this.timerManager=t,this.conditionFunctions=n,this.uiChangeTracker=r,this.profilerAPI=a,this.commonEvents=s,this.consts=u,this.debuggerManager=l,c=c||{},this._conditionCheckerPollingIntervalMs=c.evaluationPollingIntervalMs&&!c.onlyPollConditionFunctions?c.evaluationPollingIntervalMs:e.NO_POLLING,this._conditionFunctionsPollingInterval=c.evaluationPollingIntervalMs||e.NO_POLLING,this._getSelectedElement=c.getSelectedElement,this._stopPollingAfterEvaluateTrue=void 0===c.stopPollingAfterEvaluateTrue||c.stopPollingAfterEvaluateTrue,this._evaluateSonar=void 0===c.evaluateSonar||c.evaluateSonar,this._featureName=c.featureName,this._elementName=c.elementName,a.isEnabled()&&this.trackEvaluation(),this._trackUIChange=c.trackUIChange,this._logger=i.wrapCustomerLog("ConditionChecker"),this._subTreesResults={},e.registerInstance(this),c=null}return e.prototype.trackEvaluation=function(){var e=this;this.profilerAPI.registerProfilerCallback(function(t){var n=e.innerEvaluateAsync;e.innerEvaluateAsync=t.profile("innerEvaluateAsync",function(t,r){return n.apply(e,[t,r])});var r=e.innerGetValue;e.innerGetValue=t.profile("innerGetValue",function(t){return r.apply(e,[t])})})},e.prototype.getCurrentEvaluationValueAndStopEvaluating=function(e){this.onValueChanged(void 0),this.evaluateAsync(e);var t=this.getCachedValue();return this.cleanResources(),t},e.prototype.getValue=function(){var e=!1;return this.innerGetValue(e)},e.prototype.innerGetValue=function(e){return this._result.getValue(e)},e.prototype.getCachedValue=function(){var e=!0;return this.innerGetValue(e)},e.prototype.isPollingEvaluation=function(){return this._conditionCheckerPollingIntervalMs>=0&&!this._isStopEvaluate},e.prototype.cleanResources=function(){this._oldValue=!1,this._isStopEvaluate=!0,this._logger(this._elementName+" - ConditionChecker cleans resources",5,this._featureName),this.cleanResultAndTimer(),this.uiChangeTracker.unbind(this._uiChangeCallback),e.unregisterInstance(this),this._getSelectedElement=void 0,this.cleanTree(this._dirtyTree)},e.prototype.cleanTree=function(e){if(!e)return;e.funcArgs&&delete e.funcArgs.getSelectedElement,this.cleanTree(e.leftSon),this.cleanTree(e.rightSon)},e.prototype.cleanResultAndTimer=function(){this._result&&this._result.cleanResources(),this._timerHandle&&this._timerHandle.clear()},e.prototype.onValueChanged=function(e){this._onValueChanged=e},e.prototype.callOnValueChangedIfExist=function(e,t){this.raiseEventWithSubTreesResults(),this._onValueChanged&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onValueChanged",4,this._featureName),this._onValueChanged(e,t))},e.prototype.raiseEventWithSubTreesResults=function(){this.debuggerManager.isDebuggerOnWindow()&&this.commonEvents.raiseEvent(this.consts.EVENTS.ConditionTreeResult,this._subTreesResults)},e.prototype.onPreEvaluation=function(e){this._onPreEvaluation=e},e.prototype.callOnPreEvaluationIfExist=function(e,t){this._onPreEvaluation&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onPreEvaluation",5,this._featureName),this._onPreEvaluation(e,t))},e.prototype.onEvaluated=function(e){this._onEvaluated=e},e.prototype.callOnEvaluatedIfExist=function(e,t){this._onEvaluated&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onEvaluated",5,this._featureName),this._onEvaluated(e,t))},e.prototype.onSonar=function(e){this._onSonar=e},e.prototype.callOnSonarIfExist=function(){this._onSonar&&this._onSonar()},e.prototype.evaluateAsyncAndDontEvaluateImmediately=function(t){e.registerInstance(this);var n=!0;this.innerEvaluateAsync(t,n)},e.prototype.evaluateAsync=function(t){e.registerInstance(this);var n=!1;this.innerEvaluateAsync(t,n)},e.prototype.innerEvaluateAsync=function(e,t){this._dirtyTree=e,this._isStopEvaluate=!1,this.handleUIChangeTracking(),this.evaluateAsyncCall(e,t)},e.prototype.handleUIChangeTracking=function(){var e=this;this._uiChangeCallback=function(){e._result.refresh(),e._trackUIChange&&e.reEvaluate(!0)},this.uiChangeTracker.bind(this._uiChangeCallback)},e.prototype.evaluateAsyncCall=function(e,t){this.firstEvaluation(e,t),this.startPollingEvaluation(e)},e.prototype.firstEvaluation=function(e,t){this._logger(this._elementName+" - ConditionChecker evaluates async tree",5,this._featureName),this.prepareResult(e),this._oldValue=void 0,t?this._oldValue=!1:this.reEvaluateResult(!0)},e.prototype.prepareResult=function(e){var t=this;this._result=this.createResult(e),this._result.onGotValue(function(){if(t.callOnSonarIfExist(),t._evaluateSonar){var e=t.reEvaluateResult(!0);t._stopPollingAfterEvaluateTrue&&e&&t.cleanResources()}})},e.prototype.startPollingEvaluation=function(e){var t=this;this.isPollingEvaluation()&&(this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs))},e.prototype.reEvaluate=function(e){var t=this;if(this._isStopEvaluate)return;var n=this.reEvaluateResult(e),r=this.shouldPollingStop(n);!this.isPollingEvaluation()||r||e?r&&this.cleanResources():this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs)},e.prototype.reEvaluateResult=function(e){this.callOnPreEvaluationIfExist(void 0,e),this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName);var t=this.getValue();return this._oldValue!==t&&(this.callOnValueChangedIfExist(t,e),this._oldValue=t),this.callOnEvaluatedIfExist(t,e),t},e.prototype.shouldPollingStop=function(e){if(e&&(this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName),this._stopPollingAfterEvaluateTrue))return this._elementName+" - ConditionChecker stopped polling tree evaluation after 'true' evaluation",this._featureName,!0;return!1},e.prototype.createResult=function(t){var n=this,r={Func:o,And:a(function(e,t){return e()&&t()}),Or:a(function(e,t){return e()||t()})};if(null==t)return Ro.fixed(!0);return i(t);function i(e){var t=r[e.nodeType];if(!t)return!1;return t(e)}function o(t){var r=n.conditionFunctions.isFuncSticky(t.funcName),i=n.conditionFunctions.getFunctionsByLibNameType(t.funcName);t.funcArgs.getSelectedElement=n._getSelectedElement;var o={conditionId:t.ConditionId,funcArgs:t.funcArgs,pollingInterval:r?n._conditionFunctionsPollingInterval:e.NO_POLLING};function a(){return i.call(this,o)}var u=r||n.conditionFunctions.isFuncAsync(t.funcName)?a():new Ro.noMemory(a);return s(u,t),u}function a(e){return function(t){var n=i(t.leftSon),r=i(t.rightSon),o=new Ro.complex(n,r,e);return s(o,t),o}}function s(e,t){var r=e.getValue;e.getValue=function(e){return t.result=r(e),n._subTreesResults[t.ConditionId]=u(t),t.result}}function u(e){return{id:e.ConditionId,type:e.nodeType,result:e.result}}},e.registerInstance=function(t){if(e.instances[t._id])return;t._id=e.sequence,++e.sequence,e.instances[t._id]=t},e.unregisterInstance=function(t){delete e.instances[t._id]},e.cleanResources=function(){for(var t in e.instances)e.instances.hasOwnProperty(t)&&e.instances[t].cleanResources();e.instances={}},e.NO_POLLING=-1,e.instances={},e.sequence=0,e}();i.register("ConditionCheckerType").asInstance(Vo),i.register("ConditionChecker").asCtor(Vo).asProto().dependencies("TimerManager, ConditionFunctions, UIChangeTracker, Logger, FeaturesManager, ProfilerAPI, CommonEvents, Consts, DebuggerManager"),i.register("ConditionCheckerFactory").asCtor(Wo).dependencies("ConditionCheckerType,NewConditionCheckerType,TimerManager,ConditionFunctions,UIChangeTracker,Logger,FeaturesManager,ProfilerAPI,CommonEvents,Consts,NewToOldConditionConverter,DebuggerManager");function Wo(e,t,n,r,i,o,a,s,u,l,c,d){var p=this;p.createConditionChecker=g,p.createNew=f,p.createOld=h;function g(e,t){return e&&e.Root?f(t):h(t)}function f(e){return new t(n,r,i,o,a,s,u,l,d,c,e)}function h(t){return new e(n,r,i,o,a,s,u,l,d,t)}}var Go=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d){e.call(this,t,n,r,i,o,a,s,u,l,d),this.newToOldConditionConverter=c}return t.prototype.evaluateAsync=function(t){var n=this.newToOldConditionConverter.convert(t.Root);e.prototype.evaluateAsync.call(this,n)},t.prototype.evaluateAsyncAndDontEvaluateImmediately=function(t){var n=this.newToOldConditionConverter.convert(t.Root);e.prototype.evaluateAsyncAndDontEvaluateImmediately.call(this,n)},t}(Vo);i.register("NewConditionCheckerType").asInstance(Go),i.register("OldConditionsCombiner").asCtor(Ho);function Ho(){var e=this;e.combine=t;function t(e,t,n){if(!t)return n;if(!n)return t;return{nodeType:e,leftSon:t,rightSon:n,nodeDepth:0}}}i.register("NewConditionsCombiner").asCtor(jo).dependencies("OldConditionsCombiner, NewToOldConditionConverter, OldToNewConditionConverter");function jo(e,t,n){var r=this;r.combine=i;function i(r,i,o){var a=o?t.convert(o.Root):void 0,s=i&&i.Root?t.convert(i.Root):i,u=e.combine(r,s,a);return n.convert(u)}}i.register("ConditionsCombinerFactory").asCtor(Yo);function Yo(){var e=this;e.get=t;function t(e){return e?i.get("NewConditionsCombiner"):i.get("OldConditionsCombiner")}}i.register("EngagementRulesDataSynchronizer").asCtor(zo).dependencies("ClientStorageManager, EndUsersManager, SettingsFile, TimerManager, wmjQuery, CommonUtils, Encryptor, HostData, RecorderServerManager");function zo(e,t,n,r,o,a,s,u,l){var c=this;c.init=S;var d="wm-engagementRules",p="loadEngagementRules",g=1800,f=5e3,h="/engagementRulesReports/",m="wm-engagementRulesFileExists",v=604800;function S(){var e=E();if(!e)return T();return r.setWalkmeTimeout(T,f),o.when(e)}function E(){return e.getData(d,null)}function T(){return y().then(w)}function y(){var t=o.Deferred(),n=b(t);if(I(n,t))return t.promise();var r=n,i=u.browser.name;if(("Chrome"==i||"Safari"==i)&&!e.getData(m,!1)){var s=n.indexOf("users"),c=n.substring(s,n.length),d=l.get()+"/FilesContentRetriever/LoadFileByName";r=d+"?fileName="+c}var g=C(t);return a.addScriptWithCallback(r,p,function(n){0!=n.length&&e.saveData(m,!0,v);var r=_(n);g.clear(),t.resolve(r)},function(){g.clear(),t.resolve({})}),t.promise()}function C(e){var t=i.create("EngagementRulesErrorTimer",{loadScriptDeferred:e});return t}function I(e,t){if(!e)return t.resolve({}),!0;return!1}function b(e){var r=".json",i=t.getEndUserGuid(),o=s.encrypt(i),a=n.getSettingsFile();if(I(a,e))return;var u=a.BaseUserCdnFolder;if(I(u,e))return;var l=u+h+o+r;return l}function w(t){e.saveData(d,t,g)}function _(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}}i.register("EngagementRulesErrorTimer").asCtor(Qo).asProto().dependencies("TimerManager, Logger, LibDestroyer");function Qo(e,t,n,r){var i=this;i.clear=s;var o;function a(){var i=r.loadScriptDeferred;o=e.setWalkmeTimeout(function(){i.isResolved()||(t.error(null,"Error trying to get engagement rules data from player server"),i.resolve({}),n.removeWalkMe("Failed loading engagement rules data after 5 seconds"))},5e3)}function s(){o.clear()}a.apply(null,arguments)}i.register("EngagementRulesRepository").asCtor(Ko).dependencies("EngagementRulesDataSynchronizer, FeaturesManager, wmjQuery");function Ko(e,t,n){var r=this;r.init=a,r.isReady=u,r.get=l;var i,o={};function a(){t.isFeatureEnabled("engagementRules")?i=e.init().then(s):(s({}),i=n.when())}function s(e){o=e}function u(e){i.then(e)}function l(){return o}}i.register("HistoricalConditionFunctions").asCtor(qo).asSingleton().dependencies("EngagementRulesRepository");function qo(t){var n=this;n.getFuncList=l,n.getFuncAssert=c,n.getAsyncFuncs=d;var r=[],i=[],o={},a=["UserWebsiteVisitedBefore","UserWebsiteVisitedAfter","UserWebsiteVisitedMoreThan","UserWebsiteVisitedInLast","UserTrackedElementClickedMoreThan","UserTrackedElementClickedInLast","UserTrackedElementClickedAfter","UserTrackedElementClickedBefore","UserTrackedPageVisitedInLast","UserTrackedPageVisitedBefore","UserTrackedPageVisitedAfter","UserTrackedPageVisitedMoreThan"],s=["UserWebsiteVisitedFirstTime","UserWebsiteVisitedLessThan","UserWebsiteNotVisitedEver","UserWebsiteNotVisitedBefore","UserWebsiteNotVisitedAfter","UserWebsiteNotVisitedInLast","UserTrackedElementClickedLessThan","UserTrackedElementNotClicked","UserTrackedElementNotClickedAfter","UserTrackedElementNotClickedBefore","UserTrackedElementNotClickedInLast","UserTrackedPageVisitedLessThan","UserTrackedPageNotVisited","UserTrackedPageNotVisitedBefore","UserTrackedPageNotVisitedAfter","UserTrackedPageNotVisitedInLast"];u(a,p),u(s,g);function u(t,n){e.each(t,function(e,t){o[t]=n,r[t]=!1})}function l(){return o}function c(){return r}function d(){return i}function p(e){var n=t.get()[e.conditionId];return!!n}function g(e){return!p(e)}}i.register("OnboardingConditionFunctions").asCtor(Xo).asSingleton().dependencies("TasksPercentageCalculator");function Xo(t){var n=this;n.getFuncList=a,n.getFuncAssert=s,n.getAsyncFuncs=u;var r=[],i=[],o={UserOnboardingProgressMoreThan:l,UserOnboardingProgressLessThan:c,UserOnboardingProgressNotStarted:d,UserOnboardingProgressOngoing:p,UserOnboardingProgressComplete:g};e.each(o,function(e){r[e]=!1});function a(){return o}function s(){return r}function u(){return i}function l(e){var n=t.getTasksCompletionProgress();return n>e.funcArgs.UserOnboardingProgressInput}function c(e){var n=t.getTasksCompletionProgress();return n<e.funcArgs.UserOnboardingProgressInput}function d(e){var n=t.getTasksCompletionProgress();return 0==n}function p(e){var n=t.getTasksCompletionProgress();return n>0&&n<100}function g(e){var n=t.getTasksCompletionProgress();return 100==n}}i.register("BizFlowShowInMenuChecker").asCtor(Jo).dependencies("CommonUtils, DisplayConditionChecker, Consts, TagsSegmentationProperties");function Jo(e,t,n,r){var i=this;i.isShowInMenu=a;var o=r.properties[n.DEPLOYABLE_TYPE.BusinessSolution];function a(e){if(!s(e.Settings))return!1;var n=u(e);if(!n)return!0;return t.checkConditions(n,e)}function s(t){var n=e.getSettingsValue(t,"IsVisible",!0);return"False"!=n}function u(t){var n=1==e.getSettingsValue(t.Settings,o.enabled,0);if(!n)return!1;return t.ConditionTrees&&t.ConditionTrees[o.name]}}i.register("DeployableShowInMenuChecker").asCtor($o).dependencies("DisplayConditionChecker");function $o(e){var t=this;t.isShowInMenu=n;function n(t){var n=r(t);if(!n)return!0;return e.checkConditions(n,t)}function r(e){return e.Settings&&e.Settings.DisplayCondition}}i.register("ShowInMenuCheckerFactory").asCtor(Zo).dependencies("Lib, BizFlowShowInMenuChecker, DeployableShowInMenuChecker, TodoListManager, Consts");function Zo(e,t,n,r,i){var o=this;o.getDisplayConditionCheckerFunc=a;function a(r){switch(r){case i.DEPLOYABLE_TYPE.Task:return s;case i.DEPLOYABLE_TYPE.Tutorial:return e.canShowTutorial;case i.DEPLOYABLE_TYPE.BusinessSolution:return t.isShowInMenu;case i.DEPLOYABLE_TYPE.Content:case i.DEPLOYABLE_TYPE.Shuttle:case i.DEPLOYABLE_TYPE.Course:return n.isShowInMenu;default:return u}}function s(e){return r.isTaskDisplayed(e)}function u(){return!0}}i.register("DisplayConditionChecker").asCtor(ea).dependencies("ConditionCheckerFactory");function ea(e){var t=this;t.checkConditions=n;function n(t,n){if(!t)return!0;var r=e.createConditionChecker(t,{featureName:a,elementName:n.Name});return r.getCurrentEvaluationValueAndStopEvaluating(t)}}i.register("ConditionTreeGetter").asCtor(ta).dependencies("DeployableTypes, CommonUtils");function ta(e,t){var n=this;n.get=o;var r="Settings",i={};i[e.BusinessSolution]="ConditionTrees";function o(e,n,o){var a=i[e]?i[e]:r;return t.getSettingsValue(n[a],o,"")}}i.register("ConditionTreeEvaluator").asCtor(na).dependencies("ConditionFunctions");function na(e){this.evaluate=function(t){function n(t){if("Func"==t.nodeType){var r=e.getFunctionsByLibNameType(t.funcName),i=[];i.push({funcArgs:t.funcArgs});var o=r.apply(this,i);return t.result=o,o}if("And"==t.nodeType){var o=n(t.leftSon)&&n(t.rightSon);return t.result=o,o}if("Or"==t.nodeType){var o=n(t.leftSon)||n(t.rightSon);return t.result=o,o}return!1}return null==t||n(t)}}i.register("ConditionEvaluator").asCtor(ra).dependencies("CurrentWalkthruData, StepRetriever, LocationMatcher");function ra(e,t,n){var r=this;r.supportedFunctions={isExistJQ:l,isTextValueJQ:c,isLocationMatch:d,isStepPlayed:u};var i=new ia;function o(e){if(e=e.replace(/&quot;/gi,'"'),e=e.replace(/&apos;/gi,"'"),e=e.replace(/&#39;/gi,"'"),e=e.replace(/&amp;/gi,"&"),void 0==e||e.length<=0)throw"Ilegal Expression";var t=0;for(var n in this.supportedFunctions)if(this.supportedFunctions.hasOwnProperty(n)){var r=a(e,n,t);e=r[1];for(var o=t;o<r[0].length;o++){var u=s(r[0][o]);i.setFunction(u,t++)}}i.setExpression(e)}this.evaluate=function(e){if(o(e),void 0!=i)return i.evaluate();throw"Evaluator is undefined"};function a(e,t,n){for(var r=Array(),i=n,o=e.indexOf(t);o>-1;){if("("!=e.charAt(o+t.length))throw"Ilegal function definition in expression";for(var a=o+t.length+1,s=Array(),u=a;(")"!=e.charAt(u)||0!=s.length)&&u<e.length;){if("'"==e.charAt(u)||'"'==e.charAt(u))if(0==s.length)s.push(e.charAt(u));else{var l=s.pop();l!=e.charAt(u)&&(s.push(l),s.push(e.charAt(u)))}u++}if(")"!=e.charAt(u))throw"Ilegal function definition in expression";r[i]=e.substring(o,u+1),e=e.substring(0,o)+"["+i+"]"+e.substr(u+1),i++,o=e.indexOf(t)}return[r,e]}function s(e){if(void 0==e||e.length<=0)throw"Ilegal function definition";for(var t=e.substr(0,e.indexOf("(")),n=e.substring(e.indexOf("(")+1,e.length-1).split(","),i=0;i<n.length;i++)n[i]=n[i].replace(/^\s+|\s+$/g,""),("'"==n[i].charAt(0)&&"'"==n[i].charAt(n[i].length-1)||'"'==n[i].charAt(0)&&'"'==n[i].charAt(n[i].length-1))&&(n[i]=n[i].substring(1,n[i].length-1));return function(){return r.supportedFunctions[t].apply(this,n)}}function u(n){n=parseInt(n);for(var r=e.stepPlayHistory,i=0;i<r.length;i++){var o=t.getStepById(r[i]);if(o&&o.StepIndex==n)return!0}return!1}function l(e,t){return void 0==t&&(t=1),mtjQuery(e).length>=t}function c(e,t){return mtjQuery(e).text()==t}function d(e){return n.isLocationMatchString(e)}}var ia=function(){this.functions=Array(),this.treeNode=null,this.errorStack=Array();var e=this;this.setFunction=function(e,t){if(void 0==e||void 0==t||t<0)throw"Wrong arguments.";return this.functions[t]=e,!0},this.evaluate=function(){if(null!=this.treeNode)return this.treeNode.evaluate();throw"Evaluation tree doesn't exist - No expression was set."},this.setExpression=function(e){if(void 0!=e&&e.length>0&&i(e)){if(this.treeNode=a(e),this.treeNode)return!0;var t=this.errorStack.join("\n");throw this.errorStack=this.errorStack.splice(),t}return this.errorStack.push("Ilegal expression!"),!1};function t(t){var n=new RegExp("^\\[\\d+\\]$","i");if(n.test(t)){var r=parseInt(t.substring(1,t.length-1));return e.functions.length>=r&&void 0!=e.functions[r]?new d(e.functions[r]):(e.errorStack.push("Function id doesn't exist!"),!1)}return e.errorStack.push("function token isn't in the form [funcId]. recieved:"+t),!1}function n(t){if(t)return new c(t);return e.errorStack.push("Failed to create NOT node."),!1}function r(t,n,r){if(n&&r){if("OR"==t.toUpperCase())return new l(n,r);if("AND"==t.toUpperCase())return new u(n,r)}return e.errorStack.push("Failed to create "+t.toUpperCase()+" node."),!1}function i(e){for(var t=Array(),n=0;n<e.length;n++)if("("==e.charAt(n))t.push("(");else if(")"==e.charAt(n)){if(0==t.length)return!1;t.pop()}return 0==t.length}function o(e){if(e=mtjQuery.trim(e),e=e.replace("  "," "),e=e.replace("( ","("),e=e.replace(/not\(/gi,"not ("),e=e.replace(/and\(/gi,"and ("),e=e.replace(/or\(/gi,"or ("),"("!=e.charAt(0)||")"!=e.charAt(e.length-1))return e;var t=e.substring(1,e.length-1);return i(t)?t:e}function a(i){var u=o(i),l=u.split(" ");switch(l.length){case 0:e.errorStack.push("Error - a try to build tree with empty expression");break;case 1:return t(l[0]);case 2:return"NOT"==l[0].toUpperCase()?n(a(l[1])):(e.errorStack.push("Ilegal expression"),!1);case 3:if("NOT"==l[0].toUpperCase())return n(a(l[1]+" "+l[2]));return r(l[1],a(l[0]),a(l[2]));default:for(var c=Array(),d=0;d<l.length;d++){if(0==d&&l[d].length>=3&&"NOT"==l[d].substr(0,3).toUpperCase())return n(a(l.join(" ").substr(3)));for(var p=!1,g=0;g<l[d].length;g++)"("==l[d].charAt(g)?(p=!0,c.push("(")):")"==l[d].charAt(g)&&(p=!0,c.pop());if(!p&&0==c.length&&s(l[d]))return r(l[d],a(l.splice(0,d).join(" ")),a(l.splice(1,l.length-1).join(" ")))}return e.errorStack.push("Ilegal expression"),!1}}function s(e){if(e.match(/not/i)||e.match(/or/i)||e.match(/and/i))return!0;return!1}function u(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()&&this.rightSon.evaluate()}}function l(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()||this.rightSon.evaluate()}}function c(e){this.son=e,this.evaluate=function(){return!this.son.evaluate()}}function d(e){this.func=e,this.evaluate=function(){return this.func()}}};function oa(){var t,n,r,a,s,u,l,c,d,p,g,f=null,h=null,m=this,v={},S=function(){},E=null,T="wm-sync",y=15e3,C=[],I={terminate:"terminate",getAll:"getAllMultiple",checkCanSave:"checkCanSave",get:"get",increment:"increment",del:"delete",setSession:"setSession",getSession:"getSession",set:"set",addSet:"addSet",add:"add",remove:"remove"};m._iframeReady=!1;function w(){return i.get("TimerManager")}function _(e,o,a,c,p,g){l=i.get("StorageResourceManager"),d=o,f=new aa,E=i.get("CookiesStorageManager"),h=[],t=P(a,c),u=e,n=u.isLocalStorageEnabled(),r=g,s=p,i.get("Logger").customerLog("Storage mode: "+t+", ["+(c?"from db/feature":"auto detected")+"], compressed: "+p,3),m._origin=l.getOrigin(),m._saveCookiePath=l.getSaveCookiePath(),m._path=l.getHiddenIframePath(p)}function P(e,t){var n=i.get("HostData");if(e&&"Safari"==n.browser.name)return b.Cookies;if(t)return t;if(e&&n.isIEBrowser(10,"gte"))return b.IndexedDB;return b.LocalStorage}m.refreshGetData=function(e,t){fe(t),g!==!0||i.get("LibDestroyer").removingWalkMe?he():Y(e)};function A(e){for(var t=0;t<C.length;t++)C[t].push(e)}m.saveData=function(e,t,n,r){U(e,t,n,r),f.saveData(e,t,n,r),A(e)},m.getData=function(e,t){return f.getData(e,t)},m.removeData=function(e,t){V(e,t),f.removeData(e,t),A(e)},m.increment=function(e,t,n,r,i){D({requestType:I.increment,userGuid:r,key:e,ttl:n,lastValue:t},i)},m.setSyncFlag=function(e){var t=B(T,1,10,e);j(t)},m.addToSet=function(e,t,n,r){for(var i=k(e,r,[]),o=0;o<t.length;o++)i.indexOf(t[o])==-1&&i.push(t[o]);U(e,t,n,r,I.addSet),f.saveData(e,Cf(i),n,r),A(e)},m.addToDictionary=function(e,t,n,r,i){var o=k(e,i,{});o[t]=n,o=Cf(o);var a={};a[t]=n,O(e,a,r,i),f.saveData(e,o,r,i)},m.removeFromDictionary=function(e,t,n,r){var i=k(e,r,{});delete i[t],i=Cf(i);var o=[t];N(e,o,n,r),f.saveData(e,i,n,r)};function k(e,t,n){var r=m.getData(e,t)||n;return r&&"string"==typeof r&&(r=If(r)||n),r}m.getInternalKeys=function(e,t){return f.getInternalKeys(e,t)};function O(e,t,n,r){var i={
requestType:I.add,userGuid:r,key:e,keyValues:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};H(i)}function N(e,t,n,r){var i={requestType:I.remove,userGuid:r,key:e,keysToRemove:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};H(i)}this.sessionSetData=function(e,t,n){var r={requestType:I.setSession,userGuid:n,key:e,value:t};H(r)},this.sessionGetData=function(e,t,n,r){D({requestType:I.getSession,userGuid:n,key:e,defaultValue:t},r)};function D(e,t){H(L(e,t))}function L(e,t){var n=F();return e.actionId=n,v[n]=t,e}var x=0;function F(){return x+=1,x>1e3&&(x=1),x}function M(e){if(e&&v[e.actionId]){var t=v[e.actionId];delete v[e.actionId],t(e.value)}}this.init=function(e){if(m._iframeReady=!1,S=e,!R())return i.get("Logger").customerLog("Cannot run cross-domain Walk-Thrus on this browser. Removing WalkMe."),!1;g=void 0,a=r?new te(s,u,l,i.get("Consts")):new ee(s,u,l),a.init(pe,Q),i.get("PostMessageListener").addTeardownCallback(me)},this.removeAllData=function(e){var t=f.getStorageInternal(),n=t[e];if(n)for(var r in n)m.removeData(r,e)};function R(){if(!window.postMessage)return!1;if(t==b.LocalStorage)return n;return!0}function B(e,t,n,r,i){return{requestType:i||I.set,userGuid:r,key:e,saveObj:{value:t,saveTime:(new Date).getTime(),expireSeconds:n}}}function U(e,t,n,r,i){var o=B(e,t,n,r,i);H(o)}function V(e,t){H({requestType:I.del,userGuid:t,key:e})}function W(t){var n=C.shift();if(t)for(var r in t){var i=t[r];if(i&&i.length&&i.length>0&&void 0!=i[0].saveObj)for(var o=0;o<i.length;o++){var a=i[o].key;if(e.inArray(a,n)==-1){var s=i[o].saveObj,u=G(s);u>0?f.saveData(a,s.value,u/1e3,r):m.removeData(a,r)}}}}function G(e){var t=(new Date).getTime(),n=e.saveTime+1e3*e.expireSeconds-t;return n}function H(e){m._iframeReady&&(a.isInitialized()?g!==!1&&j(e):m.init(function(){j(e)}))}function j(e){a.postMessage(Cf(e),"*")}function Y(e){C.push([]);var t={requestType:I.getAll,usersToLoad:e};H(t)}function z(){var e={requestType:I.checkCanSave,saveMode:t,userGuids:d};H(e)}function Q(){mtjQuery.browser.msie&&window.opener?(K(),w().libSetTimeout(X,3e3)):X()}function K(){m._iframeReady||(q(),w().libSetTimeout(K,100))}function q(){j({requestType:I.get,key:T,userGuids:d,saveMode:t})}function X(){m._iframeReady||(m._iframeReady=!0,J(),z())}function J(){ie(),p=w().libSetTimeout($,y)}function $(){i.get("Logger").customerLog("storage failed loading, removing walkme",3),ie(),g=!1,i.get("LibDestroyer").removeWalkMe("storageFailedLoading",{sendLog:!0})}var Z=!1;function ne(){window.open(m._saveCookiePath,"_blank"),Z=!0,window.focus(),mtjQuery(document).unbind("click.wmpopup"),re()}function re(e){e=e||0,e>10?$():g!==!0&&(e++,z(),w().libSetTimeout(function(){re(e)},200))}function ie(){p&&(p.clear(),p=null)}var oe;function ae(e){ie(),e.canSave||Z?e.canSave&&(clearTimeout(oe),ce(),J(),Y(d)):"cookies"==t?(void 0===oe&&le(),oe=w().libSetTimeout(z,500)):$()}var se="wm-popup",ue=31536e4;function le(){var e=parseInt(E.getData(se)||0);e<3?(e++,E.saveData(se,e.toString(),ue),mtjQuery(document).bind("click.wmpopup touchend.wmpopup",ne)):$()}function ce(){mtjQuery(document).unbind(".wmpopup")}function de(){g||(g=!0,ie(),E.removeData(se),E.removeData(i.get("Consts").DOMAIN_IN_COOKIE))}function pe(e){if(m._origin.toLowerCase().indexOf(e.origin)>-1){try{var t=If(e.data)}catch(n){return}if(t.key==I.checkCanSave)ae(t);else if(t.key==I.getAll){if(de(),W(t.allValues),S){var r=S;S=null,r()}he()}else if(void 0!==t.actionId)M(t);else if(t.key==I.get)if(G(t.saveObj)>0)ge(t.dataKey,t.saveObj.value);else for(var i=0;i<d.length;i++)m.removeData(t.dataKey,d[i]);else t.key==I.terminate&&ve()}}function ge(e,t){e==T&&t&&X()}function fe(e){e&&h.push(e)}function he(){if(h.length>0){var e=h.shift();e&&e()}}m.releaseCallbacks=function(){h.length=0,v={}},m.releaseCallback=function(e){for(var t=0;t<h.length;t++)if(h[t]==e)return void(h[t]=null)};function me(){var e=new o(function(e){c=e});return j({requestType:I.terminate}),e}function ve(){a&&a.terminate(),c&&c(),c=null}_.apply(null,arguments)}function aa(){var t=this,n=null;function r(){n={}}this.saveData=function(e,t,n,r){var o={};o.value=t,o.saveTime=(new Date).getTime(),o.expiresSeconds=n;var a=i(r);a[e]=o},this.getData=function(e,n){var r=i(n),o=r[e];if(o){var a=(new Date).getTime(),s=o.saveTime+1e3*o.expiresSeconds-a;if(s>0)return o.value;t.removeData(e,n)}return},this.removeData=function(e,t){var n=i(t);delete n[e]},this.clear=function(e){n[e]={}},this.getStorageInternal=function(){return n},this.getInternalKeys=function(n,r){var o={},a=i(n);return e.safeEach(a,function(i,a){0===e.trim(i).toLowerCase().indexOf(r)&&(o[i]=t.getData(i,n))}),o};function i(e){return void 0===n[e]&&(n[e]={}),n[e]}r.apply(null,arguments)}i.register("ClientStorageManager").asFunction(function(e){return e.bySettingsFile()}).dependencies("StorageManagerFactory");function sa(){this.ONE_HOUR_SECONDS=3600;var t,n,r,o=this,a=null,s=!1;function u(e,i,s,u,l){t={type:e,mode:"client"},o.dataManager=i,a=s,n=u,r=l}this.getStorageType=function(){return t},this.init=function(e){if(e=e||function(){},l())return void e();if(s=!0,o.dataManager.init)return o.dataManager.init(e);e()};function l(){return o.dataManager.isInitialized?o.dataManager.isInitialized():s}this.refreshGetData=function(e,t){e=e&&e.length>0?e:[c()],o.dataManager.refreshGetData?o.dataManager.refreshGetData(e,t):t&&t()},this.saveData=function(e,t,r,i){if(0===r&&n.error(null,"ClientStorageManager.saveData - expiresSeconds is 0"),e=mtjQuery.trim(e),i=c(i),void 0===t)return void o.removeData(e,i);if(void 0==r){var a="storageManager: trying to save key in storage manager without expiration, key: "+e+", value: "+t+", userGUID: "+i;n.customerLog(a,3)}o.dataManager.saveData(e,Cf(t),r,i)},this.getData=function(e,t,n){e=mtjQuery.trim(e),n=c(n);var r=o.dataManager.getData(e,n);if(void 0===r||""===r)return t;return If(r)},this.addToDictionary=function(e,t,n,r,i){if(e=mtjQuery.trim(e),i=c(i),o.dataManager.addToDictionary)o.dataManager.addToDictionary(e,t,n,r,i);else{var a=o.getData(e,i);null!==a&&"object"==typeof a||(a={}),a[t]=n,o.saveData(e,a,r,i)}},this.removeFromDictionary=function(e,t,n,r){if(e=mtjQuery.trim(e),r=c(r),o.dataManager.removeFromDictionary)o.dataManager.removeFromDictionary(e,t,n,r);else{var i=o.getData(e,r);i&&void 0!==i[t]&&(delete i[t],o.saveData(e,i,n,r))}},this.addToSet=function(t,n,r,i){if(t=mtjQuery.trim(t),i=c(i),o.dataManager.addToSet)o.dataManager.addToSet(t,n,r,i);else{var a=o.getData(t,i);e.isArray(a)||(a=[]);for(var s=0;s<n.length;s++)a.indexOf(n[s])==-1&&a.push(n[s]);o.saveData(t,a,r,i)}},this.removeData=function(e,t){e=mtjQuery.trim(e),t=c(t),o.dataManager.removeData(e,t)},this.addToQueue=function(e,t,n,r,i){e=mtjQuery.trim(e),i=c(i);var a=o.getData(e,[],i);a||(a=[]),a.push(t),a.splice(0,a.length-n),o.saveData(e,a,r,i)},o.convertOldCookieStorage=function(e){var t=i.get("CookiesManager"),n=t.getCookie(e),r='"#!@DeL@!#"';if(n&&n!=r&&0!==n.indexOf('"')){o.saveData(e,n,A);var a=i.get("SettingsFile").getStorageType();a&&a!=STORAGE_TYPE.Cookie&&t.setCookie(e,r,-1)}},o.increment=function(e,t,n,r,i){if(e=mtjQuery.trim(e),r=c(r),o.dataManager.increment)o.dataManager.increment(e,t,n,r,i);else{var a=o.getData(e,0,r);t!==a&&(a++,o.saveData(e,a,n,r)),i&&i(a)}},o.getInternalKeys=function(e,t){t&&""!==t||(t="wm-");var n=o.dataManager.getInternalKeys(c(e),t);return d(n),n},this.removeAllData=function(e){o.dataManager.removeAllData(c(e))},o.sessionSetData=function(e,t,n){e=mtjQuery.trim(e),o.dataManager.sessionSetData?o.dataManager.sessionSetData(e,t,n):window.sessionStorage[n+e]=t},o.sessionGetData=function(e,t,n,r){e=mtjQuery.trim(e),o.dataManager.sessionGetData?o.dataManager.sessionGetData(e,t,n,r):r&&r(window.sessionStorage[n+e]||t)},o.setSyncFlag=function(e){o.dataManager.setSyncFlag&&o.dataManager.setSyncFlag(e)};function c(e){return r.defaultValue(e,a)}function d(t){e.safeEach(t,function(e,n){void 0!==n&&""!==n&&(n=If(n)),t[e]=n})}o.isEnabled=function(){return o.dataManager.isEnabled()},o.releaseCallbacks=function(){o.dataManager.releaseCallbacks&&o.dataManager.releaseCallbacks()},o.releaseCallback=function(e){e&&o.dataManager.releaseCallback&&o.dataManager.releaseCallback(e)},u.apply(null,arguments)}function ua(){var e,t,n=this;function r(n,r){e=r,t=n}n.saveToStorage=function(n,r,i){t.saveData(n+e,r,i)},n.getFromStorage=function(n,r){return t.getData(n+e,r)},n.removeFromStorage=function(n){return t.removeData(n+e)},n.refreshGetData=function(e,n){return t.refreshGetData(e,n)},r.apply(null,arguments)}function la(e){var t,n,r,o,a,s=this,u=i.get("TimerManager");function l(){n=e.storageManager,r=e.storageLifetime,o=e.encodeStorageData,a=e.decodeStorageData}var c=function(e){if(!e)return;var t=arguments;u.libSetTimeout(function(){e.apply(this,Array.prototype.slice.call(t,1))},0)},d={};function p(e,t,n){d[e]||(d[e]={success:[],fail:[]}),t&&d[e].success.push(t),n&&d[e].fail.push(n)}function g(e,t){for(var n=t?d[e].success:d[e].fail,r=[].splice.call(arguments,2,arguments.length-2),i=0;i<n.length;i++)try{c.apply(this,[n[i]].concat(r))}catch(o){}d[e]=void 0}function f(e){return!!d[e]}this.loadServerData=function(e,t,n,r,o,a){var u=f(n);if(p(n,r,o),u)return;i.get("WmAjax").execute({url:e,data:t,traditional:a,success:function(e,t,r){e.ErrorMessage?g(n,!1,e.ErrorMessage):(s.updateLocalData(n,e),g(n,!0,e))},error:function(e,t,r){g(n,!1,t)}})},this.retrieveData=function(e,r,i,o,u,l){if(void 0!==t)return void(o&&o(t));var c=n.getData(i,null);if(c){var r=a?a(c):c;o&&o(r)}else s.loadServerData(e,r,i,o,u,l)},this.retrieveLocalData=function(e){if(void 0!==t)return t;var r=n.getData(e,null);return a&&r?a(r):r},this.updateLocalData=function(e,i){t=i;var a=o&&i?o(i):i;n.saveData(e,a,r)},this.updateRemoteData=function(e,t,n,r){i.get("WmAjax").execute({url:e,data:t,success:function(e,t,i){e.ErrorMessage?c(r,e.ErrorMessage):c(n)},error:function(e,t,n){c(r,t)}})},l.apply(null,arguments)}i.register("RemoteDataSynchronizer").asCtor(la).asProto();function ca(t,n,r,o,a,s,u,l,c){var d,p,g,f,h,m,v=this,S=1948,E=3600,T="/ToDoList/UserCompletedTasksByIdsAndGoalsIds",y="/ToDoList/UpdateUserTasksCompleted";function C(){f=l.get(),d=n.get();var e=c.getSettingsValue(f.Settings,"remoteDataLifeTime",E);p=i.create("RemoteDataSynchronizer",{storageManager:r,storageLifetime:e,encodeStorageData:b,decodeStorageData:w}),g=a.error,m=o}v.init=function(){h=m.register("tg",{beforeSendingManipulationFunc:A,actionUrl:y,prefixForStorage:"tg",sendingThreshold:1,dataType:"task goal",dataIdFieldName:"Id",requestParamsFunc:function(e){return{userCompletedTasksSerialized:Cf(e),userGuid:s.getUserGuid()}}})},v.getEndUserUniqueDataKey=function(e,t){return t=t||s.getUserGuid(),"wm_ct_"+s.getEnvironmentId()+"_"+t+"_"+e};function I(e,t,n){return{userGuid:n||s.getUserGuid(),endUserId:e,taskGoalsIds:Cf(t),source:s.getEnvironmentId()}}function b(e){var t=[];return mtjQuery.each(e,function(e,n){if(!n.TaskId)return;var r=mtjQuery.extend(!0,{},n);_(r,"TaskId","t"),_(r,"IsCompleted","c"),_(r,"CompletedGoals","g"),t.push(r)}),t}function w(e){var t={};return mtjQuery.each(e,function(e,n){if(!n.t)return;var r=mtjQuery.extend(!0,{},n);_(r,"t","TaskId"),_(r,"c","IsCompleted"),_(r,"g","CompletedGoals"),t[r.TaskId]=r}),t}function _(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}this.asyncRetrieveCompletedTasks=function(t,n,r,i,o){if(o=o||{},!d)return;var a=I(t,n,o.userGuid);e.param(a).length>S&&(a.taskGoalsIds=null),p.retrieveData(d+T,a,v.getEndUserUniqueDataKey(t,o.userGuid),r,i,!0)},this.syncRetrieveCompletedTasks=function(e,t,n){if(n=n||{},!d)return null;var r=p.retrieveLocalData(v.getEndUserUniqueDataKey(e,n.userGuid));if(r)return r;return p.loadServerData(d+T,I(e,t,n.userGuid),v.getEndUserUniqueDataKey(e,n.userGuid),null,null,!0),null};function P(e,t){var n=0;for(var r in e){var i=e[r];e.hasOwnProperty(r)&&i.IsCompleted&&t[i.TaskId]&&n++}return n}this.updateTaskCompleted=function(e,t,n,r,o,a){var l=v.getEndUserUniqueDataKey(e);p.updateLocalData(l,r);var c=i.get("DictionaryUtils").getDictionaryKeys(o).length;if(a){var d={endUserId:e,taskId:t?t.Id:-1,goalId:n?n.Id:-1,tasksCount:c,permutationId:s.getPermutationId(),endUserGuid:s.getEndUserGuid(),source:s.getEnvironmentId()};h.sendData(d);try{if(u.isReportingEnabled()&&t&&t!=={}){var f=i.get("DeployablesManagerFactory").get(t.RelatedDeployableType),m=f.getById(t.RelatedDeployableId),S=P(r,o),E=S/c,T=Number(E.toFixed(2)),y=i.get("DeployableTypeToEventSenderAppTypeMapper"),C={type:u.EVENT_APPS.Task,oId:t.Id,oName:t.Name,pId:"-1",total:o?c:-1,aoId:m.Id,aoName:m.Name,aAppType:y.map(t.RelatedDeployableType),ratio:T};u.postEvent(u.EVENT_TYPES.Complete,C)}}catch(I){g(I)}}};function A(e,t){if(!e||0===e.length)return;for(var n=e.length-1;n>=0;n--)e[n].taskId==t.taskId&&e[n].goalId==t.goalId&&e[n].permutationId==t.permutationId&&e[n].source==t.source&&e[n].endUserGuid==t.endUserGuid&&e.splice(n,1)}C.apply(null,arguments)}i.register("TodoListDataSynchronizer").asCtor(ca).dependencies("Lib, RecorderServerManager, ClientStorageManager, ServerDataSenderManager, Logger, WalkMeInfo, EventSender, SiteConfigManager, CommonUtils");function da(){var e,t,n,r,o,a,s,u,l=86400,c="p",d="g";function p(c){e=c.serverAddress,n=c.userGuidContainer.getUserGuid(),r=c.lib.Logger.error,o=c.getPermutationId,a=c.getEndUserGuid,s=c.getAuditSource,u=e+"/AbTesting/UserCompletedGoals",t=i.create("RemoteDataSynchronizer",{storageManager:c.storageManager,storageLifetime:l})}function g(e){return"wm_abg_"+n+"_"+e}function f(e,t){return{userGuid:n,endUserId:e,source:s(),permutationId:o(),goalsToCheck:t}}this.asyncRetrieveCompletedGoals=function(e,n,r,i){var o=function(n){var i=g(e),o=h(n);t.updateLocalData(i,o),r&&r(n)},a=f(e,n);t.loadServerData(u,a,g(e),o,i,!0)},this.syncRetrieveCompletedGoals=function(e){var t=m(e);if(t)return t[d];return null},this.updateGoalCompleted=function(e,n){var r=g(e),i=m(e)||h([]);i[d].push(n),t.updateLocalData(r,i)};function h(e){var t={};return t[c]=o(),t[d]=e,t}this.tempClearUserCompletedGoals=function(e){t.updateLocalData(g(e),{})};function m(e){var n=t.retrieveLocalData(g(e));if(n&&o()==n[c])return n;return null}p.apply(null,arguments)}function pa(){var e,t=null,n=null;function r(r){t=r.goalsManager,n=r.todoListManager,e=_makeTutorial.Logger.wrapCustomerLog(g)}var i=this;function o(e){return e.GoalsNotCompleted?e.GoalsNotCompleted:[]}var a=function(e){n.updateGoalCompleted(e)};this.startWatchingTasks=function(){var e=n.getTasksGoalsNotCompleted();mtjQuery.each(e,function(e,t){if(!t.TaskId)return;i.startWatchingTask(t)})},this.startWatchingTask=function(n){var r=o(n);if(r.length>0){var i={goalCompletedFunc:a};t.addGoalsWatch(r,i)}e("Started watching Task : "+n.Name,2)},r.apply(null,arguments)}i.register("TasksPercentageCalculator").asCtor(ga).asSingleton().dependencies("ObjectTreePercentageCalculator, UIChangeTracker");function ga(e,t){var n=this;n.getTasksCompletionProgress=s;var r;function o(){t.bind(a)}function a(){r=void 0}function s(){if(void 0===r){var t=i.get("UiDataProvider").uiTasksTree();t&&t.length>0&&(r=e.calculate(t[0],"task"))}return r}o()}i.register("FramesetsUtils").asCtor(fa).dependencies("Logger, HostData, TimerManager, FeaturesManager");function fa(t,n,r,i){var o,a=7e3,s=5,u=null,l=[],c=void 0,p=null,g=void 0,f=this;f.isFramesetsPage=m,f.checkIfAnyFrameIsUnloaded=v,f.waitForFramesToLoad=E,f.isFrameActive=T,f.getAllFramesDocuments=C,f.waitForFramesHeadsAndBodies=I,f.shouldHandlePageAsFramesets=b,f.findBiggestFrame=F,f.doForAllFrames=y;function h(){o=t.wrapCustomerLog(d)}function m(){return void 0===g&&(g=e("frameset").length>0),g}function v(e){r.libSetTimeout(L,e),c=w(),l=[],u=r.playSetInterval(_,5),null!=p&&p.clear(),p=r.libSetTimeout(x,a)}function S(e){function t(){if(l.length>0)return r.libSetTimeout(t,200),e.promise();return e.resolve()}return t()}function E(){var t=e.Deferred();return S(t)}function T(e){if(null==e)return o("Frame is not active (Frame is null)",s),!1;if(null==e.contentWindow)return o("Frame is not active (frame.contentWindow is null)",s),!1;if(null==e.contentWindow.document)return o("Frame is not active (frame.contentWindow.document is null)",s),!1;if(0==mtjQuery("head",e.contentWindow.document).length)return o('Frame is not active (mtjQuery("head", frame.contentWindow.document).length == 0)',s),!1;if(0==mtjQuery("body",e.contentWindow.document).length&&0==mtjQuery("frameset",e.contentWindow.document).length)return o('Frame is not active (mtjQuery("body", frame.contentWindow.document).length == 0)',s),!1;return!0}function y(e){for(var t=C(),n=0;n<t.length;n++)e(t[n])}function C(){for(var e=[],t=w(),n=0;n<t.length;n++)e.push(t[n].contentWindow.document);return e}function I(e){if(!f.isFramesetsPage())return void e();var t=40,n=0;i();function i(){var a=f.findBiggestFrame(),s=f.isFrameActive(a);if(s)return o("Biggest frame is active. waitCount: "+n,5,"FramesetsUtils"),void e();if(n>t)return void o("Failed waiting for head and body in biggest frame. Stopping execution"+n,1,"FramesetsUtils");r.setWalkmeTimeout(function(){n++,o("Biggest frame wasn't ready on attempt "+n,5,"FramesetsUtils"),i()},200)}}function b(){return!i.isFeatureEnabled("oldframesets")&&f.isFramesetsPage()}function w(e,t){return void 0===t&&(t=[]),mtjQuery("frame",e).each(function(){try{mtjQuery("frame, frameset",this.contentWindow.document).length>0&&(t=w(this.contentWindow.document,t)),t.push(this)}catch(e){o("Frame is cross-domain, we can't access it",s)}}),t}function _(){for(var e=0;e<c.length;e++){var t=c[e];f.isFrameActive(t)||null!=t&&null!=t.contentWindow&&P(t)}}function P(e){if(!N(e)){if(l.push(e),i.isFeatureEnabled("useDocumentReadyForIframeLoad"))return void mtjQuery(e.contentWindow.document).ready(function(){O(e)});n.isIE(9,"lte")?e.addEventListener?e.addEventListener("load",A,!1):e.attachEvent("onload",A):mtjQuery(e).bind("load.walkme",function(){O(e)})}}function A(e){O(e.currentTarget)}function k(e){n.isIE(9,"lte")?e.removeEventListener?e.removeEventListener("load",A,!1):e.detachEvent("onload",A):mtjQuery(e).unbind("load.walkme")}function O(e){k(e),D(e)}function N(e){for(var t=0;t<l.length;t++)if(l[t]==e)return!0;return!1}function D(e){for(var t=0;t<l.length;t++)l[t]==e&&l.splice(t,1)}function L(){null!=u&&(u.clear(),u=null)}function x(){for(var e=0;e<l.length;e++)mtjQuery(l[e]).unbind("load.walkme");l=[]}function F(e,t){e=e?e:document;var n=t?M(t):-1;return mtjQuery("frame",e).each(function(){try{if(mtjQuery("frame, frameset",this.contentWindow.document).length>0){var e=this.contentWindow.document;e&&(t=f.findBiggestFrame(e,t),n=t?M(t):-1)}else{var r=M(this);r>n&&(n=r,t=this)}}catch(i){}}),t}function M(e){var t=0;return t=void 0!==e.height&&void 0!==e.width?e.height*e.width:mtjQuery(e).height()*mtjQuery(e).width()}h.apply(null,arguments)}function ha(e,t,n){var r=this,i=e,o=t,a=n.wrapCustomerLog(y);r.foreachDocument=function(e,t){e(document),i.doForAllFrames(e),o.foreachIframe(n);function n(t){try{e(t.iframe.contentWindow.document)}catch(n){a("DocumentsManager - Skipping inaccessible document",3)}}}}i.register("DocumentsManager").asCtor(ha).dependencies("FramesetsUtils, IFramesManager, Logger"),i.register("TriggersManager").asCtor(ma).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils");function ma(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T){var y=this;y.getDelay=P;var C=1e3,I=2e3,b=500,w=[];function _(){}y.handle=function(e,n,r,o,a){var p=d.getStep(r),g=!1,f=!!p.LinkedTutorialIds,h=[];if(f){var m=p.LinkedTutorialIds.split(";"),E=c.isTutorialIdsExist(m);E?(i.customerLog("This is a branched step. Branched walk-thru's: "+p.LinkedTutorialIds),h.push(F(e,["click","mousedown"],m,C))):(i.customerLog("Branch walk-thru id, not found: "+p.LinkedTutorialIds),f=!1)}var I=!1,w=!1,_=-1,P=c.getNextStepIncludingSplit(),O=null==P;c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(d.state=u.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,O?w=!0:(P.IsSkippable||S.getSettingsValue(P.Settings,"skipNotExists",!1)||c.getPlayConditionMode(P)!=u.playConditionModes.STICKY_CONDITION&&!c.checkPlayStepCondition(P)||S.getSettingsValue(P.Settings,"fake",!1))&&c.checkIfStepExistsWithSkippables(P.TutorialIndex,P.StepIndex,void 0,void 0,void 0,u.CHECK_STEP_MODE.Normal)==-2?w=!0:I=!0);var N;if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.NOTHING))O||(g=!0);else if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.HOVER))N=["mouseenter"],h.push(k(e,n,N,O,b));else if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.CLICK)&&!f)N=l.get(),h.push(k(e,n,N,O,C));else if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var L=y.getDelay(n);N=["keydown","paste","change"],h.push(k(e,n,N,O,L))}else c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(d.state=u.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,c.setMember("dontContinueTutorial",!0)):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.DURATION)?p.durationHandler=t.playSetTimeout(function(){c.stepWasCompleted(),c.executeTutorialNextStep()},1e3*p.Duration):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?A(e,n,O,h,!1):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?A(e,n,O,h,!0):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.SWIPE)&&(N=["swipe"],h.push(k(e,n,N,O,b)));if(p.Settings.additionalTriggers){s.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepAdditionalTriggerSet,p);var M={elementName:n.StepTitle||n.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0},R=v.createOld(M);R.onValueChanged(function(e){if(s.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,p),e){c.setMember("dontContinueTutorial",!1),p.durationHandler&&(p.durationHandler.clear(),p.durationHandler=null);var t=x(p.Settings.additionalTriggers);D(O,C,t)}}),R.evaluateAsync(p.Settings.additionalTriggers),c.addCurrentStepResource(R)}return _=T.handleStepIndex(p,a,o),{executeNextStep:g,clearElementEventsFuncs:h,buttons:{nextButton:I,doneButton:w,backButtonStepIndex:_}}};function P(e){var t=a.get();return t.Settings.keyPressedNextStepDelay?t.Settings.keyPressedNextStepDelay:I}function A(e,t,n,r,i){function o(e){var n,r=t.Settings.complexHtml;return n="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex],n.value==r.val||n.text==r.txt}var a=void 0;i&&(a=o);var s=["change"],u={change:a};r.push(k(e,t,s,n,C,u))}y.releaseAllEventBindings=function(){for(var e=0;e<w.length;e++)try{var t=w[e].element,n=w[e].eventName;h.unbind(t,n)}catch(r){}w.length=0};function k(t,n,r,o,a,s){d.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var l=function(t,n){i.customerLog("Step event triggered.");var s=e.inArray("click",r)!==-1;return D(o,a,s,t,n),!0},c=O(l),p=0;p<r.length;p++){var g=s&&s[r[p]];function f(e){var t=function(t){if(e&&!e(t))return;c(t)};return t}var h=f(g);N(t,r[p]+".mt",h)}return function(e){return c(null,e)}}function O(e){var t=!1;function n(n,r){var i;return t||(i=e(n,r),t=!0),i}return n}function N(e,t,n){h.bind(e,t,n),w.push({element:e,eventName:t})}function D(e,r,i,o,a){f.releaseBalloons(),i&&(n.shouldHandlePageAsFramesets()&&n.checkIfAnyFrameIsUnloaded(r),null!=o&&E.setIgnoreNextBeforeUnload(L(mtjQuery(o.target)))),d.state=u.WALKTHRU_STATE.RUNNING,p.storeStateInCookie(),c.stepWasCompleted(void 0==a),void 0!=a&&(d.currentStep=a),e&&void 0==a?c.tutorialFinished():t.playSetTimeout(function(){c.executeTutorialNextStep()},r)}function L(e){if(m.isIE()){var t=!1;if("a"==e[0].nodeName.toLowerCase())t=e;else{var n=e.parents("a");n.length>0&&(t=mtjQuery(n[0]))}if(t&&t.attr("href")&&0==t.attr("href").indexOf("javascript:"))return!0}return!1}function x(e){return"Func"==e.nodeType?"ElementClicked"==e.funcName:("And"==e.nodeType||"Or"==e.nodeType)&&(x(e.leftSon)||x(e.rightSon))}function F(e,t,n,r){d.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,c.releaseEvents(e,t);for(var o=function(r){i.customerLog("Clicked the branched walk-thru."),c.releaseEvents(e,t),g.makeSplit(n)},a=O(o),s=O(function(){c.releaseEvents(e,t)}),l=0;l<t.length;l++)N(e,t[l]+".mt",a);return function(){return s()}}_.apply(null,arguments)}i.register("BackButtonUtils").asCtor(va).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils");function va(e,t,n,r){var i=this;i.handleStepIndex=o;function o(r,i,o){var s;if(r.StepIndex>0&&e.isStepTrigger(r.End,t.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!a(i)){if(s=e.checkIfStepExistsWithSkippables(o,r.StepIndex-1,0,-1,void 0,t.CHECK_STEP_MODE.Normal),s>=0){var u=n.getStep(s);e.isStepTrigger(u.End,t.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(s=-1)}n.lastBackButtonStepIndex=s}return s}function a(e){if(null!=e){var t=n.getStep(e);return r.isActionStep(t)}return!1}}function Sa(){function e(e,t){var n={};for(var r in t){n[r]=t[r];var i="function"==typeof t[r],o="function"==typeof e[r];i&&!o?e[r]=t[r]:i&&o&&t[r].WM_VIRTUAL&&(t[r]=e[r])}return n}this.extend=function(t,n,r,i,o,a){var s=new n(r,i,o,a),u=e(t,s);t._base=u},this.VIRTUAL=function(e){return e.WM_VIRTUAL=!0,e};var t=this.VIRTUAL(function(){throw"Function is pure virtual. must override"});this.WM_PURE_VIRTUAL=function(){return t}}var Sa=new Sa;i.register("WalkmeInheritance").asInstance(Sa),i.register("PlayManager").asCtor(Ea).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger");function Ea(e,t,n,r,i){var o=this;function a(){}o.findFirstStep=function(e,r,i){return r=r?r:0,n.checkIfStepExistsWithSkippables(e,r,void 0,void 0,i,t.CHECK_STEP_MODE.Normal)},a.apply(null,arguments)}i.register("StepUtils").asCtor(Ta).dependencies("Consts");function Ta(e){var t=this;t.isActionStep=n,t.isBranchStep=r,t.isPopupStep=i,t.isSpotlightStep=o;function n(t){return t.Type&&t.Type==e.STEP_TYPE.Action}function r(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch}function i(t){return t.Type&&t.Type==e.STEP_TYPE.Popup}function o(e){return e&&e.Settings&&(1==e.Settings.fadeBackground||"True"==e.Settings.fadeBackground||1==e.Settings.fadeBackground)}}i.register("StepRetriever").asCtor(ya).dependencies("WalkthrusContainer");function ya(e){var t=this;t.getStepByWalkthruAndStepIds=n,t.getStepById=r,t.getStepIndex=o;function n(t,n){var i=e.getWalkthruIndexByWalkthruId(t);if(i>-1){var o=e.getWalkthruByIndex(i),a=r(n,o);if(a)return a}return null}function r(t,n){if(n)return i(t,n);for(var r=e.getWalkthrus(),o=0;o<r.length;o++){var a=i(t,r[o]);if(a)return a}return null}function i(e,t){for(var n=t.Steps,r=0;r<n.length;r++)if(n[r].Id==e)return n[r];return null}function o(e,t){var r=n(t,e);if(r)return r.StepIndex;return-1}}i.register("POVisibleIframeChecker").asCtor(Ca).dependencies("CommonUtils,FeaturesManager,Logger,PostMessageListener, PostMessage");function Ca(){var t=this;t.executeIfVisible=d,t.reset=h;var n,r,i,o,a,s="isVisibleFrameAsk",u="isVisibleFrameAnswer",l=[];function c(e,t,s,u,l){i=s,n=e,o=u,r=t.isFeatureEnabled("sfLightningPo"),a=l,r&&p()}function d(e){if(!r||window==top)return e();l.push(e);try{var t={wm:!0,type:s};a.apply(parent,[n.toJSON(t),"*"])}catch(o){i.error(o)}}function p(){o.listen(f)}function g(t){var n=!0;return e("iframe,frame").each(function(r,i){if(i.contentWindow==t)return n=e(i).is(":mt_visible"),!1}),n}function f(e){try{var t=n.secureEvalJSON(e.data);if(!t.wm)return;switch(t.type){case s:e.source.postMessage(n.toJSON({wm:!0,type:u,isVisible:g(e.source)}),"*");break;case u:if(t.isVisible){var r=l.shift();r&&r()}}}catch(i){}}function h(){l=[]}c.apply(null,arguments)}i.register("WalkthruPassOwnershipDeterminator").asCtor(Ia).dependencies("Consts");function Ia(e){var t=this;t.isPassOwnershipStep=n,t.evaluateOwnership=r;function n(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.PassOwnership}function r(t,r,i){return i&&!n(t)?e.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:o(t,r)?e.PASS_OWNERSHIP.EvaluateOwnership.Owner:e.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}function o(e,t){if(null===e)return i.get("WalkthruStepsLoader").LoadStepsForWT(t),!1;try{return _makeTutorial.evaluateConditionTree(e.Settings.action.arguments.condition)}catch(n){return!0}}}i.register("PassOwnershipDeterminatorFactory").asCtor(ba).dependencies("DeployableTypes, BizflowPassOwnershipDeterminator, WalkthruPassOwnershipDeterminator");function ba(e,t,n){var r=this;r.getDeterminatorByType=i;function i(r){if(r==e.Tutorial)return n;if(r==e.BusinessSolution)return t}}i.register("PreExecutionPassOwnershipWrapper").asCtor(wa);function wa(){var e=this;e.wrap=r,e.setCurrent=s,e.getCurrent=i,e.clearCurrent=a,e.getCurrentStepData=o;var t,n;function r(e,t,n){s(e,t);var r=n();return a(),r}function i(){return t}function o(){return n}function a(){s(void 0,void 0)}function s(e,r){t=e,n=r}}i.register("WalkthruOwnershipManager").asCtor(_a).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager, FlowStack");function _a(e,t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v){var S=this;S.walkthruStarted=y,S.evaluateOwnership=I,S.evaluateOwnershipByPeeking=_,S.gainedOwnership=P,S.lostOwnership=k;var E;function T(){E=d.wrapCustomerLog(t.PASS_OWNERSHIP.LOG_FEATURE)}function y(e,n){return h.wrap(t.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,D(e,n),function(){return C(e,n)})}function C(r,i){v.clear();var o=e.get().optimizedDetermineOwnership();return o||(a.state=t.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,a.currentWalkthru=r,a.currentStep=i,s.storeStateInCookie(),n.terminateTutorial(),a.state=t.WALKTHRU_STATE.NOT_RUNNING,e.get().reset()),o}function I(e,n){if(n)return h.wrap(t.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,n,function(){return b(e)});return b(e)}function b(e){var t=w(),n=t?h.getCurrentStepData():L(),i=r.evaluateOwnership(n.step,n.walkthruId,t);return t||e||N(i),i}function w(){return h.getCurrent()==t.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru}function _(){return(g.isFeatureEnabled("po_peek")||g.isFeatureEnabled("passOwnership"))&&r.isPassOwnershipStep(p.peekNextCookieStep())}function P(e,t,n){n&&A(e,t)}function A(e,t){e?O():(E("ownership granted to: "+t,3),c.restoreStateFromCookie(l.getUserGuid()))}function k(){i.get("WalkthrusModule").terminateTutorial()}function O(){i.get("WalkthrusModule").setMember("dontContinueTutorial",!1),f.resumeTimeoutsArray("playTimeouts")}function N(e){switch(e){case t.PASS_OWNERSHIP.EvaluateOwnership.Owner:x();break;case t.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:F()}}function D(e,t){var n=o.getWalkthruByIndex(e);return{walkthruId:n.Id,step:n.Steps[t]}}function L(){var e=m.getData(t.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,void 0,l.getUserGuid());if(e)return{walkthruId:e.tutorialId,step:u.getStepByWalkthruAndStepIds(e.tutorialId,e.stepId)}}function x(){n.stepWasCompleted(),n.executeTutorialNextStep()}function F(){a.state=t.WALKTHRU_STATE.PASSING_OWNERSHIP,a.currentStep++,s.storeStateInCookie()}T()}i.register("PassOwnershipRouter").asCtor(Pa).dependencies("Consts, BizflowOwnershipManager, WalkthruOwnershipManager, FlowStack, CommonEvents, ClientStorageManager");function Pa(e,t,n,r,i,o){var a=this;a.evaluateOwnership=s,a.loseOwnership=u,a.gainOwnership=l,a.evaluateOwnershipByPeeking=c;function s(e,t,n){return d(n).evaluateOwnership(e,t)}function u(){return i.raiseEvent("loseOwnership"),p().lostOwnership()}function l(e,t,n){return i.raiseEvent("gainOwnership"),d().gainedOwnership(e,t,n)}function c(){return d().evaluateOwnershipByPeeking()}function d(e){return r.load(),p(e)}function p(i){switch(i){case e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:return n;case e.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow:return t;default:return r.isEmpty()&&!o.getData(e.FLOW_BEFORE_PLAY_KEY)?n:t;
}}}i.register("BizflowOwnershipManager").asCtor(Aa).dependencies("CrossDomainManager, Consts, BizflowPassOwnershipDeterminator, FlowsContainer, FlowsPlayer, TimerManager,FlowStack, WmInternals, ClientStorageManager, FlowsRestorer");function Aa(e,t,n,r,i,o,a,s,u,l){var c=this;c.determineOwner=p,c.evaluateOwnership=g,c.evaluateOwnershipByPeeking=f,c.gainedOwnership=E,c.lostOwnership=T;function d(){s.on(t.EVENTS.Flows.FlowStopped,function(){e.get().reset()}),s.on(t.EVENTS.Flows.FlowCompleted,function(){e.get().loseOwnership()})}function p(t,r){S({flowId:t,stageId:r});var i=e.get().optimizedDetermineOwnership();i||(e.get().reset(),n.isPassOwnershipNode(m())&&e.get().setOwnershipCondition({flowId:t,stageId:r}))}function g(e,t){return n.evaluateOwnership(h(t))}function f(){var e=m();return n.isPassOwnershipNode(e)}function h(e){if(e)return I(e.flowId,e.node.Id);var n=u.getData(t.FLOW_BEFORE_PLAY_KEY);return n?I(n.flowId,n.stageId):v()}function m(){var e=u.getData(t.FLOW_BEFORE_PLAY_KEY)||a.peek();return I(e.flowId,e.stageId)}function v(){var e=u.getData(t.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE);if(e)return I(e.flowId,e.stageId)}function S(e){u.saveData(t.FLOW_BEFORE_PLAY_KEY,e,36e5),u.refreshGetData()}function E(e,n,r){var i=u.getData(t.FLOW_BEFORE_PLAY_KEY);i?(S(null),y(e,C(i.flowId,i.stageId))):l.restore(),e&&r&&o.resumeAllTimeouts()}function T(){i.pause()}function y(e,t){var r=t.node;if(!r)return;var o=r.Id;!e&&n.isPassOwnershipNode(r)&&(o=r.Links[0].TargetFlowNodeId),i.play(t.flowId,o)}function C(e,t){return{flowId:e,node:I(e,t)}}function I(e,t){return r.getNodeById(e,t)}d()}i.register("BizflowPassOwnershipDeterminator").asCtor(ka).dependencies("Consts, ConditionCheckerFactory");function ka(e,t){var n=this;n.isPassOwnershipNode=r,n.evaluateOwnership=i;function r(t){return t&&t.ActionType==e.FLOW_ACTION_TYPE.PassOwnership}function i(t){return r(t)?o(t)?e.PASS_OWNERSHIP.EvaluateOwnership.Owner:e.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:e.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined}function o(e){var n=t.createNew({featureName:"SwitchToFrameNode",elementName:e.Name});return n.getCurrentEvaluationValueAndStopEvaluating(e.ConditionTrees.SwitchToFrame)}}i.register("PassOwnershipManager").asCtor(Oa).initialize(!1);function Oa(){var e,t,n,r,o,a,s,u,l,c,d,p=new vf(this),g=2e3,f=3600,h=2,m=3e3,v=1100,S="wm-cdstop",E=this,T=!1,y=p.Prop.Protected("isRunning",!1),C=p.Prop.Protected("storageManager",!1),I=p.Prop.Protected("allUserGuids",{}),b=p.Prop.Public("crossDomainSampleRate",{}),w=p.Prop.Protected("listenCallback");function _(e){c=i.get("CommonEvents"),d=i.get("Consts"),o=i.get("Logger"),a=i.get("FeaturesManager"),l=i.get("TimerManager"),b(P()),t=e.errorHandler,n=e.userGuid,C(e.storageManager),I(e.allUserGuids),r=e.topWindow==e.owner,u=o.wrapCustomerLog(d.PASS_OWNERSHIP.LOG_FEATURE)}var P=p.Virtual.Protected("getSampleRate",function(){return 200}),A=p.Public("enabled",function(){return a.isFeatureEnabled("cd_play")||a.isFeatureEnabled("passOwnership")});p.Virtual.Public("start",function(e){if(!A())return;u("starting cross domain listening..."),w(e),U()}),p.Virtual.Public("stop",function(){C().releaseCallback(V)}),p.Virtual.Public("reset",function(){if(!A())return;K(!0),J(),l.libSetTimeout(function(){K(!1)},v)}),p.Virtual.Public("determineOwnership",function(e){if(!A())return;u("switching owner...");var t=k(e);return t||(M(),O(),C().setSyncFlag(n)),t});var k=p.Virtual.Protected("checkIsConditionMet",function(e){return X(e),N()});p.Virtual.Public("loseOwnership",function(e,t){if(!A())return;u("losing ownership..."+document.location.href),y()&&(e&&(u("reset state: reseting the ownership condition"),J()),t?L():y(!1))});var O=p.Virtual.Protected("removeOwner",function(){});p.Virtual.Public("optimizedDetermineOwnership",function(){if(!A())return z().gainOwnership(),!0;return D(),!1});var N=p.Virtual.Public("isConditionMet",function(e,t,n){var r=z().evaluateOwnership(e,t,n);return r==d.PASS_OWNERSHIP.EvaluateOwnership.Owner||r==d.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined&&E.isOwnerByDefault()}),D=p.Virtual.Protected("dontStartAsOwner",function(){}),L=(p.Virtual.Protected("startAsOwner",function(){}),p.Virtual.Protected("resumeCrossDomain",function(){u("saving data to resume after unload",3),X(e),T=!0,e=null,x()}));function x(){l.setWalkmeTimeout(F,m)}var F=p.Virtual.Protected("actualResume",function(){u("continue listening after "+m+" milliseconds",3),U()}),M=p.Virtual.Protected("terminate",function(){u("owner killed, losing ownership",3),z().loseOwnership(),E.loseOwnership()}),R=p.Virtual.Protected("gainOwnership",function(){u("gaining ownership with state "+i.get("CurrentWalkthruData").state+" "+document.location.href,3),y(!0),z().gainOwnership(T,B(),!0),T=!1}),B=p.Virtual.Protected("windowIdentifier",function(){return window.location.href}),U=p.Virtual.Protected("listen",function(){C().refreshGetData(I(),V)}),V=p.Virtual.Protected("handleOwnership",function(){var e=Q();y()?e&&M():e||!j()&&!H()?e?u("waiting for other owner to die before gaining ownership...",3):T&&(T=!1):R(),l.libSetTimeout(U,G()),W()}),W=p.Protected("handleListenCallback",function(){w()&&(w()(),w(null))}),G=p.Protected("calculateDomainListenInterval",function(){return T?g:b()}),H=p.Protected("checkOwnership",function(){try{if(q())return z().evaluateOwnership(!0)==d.PASS_OWNERSHIP.EvaluateOwnership.Owner;if(Y())return u("no ownership condition, owner by default",5),!0}catch(e){t(e,"Error determining the owner of a cross domain step")}return!1}),j=p.Protected("isOwnerByPeeking",function(){var e=z().evaluateOwnershipByPeeking();return e&&u("[passownership] owner by peeking",5),e}),Y=p.Public("isOwnerByDefault",function(){return r});function z(){return s||(s=i.get("PassOwnershipRouter")),s}function Q(){return C().getData(S,!1,n)}function K(e){C().saveData(S,e,h,n)}function q(){return e=C().getData(d.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,n)}var X=p.Public("setOwnershipCondition",function(t){e=t,C().saveData(d.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,t,f,n)}),J=p.Protected("resetOwnershipCondition",function(){C().saveData(d.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,f,n)});_.apply(null,arguments)}i.register("PassOwnershipNextStepProvider").asCtor(Na).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer");function Na(e,t,n,r){var i=this;i.peekNextCookieStep=a;function o(){}function a(i){try{i=i||0;var o=e.getData(t.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},r.getAllUserGuids()[0]),a=o[t.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],s=n.getWalkthruById(a),u=o[t.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME],l=s.Steps[u+i];return l}catch(c){return null}}o()}i.register("TabbedOwnershipManager").asCtor(Da).initialize(!1);function Da(){var e,t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I=new vf(this),b=3600,w=300,_="wm-po-p",P="wm-po-r",A="wm-po-q",k="wm-setPriority",O="priority",N="wm-qp-req",D="wm-qp-res",L="wm-po-pc",x=100,F=1,M=10,R=this,B=0,U=!1;function V(s){a=i.get("Consts"),T=i.get("CommonEvents"),E=i.get("TimerManager"),f=i.get("PassOwnershipRouter");var c=i.get("Logger");y=i.get("POVisibleIframeChecker"),S=s.isFeatureEnabled("po_doubleCheck"),I.Extends(Oa,s),o=I._base,o.crossDomainSampleRate(H()),e=2*o.crossDomainSampleRate(),t=W()?5e3:800,n=W()?2e4:5e3,r="Chrome"==i.get("HostData").browser.name?1200:700,l=s.errorHandler,u=s.userGuid,d=o.storageManager,p=o.allUserGuids,g=o.isRunning,C=c.wrapCustomerLog(a.PASS_OWNERSHIP.LOG_FEATURE),le()}I.Virtual.Public("getPriority",function(){return s});function W(){return G()||i.get("HostData").isIEBrowser(10,"gte")}var G=I.Protected("isSlowerBrowser",function(){return i.get("HostData").isIEBrowser(9,"lte")}),H=I.Override("getSampleRate",function(){var e=o.getSampleRate();return G()&&(e*=2),e});I.Override("start",function(e){J(function(){T.raiseEvent(a.EVENTS.PassOwnership.PriorityInitialized,{priority:s}),ue(),ne(),o.start(e)})}),I.Override("stop",function(){if(!R.enabled())return;ce(),de(),C("stop ownership",4),g(!1),o.stop()}),I.Override("reset",function(){if(!R.enabled())return;h=0,C("reset ownership",4),o.resetOwnershipCondition(),ye(),g(!1)});var j=I.Override("dontStartAsOwner",function(){o.dontStartAsOwner(),be()}),Y=I.Override("startAsOwner",function(){g(!0),Te(s)});I.Override("resumeCrossDomain",function(){g(!1),U=!0,o.resumeCrossDomain()}),I.Override("actualResume",function(){U=!1,o.actualResume()}),I.Override("handleOwnership",function(){var e=Ee();q()||(g()&&s!=e&&(o.terminate(),y.reset()),g()||(!e&&o.checkOwnership()||K()?z():s==e&&Q()&&(o.gainOwnership(),he()))),E.libSetTimeout(o.listen,o.calculateDomainListenInterval()),o.handleListenCallback()});function z(){var e={priority:s,asyncCallback:Ce};T.raiseEvent(a.EVENTS.PassOwnership.PORegisterPriority,e)}var Q=I.Virtual.Protected("shouldRegainOwnership",function(){return o.checkOwnership()});function K(){if(o.isOwnerByPeeking())return B++,B>=M;B=0}function q(){if(!h)return!1;return h--,!0}I.Override("determineOwnership",function(e){o.setOwnershipCondition(e),c=o.isConditionMet(),c||be(),S?he(null,t,S):t();function t(){o.determineOwnership(e)}var n=c;return c=void 0,n}),I.Override("checkIsConditionMet",function(){return c}),I.Override("optimizedDetermineOwnership",function(){if(!o.enabled())return f.gainOwnership(),!0;return o.isConditionMet()?(Y(),f.gainOwnership(),!0):(j(),!1)});function X(){o.storageManager().refreshGetData(p(),function(){m=null;var e=we(),t=Ee(),n=K();!e||s!=e||t&&!n?!n&&t&&t!=s&&be():(C("priority is highest, gaining ownership - "+s,4),Te(s),o.gainOwnership())})}I.Override("windowIdentifier",function(){return s+":"+window.location.href}),I.Override("removeOwner",function(e,t){o.removeOwner(),ye()});function J(e){Z(function(t){var n=parseInt(t,10)||0;C("got priority "+n+" from sessionStorage",4),oe(n,function(t){0===n||t?(C((t?"inherited priority from parent":"priority is zero")+", getting a new priority",4),he(null,e,!0)):(s=n,S?$(e):e&&e())})})}function $(e){oe(s,function(t){t?he(null,e,!0):e&&e()})}var Z=I.Virtual.Protected("restorePriority",function(e){o.storageManager().sessionGetData(O,0,u,e)}),ee=I.Virtual.Protected("storePriority",function(e){d().sessionSetData(O,e,u)});function te(){return i.get("HostData").isIE()||S}function ne(){te()&&re()}function re(){var e=L+s,t=d().getData(e,void 0,u);t>=1&&d().increment(e,null,b,u),E.libSetTimeout(re,w)}function ie(e,t){var n=L+e;d().increment(n,null,b,u,function(){var e=!0;function i(){if(!e)return;d().refreshGetData(p(),function(){if(!e)return;var t=d().getData(n,void 0,u);t>1&&a(!0),E.libSetTimeout(i,x)})}var o=E.libSetTimeout(a,r);function a(r){r=!!r,d().saveData(n,0,b,u),d().removeData(n,u),e=!1,o&&o.clear(),t&&t(r)}i()})}function oe(e,t){if(!e)return void(t&&t(!1));te()?(C("checking if priority is inherited using storageManager",4),ie(e,t)):(C("checking if priority is inherited using window.opener",4),ae(e,t))}function ae(e,t){if(window.opener){var n,r,i;function o(e){C("is priority inherited: "+e,4),r&&r.clear(),n&&n(),t&&t(e)}n=pr.registerEventHandler("message",function(t){try{var n=If(t.data);n.requestType==D&&(n.priority==e?(h=F,o(!0)):(i--,0==i&&o()))}catch(r){C("Error in priority inherited message event "+r,4)}}),r=E.libSetTimeout(function(){o(!1)},1e3),i=pr.postMessageToAllFramesChain(window.opener,Cf({requestType:N})),0==i&&o(!1)}else t&&t(!1)}var se=I.Virtual.Protected("shouldRegisterFocusEvents",function(){return window==top});function ue(){se()&&(mtjQuery(window).bind("focus",he),mtjQuery(window).bind("mouseenter",he))}function le(){pr.registerEventHandler("message",pe)}function ce(){se()&&(mtjQuery(window).unbind("focus",he),mtjQuery(window).unbind("mouseenter",he))}function de(){pr.unregisterEventHandler("message",pe)}function pe(e){var t;try{switch(t=If(e.data),t.requestType){case k:ge(t.priority);break;case N:e.source.postMessage(Cf({requestType:D,priority:s}),"*")}}catch(n){t&&l(n,"error handling priority message from parent")}}var ge=I.Virtual.Protected("handleSendPriorityRequest",function(e){C("frame got new priority from parent window: "+e,4),s=e,Se(e)}),fe=[],he=I.Virtual.Public("updatePriority",function(e,t,n){if(t&&fe.push(t),v||U)return;var r=s;v=!0;var i=n?null:s;d().increment(_,i,b,u,function(e){e!==s&&(C("updating priority from "+r+" to "+e,4),ve(e),me(e,r));var t=fe;fe=[],v=!1;for(var n=0;n<t.length;n++)t[n](s)})}),me=I.Virtual.Protected("afterUpdatingPriority",function(e){Se(e)});function ve(e){s=e,ee(s),g()&&(C("is running during set priority - setting current owner",4),Te(s)),C("updated priority: "+s,4)}function Se(e){var t={requestType:k,priority:e};C("sending priority to all frames: "+e,4),mtjQuery("iframe").each(function(e,n){n.contentWindow.postMessage(Cf(t),"*")})}function Ee(){return d().getData(P,!1,u)}function Te(e){return C("setting owner to: "+document.location.href+"owner id:"+e,4),h=F,d().saveData(P,e,b,u)}function ye(){C("removing current owner",4),d().saveData(P,null,b,u)}function Ce(){y.executeIfVisible(function(){C("register in queue with priority "+s,4),d().addToDictionary(A,s,Ie(),b,u),m&&!m.cleared||(m=E.libSetTimeout(X,e))})}function Ie(){return(new Date).getTime()}function be(){C("po_tabs - clear priorities queue",4),d().saveData(A,null,b,u)}function we(){var r=d().getData(A,!1,u);C("registered priorities: "+Cf(r),4);for(var i=0,o=t;!i&&o<n;){for(var a in r)if(r.hasOwnProperty(a)){var s=parseInt(a,10);Ie()-r[a]<o&&s>i&&(i=s)}o+=e}return i}V.apply(null,arguments)}i.register("FramedOwnershipManager").asCtor(La).initialize(!1);function La(){var t,n,r,o,a=new vf(this),s="walkme-priorities";function u(e){var n=i.get("Logger"),s=i.get("Consts");o=i.get("UserGuidContainer").getUserGuid(),a.Extends(Da,e),r=a._base,t=n.wrapCustomerLog(s.PASS_OWNERSHIP.LOG_FEATURE)}a.Override("getPriority",function(){return r.getPriority()||n}),a.Override("restorePriority",function(i){if(t("[po_frames] restoring priority, temp priority is: "+n,4),window==top)r.restorePriority(i);else{var o=l();if(o&&o.length){var a=g(p());o.sort(function(e,t){return e>t?-1:e<t?1:0}),t("[po_frames] used priorities: "+Cf(o),4);for(var u=0;u<o.length&&!n;u++)e.inArray(o[u],a)==-1&&(a.push(o[u]),sessionStorage.setItem(s,Cf(a)),n=o[u])}c(n,i)}});function l(){var e=sessionStorage.getItem(s);if(t("[po_frames] getting session priorities: "+e,4),e)return If(e)}function c(e,t){e&&!d(e)?t&&t(e):r.updatePriority(null,function(e){c(e,t)})}function d(t){return e.inArray(t,g(top))!=-1}a.Override("storePriority",function(n){if(n=parseInt(n,10),window==top)r.storePriority(n);else{var i=If(sessionStorage.getItem(s)||"[]");e.inArray(n,i)==-1&&i.push(n),t("[po_frames] storing priority "+n+" in the session",4),sessionStorage.setItem(s,Cf(i))}});function p(){try{top.frames;return top}catch(e){return window}}function g(e){var t=[];try{if(e!=window&&e._walkmeInternals){var n=e._walkmeInternals.ctx.get("CrossDomainManager");if(n&&n.isReady())var r=n.get().getPriority();r&&o==e._walkmeInternals.ctx.get("UserGuidContainer").getUserGuid()&&t.push(parseInt(r,10))}}catch(i){}try{for(var a=e.frames,s=0;s<a.length;s++)t=t.concat(g(a[s]))}catch(i){}return t}a.Override("afterUpdatingPriority",function(e,t){f(t)});function f(n){var r=l();if(t("[po_frames] removing priority "+n+" from session",4),r&&n){var i=e.inArray(n,r);i>=0&&(r.splice(i,1),sessionStorage.setItem(s,Cf(r)))}}a.Override("handleSendPriorityRequest",function(e){}),a.Override("shouldRegisterFocusEvents",function(){return!0}),a.Override("shouldRegainOwnership",function(e,t){return!0}),u.apply(null,arguments)}var xa=function(){function t(e,t,n,r,i,o,a,s,u,l,c,d){this._mustache=e,this._commonUtils=t,this._positionHelper=n,this._commonEvents=r,this._uiUtils=o,this._siteConfigManager=a,this._timerManager=s,this._cdnServer=i.get(),this._getTopContainer=u,this._lib=l,this._hostData=c,this._consts=d}return t.prototype.activate=function(e,t,n,r,i,o){this._activateContentInNewTab=o,this.createLightBox(e,t,n,r,i)},t.prototype.getElement=function(){return this._lightBoxDiv},t.prototype.getAjaxLoader=function(n){var r=e("#"+t.AJAX_LOADER_DIV_ID,n);return r},t.prototype.remove=function(e){e||(e=this._getTopContainer(null,!1)),this.removeTakingLongMsg(!1),this.removeLightBox(e),this.removeOverlay(),this.unbindEscButton(e)},t.prototype.removeOverlay=function(){e("#"+t.OVERLAY_ID).remove()},t.prototype.unbindEscButton=function(e){e.unbind(t.KEY_UP_EVENT)},t.prototype.removeLightBox=function(n){var r=e("#"+t.LIGHTBOX_DIV_ID,n);r.exist()&&(r.find("iframe").attr("src",""),r.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.ContentRemoved,{}))},t.prototype.createLightBox=function(n,r,i,o,a){var s=this._getTopContainer(null,!1),u=this.getHtml(n,r),l=e(u);this._lightBoxDiv=l,this.addCssClasses(n,l,i),this._uiUtils.setLangAttribute(l);var c=this.createXButtonElement();l.append(c),this.handleCreatingOpenInNewTabButton(n,s,l,o),this.handleCreatingOverlay(),this.bindEscButton(s);var d=a(n);this.setTakingLongTimers(l),this.overlayContent(d,l);var p=this.handleIosIframeScrolling(d);this.appendContent(p),s.append(l);var g=e("#"+t.RELOAD_LIGTHBOX_DIV_ID);return g.click(e.proxy(function(){var e=d.get(0);e.src=e.src,this.getAjaxLoader(l).show(),this.removeTakingLongMsg(!1),this.setTakingLongTimers(l)},this)),this._positionHelper.centerElementInParent(g,l),g.css("left","0"),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxCreated,l),l},t.prototype.overlayContent=function(t,n){t.hide();var r=e.proxy(function(){this.removeTakingLongMsg(!0),this.getAjaxLoader(n).remove(),t.show()},this);this.shouldWaitForReady(t)?t.ready(r):t.load(r),"VIDEO"==i.get("ElementUtils").getElementTagName(t[0])&&t.bind("loadeddata",r)},t.prototype.appendContent=function(e){this._lightBoxDiv.append(e)},t.prototype.reloadButtonTimerFunction=function(n){e("#"+t.RELOAD_LIGTHBOX_DIV_ID).css("display","block"),this._reloadButtonTimer.clear(),this.getAjaxLoader(n).hide()},t.prototype.takingLongerTimerFunction=function(n){var r=e("#"+t.WAITING_DIV_ID);this._positionHelper.centerElementInParent(r,n),r.css("left","0"),r.css("display","block"),this._takingLongerTimer.clear()},t.prototype.setTakingLongTimers=function(n){this._takingLongerTimer=this._timerManager.libSetTimeout(e.proxy(function(){this.takingLongerTimerFunction(n)},this),t.TAKING_LONGER_MESSAGE_INTERVAL),this._reloadButtonTimer=this._timerManager.libSetTimeout(e.proxy(function(){this.reloadButtonTimerFunction(n)},this),t.RELOAD_BUTTON_INTERVAL)},t.prototype.removeTakingLongMsg=function(n){this._reloadButtonTimer&&this._reloadButtonTimer.clear(),this._takingLongerTimer&&this._takingLongerTimer.clear();var r=e("#"+t.RELOAD_LIGTHBOX_DIV_ID),i=e("#"+t.WAITING_DIV_ID);n?(r.remove(),i.remove()):(r.css("display","none"),i.css("display","none"))},t.prototype.handleIosIframeScrolling=function(e){var t=/iPhone|iPod|iPad/.test(navigator.userAgent);return t?this.getIframeWrapperDiv(e):e},t.prototype.getIframeWrapperDiv=function(t){var n={width:t.attr("width")||t[0].style.width,height:t.attr("height")||t[0].style.height,overflow:"auto","-webkit-overflow-scrolling":"touch"},r=e("<div />").css(n);return r.append(t),r},t.prototype.bindEscButton=function(n){n.bind(t.KEY_UP_EVENT,e.proxy(function(e){27==e.keyCode&&this.remove()},this))},t.prototype.handleCreatingOverlay=function(){var n=this._uiUtils.canDisplayOverlay();if(n){var r=this._uiUtils.displayOverlay(this._consts.POPUP_BALLOON_Z_INDEX,!1,t.OVERLAY_ID);r.click(e.proxy(function(){this.remove()},this))}},t.prototype.handleCreatingOpenInNewTabButton=function(t,n,r,i){if(i){var o="walkme-open-in-new-tab-button",a=e(this.newTabHtml(o));a.click(e.proxy(function(){this.remove(n),this._activateContentInNewTab(t)},this)),a.mouseover(e.proxy(function(){this.contentMouseOver(a,!0)},this)),a.mouseout(e.proxy(function(){this.contentMouseOver(a,!1)},this)),r.append(a)}},t.prototype.newTabHtml=function(e){throw""},t.prototype.addCssClasses=function(e,t,n){var r=this._commonUtils.formatString("walkme-{0}-light-box-{1}",n,e.Id);t.addClass(r),t.addClass("walkme-to-remove"),t.addClass("walkme-to-destroy")},t.prototype.createXButtonElement=function(){var t="walkme-light-box-x-button",n=this._siteConfigManager.get().ContentCloseTooltip,r=e(this.xButtonHtml(t,n));return r.click(e.proxy(this.closeLightBoxClicked,this)),r.mouseover(e.proxy(function(){this.contentMouseOver(r,!0)},this)),r.mouseout(e.proxy(function(){this.contentMouseOver(r,!1)},this)),r},t.prototype.xButtonHtml=function(e,t){throw""},t.prototype.contentMouseOver=function(e,t){throw""},t.prototype.closeLightBoxClicked=function(){this.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxClosed)},t.prototype.getHtml=function(e,t){return this._mustache.to_html(this.getTemplate(),this.getConfig(e,t))},t.prototype.getConfig=function(e,n){var r=this.getDimensionSize("width",e,n),i=this.getDimensionSize("height",e,n),o=this.getToolbarWidth(r);return{lightboxDivId:t.LIGHTBOX_DIV_ID,lightboxWidth:r,lightboxHeight:i,zIndex:this._consts.POPUP_BALLOON_Z_INDEX,lightboxTopbarDivId:t.LIGHTBOX_TOPBAR_DIV_ID,topbarWidth:o,ajaxLoaderDivId:t.AJAX_LOADER_DIV_ID,waitingDivId:t.WAITING_DIV_ID,reloadDivId:t.RELOAD_LIGTHBOX_DIV_ID,cdnServer:this._cdnServer}},t.prototype.shouldWaitForReady=function(e){return(this._hostData.isIE()||"Chrome"==this._hostData.browser.name)&&e[0]&&e[0].src&&e[0].src.indexOf(".pdf")>-1},t.prototype.getTemplate=function(){throw""},t.prototype.getDimensionSize=function(e,t,n){throw""},t.prototype.getToolbarWidth=function(e){throw""},t.prototype.getSize=function(){throw""},t.LIGHTBOX_DIV_ID="walkme-content-light-box",t.LIGHTBOX_TOPBAR_DIV_ID="walkme-content-light-box-top-bar",t.AJAX_LOADER_DIV_ID="walkme-ajax-loader",t.WAITING_DIV_ID="walkme-ajax-taking-long",t.RELOAD_LIGTHBOX_DIV_ID="walkme-ligth-box-reload",t.OVERLAY_ID="walkme-content-background",t.KEY_UP_EVENT="keyup.walkme",t.TAKING_LONGER_MESSAGE_INTERVAL=8e3,t.RELOAD_BUTTON_INTERVAL=15e3,t}(),Fa=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.activate=function(t,n,r,i,o,a){e.prototype.activate.call(this,t,n,r,i,o,a),this._lib.centerElementInPage(this._lightBoxDiv,!1)},t.prototype.createLightBox=function(n,r,i,o,a){e.prototype.createLightBox.call(this,n,r,i,o,a);var s=this.getAjaxLoader(this._lightBoxDiv);this._positionHelper.centerElementInParent(s,this._lightBoxDiv),s.css("left","0"),this._positionHelper.registerResizeAndScrollEvents({element:this._lightBoxDiv,eventNameSuffix:t.WALKME_LIGHTBOX_EVENTS})},t.prototype.removeLightBox=function(n){e.prototype.removeLightBox.call(this,n),this._positionHelper.removeScrollAndResizeEvents(t.WALKME_LIGHTBOX_EVENTS)},t.prototype.getDimensionSize=function(e,t,n){var r=this.getSizeUnitSettingKey(e),i=this.getSizeUnit(t,r),o=this.getDimensionSettingKey(e),a=this._commonUtils.getSettingsValue(t.Settings,o,n[e]);if("%"==i){var s=this._positionHelper.getWindowSize();a=s[e]*a/100}return a+"px"},t.prototype.getSizeUnitSettingKey=function(e){return e+"Unit"},t.prototype.getSizeUnit=function(e,t){return this._commonUtils.getSettingsValue(e.Settings,t,"px")},t.prototype.getDimensionSettingKey=function(e){return"height"==e?t.LIGHTBOX_HEIGHT_KEY:t.LIGHTBOX_WIDTH_KEY},t.prototype.getToolbarWidth=function(e){return parseFloat(e)+4+"px"},t.prototype.getSize=function(){return{width:this._lightBoxDiv.css("width").replace("px","")+"px",height:this._lightBoxDiv.css("height").replace("px","")+"px"}},t.prototype.contentMouseOver=function(e,t){var n=t?"#404040":"#646464";e.css("backgroundColor",n)},t.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position:absolute; height: 17px; width: 17px; right: 5px; top: -19px; cursor: pointer; z-index: 2147483632; vertical-align: top;'><img src='{2}/player/resources/images/blue-x-button.png' style='margin: 4px;' /></div>",e,t,this._cdnServer)},t.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute;height:17px; width:17px; right:25px; top:-19px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/open-in-new-tab.png' style='margin: 4px;'></div>",e,this._cdnServer)},t.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='float:left; width:{{lightboxWidth}}; height:{{lightboxHeight}}; padding: 2px; z-index:{{zIndex}}; background-color:white; box-shadow:4px -4px 19px -1px #494949;'><div id='{{lightboxTopbarDivId}}' style='position: absolute; top: -23px; left: 0px; height: 25px; width: {{topbarWidth}}; background-color:#646464;'></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v2.gif) no-repeat center; width:100%; height:100px; position:relative; text-align:center; vertical-align: bottom; margin-top: -30px;'><span style='display: inline-block; color: #99d3fe; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},t.LIGHTBOX_WIDTH_KEY="LightboxWidth",t.LIGHTBOX_HEIGHT_KEY="LightboxHeight",t.WALKME_LIGHTBOX_EVENTS="walkmeLightBox",t}(xa),Ma=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.createLightBox=function(t,n,r,i,o){e.prototype.createLightBox.call(this,t,n,r,i,o),this._lightBoxDiv.css({position:"fixed",top:0,left:0})},t.prototype.getDimensionSize=function(e,t,n){return"100%"},t.prototype.getToolbarWidth=function(e){return"100%"},t.prototype.getSize=function(){return{width:"100%",height:"100%"}},t.prototype.contentMouseOver=function(e,t){},t.prototype.getConfig=function(t,n){var r=e.prototype.getConfig.call(this,t,n);return r.padding="10px",r.title=t.Name,r},t.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position: absolute; right: 19px; top: 17px; cursor: pointer; z-index: 2147483632; vertical-align: top; height: 15px; width: 15px; background-image: url(\"{2}/player/resources/images/x-btn-resources.png\"); background-position: -5px -5px;'></div>",e,t,this._cdnServer)},t.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute; height:11px; width:11px; right:50px; top:15px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/mobile_full_screen.png' style='margin: 4px;'></div>",e,this._cdnServer)},t.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='width:{{lightboxWidth}}; height:{{lightboxHeight}}; box-sizing: border-box; z-index:{{zIndex}}; background-color: black; padding-top: 50px; padding-right: 10px;'><div style='width: 100%; box-sizing: border-box; padding: 0 15px; position: absolute; top: 0; left: 0px; line-height: 50px; background-color: #3393d1; color: white; text-align: left; font-size: 15px;'>{{title}}<div id='{{lightboxTopbarDivId}}' style='height: 100%; width: 100%;'></div></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v3.gif) no-repeat center; width:100%; height:100px; position:absolute; text-align:center; vertical-align: bottom; top: 50%; margin-top: -50px;'><span style='display: inline-block; color: white; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},t.LIGHTBOX_WIDTH_KEY="LightboxWidth",t.LIGHTBOX_HEIGHT_KEY="LightboxHeight",t}(xa);!function(){var e="Mustache,CommonUtils,PositionHelper,CommonEvents,CdnServer,UiUtils,SiteConfigManager,TimerManager,getTopContainer,Lib,HostData,Consts";F.register(D.PLATFORM.Web,function(){i.register("LightboxDisplayer").asProto().asCtor(Fa).dependencies(e)}),F.register(D.PLATFORM.MobileWeb,function(){i.register("LightboxDisplayer").asProto().asCtor(Ma).dependencies(e)})}();function Ra(){var e,t,n,r,o,a,s=this,u=i.get("Consts"),l="ContentPlayMode",c=u.PLAY_MODE;function d(r){e=r.lib,t=r.cdnServer,n=r.clickAuditManager,a=i.get("Logger").wrapCustomerLog(f),o=i.get("CommonEvents")}s.getContentTypeName=Sa.WM_PURE_VIRTUAL(),s.createContentElement=Sa.WM_PURE_VIRTUAL(),s.needsNewTabButton=Sa.WM_PURE_VIRTUAL(),s.defaultLightboxSize=Sa.WM_PURE_VIRTUAL(),s.cannotPlayInLightbox=function(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://");return t&&a("Can't play content in lightbox"),t},s.activateContent=function(e,t,r){var d=parseInt(i.get("SettingsValuesRetriever").getSettingsValue(e.Settings,l,c.NewTab));switch(a(kf("Started playing content, play mode is :{0}",d)),n.SendClickAudit(u.DEPLOYABLE_TYPE.Content,e.Id,{type:t,id:r},{contentType:e.Type}),e.Url=i.get("HtmlDecoder").decodeHtml(e.Url,["&"]),a(kf("Content url is :{0}",e.Url)),o.deprecatedRaiseEvent(u.EVENTS.LoadingContent,e),d){case c.Widget:h(e);break;case c.LightBox:s.cannotPlayInLightbox(e.Url)?(a("Falling back to playing content in a new tab instead"),g(e)):p(e);break;case c.NewTab:g(e)}},s.removeContent=function(e){r&&r.remove()};function p(e){r=i.create("LightboxDisplayer"),r.activate(e,s.defaultLightboxSize(),s.getContentTypeName(),s.needsNewTabButton(),s.createContentElement,g)}function g(e){i.get("CommonUtils").isValidUrl(e.Url)?(o.deprecatedRaiseEvent(u.EVENTS.LoadingContentInNewTab),a(kf("Opening content in new tab. Url: {0}",e.Url)),window.open(e.Url,"_blank")):a(kf("Content url is invalid: {0}",e.Url))}function h(e){throw"activateContentInWidget is unimplemented"}s.getLightboxSize=function(){return r.getSize()},d.apply(null,arguments)}function Ba(){var e,t,n,r,o=this,a=null,s="VideoParameters",u=420,l=315;function c(s){Sa.extend(o,Ra,s),a=s.lib,e=s.vendorName,t=s.videoId,r=s.content,n=i.get("Logger").wrapCustomerLog(f)}o.getContentTypeName=function(){return"video"},o.createContentElement=function(e){return d(e)},o.needsNewTabButton=function(){return!1},o.defaultLightboxSize=function(){return{width:u,height:l}};function d(n){var o=p(n);if("html5video"==e){var a="";a+=h();var s=mtjQuery("<video controls "+a+' src="'+r.Url+'"></video>');return o.indexOf("autoplay")>-1&&s.attr("autoplay",1),s}var u=kf("[{0} {1}]{2}[/{3}]",e,o,t,e),l=i.get("BBCodeParser").parse(u),c=mtjQuery(l);return c}function p(e){var t=i.get("SettingsValuesRetriever").getSettingsValue(e.Settings,s,"");return t=g(t,e),t+=' wmode="opaque"'}function g(e,t){e=e.replace(/&quot;/gi,'"'),e=e.replace(/((width|height)="[^\\"]+)"/gi,"");var n=h();return e+=" "+n}function h(){var e=o.getLightboxSize(),t=kf('width="{0}" height="{1}"',e.width,e.height);return t}c.apply(null,arguments)}function Ua(){var e,t=this,n=null,r=900,o=500;function a(r){Sa.extend(t,Ra,r),n=r.lib,e=i.get("Logger").wrapCustomerLog(f)}t.getContentTypeName=function(){return"article"},t.createContentElement=function(e){return s(e)},t.needsNewTabButton=function(){return!0},t.defaultLightboxSize=function(){return{width:r,height:o}};function s(e){if(!i.get("CommonUtils").isValidUrl(e.Url))return;
var n=t.getLightboxSize(),r='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',o=i.get("Mustache").to_html(r,{width:n.width,height:n.height,url:encodeURI(e.Url)}),a=mtjQuery(o);return a}a.apply(null,arguments)}i.register("AbPermutationManager").asCtor(Va).dependencies("ClientStorageManager,EndUsersManager,AbPermutationManagerServerCaller, AbTestingEventCollectorCaller, AbCurrentPermutationProvider, LibDestroyer, Logger");function Va(t,n,r,i,o,a,s){var u,l,c,d=this,p="ABTesting",g="wm-ABPer",f="wm-frcd",h="wm-force-permutation",m=!1,v=31536e4;function S(){u=s.wrapCustomerLog(p)}d.setPermutations=function(e,t){l=e,c=t},d.getPermutations=function(){return l},d.initGetPermutation=function(e,t){y(l,c,e,function(e){o.setCurrentPermutation(e),t(e)})},d.getPermutation=function(){return o.getCurrentPermutation()},d.getPermutationById=function(e){for(var t=0;t<l.length;t++)if(l[t].PermutationId==e)return l[t];return!1};function E(e,t){return f+"-"+e+"-"+t}function T(e){return g+"-"+e}function y(e,r,s,l){var c=parseInt(t.getData(h));if(!isNaN(c))return o.setCurrentPermutation(c),u("Using debug permutation from 'wm-force-permutation' key: "+c,1),void l(c);if(!e)return void l(-1);var d=n.getEndUserGuid(!0);if(d===!1)return u("WalkMe ABTesting - Cannot retrieve end user. Stopping execution",1),void a.removeWalkMe("AbTesting - Cannot fetch EndUser",{sendLog:!0});var p,g=T(d),f=null!=s,S=_(e,r),y=I(g,S);if(void 0!=y&&!f)return o.setCurrentPermutation(y),u("using permutation from storage: "+y,1),void l(y);if(f){m=!0;var w=C(d,s,y);if(!w)return u("using permutation from activation rule: "+s,1),o.setCurrentPermutation(s),void l(s);u("got permutation from activation rule: "+s,2),p=s}else p=P(e),u("permutation was drawn: "+p,1);u("sending permutation id to server: "+p,2);var A=r?r.PermutationId:void 0;b(d,p,S,A,f,function(e){u("server returned permutation id : "+e,2),u("saving permutation in storage : "+e,3),t.saveData(g,e,v);var n;if(f){u("Activation rule was used.",2);var r=E(d,s);t.saveData(r,1,v),n=p}else n=e;o.setCurrentPermutation(n),u("Final permutation: "+n,1),i.postEvent(f),l(n)})}function C(e,n,r){if(r==n)return!1;var i=E(e,n);return 1!=t.getData(i)}function I(n,r){var i=parseInt(t.getData(n));if(!isNaN(i)){if(e.inArray(i,r)>-1)return u("permutation exists in storage: "+i,1),i;u("permutation exists in storage but was out of date: "+i,1)}return void u("no valid permutation exists in storage",2)}function b(e,t,n,i,o,a){r.sendPermutationToServer(e,t,n,i,o,a,w)}function w(){u("WalkMe ABTesting - Error when saving end-user permutation. Removing WalkMe",1),a.removeWalkMe("AbTesting - Cannot fetch EndUser Permutation",{sendLog:!0})}function _(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].PermutationId);return t&&n.push(t.PermutationId),n}function P(e){for(var t=0,n=Math.random(),r=0;r<e.length;r++)if(t+=e[r].Percentage,t>=n)return e[r].PermutationId;return e[e.length-1].PermutationId}S.apply(null,arguments)}i.register("AbCurrentPermutationProvider").asCtor(Wa);function Wa(){var e=this;e.setCurrentPermutation=r,e.getCurrentPermutation=n;var t=-1;function n(){return t}function r(e){t=e}}i.register("AbPermutationManagerServerCaller").asCtor(Ga).dependencies("RecorderServerManager, WmAjax, HostData, AuditSourceManager, UserGuidContainer");function Ga(e,t,n,r,i){var o=this,a=1e4;function s(){}o.sendPermutationToServer=function(o,s,u,l,c,d,p){var g=t.execute({url:e.get()+"/AbTesting/SaveEndUserPermutation",dataType:"jsonp",data:{endUser:o,walkmeUserGuid:i.getUserGuid(),source:r.get(),permutationId:s,isForcedPermutation:c,availablePermutationsSerialized:Cf(u),browser:n.browser.string,os:n.os.name,timeout:a,defaultPermutation:l}});g.success(function(e){"error"===e?p():d(e)}),g.error(function(e,t,n){p()})},s.apply(null,arguments)}i.register("AbTestingEventCollectorCaller").asCtor(Ha).dependencies("Consts, EventCollectorEventSender, Logger");function Ha(e,t,n){var r=this;r.postEvent=i;function i(r){try{var i={type:e.EVENT_SENDER_EVENT_APPS.AbTesting,reason:o(r)};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Draw,i)}catch(a){n.error(a)}}function o(t){var n=t?e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.ActivationRule:e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.Draw;return n}}i.register("UserAgent").asFunction(function(e){return e.navigator.userAgent}).asProto(),i.register("HostData").asFunction(ja).dependencies("win");function ja(t){var n=i.create("UserAgent",t),r=t.document,o="Firefox",a="Edge",s=function(e){var t=n.substring(e).indexOf(".");return n.substring(e,e+t)},u=function(){var e,t,i,u;if((u=n.indexOf("MSIE"))!=-1)e="IE",t=s(u+5);else if(n.indexOf("Trident")!=-1&&(u=n.indexOf("rv:"))!=-1)e="IE",t=s(u+3);else if((u=n.indexOf("Edge/"))!=-1)e=a,t=s(u+5);else if((u=n.indexOf("Chrome"))!=-1)e="Chrome",t=n.substring(u+7,n.lastIndexOf(" "));else if(/Firefox\/(\S+)/.test(n))e=o,t=RegExp.$1;else if(u=n.indexOf("Safari")!=-1)e="Safari",/Version\/(\S+)/.test(n)&&(t=RegExp.$1);else if((u=n.indexOf("Opera"))!=-1)if(e="Opera",/Version\/(\S+)/.test(n))t=RegExp.$1;else{var l=Math.max(n.lastIndexOf(" "),n.lastIndexOf("/"));t=n.substring(l+1)}else(i=n.lastIndexOf(" ")+1)<(u=n.lastIndexOf("/"))&&(e=n.substring(i,u),t=n.substring(u+1));return{name:e,version:t,string:e+" "+t,documentMode:r.documentMode}},l=function(e,t,n){switch(e){case"lt":return t<n;case"lte":return t<=n;case"gt":return t>n;case"gte":return t>=n;default:return t==n}},c=function(e,t){var n=u();if("IE"!=n.name)return!1;if(!e)return!0;return l(t,n.version,e)},d=function(e,t){if("android"!=T().name.toLowerCase())return!1;if(!e)return!0;var n=p();if(!n)return!1;return l(t,n,e)};function p(){var e=n.match(/android\s([0-9\.]*)/i);return!!e&&e[1]}var g=function(e,t,n){var i=u();if("IE"!=i.name)return!1;if(!e)return!0;var o=n&&n.ownerDocument||r,a=o.documentMode;return a||("BackCompat"==o.compatMode?a=5:"7"==i.version&&(a=7)),l(t,a,e)},f=function(e,t,n,r){return r?c(e,t)&&g(e,t,n):c(e,t)||g(e,t,n)},h=function(e){return f(e,"lt")},m=function(e){return g(5,null,e)},v=function(){return u().name==o};function S(){return u().name==a}var E=[{n:"Android",os:"Android"},{n:"Linux",os:"Linux"},{n:"X11",os:"UNIX"},{n:"iPad",os:"iOS"},{n:"iPod",os:"iOS"},{n:"iPhone",os:"iOS"},{n:"Mac",os:"MacOS"},{n:"Win",os:"Windows"}],T=function(){for(var e,t=0;t<E.length;t++){var r=E[t].n;if(n.indexOf(r)!=-1){e=E[t].os;break}}return e||(e="Unknown"),{name:e}},y=function(){try{var n=e(t);return{height:n.height(),width:n.width()}}catch(r){return null}};function C(){return t.location.href}function I(){var e=[t.location.protocol,"//",t.location.host,t.location.pathname].join("");return e}function b(){return r.title}function w(){return/android|ipad|android.+mobile|blackberry|iemobile|ip(hone|od)|phone|symbian|windows (ce|phone)/i.test(n||t.navigator.vendor||t.opera)}return{browser:u(),getUrl:C,getUrlWithoutQueryString:I,getPageTitle:b,os:T(),isIE:f,isIEOlderThan:h,isIEDoc:g,isIEBrowser:c,isQuirksMode:m,getWinSize:y,isMobile:w,isAndroid:d,isFirefox:v(),isEdge:S}}function Ya(){var e,t,n,r,o,a,s,u,l,c=this,d="ABTesting",p={};function g(c){t=c.deployablesGoalManager,r=c.experiments,e=c.lib,a=c.getEndUserGuid,o=i.get("Logger").wrapCustomerLog(d),u=c.commonEvents,n=new da({lib:e,serverAddress:c.serverAddress,getPermutationId:c.getPermutationId,getEndUserGuid:c.getEndUserGuid,getAuditSource:c.getAuditSource,storageManager:c.storageManager,userGuidContainer:c.userGuidContainer}),s=i.get("Consts"),l=i.get("ArrayUtils")}var f=function(e){var t=e.GoalType==s.DEPLOYABLE_TYPE.AbExperiment,r=m(e.Id),i=t||r;if(!i)return;var u=a(),c=n.syncRetrieveCompletedGoals(u),d=l.inArray(e.Id,c)==-1;if(!d)return;o("Experiment Goal was completed! Goal ID:"+e.Id+", Goal Name : "+e.Name,1),h(u,e);var p=t;p||v(e)};function h(e,t){n.updateGoalCompleted(e,t.Id)}function m(e){return void 0!=p[e]}function v(e){var t=p[e.Id],n={goal:{Id:e.Id,GoalType:s.DEPLOYABLE_TYPE.AbExperiment,RelatedObjectId:t,Name:e.Name},identifier:e.identifier,interactionGuid:e.interactionGuid};u.raiseEvent(s.EVENTS.AbExperimentLinkedGoalReached,n)}function S(e,t){for(var n=[],r=[],i=0;i<e.Goals.length;i++){var o=e.Goals[i];l.inArray(o.Id,t)>-1?n.push(o):r.push(o)}e.Goals=r,e.CompletedGoals=n}function E(e){for(var t=0;t<r.length;t++){var n=r[t];S(n,e)}}function T(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.Goals.length;i++){var o=r.Goals[i];t.push(o.Id),1==o.IsLinkedGoal&&(p[o.Id]=r.Id)}}var y=!1;this.startWatching=function(e){if(y)return;y=!0;var s=[];if(T(r,s),0==s.length)return o("No AbTesting goals were defined"),void(e&&e());t.onGoalCompleted(f);var l=a(),c=n.syncRetrieveCompletedGoals(l);c?(o("Completed goals data exists. Starting goals watch"),u.raiseEvent("ABTestingGoalsFetched"),C(c,e)):(o("No completed goals data exists locally. Fetching from server"),n.asyncRetrieveCompletedGoals(l,s,function(t){o("Completed goals data recieved. Starting goals watch"),u.raiseEvent("ABTestingGoalsFetched"),C(t,e)},function(){o("WalkMe ABTesting - Error when fetching end-user goals. Removing WalkMe",1),i.get("LibDestroyer").removeWalkMe("AbTesting - Cannot fetch EndUser Goals",{sendLog:!0})}))},c.isGoalReached=function(e){for(var t=n.syncRetrieveCompletedGoals(a()),r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};function C(e,n){E(e);for(var i=0;i<r.length;i++){var a=r[i];o("Start watching Experiment goals. ExperimentID : "+a.Id,2),t.startWatchingDeployable(a,void 0)}n&&n()}g.apply(null,arguments)}i.register("PopupNotificationsService").asCtor(za).dependencies("SiteConfigManager, OldBalloonNotifier, WalkthrusModule, PopupBalloonDisplayer, LibDestroyer, SettingsValuesRetriever, BBCodeParser");function za(t,n,r,i,o,a,s){var u=this;u.showFlowFailedToStartPopup=l,u.showWalkthruFailedToStartPopup=c;function l(e){var n=t.get(),r=n.TutorialCantPlayText;d(n,r,!0)}function c(e){var t=r.getSiteConfigByTutorialId(e.Id),n=a.getSettingsValue(e.Settings,"cantPlayAlert",t.TutorialCantPlayText);d(t,n,!1)}function d(e,t,r){var i=e.BalloonSettings,o=r||g(i),a=p(i,t,o,!0);o?f(a):n.showPopupOldBalloon(e,i,tutorial,a)}function p(e,t,n,r){var i=n?"14px":"21px";return t=s.parse(t),"<h1 class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' style='CSS-RESET font-family: "+e.Font+";color: "+e.HeaderColor+"; font-size: "+i+"; border: none; margin: 10px; word-wrap: break-word;'>"+t+"</h1>"}function g(e){return"v3"==e.BalloonVersion||"vm1"==e.BalloonVersion}function f(t){var n={popupStepButtons:[{id:0,name:"OK",action:7}]},r=e("<div></div>");r.append(t);var a=!0;i.showSpecialPopupBalloon({htmlContent:r},446,n,function(e){mtjQuery(".walkme-action-ok",e).click(function(){o.releaseBalloons()})},a)}}i.register("OldBalloonNotifier").asCtor(Qa).dependencies("BalloonUtils, Consts, CommonUtils, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder, TopContainerProvider, CurrentWalkthruData");function Qa(e,t,n,r,o,a,s,u,l,c){var d=this;d.showPopupOldBalloon=S,d.closePopup=m,d.removeOverlayIfNotInSequencedPopup=v;var p,g,f="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function h(){}function m(e){g&&g.clear(),v(),r.destroyDivWithIframes(p,e),p=null}function v(){var e=c.getCurrentWalkthru();if(!e||!e.CustomField1||!e.CustomField1.indexOf("sequencedPopups")==-1)return void r.removeOverlay();var t=c.getCurrentStep(),n=c.getNextStep(),o=c.getPreviousStep(),a=t&&1==t.Type&&n&&1==n.Type,s=t&&1==t.Type&&o&&1==o.Type,u=!(a||s)||!i.get("StepUtils").isSpotlightStep(t);u&&r.removeOverlay()}function S(e,t,n,r){r+="<div style='float: right'>",r+=T(e,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",t),r+="</div>",E(e,t,"first-step-not-available",r,420,n.Id,y)}function E(n,i,s,c,d,h,m){var v='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+s+" mt-custom-popup-"+s+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+d+'px">'+c+"</div>";v=v.replace(/CSS-RESET/g,f),v=v.replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+h);var S=l.getTopContainer();S.append(v),p=mtjQuery("#walkme-popup-body",S),p.css({position:"fixed","z-index":t.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),e.setStyleForBalloon(p,i,!1);var E=0;mtjQuery.each(mtjQuery("[width], [style*=width]",p),function(e,t){mtjQuery(t).width()>E&&(E=mtjQuery(t).width())}),p.width()<E&&p.css("width",E+"px"),a.centerElementInPage(p,!1),g=o.playSetInterval(function(){a.centerElementInPage(p,!0)},1e3),host.isQuirksMode()||framesetsUtils.shouldHandlePageAsFramesets()||r.displayOverlay(2147483630,!0),p.fadeIn("slow"),u.addButtonEventsToBalloon(p,{objectId:h,type:t.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),m&&m(p)}function T(t,n,r,i){i=e.fixConfiguration(i),i.ButtonBorderColor=i.ButtonBorderColor||"#6c84a6";var o="rtl"==t.Direction?"right":"left";e.fixGradientColorsInConfiguration(i,"ButtonBgColor"),e.fixGradientColorsInConfiguration(i,"ButtonBgColor2");var a=i.ButtonBgColor,u=i.ButtonBgColor2,l=i.ButtonShadowWidth,c=i.BalloonButtonRadius,d=a!=u,p="CSS-RESET "+(d?"background:-moz-linear-gradient(top, "+a+", "+u+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+a+"), color-stop(100%,"+u+"));background:-webkit-linear-gradient(top, "+a+" 0%,"+u+" 100%);background:-o-linear-gradient(top, "+a+" 0%,"+u+" 100%);background:-ms-linear-gradient(top, "+a+" 0%,"+u+" 100%);background:linear-gradient(to bottom, "+a+" 0%,"+u+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+a+'", endColorstr="'+u+'",GradientType=0 );':"background-color:"+a+";")+"border: 1px solid "+i.ButtonBorderColor+";color:"+i.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+o+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+c+"px;-webkit-border-radius:"+c+"px;border-radius:"+c+"px;";return a!=u&&host.isIE()&&(p+="border-radius: 0px;"),d&&pr.isGradientUsingFilter(p)&&(p+="background: url("+s.get()+"/player/resources/images/spacer.gif) repeat;"),p=p.replace(/CSS-RESET/g,f),"<button class='"+n+"' type='button' style='"+p+"'>"+r+"</button>"}function y(e){mtjQuery(".walkme-custom-first-step-not-available-ok-button",e).click(function(){m()})}h()}i.register("ClickAuditEventSender").asCtor(Ka).dependencies("DeployablesManagerFactory, EventSender,Logger, ReportInitiatorMapper");function Ka(e,t,n,r){var i=this;i.send=a;function o(){}function a(e){try{var r=t.getEventAppByDeployable(e.auditType),i={type:e.initiatorType,objectId:e.initiatorId},o=u(r,e.auditType,e.objectId,i,e.additionalParams),a=s(r);t.postEvent(a,o)}catch(l){n.error(l)}}function s(e){switch(e){case t.EVENT_APPS.Launcher:return t.EVENT_TYPES.Click;default:return t.EVENT_TYPES.Play}}function u(n,r,i,o,a){var s,u,p=e.get(r),g={};if(p){var f=p.getById(i);f&&(s=f.Name,g=p.getActionData(f),u=p.isWithAction(f))}switch(n){case t.EVENT_APPS.Launcher:return l(n,i,s,g);case t.EVENT_APPS.Content:return d(n,i,s,o,u,a);default:return c(n,i,s,o,u)}}function l(e,t,n,r){return{type:e,oId:t,oName:n,aType:r.Type,aAppType:r.aAppType,aoId:r.ItemId,aoName:r.Name,pId:"-1"}}function c(e,t,n,i,o){return{type:e,oId:t,oName:n,pInit:r.map(i),pId:"-1",oIsWithAction:o}}function d(e,t,r,i,o,a){var s=c(e,t,r,i,o,a);return a&&null!=a.contentType?s.oType=a.contentType:n.error(null,"No contentType was not provided for resouce params"),s}o.apply(null,arguments)}i.register("HtmlElementsDataProvider").asCtor(qa).dependencies("Consts, inArrayFunc");function qa(t,n){var r=this;r.isInput=a,r.isSelectInput=s;var i;function o(){i=["input","textarea","select"]}function a(e){return u(e,i)}function s(e){return u(e,["select"])}function u(t,r){var i=e(t),o=i.prop("nodeName");return o&&n(o.toLowerCase(),r)!=-1}o.apply(null,arguments)}function Xa(e,t,n,r,i){var o=this;function a(e,t){var n=r.timing.map,i=n[t]-n[e];return i}o.run=function(){if(!n.isFeatureEnabled("addLoadingTime"))return;var r=a("snippetStartInit","walkmeReadyEnd");t.raiseEvent(e.EVENTS.WalkMeTotalLoadingTime,{totalLoadTime:r});var o="WalkMe total loading time was "+r+" ms";i.customerLog(o,3,e.EVENTS.WalkMeTotalLoadingTime)}}i.register("LoadingTimeInformer").asCtor(Xa).dependencies("Consts, CommonEvents, FeaturesManager, WmInternals, Logger"),i.register("FindElementDebugFlags").asInstance({color:!1,print_scores:!1,print_find:!1}),i.register("FindElementDebugger").asCtor(Ja).dependencies("FindElementDebugFlags, ArrayUtils, Logger, Consts");function Ja(e,t,n,r){}var $a=function(){function e(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}var t;!function(e){function t(t,n){return e.$.fnHelpers?e.$.fnHelpers[n](t):t[n]}function n(e){return t(e,"parentNode")}function r(t,n){n=n||[],t=t||document;for(var o=e.$("iframe,frame",t).toArray(),a=0;a<o.length;a++){var s=i(e.$(o[a]))[0];n.push(s),s&&(n=r(s,n))}return n}function i(t){if(void 0!=t){if(t=t[0],void 0==t)return e.$();var n;try{n=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:[],n=e.$(n)}catch(r){return pr.handleCrossDomainError(r),e.$()}return n}}e.$,e.p,e.setJQuery=function(t){e.$=t,e.p=t},e.Va=function(e){return e=e.tagName,e.toUpperCase&&(e=e.toUpperCase()),e},e.Yb=t,e.parentNode=n,e.childNodes=function(e){return t(e,"childNodes")},e.ca=function(e,t){for(var r=n(e[0]),i=t&&t[0]&&n(t[0]),o=[];r&&1==r.nodeType&&r!=i;r=n(r))o.push(r);return o},e.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},e.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},e.Ub=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.qa=function(t,n,r){t=e.filter(t.split(n),function(t){return e.$.trim(t)}),t=e.map(t,function(e){return e.split(r)}),n={};for(var i=0;i<t.length;i++){var o=t[i],a=e.$.trim(o[0]),s="";o[1]&&(s=e.$.trim(o[1])),n[a]=s}return n};var o=function(){function e(){this.start=this.now()}return e.prototype.now=function(){return(new Date).getTime()},e.prototype.C=function(){return this.now()-this.start},e}();e.Ob=o,e.B=function(){return new o},e.Vb=function(){for(var e=0;e<arguments.length;e++);for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.Xb=function(e){return void 0!=e&&0<e.length},e.getAllElements=function(t,n){t=t||document,n=n||"*";var i=r(t,[t]);return e.$(n,i)},e.Wb=r,e.r=i,e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),n=e[0],i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},e.ha=function(){return(new Date).getTime()%1e9}}(t||(t={}));var n,r=function(){function e(e,t){this.wb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.wb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}(),i=function(){function e(){}return e.prototype.u=function(e,t){return f.J(e,t,f.l)},e.prototype.N=function(e){return new a.ScoredElement(e,this.c)},e.prototype.n=function(e){this.c=e},e.prototype.L=function(e,t){return t(e)},e.prototype.Db=function(e){e.D=this.c&&e&&this.c.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.c.D:e&&e.ignoreWalkmeElementsSelector?t.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),o=function(n){function r(){n.apply(this,arguments),this.R={},this.A=[],this.ea={},this.h={}}return e(r,n),r.prototype.n=function(e){this.Na(e),n.prototype.n.call(this,e)},r.prototype.ob=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},r.prototype.Na=function(e){if(this.h={},0<this.A.length){var t=!1;this.c&&(t=!this.ob(this.c.m,e.m));for(var n=0;n<this.A.length;n++){var r=this.R[this.A[n]];r.totalScore=0,r.details=[],r.ba=!1,r.n(e,t)}}},r.prototype.t=function(e){return e&&e[0]&&e[0][r.U]||null},r.prototype.w=function(e,t){e&&e[0]&&(e[0][r.U]=t)},r.prototype.v=function(){return++r.Q},r.prototype.N=function(e){var t=null,r=this.t(e);return void 0!==r&&(t=this.R[r]),t||(t=n.prototype.N.call(this,e),r=this.v(),this.w(e,r),this.R[r]=t,this.A.push(r)),t},r.prototype.u=function(e,t){var r,i=f.Kb(e);return this.h.hasOwnProperty(i)||(r=n.prototype.u.call(this,e,t),this.h[i]=r),this.h[i]},r.prototype.eb=function(e){var t=this.c.m;if(t&&0<t.length){var n=this.t(t);n||(n=this.v(),this.w(t,n)),n&&(e+="__"+n)}return e},r.prototype.L=function(e,t){var r=this.eb(e),i=this.ea[r]||null;return i||(i=n.prototype.L.call(this,e,t),this.ea[r]=i),i},r.Q=t.ha(),r.U="__WM_SUSPECT_KEY__",r}(i);!function(e){function n(){for(var e=0;e<arguments.length;e++);return a.$.apply(a.$,arguments)}function r(e){if(1==e.count())return e;var t=f.O(e,1,i,!0);return-1==t?e:e.slice(t+1)}function i(e){return-1!=t.inArray(e,s)}function o(r,a,s,u,l,c){var d=f.O(r,0,i,!1);if(0>d)return s;var p=r.slice(0,d+1);if(r=r.slice(d+1),d=n(e.Jb,l||s),0==d.length)return null;return d=1==d.length?d[0]:t.min(d,function(e){return e=f.La(n(e),a,n(s),u),f.J(e,p,f.l).o()}),(c||s&&0<s.length&&l&&0<l.length)&&n(d).data("iframe",c||s),o(r,a,n(d),u,t.r(n(d)))}var s=["IFRAME","FRAME"];e.Jb=s.join(":mt_visible,")+":mt_visible",e.ga=s.join(","),e.getXpathUpToIframe=r,e.vb=function(a){var s,u=a.a,l=f.Ja(u.customContext,u.h,u.D),c=f.Fb(u.xpathArrayOriginal,l),d=u.xpathArrayOriginal.slice(c);s=u.h;var p=u.customContext,g=u.D,h=u.ignoreWalkmeElementsSelector;if(1==d.count())s=p;else{var m=f.O(d,1,i,!0);if(-1==m)s=p;else{var v=t.r(p),S=(v=v&&0<v.length?v:null)?p:p?p.data("iframe"):null,m=d.slice(0,m+1);(h=f.da(m,v||p,S,h))&&h.is(":mt_visible")||(h=null),h||(h=o(d,s,p,g,v,S)),s=h}}g=(p=(s=s||u.customContext)&&s.is(e.ga))?t.r(s):s&&0<s.length?s:void 0,s={context:s,nb:p,contents:g},u.m=s.contents,a.setSearchOptions(a.f&-257),l&&l.count()&&u.m==u.customContext&&(0>=c&&a.setSearchOptions(256|a.f),u.xpathArrayToIframe=f.removeHtmlAndBodyFromXpathArray(r(d)));var E;return s&&(E=s.nb?s.context:n(s.context).data("iframe")),E}}(n||(n={}));var a;!function(e){function a(){}e.$,e.p,e.setJQuery=function(n){e.$=n,e.p=n,t.setJQuery(n),l.setJQuery(n)},e.setLogFunc=function(e){a=e};var g=function(){function e(e,n){var i=this;this.totalScore=0,this.width=new r(this,function(){return i.element.width()}),this.height=new r(this,function(){return i.element.height()}),this.parents=new r(this,function(){return t.ca(i.element,i.c.m)}),this.Ga=new r(this,function(){return t.ca(i.element)}),this.text=new r(this,function(){return p.extractFirstOccuringText(i.element)}),this.F=function(e){return this.G.hasOwnProperty(e)||(this.G[e]=this.element.attr(e)),this.G[e]},this.xpath=new r(this,function(){return f.Ma(i.element,i.parents.get(),i.c.h,i.c.D)}),this.element=e,this.details=[],this.G={},this.n(n)}return e.prototype.n=function(e,t){this.c&&t&&(this.parents.clear(),this.xpath.clear()),this.c=e},e}();e.ScoredElement=g;var h=function(){return function(){this.elements=[],this.losers=void 0}}();e.RecognitionResult=h,g=function(){function e(e){this.attributes={},this.complexAttributes={},this.Y("style",";",":"),this.Y("class"," ",null),e&&(this.h=new f.Da)}return e.prototype.Y=function(e,n,i){var o=this;this.complexAttributes[e]=new r(this,function(){return t.qa(o.attributes[e],n,i)})},e}(),e.ElementDescription=g,function(e){e[e.Efficient=0]="Efficient",e[e.Verbouse=1]="Verbouse",e[e.Fast=2]="Fast",e[e.VerbouseDebug=3]="VerbouseDebug"}(e.sa||(e.sa={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(e.AlgorithmSensitivity||(e.AlgorithmSensitivity={})),function(e){e[e.IGNORE_ALL=4294967295]="IGNORE_ALL",e[e.IGNORE_NOTHING=0]="IGNORE_NOTHING",e[e.IGNORE_ID=1]="IGNORE_ID",e[e.IGNORE_POSITION=2]="IGNORE_POSITION",e[e.IGNORE_NAME=4]="IGNORE_NAME",e[e.IGNORE_TEXT=8]="IGNORE_TEXT",e[e.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",e[e.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",e[e.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",e[e.IGNORE_XPATH=256]="IGNORE_XPATH",e[e.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",e[e.IGNORE_CLASS=1024]="IGNORE_CLASS",e[e.IGNORE_STYLE=2048]="IGNORE_STYLE",e[e.IGNORE_HREF=4096]="IGNORE_HREF",e[e.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR"}(e.SearchOptions||(e.SearchOptions={}));var m=function(){function e(e){this.list=[],this.f=e}return e.prototype.Ha=function(e){return this.list.push(e),this},e.prototype.i=function(e,t,n){var r=!1;return void 0!==n&&(r=0<(this.f&n)),r||this.list.push(new c.Ca(e,t)),this},e.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},e}(),g=function(){function r(e,t){this.f=0,this.Z=1,this.mode=e,this.g=t?new o:new i}return r.prototype.Cb=function(e){this.a=e},r.prototype.setSearchOptions=function(e){this.f=e},r.prototype.setAlgorithmSensitivity=function(e){this.Z=e},r.prototype.recognize=function(e){var r,i=new h;3==this.mode&&(i.debug={minimumScore:this.M(),screeners:null,measurements:[],eliminationDetails:[]}),this.Cb(e),this.g.Db(e);var o=n.vb(this);return this.g.n(e),i.debug&&(r=t.B()),e=this.Ta(),i.debug&&(r=r.C(),i.debug.measurements.push({name:"Find Suspects",timeTaken:r}),r=t.B()),e=this.Bb(e,i),i.debug&&(r=r.C(),i.debug.measurements.push({name:"Screen Suspects",timeTaken:r}),r=t.B()),e=this.xb(e),i.debug&&(r=r.C(),i.debug.measurements.push({name:"Score Suspects",timeTaken:r})),i.elements=this.Sa(e),i.losers=this.Ra(i,e),i.context=o,i},r.prototype.Ta=function(){var t,n=this;if(this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0])return this.a.preDefinedSuspects;return t=this.a.customSelector?this.a.customSelector:this.e(8192)&&this.a.autoQuery?this.a.autoQuery:this.a.elementType.replace(":","\\:"),this.a.visibilityFilter&&(t+=this.a.visibilityFilter),this.a.ignoreWalkmeElementsSelector&&(t+=":not("+this.a.ignoreWalkmeElementsSelector+")"),a("Finding suspects using : "+t),this.g.L(t,function(t){return e.$(t,n.a.m)})},r.prototype.Pa=function(t){for(var n=new u(t.length),r=0;r<t.length;r++){var i=e.$(t[r]),i=this.g.N(i);n.push(i)}return n},r.prototype.Bb=function(e,t){var n=this.Pa(e),r=this.cb(e.length);t.debug&&(t.debug.screeners=r);for(var i=new u(e.length),o=0;o<n.count;o++){var a=n.getItem(o),s=this.Ab(a,r,t),l=1&s;2&s||!l||i.push(a)}return i},r.prototype.fb=function(){var e,t={32:function(){return[new d.V(1,2)]},64:function(){return[new d.q("id",1,0),new d.q("name",1,0)]},128:function(){return[new d.q("data-walkmeid",1,0)]}};for(e in t)if(this.e(e))return t[e]();return null},r.prototype.Ya=function(e){var t=[],n=new d.q("src",1,0);return t.push(n),n=new d.V(1,0),!this.e(8)&&t.push(n),void 0!=this.a.attributes.id&&(n=new d.va(!this.e(1)&&0<this.a.attributes.id.length,(!this.e(161))),t.push(n)),n=new d.q("name",1,0),!this.e(4)&&t.push(n),n=new d.Fa(1,0,this.g),2e3>e&&!this.e(256)&&t.push(n),n=new d.ua(this.a,1,0),2e3<=e&&!this.e(256)&&t.push(n),t},r.prototype.cb=function(e){var t=this.fb();return t||(t=this.Ya(e)),t},r.prototype.Ab=function(e,t,n){for(var r=0,i=0;i<t.length;i++){var o=t[i].screen(e,this.a),r=r|o;if(2==o){n.debug&&n.debug.eliminationDetails.push({element:e.element,screenerName:t[i].name});break}}return r},r.prototype.xb=function(e){var n=this.bb(),r=t.reduce(n,function(e,t){return e+t.weight},0),i=e,o=new u(e.count);e=new u(e.count);for(var a=0,s=this.M(),l=0;l<n.length&&!(2==this.mode&&1==i.count&&a>s);l++){for(var c=n[l],d=0;d<i.count;d++){var p=i.getItem(d);if(r+p.totalScore<a&&0==this.mode?(p.ba=!0,o.push(p)):e.push(p),!p.ba||0!=this.mode){var g=t.B(),f=c.d(p,this.a),g=g.C();p.totalScore+=f,p.details.push({scorerName:c.name,scorerWeight:c.weight,relativeScore:f/c.weight,absoluteScore:f,timeTaken:g}),p.totalScore>a&&(a=p.totalScore)}}r-=c.weight,r=Math.max(r,0),c=i,i=e,e=c,e.clear()}return i.$a()},r.prototype.e=function(e){return!!(this.f&e)},r.prototype.bb=function(){var e=new m(this.f);return e.Ha(new s.ya(this.a,this.f)).i(new c.Ba,3,8).i(new c.Ea(this.g),1,256).i(new c.Aa,.7,512).i(new c.T("class"," ",null),.7,1024).i(new c.T("style",";",":"),.5,2048).i(new c.ta("href","#"),3,4096).sort().i(new l.xa,1,2),e.list},r.prototype.Sa=function(e){for(var t=0,n=0;n<e.length;n++)var r=e[n].totalScore,t=r<=t?t:r;if(r=[],t>this.M())for(n=0;n<e.length;n++)e[n].totalScore==t&&r.push(e[n]);return r},r.prototype.qb=function(){return 1==this.mode||3==this.mode},r.prototype.Ra=function(e,t){if(this.qb()){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},r.prototype.M=function(){var e={2:0,1:1.45,0:3},t=e[this.Z];return void 0==t&&(t=e[1]),t},r}();e.ElementRecognizerSession=g}(a||(a={}));var s,u=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(0>e||e>=this.count)throw"Out of range exception";return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw"FastArray exceeded it's limits";this.data[this.count]=e,this.count++},e.prototype.$a=function(){return this.data.splice(0,this.count)},e}();!function(e){var t={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},n={id:1,name:4,title:8},r=function(){function e(e,t){this.S=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.Ka()}return e.prototype.Ka=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Eb(e)&&this.P(this.description.attributes[e])&&(t+=this.K(e),this.S.push(e));return t},e.prototype.Eb=function(e){var t=0!==this.K(e);return!(n.hasOwnProperty(e)&&n[e]&this.options)&&t},e.prototype.d=function(e,t){for(var n=0,r=0;r<this.S.length;r++){var i=this.S[r],o=t.attributes[i],a=e.F(i);this.P(a)&&this.P(o)&&a==o&&(n+=this.K(i))}return n},e.prototype.P=function(e){return void 0!=e&&null!=e&&""!=e},e.prototype.K=function(e){return t.hasOwnProperty(e)?t[e]:0},e}();e.ya=r}(s||(s={}));var l;!function(e){e.$,e.p,e.setJQuery=function(t){e.$=t,e.p=t};var t=function(){function t(){this.name="PositionScorer"}return t.prototype.d=function(e,t){return this.yb(e,t)},t.prototype.yb=function(e,t){var n=t.centeredElementWidth,r=0;if(n){var r=t.relativeLeft,i=this.ab(e),r=Math.abs(r-i),n=n/5;if(r>(30>n?30:n))return 0;n=1-r/20,r=t.absY,i=e.element.offset().top,r=1-Math.abs(r-i)/20,i=.3,.9<n&&(i=.9),r=n*(1-i)+r*i,r=0>r?0:r}return r},t.prototype.ab=function(e){var t=this.Ua(e),t=t?t.offset().left:0;return e.element.offset().left-t},t.prototype.Ua=function(t){t=t.Ga.get();for(var n=null,r=t.length-1;0<=r;r--)try{if(this.jb(t[r])){var i=e.$(t[r]),o=e.$(window).width(),a=i.width(),s=i.offset().left,u=o-a;if(0<u&&u/2==s){n=i;break}if(0>u&&u==s){n=i;break}if(this.lb(i)){n=e.$(i);break}}}catch(l){}return n},t.prototype.jb=function(t){var n=e.$(t),r=n.data("mt_isElementFixedWidth");if(1==r)return!0;if(0==r)return!1;return t=this.ib(t),n.data("mt_isElementFixedWidth",t),t},t.prototype.lb=function(t){var n=e.$(t),r=n.data("mt_isElementMarginAuto");if(1==r)return!0;if(0==r)return!1;
return t=this.kb(t),n.data("mt_isElementMarginAuto",t),t},t.prototype.ja=function(t,n){for(var r=!1,i=0;i<n.length&&(r=n[i],!(r=e.$(t).is(e.$(r))));i++);return r},t.prototype.ib=function(e){return!!this.ka(e.style)||this.ja(e,this.Xa())},t.prototype.Gb=function(e){return 0==e.indexOf("0")},t.prototype.Qa=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},t.prototype.la=function(t){if(t){var n=e.$.trim(t.margin),r=e.$.trim(t.marginLeft);if(t=e.$.trim(t.marginRight),(n=this.Gb(n)&&this.Qa(n))||"auto"==r&&"auto"==t)return!0}return!1},t.prototype.kb=function(e){return!!this.la(e.style)||this.ja(e,this.Za())},t.prototype.Za=function(){return void 0==this.H&&(this.H=[],this.fa(this.pa)),this.H},t.prototype.pa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.pa(n.styleSheet):this.la(n.style)&&this.H.push(n.selectorText)}}catch(r){}},t.prototype.fa=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},t.prototype.oa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.oa(n.styleSheet):this.ka(n.style)&&this.I.push(n.selectorText)}}catch(r){}},t.prototype.Xa=function(){return void 0==this.I&&(this.I=[],this.fa(this.oa)),this.I},t.prototype.ka=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},t}();e.xa=t}(l||(l={}));var c;!function(n){var r=function(){function e(e,t){this.zb=e,this.weight=t,this.name=e.name}return e.prototype.d=function(e,t){var n=this.zb.d(e,t);return this.weight*n},e}();n.Ca=r,r=function(){function e(e){this.attributeName=e,this.name="Attribute Scorer : "+e}return e.prototype.d=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},e}(),n.Lb=r,r=function(t){function n(e,n){t.call(this,e),this.Ib=n}return e(n,t),n.prototype.d=function(e,n){return n.attributes[this.attributeName]==this.Ib?0:t.prototype.d.call(this,e,n)},n}(r),n.ta=r,r=function(){function e(e){this.name="XpathScorer",this.g=e}return e.prototype.d=function(e,t){var n=e.xpath.get(),n=this.g.u(n,t.xpathArrayToIframe);if(n.b>f.l)return 0;return n=1-.1*(n.b+n.k/10),0>n?0:n},e}(),n.Ea=r,r=function(){function e(){this.name="ShapeProportionScorer"}return e.prototype.d=function(e,t){if(!this.mb(e.element))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r?(n=this.ia(n,t.width)/2+this.ia(r,t.height)/2,.6<=n?n:0):0},e.prototype.ia=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},e.prototype.mb=function(n){return n=n.prop("tagName"),-1!==t.indexOf(e.Hb,n)},e.Hb="DIV TABLE TR TD TBODY TH".split(" "),e}(),n.Aa=r,r=function(){function e(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.ub=t,this.gb=n}return e.prototype.d=function(e,n){if(!n.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var r=n.complexAttributes[this.attributeName].get(),i=t.qa(e.element.attr(this.attributeName),this.ub,this.gb);return 1==this.Oa(r,i)?1:0},e.prototype.Oa=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return n=0,0<i&&(n=r/i),n},e}(),n.T=r,r=function(){function e(){this.name="TextScorer"}return e.prototype.d=function(e,t){return t.text&&e.text.get()==t.text?1:0},e}(),n.Ba=r}(c||(c={}));var d;!function(t){!function(e){e[e.Indifferent=0]="Indifferent",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(t.za||(t.za={}));var n=function(){function e(e,t){this.ma=e,this.tb=t,this.isEqual=e===t}return e.prototype.j=function(){throw"childScreen must be overriden by subclass"},e.prototype.screen=function(e,t){return this.isEqual?this.ma:this.j(e,t)?this.ma:this.tb},e}();t.Nb=n;var i=function(){function e(){}return e.prototype.na=function(){throw"rejectFn must be overriden by subclass"},e.prototype.X=function(){throw"acceptFn must be overriden by subclass"},e.prototype.screen=function(e,t){return this.na(e,t)?2:this.X(e,t)?1:0},e}();t.Mb=i,i=function(t){function n(e,n){t.call(this),this.name="IdScreen",this.hb=e,this.pb=n,this.aa=new o("id",0,0)}return e(n,t),n.prototype.na=function(e,t){if(this.pb){var n=e.F("id");return!(!n||30<=n.length)&&!this.aa.j(e,t)}},n.prototype.X=function(e,t){if(this.hb)return this.aa.j(e,t)},n}(i),t.va=i;var o=function(t){function n(e,n,r){t.call(this,n,r),this.attrName=e,this.name="AttributeScreen["+this.attrName+"]"}return e(n,t),n.prototype.j=function(e,t){var n=e.F(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},n}(n);t.q=o,i=function(t){function n(e,n,r){t.call(this,e,n),this.Ia=r,this.name="XpathScreen"}return e(n,t),n.prototype.j=function(e,t){var n=e.xpath.get(),r=f.l;return this.Ia.u(n,t.xpathArrayToIframe).b<=r},n}(n),t.Fa=i,i=function(t){function n(e,n,i){t.call(this,n,i);var o=e.xpathArrayOriginal;this.rb=new r(this,function(){return f.da(o,void 0,void 0,e.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}return e(n,t),n.prototype.j=function(e){var t=this.rb.get();return t&&t[0]==e.element[0]},n}(n),t.ua=i,n=function(t){function n(e,n){t.call(this,e,n),this.name="TextScreen"}return e(n,t),n.prototype.j=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},n}(n),t.V=n}(d||(d={}));var p,g=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();!function(e){function n(i){var o="";if(3===i.nodeType||4===i.nodeType){o=i.nodeValue,i=[160,10,13,9];for(var s=new g,u=0;u<o.length;u++)0>t.indexOf(i,o.charCodeAt(u))&&s.append(o.charAt(u).toLowerCase());if(o=s.toString().replace(/ /g,""),o=a.$.trim(o),o=o.substring(0,e.sb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(o)){for(i=-1,s=o.length,u=new g;++i<s;){var l=o.charAt(i);/[\uD800-\uDBFF]/.test(l)||/[\uDC00-\uDFFF]/.test(l)?u.append(r(l)):u.append(l)}o=u}}else if(1===i.nodeType&&!i.tagName.match(/^(script|style)$/i))for(i=t.childNodes(i),s=0,u=i.length;s<u&&!(o=n(i[s]));s++);return o}function r(e){e=e.charCodeAt(0).toString(16).toUpperCase();var t=2<e.length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}e.sb=70;var i;!function(e){e[e.ElementNode=1]="ElementNode",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection"}(i||(i={})),e.extractFirstOccuringText=function(e){return n(e[0])},e.Tb=n}(p||(p={}));var f;return function(e){function i(e,t){function n(n){return o(t,n,function(t){return t==e},!1)}for(var r=n(0),i=[];0<=r&&r<t.count()-1;)i.push(t.slice(0,r+1)),r=n(r+1);return i}function o(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function s(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(c(e,i,n,r)),e=i;return o=o.reverse(),l(o,n)}function u(e,n,r,i){var o=(e=e[0])&&t.parentNode(e);r=r&&r[0];for(var a=[];e&&1==e.nodeType&&e!=r;e=o,o=t.parentNode(e))a.push(c(e,o,n,i));return a=a.reverse(),l(a,n)}function l(e,t){return t?new S(e):new v(e)}function c(e,t,n,r){return n?n.Wa(e,t,r):p(e,t,r)}function d(e,t,n){return new r(null,function(){return p(e,t,n)})}function p(e,n,r){var i=1;if("HTML"!=t.Va(e)){n=t.childNodes(n);for(var o=0;o<n.length&&n[o]!=e;o++){var a=n[o];a.tagName==e.tagName&&0>t.inArray(a,r)&&i++}}return{tag:e.tagName.toUpperCase(),index:i}}function f(e){return!e||0>=e.length?null:1==e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1==e.get(0).nodeType?e:null}function h(e,r,i,o){if(o=o||[],r=r||a.$(document),0<r.find(e).length)e.data("iframe",i),o.unshift(r);else{i=o.length,r=r.find(n.ga);for(var s=0;s<r.length;s++){var u=r.eq(s);if(o=h(e,t.r(u),u,o),o.length>i){a.$(o[0]).data("iframe",u),o.unshift(u);break}}}return o}function m(e){for(var n=["HTML","BODY"],r=0;r<e.count()&&-1<t.inArray(e.get(r).tag,n);r++);return e.slice(r)}var v=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e]},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Pb=v;var S=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e].get()},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Qb=S,e.l=1,e.wa=1;var E=function(){function e(e,t,n){this.k=this.s=this.b=0,this.b=e,this.s=t,this.k=n}return e.prototype.clone=function(){return new e(this.b,this.s,this.k)},e.prototype.o=function(){return this.b+this.s/4+this.k/10},e.max=function(){return new e(1e4,0,0)},e.o=function(e){return e.o()},e}();e.Rb=E,e.J=function(n,r,i){function o(n,r,a,s,u){if(Math.abs(r-s)>i||u.b>i)return E.max();if(0==r||0==s)return u=u.clone(),u.b+=Math.max(r,s,0),u.b>i?E.max():u;var l,c=n.get(r-1),d=a.get(s-1),p=0;if(c.tag!==d.tag)p=e.l,l=E.max();else{if(c.index===d.index)return o(n,r-1,a,s-1,u);p=e.wa}var g=u.clone();g.b+=p;var p=o(n,r-1,a,s,g),f=o(n,r,a,s-1,g);return l||(c=Math.abs(c.index-d.index),g=u.clone(),0<c&&(g.s++,g.k+=c),l=o(n,r-1,a,s-1,g)),t.min([p,f,l],E.o)}return o(n,n.count(),r,r.count(),new E(0,0,0))},e.da=function(e,n,r,i){var o=e.count();if(0>=o)return null;n=a.$(n||document),i=i?":not("+i+")":"";for(var s=0;s<o;s++){var u=e.get(s);if(n=n.children(u.tag+i).eq(u.index-1),-1!=t.inArray(u.tag,["IFRAME","FRAME"])&&o>s+1&&(0<n.length&&(r&&n.data("iframe",r),r=n),n=t.r(n)),!n||0==n.length||!n.get(0)){n=null;break}}return n&&0<n.length&&r&&n.data("iframe",r),n},e.Fb=function(n,r){if(!r||0>=r.count())return 0;for(var o=r.get(r.count()-1).tag,a=i(o,n),o=E.max().o(),s=2*e.l,u=o,l=[],c=0;c<a.length;c++){var d=a[c],p=e.J(d,r,s).o();p<u?(u=p,l=[d]):p==u&&l.push(d)}return a=0,u<o&&(a=t.min(l,function(e){return Math.abs(r.count()-e.count())}).count()),a},e.O=o,e.Sb=s,e.La=u;var T=function(){function e(){this.ra={}}return e.prototype.Wa=function(e,t,n){var r=null,i=this.t(e);return void 0!==i&&(r=this.ra[i]),r||(r=d(e,t,n),t=this.v(),this.w(e,t),this.ra[t]=r),r},e.prototype.t=function(t){return t&&t[e.W]||void 0},e.prototype.w=function(t,n){t&&(t[e.W]=n)},e.prototype.v=function(){return++e.Q},e.Q=t.ha(),e.W="__WM_XPATH_ENTRY_KEY__",e}();e.Da=T,e.Ma=function(e,t,n,r){return e=s(e[0],t,n,r),e=m(e)},e.Ja=function(e,n,r){var i=f(e);if(!i||0>=i.length)return new v([]);return i=h(i),i=t.reduce(i,function(e,t){return e.concat(u(t,n,null,r).xpathArray)},[]),l(i.concat(u(e,n,null,r).xpathArray),n)},e.removeHtmlAndBodyFromXpathArray=m,e.Kb=function(e){for(var t=new g,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},e.xpathStringToArray=function(e){var t=[];return a.$.each(e.split("/"),function(e,n){if(0!=e){var r=n.indexOf("[");t[e-1]={tag:n.substring(0,r),index:parseInt(n.substring(r+1,n.length-1))}}}),new v(t)}}(f||(f={})),{GitCommit:"81b9156",GitTag:"v1.0.1",GitNumber:"123",ElementRecognition:a,TempUtils:t,ContextUtils:n,TextUtils:p,XpathLib:f}}();i.register("ElementFinder").asCtor(Za).dependencies("JQueryElementFinder, StepUtils, PositionHelper, HtmlDecoder, FindElementPluginManager,FESessionManager, Logger, Consts, FindElementDebugFlags, FindElementDebugger,PageComparerCacheManager, PopupStepElementProvider, WalkthrusModule, CommonUtils, DOMSessionManager");function Za(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h){var m,v=this;function S(){$a.ElementRecognition.setJQuery(e),m=s.wrapCustomerLog(u.FEATURES_LOGS.ElementFinder)}function E(e){var t={0:$a.ElementRecognition.AlgorithmSensitivity.Low,1:$a.ElementRecognition.AlgorithmSensitivity.Medium,2:$a.ElementRecognition.AlgorithmSensitivity.High};return t[e]}function T(e,t){var n=$a.ElementRecognition.SearchOptions.IGNORE_NOTHING,r=[],i=a.isFeatureEnabled("forceIgnorePosition");e.IsIdentifyByText&&r.push("IDENTIFY_TEXT"),e.IsIgnoreText&&r.push("IGNORE_TEXT"),e.IsIgnoreId&&(r.push("IGNORE_ID"),r.push("IGNORE_NAME")),(i||0!=e.IgnorePosition)&&r.push("IGNORE_POSITION"),e.IsIdentifyById&&r.push("IDENTIFY_ID_AND_NAME"),e.IgnoreShapeProportion&&r.push("IGNORE_SHAPE_PROPORTION"),e.IgnoreClass&&r.push("IGNORE_CLASS"),e.IgnoreStyle&&r.push("IGNORE_STYLE"),e.IgnoreHref&&r.push("IGNORE_HREF"),t["data-walkmeid"]&&r.push("IDENTIFY_WALKME_ID"),a.isFeatureEnabled("noAutoQuery")||r.push("USE_AUTO_SELECTOR");for(var o=0;o<r.length;o++)n|=$a.ElementRecognition.SearchOptions[r[o]];return n}v.getFindElementLib=function(){return $a};function y(e,t,n,o){var s=!a.isFeatureEnabled("fe_no_xpath_cache"),u=new $a.ElementRecognition.ElementDescription(s);u.preDefinedSuspects=o,u.elementType=C(t.elementXpath.toLowerCase()),u.width=t.elementWidth,u.height=t.elementHeight,u.relativeLeft=t.relativeLeft,u.absY=t.elementAbsY,u.centeredElementWidth=t.centeredElementWidth,u.xpathArrayOriginal=$a.XpathLib.xpathStringToArray(t.elementXpath.toUpperCase()),u.xpathArray=$a.XpathLib.removeHtmlAndBodyFromXpathArray(u.xpathArrayOriginal),u.xpathArrayToIframe=$a.XpathLib.removeHtmlAndBodyFromXpathArray($a.ContextUtils.getXpathUpToIframe(u.xpathArrayOriginal)),u.text=t.textArray&&t.textArray.length>0?i.decodeHtml(t.textArray[0],["&",'"',"'",">","<"]):"",u.autoQuery=t.autoQuery?i.decodeHtml(t.autoQuery,['"']):null,t["data-walkmeid"]?u.customSelector="[data-walkmeid='"+t["data-walkmeid"]+"']":(void 0==n||n)&&(u.visibilityFilter=r.getVisibleFilter(e));var l={elementClass:"class",elementId:"id",elementName:"name"};u.attributes={};for(var c in l)u.attributes[l[c]]=t[c];for(var d in t)!t.hasOwnProperty(d)||u.attributes.hasOwnProperty(d)||l[d]||(u.attributes[d]=t[d]);return u}function C(e){var t=e.split("/"),n=t[t.length-1],r=n.split("[")[0];return r}v.wrapSession=function(e,t){return a.wrapSession(e,t)},v.startSessionForEditor=function(e,t){return a.startSessionForEditor(e,t)},v.endSessionForEditor=function(){return a.endSessionForEditor()},v.recognizeElement=function(e,t,n,r,i){var s=a.getSession(r);f.isDefined(e.StepSensitivity)&&s.setAlgorithmSensitivity(E(e.StepSensitivity)),s.setSearchOptions(T(e,t));var u=y(e,t,n,i);o.extendAdaptedSettings(e,u);var l=s.recognize(u);return l},v.getWinner=function(e){var t=e&&e.elements&&e.elements.length&&e.elements[0];return t};function I(t,n,r,i,o,a){var s=v.recognizeElement(t,n,r,o,a),u=v.getWinner(s),l=u&&u.element&&u.element.length&&u.element[0];return u&&i&&(i.score=u.totalScore,i.details=u.details,i.losers=s.losers),l&&e(l).data("iframe",s.context),l}v.findElement=function(r,i,a,s,u){var l;if(n.isPopupStep(r))return p.get();if(n.isActionStep(r))return g.getAction(r).isValid();if(!1===o.extendOriginalSettings(r))return!1;if(m(r,5),d.isEnabled()&&d.getPageKey(r)){var c=d.compareCurrent(r);if(!c.match)return!1}if(r.IsJquerySelector){r.ElementDescription.extended=r.ElementDescription.extended||{},r.ElementDescription.extended.elementIframe=null;var f=t.findElements(r,i);if(l=f&&f.length&&f[0])return l=e(l),r.ElementDescription.extended&&l.data("iframe",r.ElementDescription.extended.elementIframe),l;return!1}if(l=o.findElement(r,a),void 0!==l)return l?e(l):l;return l=I(r,r.ElementDescription,i,a,s,u),!!l&&e(l)},v.findElementAsync=function(e,t,n,r,i){return h.measure(function(){return v.findElement(e,t,n,r,i)})},S.apply(this,arguments)}i.register("FindElementPlugins").asFunction(function(){return[]}),i.register("FindElementPluginManager").asCtor(es).dependencies("FindElementPlugins");function es(e){this.registerPlugin=function(t){e.push(t),t&&t.init&&t.init(i.get("ElementFinder"))},this.findElement=function(e,n){var r;return t(function(t){return r=t.findElement&&t.findElement(e,n),void 0!==r}),r},this.extendDescription=function(e,n){var r=If(n);return t(function(t){t.extendDescription&&t.extendDescription(e,r)}),Cf(r)},this.extendOriginalSettings=function(e){try{t(function(t){t.extendOriginalSettings&&t.extendOriginalSettings(e)})}catch(n){return!1}return!0},this.extendAdaptedSettings=function(e,n){t(function(t){t.extendAdaptedSettings&&t.extendAdaptedSettings(e,n)})};function t(t){for(var n=!1,r=0;!n&&r<e.length;r++)n=t(e[r])}}i.register("FESessionManager").asCtor(ts).dependencies("TimerManager,FeaturesManager");function ts(e,n){var r,i,o,a,s=this;function u(){d()}s.isFeatureEnabled=function(e){if(n.isReady())return n.isFeatureEnabled(e);if(t.findElementFeatures)return!!t.findElementFeatures[e];return!1},s.getSession=function(e){return p()||c(e),r},s.wrapSession=function(e,t){var n=l();h(t,n);var r=e&&e();return m(n),r},s.startSessionForEditor=function(e,t){var n=l();return s.setAutoCloseSessionFlag(t),h(e,n)},s.endSessionForEditor=function(){var e=l();if(e)return;return d(),!0},s.setAutoCloseSessionFlag=function(e){void 0!==e&&null!==e&&(a=e)};function l(){return s.isFeatureEnabled("fe_no_session_cache")}function c(e){e=e||0,r=new $a.ElementRecognition.ElementRecognizerSession(e,o),o=!1,f()}function d(){i=0,r=null,o=!1,a=!0}function p(){return r&&i>0}function g(){i<0&&(i=0)}function f(){a&&e.libSetTimeout(d,0)}function h(e,t){if(t)return;return p()||o||(o=!0),g(),i+=1,!0}function m(e){if(e)return;i-=1,r&&i<=0&&d()}u.apply(this,arguments)}i.register("PageComparerCacheManager").asCtor(ns).dependencies("SimpleNLP,win,FeaturesManager");function ns(e,t,n){var r,o,a,s,u,l,c=this,d=!1;function p(){}function g(){return!r&&i.has("PlatformPageIdentifier")&&(r=i.get("PlatformPageIdentifier")),r}c.init=function(){if(d||!g())return d;d=!0;var n=function(){return t.location},i=function(t){return e.isPhraseHuman(t)},o=[new r.GeneralCapture(i),new r.SFPlatformCapture(n)];return a=new r.PlatformPageCapture(o),s=r.ComparersFactory.createSalesForce(),c.resetCollection(),d},c.isEnabled=function(){return d},c.captureCurrentPage=function(){return a.capture()},c.resetCollection=function(){u=new r.PageDescriptionCollection(s)},c.addSerializedPage=function(e,t){var n=r.PageDescription.deserialize(e);u.add(n,t)},c.updateCurrentPage=function(){l={},o=a.capture()},c.getPageKey=function(e){var t=e.ElementDescription.pageKey;if(c.getPageDesc(t))return t},c.getPageDesc=function(e){return u.getPage(e)},c.getComparer=function(){return s},c.compareCurrent=function(e){var t=c.getPageKey(e);return l[t]||(l[t]=s.compareCurrent(o,c.getPageDesc(t),u)),l[t]},c.editorApi={isEnabled:c.isEnabled,updateCurrentPage:c.updateCurrentPage,addSerializedPage:c.addSerializedPage,resetCollection:c.resetCollection,captureCurrentPage:function(){var e=c.captureCurrentPage(),t=s.compareDescriptions(e,e);if(t&&t.match)return e.serialize()}},p.apply(this,arguments)}i.register("ElementTextExtractor").asCtor(rs);function rs(){var e=this,t=70;e.getElementTextArray=function(e,t){var r=[];return n(e,r,[3],t),r};function n(e,t,o,a){if(o[0]>0){var s=!0;if(a&&a(e)===!1&&(s=!1),s)if(!e||3!==e.nodeType&&4!==e.nodeType){if(e&&1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(var u=e.childNodes,l=0,c=u.length;l<c;l++)n(u[l],t,o,a)}else{var d=r(e.nodeValue);d=d.toLowerCase(),d=i(d),d&&(t.push(d),o[0]--)}}}function r(e){return e=e.replace(new RegExp(String.fromCharCode(160),"g")," "),e=e.replace(new RegExp(String.fromCharCode(10),"g"),""),e=e.replace(new RegExp(String.fromCharCode(13),"g"),""),e=e.replace(new RegExp(String.fromCharCode(9),"g"),""),e=e.replace(new RegExp(" ","g"),""),e=mtjQuery.trim(e),e=e.substring(0,t)}function i(e){if(!o(e))return e;for(var t=-1,n=e.length,r="";++t<n;){var i=e.charAt(t);if(!/[\uD800-\uDBFF]/.test(i)&&!/[\uDC00-\uDFFF]/.test(i)){r+=i;continue}r+=a(i)}return r}function o(e){var t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return null!=t.exec(e)}function a(e){var t=e.charCodeAt(0),n=t.toString(16).toUpperCase(),r=n.length>2,i="\\"+(r?"u":"x")+("0000"+n).slice(r?-4:-2);return i}}i.register("ElementLastKeeper").asCtor(is).asSingleton().dependencies("TimerManager, FeaturesManager, CommonEvents, Consts");function is(t,n,r,i){var o=this,a=".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front:visible",s=!0,u=[];function l(){}function c(){if(s){for(var e=[],n=0;n<u.length;n++)try{p(u[n],n)}catch(r){e.push(n)}for(var n=e.length-1;n>=0;n--)u.splice(n,1)}u.length&&t.libSetTimeout(c,3e3)}function d(e){return e.nextAll(a).length>0}function p(e,t){var n=e.parent(),o=n.contents().length;if(!d(e)&&g(e[0])+t+1!=o){var a=document.activeElement;e.appendTo(n),r.raiseEvent(i.EVENTS.ElementLocationChanged,{activeElement:a,element:e})}}function g(e){for(var t=0;e=e.previousSibling;)t++;return t}o.addElement=function(e){if(n.isFeatureEnabled("noElk"))return;u.length||t.libSetTimeout(c,3e3),u.push(e)},o.removeElement=function(t){if(n.isFeatureEnabled("noElk"))return;var r=e.inArray(t,u);r!=-1&&u.splice(r,1)},o.setState=function(e){if(n.isFeatureEnabled("noElk"))return;s=e},l.apply(null,arguments)}i.register("AnalyticsManager").asCtor(os).dependencies("ClientStorageManager, Logger, WmAjax, EventSender, PetaServerNameManager, AuditingEnabledIndicator");function os(e,t,n,r,i,o){var a,s="wm-ueuT",u="uniqueEndUser",l=this;function c(){a=t.error,t.customerLog("Analytics manager was created",3,u)}l.auditUniqueEndUser=function(n,r,i){try{var o=e.getData(s)!=i;o&&(p(n,r,i),t.customerLog("auditUniqueEndUser: sent unique user request. userGuid="+n+" permutationId="+r+"endUserGuid="+i,3,u),e.saveData(s,i,d()))}catch(l){a(l,"Failed while auditing unique end users")}};function d(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0),n=Math.floor((t.getTime()-e.getTime())/1e3);return 0==n&&(n=1),n}function p(e,a,s){if(!o.isEnabled())return!0;try{r.postEvent(r.EVENT_TYPES.Loaded,{type:r.EVENT_APPS.Walkme})}catch(u){t.error(u)}var l=i.get();if(!l)return!0;var c=l+"/Analytics/UniqueEndUser",d={userId:e,permutationId:a,endUserGuid:s};n.execute({url:c,data:d})}c.apply(null,arguments)}i.register("ClickAuditManager").asCtor(as).dependencies("DeployablesManagerFactory, ServerDataSenderManager, Logger, HostData, GuidGenerator, DeployableTypes, EventSender, WalkMeInfo, ClickAuditEventSender, ReportInitiatorMapper, AuditingEnabledIndicator, Consts, CommonUtils");function as(e,t,n,r,i,o,a,u,l,c,d,p,g){var f=this;f.SendClickAudit=y,f.SendWidgetOpen=C,f.SendShoutOutAudit=I,f.SendInteractionAudit=b,f.init=A;var h,m,v,S,E;function T(){E=n.wrapCustomerLog(s)}function y(e,t,n,r){t=g.isDefined(t)?t:-1;var i,o;if(n?(i=n.type,o=n.hasOwnProperty("objectId")?n.objectId:n.id):i=p.STEP_PLAY_INITIATOR_ENUM.NONE,void 0===e||!d.isEnabled())return!0;var a=P(),s={auditType:e,objectId:t,auditGuid:a,playInitiator:i,initiatorId:o};return h.sendData(s),l.send({auditType:e,objectId:t,initiatorType:i,initiatorId:o,additionalParams:r}),a}function C(e){if(!d.isEnabled()||!m)return!0;var t={userId:u.getUserGuid(),fullUrl:r.getUrl(),source:u.getEnvironmentId(),browser:r.browser.string,os:r.os.name,permutationId:u.getPermutationId(),endUserGuid:u.getEndUserGuid(),auditGuid:P()};m.sendData(t);try{var i;return e&&(i=c.map(e)),a.postEvent(a.EVENT_TYPES.Open,{type:a.EVENT_APPS.Player,pInit:i})}catch(o){return n.error(o),!0}}function I(t,r,i,s){if(!d.isEnabled())return!0;var u={shoutOutId:t,deployableType:r,clickType:i,auditGuid:P(),relatedClickAuditGuid:s};v.sendData(u);try{var l=e.get(o.ShoutOut),c=l.getById(t);if(w(i)){var p=l.getActionData(c);return a.postEvent(a.EVENT_TYPES.Click,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,aType:p.Type,aAppType:p.aAppType,aoId:p.ItemId,aoName:p.Name,pId:"-1"})}if(_(i))return a.postEvent(a.EVENT_TYPES.Close,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,pId:"-1",reason:i})}catch(g){return n.error(g),!0}}function b(e,t,n,r){if(!d.isEnabled())return!0;var i={deployableId:e,deployableType:t,interactionType:n,auditGuid:P(),relatedClickAuditGuid:r};S.sendData(i)}function w(e){return e===p.SHOUTOUT_CLICK_TYPE.Action}function _(e){return e===p.SHOUTOUT_CLICK_TYPE.Close||e===p.SHOUTOUT_CLICK_TYPE.XButton||e===p.SHOUTOUT_CLICK_TYPE.RemindMeLater}function P(){return(new Date).getTime()+"-"+i.generateGuid()}function A(){h=t.register("ca",{actionUrl:"/Statistics/AddClickAudits",prefixForStorage:"ca",sendingThreshold:1,dataType:"click audit",dataIdFieldName:"Id",requestParamsFunc:O}),m=t.register("wo",{actionUrl:"/Statistics/AddWidgetOpens",prefixForStorage:"wo",sendingThreshold:1,dataType:"widget open",dataIdFieldName:"Id",requestParamsFunc:function(e){return{serizlizedWidgetOpens:Cf(e)}}}),v=t.register("ac",{actionUrl:"/Statistics/AddShoutOutAudits",prefixForStorage:"ac",sendingThreshold:1,dataType:"shoutOut click",dataIdFieldName:"Id",requestParamsFunc:O}),S=t.register("di",{actionUrl:"/Statistics/AddInteractionAudits",prefixForStorage:"di",sendingThreshold:1,dataType:"deployable interaction",dataIdFieldName:"Id",requestParamsFunc:N})}function k(t){var n,r,i=t[0],a=i.auditType,s=i.objectId;if(void 0!=a&&void 0!=s&&(n=e.get(a),n&&n.getById&&(r=n.getById(s),r&&r.userGuid)))return r.userGuid;var l=t[0].shoutOutId;if(void 0!=l&&(n=e.get(o.ShoutOut),n&&n.getById&&(r=n.getById(l),r&&r.userGuid)))return r.userGuid;return u.getUserGuid()}function O(e){var t=k(e),n=r.browser.string,i=r.os.name,o=u.getEnvironmentId(),a=u.getEndUserGuid(),s=u.getPermutationId(),l=r.getUrl();return{serizlizedClickAudits:Cf(e),userGuid:t,fullUrl:l,source:o,browser:n,os:i,permutationId:s,endUserGuid:a}}function N(e){var t=k(e),n=r.browser.string,i=r.os.name,o=u.getEnvironmentId(),a=u.getEndUserGuid(),s=u.getPermutationId(),l=r.getUrl();return{serizlizedInteractionAudits:Cf(e),userGuid:t,fullUrl:l,source:o,browser:n,os:i,permutationId:s,endUserGuid:a}}T.apply(null,arguments)}i.register("JQueryElementFinder").asCtor(ss).dependencies("CommonUtils, PositionHelper, IsInEditor, FrameContentsProvider, ElementUtils, HtmlDecoder, Logger, StringUtils, JQuerySelectorRunner");function ss(t,n,r,i,o,a,s,u,l){var c=this,d=["parent","children","next"];function p(e){return"object"==typeof e&&null!==e}function g(e,t,n){var r;return r=p(e)?S(e,t,n):l.run(e,n)}function f(e,t,n){var r=void 0;if(void 0!=e&&(r=g(e,t,n),r.length>0)){var a=o.getElementTagName(r[0]);"IFRAME"==a||"FRAME"==a?(t&&(t.ElementDescription.extended.elementIframe&&r.data("iframe",t.ElementDescription.extended.elementIframe),t.ElementDescription.extended.elementIframe=r),r=i.getFrameContents(r)):t&&(t.ElementDescription.extended.elementIframe=!1)}return r}function h(e){if(void 0!=e&&mtjQuery.inArray(e,d)>-1)return!0;return!1}function m(t,n){var r;try{r=t[n]().eq(0)}catch(i){s.error(i,"runJqueryMethod : element has no method named '"+n+"'"),r=e()}return r}function v(t,n){if(void 0!=t.method){var r;r=p(t.method)?t.method.name:t.method,h(r)?n=m(n.eq(0),r):(s.customerLog("Unknown jQuery Selector Method : '"+r+"'"),n=e())}return n}function S(t,n,r){try{var i=f(t.context,n,r),o=g(t.element,n,i);return o=v(t,o)}catch(a){return s.customerLog("jQuery Element Finder: Could not parse input"),e()}}function E(t){if(t=e.trim(t),!u.startsWith(t,"{")){var n=new Object;return n.element=t,n}try{return If(t)}catch(r){return null}return null}c.findElementsByjQueryComplexSelector=function(e){e=a.decodeHtml(e,["&",'"',"'",">"]);var t=E(e),n=S(t);return n},c.getjQueryElementText=function(e){var n=c.findElementsByjQueryComplexSelector(e);return t.checkElementText(n)},c.findElements=function(e,t){if(!e.JquerySelector)return[];var i=e.JquerySelector;i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"),i=i.replace(/&gt;/gi,">");var a,c="context:",d=",element:",p="func:";if(u.startsWith(i,c)){var g=i.substr(c.length),f=g.substr(g.indexOf(d)+d.length);g=g.substr(0,g.indexOf(d));var h=l.run(g);if(!(h.length>0))return[];"IFRAME"==o.getElementTagName(h[0])?e.ElementDescription.extended.elementIframe=h:e.ElementDescription.extended.elementIframe=!1,h=h.contents(),a=l.run(f,h),s.customerLog("jQuery selector found these elements:",5),s.customerLog(C,5)}else if(u.startsWith(i,p))try{var m=i.substr(p.length),v=mtjQuery.parseJSON(m),y=T(v);y.iframe&&(e.ElementDescription.extended.elementIframe=mtjQuery(y.iframe));var C=mtjQuery(y.result);return(void 0==t||t)&&(C=C.filter(n.getVisibleFilter(e))),s.customerLog("func selector found these elements:",5),s.customerLog(C,5),C}catch(I){return r.get()?(console.log("Using jQuery selector with function raised an exception:"),console.log(I)):(s.customerLog("Using jQuery selector with function raised an exception:"),s.customerLog(I)),[]}else{var b=E(i);a=S(b,e)}return a.length>0&&(void 0==t||t)&&(a=a.filter(n.getVisibleFilter(e))),s.customerLog("jQuery selector found these elements:",5),s.customerLog(a,5),a};function T(e){function t(e,t){for(var n=e.split("."),r=t,i=0;i<n.length;i++)r=r[n[i]];return r}var n={result:null,iframe:null},r=new Array;if(e.params)for(var i=0;i<e.params.length;i++)r.push(e.params[i].value);var o=window;if(e.iframe){if(o=mtjQuery(e.iframe),0==o.length)throw"Iframe not found: "+e.iframe;o=o.contents()[0],o=o.parentWindow||o.defaultView,n.iframe=mtjQuery(e.iframe)}var a=t(e["function"],o);if(!a)throw"Function not found: "+e["function"];var s;if(e["this"]){if(s=t(e["this"],o),!s)throw"'This' not found: "+e["this"]}else s=e["function"].indexOf(".")==-1?null:t(e["function"].substring(0,e["function"].lastIndexOf(".")),o);var u=a.apply(s,r);return n.result=u,n}}i.register("JQuerySelectorRunner").asCtor(us).dependencies("");function us(){var e=this;e.run=t;function t(e,t){return mtjQuery(e,t)}}i.register("AbTasksValidator").asCtor(ls).dependencies("SiteConfigManager, HostData, TodoListManager, UiDataProvider, FeaturesManager");function ls(e,t,n,r,i){var o=this;function a(){}o.shouldTrackAbTasks=function(){var t=parseInt(e.get().TodoListSettings.isActive);if(t&&s())return!0;if(n.hasTaskGoalCompletionCondition())return!0;if(i.isFeatureEnabled("untrack_tasks")&&!t)return!1;return l()};function s(){for(var e=r.uiTasksTree(),t=0;t<e.length;t++)if(u(e[t]))return!0;return!1}function u(e){if("task"==e.type())return!0;var t=e.children();if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++)if(u(t[n]))return!0;return!1}function l(){if(!t.isIEBrowser(9,"lte"))return!0;var e="abTasksIE"+t.browser.version;if(i.isFeatureEnabled(e))return!0;return!1}a.apply(null,arguments)}i.register("ResourceInjector").asCtor(cs);function cs(){var e=this;e.inject=t;function t(e,t){e.append(t)}}i.register("ResourceManager").asCtor(ds).dependencies("Logger, CommonUtils, HostData, win, IsInEditor, CdnServer, ResourceInjector, FeaturesManager, wmjQuerySafe, Mustache");function ds(t,n,r,o,a,s,u,l,d,p){var g,f,h=this,m=[],v="walkme-framesets-fix-id",S="Comic Sans MS",E="QW@HhsXJ",T=50,y=2500,C=function(e,t,n){var r=this;return r.b(n=n||""),r.b("@font-face {"),r.b("\n"+n),r.b("font-family: '"),r.b(r.v(r.f("family",e,t,0))),r.b("';"),r.b("\n"+n),r.b("src: url("),r.b(r.v(r.f("src",e,t,0))),r.b(") "),r.s(r.f("format",e,t,1),e,t,0,69,89,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("format('"),n.b(n.v(n.f("format",e,t,0))),n.b("')")}),e.pop()),r.b(";"),r.b("\n"+n),r.b("font-weight: "),r.b(r.v(r.f("weight",e,t,0))),r.b(";"),r.b("\n"+n),r.b("font-style: "),r.b(r.v(r.f("style",e,t,0))),r.b(";"),r.b("\n"+n),r.b("}"),r.fl()},I=i.get("TimerManager");function b(){g=t.wrapCustomerLog(c),"Edge"==r.browser.name&&(S="Arial"),f={}}h.font=function(i,o,a,s){if(l.isFeatureEnabled("noFonts")||n.isMobileNative())return void(a&&a());if(o&&o.length||(o=e("head")),!o.length)return t.error(null,"cannot inject font - head element does not exist"),void(s&&s());var u=o[0].ownerDocument;if(r.isIEDoc(8,"lte",o[0])&&"widget-font"!=i.name&&!l.isFeatureEnabled("loadAllFonts"))return g("Not loading font '"+i.name+"' (IE7/8), to load all fonts enable the loadAllFonts feature",4),void(a&&a());g("Start loading font '"+i.name+"'",4);var c="wm-font-"+i.id,d=e("#"+c,o);if(d&&d.length)return void x(i,u,a,s);if(f["walkme-"+i.name])return void s();var p=h.getResourcePath(i.url);if(r.isIEDoc(8,"lte",o[0])){if(A(o,i.name))return void x(i,u,a,s);N(i,c,o,p)}else w(i)&&(p=p.concat("_svg")),k(i,c,o,p);var m;m=r.isIEDoc(8,null,o[0])?function(){l.isFeatureEnabled("highPerf")||D(5),
a&&a()}:a,x(i,u,m,s)};function w(e){return _(e)&&P()}function _(e){return"widget-font"==e.name||"lib-font"==e.name}function P(){return r.isAndroid("4.3","lt")&&"Chrome"!=r.browser.name}function A(e,t){for(var n=0;n<e[0].ownerDocument.styleSheets.length;n++)if(e[0].ownerDocument.styleSheets[n][t])return!0;return!1}h.preloadResources=function(t,n){var i;t=t||e("head");for(var o=0;o<n.length;o++){var i=h.getResourcePath(n[o].url);i+=r.isIEDoc(8,null,t[0])?".eot":".js";var a=new Image;a.src=i,a.onload=function(){}}},h.fonts=function(e,t,n,r){var i=e.length,o=!1;if(i||n&&n(),n||r)for(var a=0;a<e.length;a++)h.font(e[a],t,function(){0==--i&&(o?r&&r():n&&n())},function(){o=!0,0==--i&&r&&r()});else for(var a=0;a<e.length;a++)h.font(e[a],t)};function k(t,n,r,i){g("Start loading embeded file for font '"+t.name+"'",4),m.push({name:"walkme-"+t.name,tagId:n,head:r}),e.ajax({type:"GET",url:i+".js",dataType:"script",cache:!0})}h.finishFontLoad=function(e,t){g("finish loading font '"+e+"'",4);for(var n="",r=0;r<t.length;r++)n+=p.to_html(C,{family:e,src:t[r].src,format:t[r].format,weight:t[r].weight,style:t[r].style});var i=O(e);h.injectCss(n,i.tagId,i.head,e,null,!0)};function O(e){for(var t=0;t<m.length;t++)if(m[t].name==e){var n=m[t];return m.splice(t,1),n}}function N(e,t,i,o){g("Start loading eot file for font '"+e.name+"'",4),o+=".eot",r.isIEBrowser(8)&&l.isFeatureEnabled("fixFontsCompatibility")&&(o+="?frame="+n.getFrameIndex(i[0].ownerDocument.parentWindow));var a=p.to_html(C,{family:"walkme-"+e.name,src:o,weight:"normal",style:"normal"});r.isIEBrowser(8)?V(a,t,i):R(a,i,e.name,t)}function D(e){if(!e)return;L(top),I.libSetTimeout(function(){D(e-1)},100)}function L(t){try{var n=e("head",t.document);V("",v,n),I.libSetTimeout(function(){n.find("#"+v).remove()},100)}catch(r){}for(var i=t.frames,o=0;o<i.length;o++)L(i[o])}function x(t,n,r,i){if(!r&&!i)return void g("Stop Tracking font '"+t.name+"' because we don't have success/fail Callback",4);g("Start tracking font '"+t.name+"'",4);var o=e(n.createElement("span")).addClass("walkme-font-tester").important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","font-family":S,"font-size":"250px","line-height":"normal"}).html((t.dummeyText||E)+"a").appendTo(e("body",n).or("html",n)),a=o[0].offsetWidth,s=o[0].offsetHeight,u="walkme-"+t.name;o.important("font-family",u+","+S),F(o,a,s,y,u,r,i)}function F(e,t,n,r,i,o,a){if(!d(e).isSafe())return;var s=5;g("================================================================================",s),g("Tracking font '"+i+"'",s),g("Comparison tester width: "+t+" === "+e[0].offsetWidth,s),g("Comparison tester height: "+n+" === "+e[0].offsetHeight,s),g("================================================================================",s),t===e[0].offsetWidth&&n===e[0].offsetHeight?r<0?(g("Finished with failure tracking font '"+i+"'",4),e.remove(),f[i]=!0,a&&a()):I.libSetTimeout(function(){F(e,t,n,r-T,i,o,a)},T):(g("Finished successfully tracking font '"+i+"'",4),e.remove(),f[i]=!1,o&&o())}h.getResourcePath=function(e){if(e&&e.indexOf("/"))return e;var t=s.get();return e=t+e},h.injectCss=function(e,t,n,r,i,o){M()?R(e,n,r,t,i):V(e,t,n,i,o)},h.refreshContentCss=function(e,t){var n=V(t+" :before,"+t+" :after{content:none !important;}",null,e);I.libSetTimeout(function(){n.remove()},0)},h.emptyStyleSheets=function(){if(!M())return;for(var e=document.styleSheets,t=0;t<e.length;t++)e[t].walkmeToRemove&&(e[t].disabled=!0)};function M(){return!!document.createStyleSheet}function R(e,t,n,r,i){try{B(e,t,n,r,i)||U(e,t,n,r,i)}catch(o){throw g("Cannot inject style sheet"),o}}function B(e,t,n,r,i){var a=o._walkmeInternals;if(a&&a.customInjectStyleSheetFuncs){g("Attempting to use custom CSS Injector");for(var s=0;s<a.customInjectStyleSheetFuncs.length;s++){var u=a.customInjectStyleSheetFuncs[s];"function"==typeof u&&u(e,t,n,r,i)}return!0}return!1}function U(t,n,r,i,o){var a,s=n?n[0].ownerDocument:e("body")[0].ownerDocument;o&&(a=W(o,s));var u=void 0===a?s.createStyleSheet(""):s.createStyleSheet("",a);u.cssText=t,u.owningElement.id=i,u.walkmeToRemove=!0,u[r]=!0}function V(t,n,r,i,o){var s,l=r||e("head");a.get()&&mtjQuery("#"+n,l).remove();var c=e('<style type="text/css" class="walkme-to-remove">'+(o?"":t)+"</style>");if(n&&c.attr("id",n),i&&(s=l.find("#"+i)),s&&s.length>0?s.first().before(c):u.inject(l,c),o){var d=c.prop("styleSheet");d?d.cssText=t:c.append(t)}return c}function W(e,t){for(var n=t.styleSheets,r=0;r<n.length;r++)if(n[r].owningElement.id==e)return r}b.apply(null,arguments)}i.register("IFramesManager").asCtor(ps).dependencies("Logger, TimerManager, FeaturesManager");function ps(t,n,r){var i=this;i.remapTopIframes=f;var o,a,s,u="iframe:not(#walkme-hidden-iframe),frame",l=-1,c=!1,d=[],p=t.wrapCustomerLog("IFramesManager");i.mapIframes=function(){if(T())return void S();c||(S(),g(document,void 0)),c=!0};function g(t,n,r){var i=(new Date).getMilliseconds();if(e(t).find(u).each(function(){var t=h(this,n);t.documentAccessible&&g(e(t.iframe.contentWindow.document),t),r&&v(t)}),void 0==n){var o=(new Date).getMilliseconds(),a=o-i;p("Mapping iframes took "+a+" ms",5)}}function f(){if(T())return;s&&s.clear();var t=(new Date).getMilliseconds();l++;var r=[];e(document).find(u).each(function(){for(var e=!1,t=0;t<o.length;t++)if(o[t].iframe==this){o[t].foundInRemap=l,e=!0;break}e||r.push(this)});for(var i=0;i<o.length;i++)if(o[i].foundInRemap!=l){var a=o[i];m(a.iframe),o.splice(i,1)}for(var i=r.length-1;i>=0;i--)h(r[i],void 0);var c=(new Date).getMilliseconds(),d=c-t;p("Remapping top iframes took "+d+" ms",5),s=n.libSetTimeout(f,1e4)}i.getAll=function(){return o},i.foreachIframe=function(e,t){n(a);function n(r){for(var i=0;i<r.children.length;i++){var o=r.children[i];t&&!o.documentAccessible||(e(o),n(o))}}},i.onIframeLoad=function(e){d.push(e)},i.unbindIframeLoad=function(e){for(var t=d.length-1;t>=0;t--)if(d[t]===e){d.splice(t,1);break}},i.releaseEvents=function(){if(!o)return;for(var e=0;e<o.length;e++)m(o[e].iframe)};function h(t,n){var r={iframe:t,documentAccessible:E(t),children:[]};return n?n.children.push(r):o.push(r),v(r),e(t).on("load.wmIframeManager",function(){r.children=[],E(t)&&(g(e(t.contentWindow.document),r,!0),v(r))}),r.documentAccessible||p("Cross domain iframe detected: "+t.src,4),r}function m(t){try{e(t).off("load.wmIframeManager")}catch(n){}}function v(e){for(var t=d.length-1;t>=0;t--)d[t](e)}function S(){o=[],a={children:o}}function E(e){try{e.contentWindow.document}catch(t){return!1}return!0}function T(){return r.isFeatureEnabled("dontMapIframes")}}i.register("UIChangeTracker").asCtor(gs).dependencies("Lib, SiteConfigManager, HashChangeNotifier, HistoryChangeNotifier, IFrameLoadChangeNotifier,ClickChangeNotifier, AjaxCallsChangeNotifier, UserInputChangeNotifier, ElementsRedrawer,Logger, IFramesManager, TimerManager, WalkMeVisibilityChecker, SettingsValuesRetriever"),i.register("UICT_DEFAULT_THROTTLE_TIME_WINDOW").asInstance(2e3),i.register("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW").asInstance(250);function gs(e,t,n,r,o,a,s,u,l,c,d,p,g,f){var h=this;h.init=_,h.isEnabled=A,h.stop=k,h.bind=N,h.bindPreListener=O,h.unbind=D,h.callListeners=x,h.triggerUIChange=M,h.triggerThrottledUIChange=B,h.isActivated=H,h.getElementRedrawerType=j,h.getSpaConfigValue=Y,h.getSpaConfigIntValue=Q,h.getCurrentIndex=P,h.triggerUIChangeAPI=z;var m,v,S=[],E=[],y=!1,C=!1,I=0,b={};function w(){m=[n,r,o,a,s,u],v=c.wrapCustomerLog(T)}function _(){if(h.triggerUIChangeAPI=M,C&&k(),C=!0,!h.isEnabled())return;d.mapIframes();for(var e=[],t=0;t<m.length;t++)m[t].start(),m[t].isActivated()&&e.push(m[t].getSpaTypeName());e.length>0?(y=!0,v("UIChangeTracker - Creating UIChangeTracker for types: "+e.join(", ")+". Using the following redrawer: "+l.getRedrawerName(),2)):v("UIChangeTracker - Did not activate",2)}function P(){return I}function A(){return g.isWalkMeVisible()}function k(){if(C=!1,!h.isEnabled())return;for(var e=0;e<m.length;e++)m[e].isActivated()&&m[e].stop()}function O(e){E.push(e)}function N(e){S.push(e)}function D(e){L(E,e),L(S,e)}function L(e,t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}}function x(){I++,F(E),F(S),b={}}function F(e){for(var t=e.length-1;t>=0;t--)try{e[t]({uiChangeIndex:I,notifiers:b})}catch(n){}}function M(e){e&&(b[e]=!0),R()}function R(){l.redrawElements()}function B(e){e&&(b[e]=!0),G()}var U=!1,V=!1,W=!1;function G(e){U?W||(V=!0):(R(),U=!0,W=!0,p.libSetTimeout(t,i.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW")),p.libSetTimeout(function(){W=!1},i.get("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW")));function t(){V&&(R(),p.libSetTimeout(t,i.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW"))),U=V,V=!1}}function H(){return y}function j(){return"ElementsRedrawer"}function Y(e,n){var r=n;return t.get()&&t.get().Settings&&t.get().Settings.spaConfig&&(r=f.getSettingsValue(t.get().Settings.spaConfig,e,n)),r}function z(){v("UIChangeTracker - Not triggering UI Change. Wait For WalkMe to Load",2)}function Q(e,t){return t=void 0===t?0:t,parseInt(h.getSpaConfigValue(e,t))}w()}i.register("PageChangeTracker").asCtor(fs).dependencies("UIChangeTracker, WalkMeVisibilityChecker, Consts");function fs(e,t,n){var r=this;r.init=c,r.stop=d,r.bind=p,r.unbind=g,r.triggerPageChange=f,r.getCurrentIndex=h,r.isActivated=v;var i,o=[],a=!1,s=0,u=!1;function l(){i=[n.UI_CHANGE_NOTIFIERS.HASH,n.UI_CHANGE_NOTIFIERS.HISTORY,n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR,n.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR]}function c(){if(a)return;if(a=!0,!m())return;e.bindPreListener(S),u=!0}function d(){if(a=!1,!m())return;e.unbind(S)}function p(e){o.push(e)}function g(e){for(var t=0;t<o.length;t++)if(o[t]===e){o.splice(t,1);break}}function f(){E()}function h(){return s}function m(){return t.isWalkMeVisible()}function v(){return u}function S(e){if(T(e.notifiers))return;E()}function E(){s++;for(var e=o.length-1;e>=0;e--)try{o[e]({uiChangeIndex:s})}catch(t){}}function T(e){if(!e)return!0;for(var t=0;t<i.length;t++)if(e[i[t]])return!1;return!0}l()}i.register("HashChangeNotifier").asCtor(hs).injectToReady().dependencies("UIChangeTracker, Consts");function hs(){var e,t,n=this,r=null,i=!1;n.ready=function(n,r){e=n,t=r},n.start=function(){e.getSpaConfigValue(t.UI_CHANGE_NOTIFIERS.HASH)&&(o(),i=!0)},n.stop=function(){i&&(window.onhashchange=r,r=null,i=!1)},n.isActivated=function(){return i},n.getSpaTypeName=function(){return"Hash"};function o(){r=window.onhashchange,window.onhashchange=function(){r&&r.apply(null,arguments),e.triggerUIChange(t.UI_CHANGE_NOTIFIERS.HASH)}}}i.register("HistoryChangeNotifier").asCtor(ms).injectToReady().dependencies("UIChangeTracker, Consts");function ms(){var e,t,n=this,r=null,i=null,o=!1;n.ready=function(n,r){e=n,t=r},n.start=function(){e.getSpaConfigValue(t.UI_CHANGE_NOTIFIERS.HISTORY)&&(a(),o=!0)},n.stop=function(){o&&(window.onpopstate=r,r=null,window.history.pushState=i,i=null,o=!1)},n.isActivated=function(){return o},n.getSpaTypeName=function(){return"History"};function a(){if(!window.history||!window.history.pushState)return;r=window.onpopstate,window.onpopstate=function(){r&&r.apply(null,arguments),e.triggerUIChange(t.UI_CHANGE_NOTIFIERS.HISTORY)},i||(i=window.history.pushState,window.history.pushState=function(){i.apply(window.history,arguments),e.triggerUIChange(t.UI_CHANGE_NOTIFIERS.HISTORY)})}}i.register("IFrameLoadChangeNotifier").asCtor(vs).injectToReady().dependencies("UIChangeTracker, IFramesManager, HtmlDecoder, Logger, Consts");function vs(){var t,n,r,i,o,a=this,s=!1;a.ready=function(e,a,s,u,l){t=e,r=a,i=s,o=u,n=l},a.start=function(){void 0!=t.getSpaConfigValue(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)&&(u(),s=!0)},a.stop=function(){var t=d();t&&e(t).off("load.wmSpa"),s=!1},a.isActivated=function(){return s},a.getSpaTypeName=function(){return"IFrame load"};function u(){var e=d(),t=!e,n=t?"all iframes/frames":e;o.customerLog("UIChangeTracker - iframeLoadSelector config defined. Listening to iframe load events for "+n,2);var i;t?i=p:(l(document),i=c),r.foreachIframe(i,!0),r.onIframeLoad(function(e){e.iframeLoadListenerSet=!1,i(e)})}function l(r){e(r).find(d()).on("load.wmSpa",function(){t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)})}function c(t){if(!t.iframeLoadListenerSet&&t.documentAccessible){var n=e(t.iframe.contentWindow.document);l(n),t.iframeLoadListenerSet=!0}}function d(){var e=t.getSpaConfigValue(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR);return i.decodeHtml(e,["&",'"',"'"])}function p(r){r.iframeLoadListenerSet||(e(r.iframe).on("load.wmSpa",function(){t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)}),r.iframeLoadListenerSet=!0)}}i.register("ClickChangeNotifier").asCtor(Ss).injectToReady().dependencies("UIChangeTracker, Logger, Consts");function Ss(){var t,n,r,i=this,o=!1;i.ready=function(e,i,o){t=e,n=i,r=o},i.start=function(){s()&&(a(),o=!0)},i.stop=function(){s()&&(e(document).off("mousedown.wmSpa"),e(document).off("click.wmSpa"),e(document).off("mouseup.wmSpa")),o=!1},i.isActivated=function(){return o},i.getSpaTypeName=function(){return"Click"};function a(){n.customerLog("UIChangeTracker - clickSelector config defined. Listening to click events for "+s(),2),e(document).on("mousedown.wmSpa",s(),u),e(document).on("click.wmSpa",s(),u),e(document).on("mouseup.wmSpa",s(),u)}function s(){return t.getSpaConfigValue(r.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}function u(){t.triggerThrottledUIChange(r.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}}i.register("UserInputChangeNotifier").asCtor(Es).injectToReady().dependencies("UIChangeTracker,IFramesManager, Logger, Consts");function Es(){var t,n,r,i,o=this,a=!1;o.ready=function(e,o,a,s){t=e,n=o,r=a,i=s},o.start=function(){t.getSpaConfigValue(i.UI_CHANGE_NOTIFIERS.USER_INPUT)&&(s(),a=!0)},o.stop=function(){c(),a=!1},o.isActivated=function(){return a},o.getSpaTypeName=function(){return"User input"};function s(){l(e(document)),n.foreachIframe(u,!0),n.onIframeLoad(function(e){e.userInputListenerSet=!1,u(e)})}function u(t){if(!t.userInputListenerSet&&t.documentAccessible){var n=e(t.iframe.contentWindow.document);l(n),t.userInputListenerSet=!0}}function l(e){e.on("click.wmUITrack",p),e.on("dblclick.wmUITrack",p),e.on("mousedown.wmUITrack",p),e.on("mouseup.wmUITrack",p),t.getSpaConfigValue("userInputHoverOff")||(e.on("hover.wmUITrack",p),e.on("mouseenter.wmUITrack",p),e.on("mouseleave.wmUITrack",p),e.on("mousemove.wmUITrack",p),e.on("mouseout.wmUITrack",p),e.on("mouseover.wmUITrack",p)),e.on("keydown.wmUITrack",p),e.on("keypress.wmUITrack",p),e.on("keyup.wmUITrack",p)}function c(){r.customerLog("UIChangeTracker - Stopped listening to User Input",2),d(e(document))}function d(n){n.off("click.wmUITrack"),n.off("dblclick.wmUITrack"),n.off("mousedown.wmUITrack"),n.off("mouseup.wmUITrack"),t.getSpaConfigValue("userInputHoverOff")||(n.off("hover.wmUITrack"),n.off("mouseenter.wmUITrack"),n.off("mouseleave.wmUITrack"),n.off("mousemove.wmUITrack"),n.off("mouseout.wmUITrack"),n.off("mouseover.wmUITrack")),n.off("keydown.wmUITrack"),n.off("keypress.wmUITrack"),n.off("keyup.wmUITrack"),n.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{d(e(this.contentWindow.document)),e(this).off("load.wmUITrack")}catch(t){r.customerLog("User input change tracker did not stop listening for all iframes.. This can occur for cross-domain iframes ",4)}})}function p(){t.triggerThrottledUIChange(i.UI_CHANGE_NOTIFIERS.USER_INPUT)}}i.register("AjaxCallsChangeNotifier").asCtor(Ts).injectToReady().dependencies("UIChangeTracker,IFramesManager, TimerManager, Logger, AjaxCallsChangeNotifierFilter, Consts");function Ts(){var t,n,r,i,o,a,s,u,l=this,c=!1;l.ready=function(e,r,i,l,c,d){t=e,n=r,o=i,a=l,s=c,u=d},l.start=function(){t.getSpaConfigValue(u.UI_CHANGE_NOTIFIERS.AJAX_CALLS)&&(d(),c=!0)},l.stop=function(){h(),c=!1},l.isActivated=function(){return c},l.getSpaTypeName=function(){return"Ajax Calls"};function d(){p(window),n.foreachIframe(f,!0),n.onIframeLoad(function(e){e.ajaxCallsListenerSet=!1,f(e)})}function p(e){e.XMLHttpRequest&&(r=e.XMLHttpRequest.prototype.send,i=e.XMLHttpRequest.prototype.open,g(e.XMLHttpRequest))}function g(e){var n=e.prototype.send,r=e.prototype.open;e.prototype.open=function(e,t){return this._wmUrl=t,r.apply(this,arguments)};var i=function(){var e=this;o.setWalkmeTimeout(function(){var n=e.onreadystatechange;e.onreadystatechange=function(){n&&n.apply(e,arguments),s.filter(e._wmUrl)&&t.triggerThrottledUIChange(u.UI_CHANGE_NOTIFIERS.AJAX_CALLS)}},0),n.apply(this,arguments)};e.prototype.send=i}function f(e){!e.ajaxCallsListenerSet&&e.documentAccessible&&(p(e.iframe.contentWindow),e.ajaxCallsListenerSet=!0)}function h(){a.customerLog("UIChangeTracker - Stopped listening to Ajax calls",2),m(window),v(e(document))}function m(e){e.XMLHttpRequest&&(e.XMLHttpRequest.prototype.send=r,e.XMLHttpRequest.prototype.open=i)}function v(t){t.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{m(this.contentWindow),v(e(this.contentWindow.document)),e(this).off("load.wmAjaxResposive")}catch(t){a.customerLog("Ajax calls were not overridden for all iframes. (ajax calls ui tracker). This can occur for cross-domain iframes ",4)}})}}i.register("AjaxCallsChangeNotifierFilter").asCtor(ys).dependencies("EventServerBaseUrl, RecorderServerManager");function ys(e,t){var n=this;n.filter=function(n){if(!n)return!0;var r=e.get();if(0===n.indexOf(r))return!1;var i=t.get();if(0===n.indexOf(i))return!1;return!0}}i.register("ElementsRedrawer").asCtor(Cs).injectToReady().dependencies("Lib,TimerManager,UIChangeTracker, CommonUtils, Logger,IFramesManager");function Cs(){var e,t,n,r,i,o,a,s=this,u=300,l=!1;s.ready=function(r,s,u,l,c,d){e=r,t=s,n=u,i=c.wrapCustomerLog(T),o=l,a=d},s.redrawElements=function(){var e=function(){if(l)return void i("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);i("UIChangeTracker - UI change triggered",2),l=!0;var e=n.getSpaConfigIntValue("redrawTimeout",u);i("UIChangeTracker - redrawing in "+e,4),r&&(r.clear(),r=void 0),r=t.libSetTimeout(c,e)};t.libSetTimeout(e,0)},s.getRedrawerName=function(){return"ElementsRedrawer"};function c(){l=!1,a.remapTopIframes(),n.callListeners()}}i.register("ScrollManager").asCtor(Is).asProto().dependencies("CommonUtils, ElementUtils, FeaturesManager, HostData, Logger, Consts, ScrollUtils, ElementInIframeIndicator, PositionHelper, IFrameScrollManager");function Is(e,t,n,r,i,o,a,s,u,l,c){var d,p,g,f=this;function h(){d=c.element,p=c.balloonDrawer,g=c.settings}f.scrollToElementIfNeeded=function(t,n,r,o,u,l,c,d){try{var p,g=l==a.SCROLL_MODES.Animated&&!s.isInIframe(t)&&1!=e.getSettingsValue(o,"scrollOld","0"),h=!1,E=f.getScrollOptions(o);if(g){p=m(t,u,E,c,d);try{S(p,t,E,u,c,r)&&(h=!0)}catch(T){}}h&&l!=a.SCROLL_MODES.Normal||(p=t,v(p,t,u,E,r))}catch(T){i.error(T)}},f.getScrollOptions=function(t){var n=e.getSettingsValue(t,"endScroll",-1);if(n>=0)return{distance:parseInt(n,10),unit:e.getSettingsValue(t,"scrollUnit","%"),force:e.getSettingsValue(t,"forceScroll",0)}},f.scrollToBalloon=function(e,t,n){var r=f.calculateScrollMargins(e,t);if(!u.isElementInViewport(n,r)){var i=e.offset().top>n.offset().top;E(n,t,i)}};function m(e,n,r,i,o){var a,s=o[0],u=e,l=t.getElementViewport(e),c=f.calculateScrollMargins(e,r),d=e.offset().top<i.offset().top||e.offset().top+e.height()<i.offset().top+i.height(),p=l.top()-0+l.height()-0;!r||1!=n&&3!=n?d?(a=p-c.bottom<=e.offset().top+e.height()+i.height()+s.height()?"down":"up",u="down"==a?i:e):(a=l.top()+c.top>=e.offset().top-i.height()-s.height()?"up":"down",u="down"==a?e:i):u=e.outerHeight()>i.height()?e:i;var g=I(e.height(),i.height(),n,s.height(),l.height()-0);return g&&(u=i),u}this.calculateScrollMargins=function(e,t){if(t&&t.force){var n=T(e,t);return{top:n,bottom:0}}return o.DEFAULT_POSITIONS};function v(e,t,n,r,i){var o=f.calculateScrollMargins(e,r);f.isElementVisibleBeforeScroll(e,o,n)||E(e,r,!0,s.isInIframe(t)),i&&i()}function S(e,t,i,o,a,s){if(r.isQuirksMode(d[0]))return!1;if(u("html"))return!0;if(!f.isElementVisibleBeforeScroll(t,f.calculateScrollMargins(t,i),o))return u("body");return!1;function u(r){var u={duration:"slow",rootElement:r,elementToFindScrollableFor:t,complete:function(){s&&s()},heightLimit:!n.isFeatureEnabled("noHgtLmt")};if(i){var l=a.height();u.endScroll={scrollOptions:i,balloonHeight:C(t,o,l),totalDrawnHeight:y(t,o,l)}}return e.scrollintoview(u)}}f.isElementVisibleBeforeScroll=function(e,t,n){return u.isElementInViewport(e,t)&&a.isBalloonPositionVisibleRelativeToParents(e,n)};function E(e,t,n,r){t&&!r?window.scrollTo(0,e.offset().top-T(e,t)):l.doNormalScroll(e,n,t)}function T(e,n){return"px"==n.unit?n.distance:t.getElementViewport(e).height()*n.distance/100}function y(n,r,i){var o=n.outerHeight(),a=t.getElementViewport(n).height()-0;return I(o,i,r,p.arrowHeight(),a)?i:0==r||2==r?o+i+p.arrowHeight()+1-parseInt(e.getSettingsValue(g,"topOffset",0)):Math.max(o,i)}function C(t,n,r){var i=t.height(),o=parseInt(e.getSettingsValue(g,"topOffset",0));return 0==n?r+p.arrowHeight()+1-o:2==n?i+r+p.arrowHeight()+1-o:r>i?r-o:(i-r)/2+r-o}function I(e,t,n,r,i){return 0==n||2==n?e+t+r>i:e>i}h.apply(null,arguments)}i.register("IFrameScrollManager").asCtor(bs).dependencies("HostData");function bs(t){var n=this;function r(){}n.doNormalScroll=function(n,r,i){n[0].scrollIntoView(r);var o="hidden"===e("html").css("overflow"),a="hidden"===e("body").css("overflow");if(t.isQuirksMode(n[0])||o||a){var s=e("html");s[0].scrollIntoView()}},r.apply(null,arguments)}i.register("AutoStartHelper").dependencies("CrossDomainManager").asCtor(ws);function ws(e){var t=this;t.get=r;var n;function r(){return n||o(),n}function o(){var t=e.get().enabled()?"PassOwnershipAutoStartHelper":"RegularAutoStartHelper";n=i.get(t)}}F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("RegularAutoStartHelper").asCtor(_s).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")});function _s(e,t,n,r,i){var o=this;o.clearCache=u,o.checkShouldAutoStart=l;var a,s;function u(){a=void 0,s=void 0}function l(t,n,r){if(t!=e.Tutorial)return!0;return c(n,r)}function c(e,r){var o=t.getWalkthruIndexByWalkthruId(e.Id),a=n.checkTutorialSkipFirstStepCondition(o),s=n.checkTutorialRedirectCondition(o,!1),u=e.IsWelcomeStep,l=d(),c=!(l.state==i.WALKTHRU_STATE.RUNNING&&l.step==a)&&p(l,r)&&(s&&u||n.checkIfStepExistsWithSkippables(o,a,void 0,void 0,void 0,i.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=a&&!s);return c}function d(){return a||(a=r.get()),a}function p(e,t){if(void 0!=s)return s;return s=e.state==i.WALKTHRU_STATE.PAUSED||e.state==i.WALKTHRU_STATE.NOT_RUNNING||!t&&n.checkIfStepExistsWithSkippables(e.tutorial,e.step,void 0,void 0,void 0,i.CHECK_STEP_MODE.Sandbox,"- Engagement")<0}}F.register([D.PLATFORM.Android,D.PLATFORM.iOS],function(){i.register("RegularAutoStartHelper").asCtor(Ps).dependencies("DeployableTypes, WmInternals, Consts")});function Ps(e,t,n){var r=this;r.clearCache=s,r.checkShouldAutoStart=u;var i=!1,o=[e.ShoutOut,e.Spotlight,e.Tooltip];function a(){t.bind(n.EVENTS.DeployableCreated,function(e,t){i=!0}),t.bind(n.EVENTS.DeployableDestroyed,function(e,t){i=!1})}function s(){}function u(e,t,n){if(o.indexOf(e)==-1)return!0;return!i}a()}i.register("PassOwnershipAutoStartHelper").asCtor(As).dependencies("Consts, RegularAutoStartHelper, DeployableTypes, Logger, CrossDomainManager, FlowsContainer");function As(e,t,n,r,i,o){var a=this;a.clearCache=t.clearCache,a.checkShouldAutoStart=u;var s=r.wrapCustomerLog(v);function u(e,n,r){var o=l(e);if(void 0!=o){var a=c(e,n),u=i.get().isConditionMet(!0,a,o);if(!u)return s(i.get().isOwnerByDefault()?"AutoStartHelper - not top window, not starting":"AutoStartHelper - condition not met, not starting"),!1}return t.checkShouldAutoStart(e,n,r)}function l(t){var r=void 0;return t==n.Tutorial?r=e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:t==n.BusinessSolution&&(r=e.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow),r}function c(e,t){return e==n.Tutorial?{walkthruId:t.Id,step:t.Steps[0]}:{flowId:t.Flow.Id,node:o.getNodeById(t.Flow.Id,t.Flow.RootFlowNodeId)}}}i.register("AutoStartManager").asCtor(ks).dependencies("ClientOrServerStorageManager, Logger, AutoStartHelper, DeployablesManagerFactory, DeployableTypes, ClientStorageManager, TimerManager, CommonUtils,ProfilerAPI,ElementFinder, Consts, CommonEvents, WalkthruStepsLoader, AutoStartDeployablesIterator, AutostartDeployablesOrchestrator, AutoStartConditionParamsProvider, ConditionTreeGetter, ConditionCheckerFactory, WmInternals");function ks(e,t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,S,E){var T=this,y=t.wrapCustomerLog(v);function C(){u.registerProfilerCallback(function(e){T.run=e.profile("runAutoStart",T.run)})}this.run=function(){f.deployablesChecksStarting(),y("Trying to find a deployable that can auto start",1),n.get().clearCache(),l.wrapSession(function(){var e=function(e,t,n){var r=I(e,n,t);r?k(e,t,n,r):f.deployableCannotAutoplay(t,n)};g.iterate(e)})};function I(e,t,n){if(!P(t))return y("Deployable doesn't support auto start: "+t.Name,4),!1;var r=w(t,n);if(r.forceStart)return y("Deployable can auto start (remind me later): "+t.Name,4),r.startResult;if(r.canStart)return b(e,t,n);return!1}function b(e,t,n){if(e.autoStartEnabled(t.Id)){var r=O(n,t);if(r.shouldStart)return y("Deployable can auto start (storage): "+t.Name,4),r}return!1}function w(t,n){var r={forceStart:!1,canStart:!1},i=n?n+"-":"",o=c.STORAGE_KEYS.remindMeLater+"-"+i+t.Id,a=e.getData(o,void 0,void 0,void 0);if(a){var s=If(a);s.expiry&&s.expiry<Date.now()&&(r.forceStart=!0,r.startResult={shouldStart:!0,repeatCookieExpiry:-1,store:function(){e.removeData(o)}})}else r.canStart=!0;return r}function P(e){return s.getSettingsValue(e.Settings,"ASEnabled",0)}function k(e,t,n,r){var i=s.getSettingsValue(n.Settings,"ASCTEnabled",0);if(1!=i)return y("Non-conditional autostart, trying to auto start "+n.Name,3),B(t,n,r);y("Autostart is enabled for deployable: "+n.Name,3);var o=m.get(t,n,"ASCT");if(""!=o)try{N(e,t,n,r,o)}catch(a){}}this.checkRepeatCookie=function(n,r,i){var a={shouldStart:!0,repeatCookieExpiry:-1},u=i?o:e;if("always"==r);else{"visit"==r&&(n+="-v");var l=1,c=u.getData(n,void 0,void 0,l);c==l?a.shouldStart=!1:s.isNumber(r)?a.repeatCookieExpiry=r:"visit"==r?a.repeatCookieExpiry=_:"once"==r?a.repeatCookieExpiry=A:t.error(new Error("checkRepeatCookie bad value: "+r))}return a.store=function(){a.repeatCookieExpiry>=0&&u.saveData(n,1,a.repeatCookieExpiry)},a};function O(e,t){var n=x(e,t),r=s.getSettingsValue(t.Settings,"ASRep","visit");return""===r&&(r="visit"),T.checkRepeatCookie(n,r)}function N(e,t,n,r,i){var o=h.get(t,n),a=S.createConditionChecker(i,o);D(t,n,r,i,a),L(e,t,n,r,i,a)}function D(e,t,n,r,i){var o=i.getCurrentEvaluationValueAndStopEvaluating(r);M(o,e,t,n,n,i)}function L(e,t,n,r,i,o){var a=!0;o.onEvaluated(function(i){var s=I(e,n,t);s&&M(i,t,n,s,r,o,a)}),o.evaluateAsyncAndDontEvaluateImmediately(i)}function x(e,t){if(0==e)return"wm-ASRep-"+t.Id;return"wm-ASRep-"+e+"-"+t.Id}function F(e,t,r){return n.get().checkShouldAutoStart(e,t,r)}function M(e,t,n,r,i,o,a){e?(y("Autostart condition met, trying to auto start: "+n.Name,3),R(t,n,r,i,o,a)):y("Condition didn't meet, not starting deployable: "+n.Name,3),d.deprecatedRaiseEvent(c.EVENTS.AutoStart.ConditionEvaluated,n,{result:e})}function R(e,t,r,o,a,s){function u(){n.get().clearCache();var i=B(e,t,r,s);i&&o.repeatCookieExpiry!=-1&&a.cleanResources()}e==i.Tutorial?p.afterStepsLoaded(t.TutorialId,u):u()}function B(e,t,n,r){if(E.bind(c.EVENTS.AutoStart.Activated,o),F(e,t,r)){var i=parseFloat(s.getSettingsValue(t.Settings,"Delay",0));return i?a.libSetTimeout(function(){f.deployableCanAutoplay(e,t)},1e3*i):f.deployableCanAutoplay(e,t),!0}return f.deployableCannotAutoplay(e,t),!1;function o(r,i){E.unbind(c.EVENTS.AutoStart.Activated,o),i.deployableType==e&&i.deployable==t&&n.store()}}C.apply(null,arguments)}i.register("DeployablesRunnerFactory").asCtor(Os).dependencies("DeployableTypes, ImmediateDeployablesRunner, QueueDeployableRunner");function Os(e,t,n){var r=this;r.get=a;var i=[];function o(){i[e.ShoutOut]=t,i[e.Tutorial]=n,i[e.BusinessSolution]=n,i[e.Survey]=n}function a(e){return i[e]}o()}i.register("ImmediateDeployablesRunner").asCtor(Ns).dependencies("Consts, CommonEvents, DeployablesManagerFactory, Logger");function Ns(e,t,n,r){var i=this;i.run=s;var o;function a(){o=r.wrapCustomerLog(v)}function s(r,i){o("Autostarting: "+i.Name,3),t.raiseEvent(e.EVENTS.AutoStart.Activated,{deployableType:r,deployable:i}),n.get(r).activateById(i.Id,{type:e.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})}a()}i.register("QueueDeployableRunner").asCtor(Ds).dependencies("ImmediateDeployablesRunner, AutoStartRunningState");function Ds(e,t){var n=this;n.run=i;var r=[];function i(e,t){r.push({deployableType:e,deployable:t}),o()}function o(){t.isSomeoneRunning().then(a).fail(function(){var t=r.shift();e.run(t.deployableType,t.deployable)})}function a(){r=[]}}i.register("AutoStartRunningState").asCtor(Ls).dependencies("AutoStartTypes");function Ls(t){var n=this;n.isSomeoneRunning=r,n.cleanResources=i;function r(){var n=e.Deferred(),r=t.getRunningStateServices();i();function i(){var e=r.shift();if(!e)return void n.reject();e.isRunning().then(n.resolve,i)}return n.promise()}function i(){for(var e=t.getRunningStateServices(),n=0;n<e.length;n++)e[n].cleanResources&&e[n].cleanResources()}}i.register("EventBasedRunningState").asCtor(xs).asProto().dependencies("WmInternals");function xs(t,n){var r=this;r.isRunning=p,r.cleanResources=g;var i,o=[{eventNames:n.resetEvents,method:u},{eventNames:n.startingEvents,method:l},{eventNames:n.resolvingEvents,method:c},{eventNames:n.rejectingEvents,method:d}];function a(){u(),s(!0)}function s(e){for(var n=e?t.bind:t.unbind,r=0;r<o.length;r++)for(var i=o[r],a=0;a<i.eventNames.length;a++){var s=i.eventNames[a];n(s,i.method)}}function u(){i=e.Deferred(),i.reject()}function l(){i=e.Deferred()}function c(){i.resolve()}function d(){i.reject()}function p(){return i.promise()}function g(){s(!1)}a()}i.register("SurveyRunningState").dependencies("Consts").asFunction(function(e){return i.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Surveys.SurveyCompleted],startingEvents:[e.EVENTS.Surveys.StartSurvey],resolvingEvents:[e.EVENTS.Surveys.SurveyPlayed],rejectingEvents:[e.EVENTS.Surveys.SurveyFailedShowing]})}),i.register("BizFlowRunningState").dependencies("Consts").asFunction(function(e){return i.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Flows.FlowStopped,e.EVENTS.Flows.FlowCompleted],startingEvents:[e.EVENTS.Flows.RestoringFlow,e.EVENTS.Flows.FlowStarted],resolvingEvents:[e.EVENTS.Flows.UIFlowStageShown],rejectingEvents:[e.EVENTS.Flows.FailedToStart]})}),i.register("WalkthruRunningState").asCtor(Fs).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts");function Fs(t,n,r){var i=this;i.isRunning=o;function o(){var i,o=t.get();return i=!(o.state==r.WALKTHRU_STATE.PAUSED||o.state==r.WALKTHRU_STATE.NOT_RUNNING||n.checkIfStepExistsWithSkippables(o.tutorial,o.step,void 0,void 0,void 0,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0),i?e.when():e.Deferred().reject()}}i.register("WalkthruPersistenceDataRetriever").asCtor(Ms).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData");function Ms(e,t,n){var r=this;r.get=i;function i(){var r=e.getPersistenceData();return n.state==t.WALKTHRU_STATE.PAUSED&&(r.state=n.state),r}}F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("AutostartDeployablesOrchestrator").asCtor(Rs).dependencies("DeployablesRunnerFactory")});function Rs(e){var t=this;t.deployableCanAutoplay=n,t.deployableCannotAutoplay=function(){},t.deployablesChecksStarting=function(){};function n(t,n){e.get(t).run(t,n)}}F.register([D.PLATFORM.Android,D.PLATFORM.iOS],function(){i.register("AutostartDeployablesOrchestrator").asCtor(Bs).dependencies("Logger, DeployablesManagerFactory, Consts, CommonEvents, AutoStartDeployablesIterator, WmInternals, AutoStartHelper")});function Bs(t,n,r,i,o,a,s){var u=this;u.deployableCanAutoplay=h,
u.deployableCannotAutoplay=E,u.deployablesChecksStarting=g;var l,c=[],d={BeforeCondition:0,ConditionFalse:1,ConditionTrue:2,PlayStarted:3,PlayFalse:4,PlayTrue:5};function p(){l=t.wrapCustomerLog(v),a.bind(r.EVENTS.AutoStart.ConditionEvaluated,function(e,t,n){var r=f(t);void 0!==n.result&&r.result==d.BeforeCondition&&(r.result=n.result?d.ConditionTrue:d.ConditionFalse,m())}),a.bind(r.EVENTS.DeployableNotShowing,function(e,t){var n=f(t.deployable);n.result=d.PlayFalse,m()}),a.bind(r.EVENTS.DeployableCreated,function(e,t){var n=f(t.deployable);n.result=d.PlayTrue}),a.bind(r.EVENTS.DeployableHandleStarting,function(e,t){var n=f(t.deployable);n.result=d.PlayStarted})}function g(){c=[];var e=function(e,t,n){c.push({manager:e,deployableType:t,deployable:n,deployableId:n.Id,result:d.BeforeCondition})};o.iterate(e)}function f(t){var n=e.grep(c,function(e,n){return e.deployableId==t.Id});return n.length>0?n[0]:null}function h(e,t){var n=f(t);n.result=d.ConditionTrue;var r=s.get().checkShouldAutoStart(e,t);r&&m()}function m(){for(var e in c){var t=c[e];if(t.result===d.BeforeCondition||t.result===d.PlayStarted)return;if(t.result===d.ConditionTrue)return void S(t.deployableType,t.deployable)}}function S(e,t){l("Autostarting: "+t.Name,3),i.raiseEvent(r.EVENTS.AutoStart.Activated,{deployableType:e,deployable:t}),n.get(e).activateById(t.Id,{type:r.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})}function E(e,t){var n=f(t);n.result=d.PlayFalse}p()}F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("AutoStartConditionParamsProvider").asCtor(Us)});function Us(){var e=this;e.get=t;function t(e,t){var n={trackUIChange:!0,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:v,elementName:t.Name};return n}}F.register([D.PLATFORM.Android,D.PLATFORM.iOS],function(){i.register("AutoStartConditionParamsProvider").asCtor(Vs)});function Vs(){var e=this;e.get=t;function t(e,t){var n={trackUIChange:!1,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:v,elementName:t.Name};return n}}F.register([D.PLATFORM.iOS,D.PLATFORM.Android],function(){i.register("AppletActivationListener").asCtor(Gs).dependencies("UIChangeTracker, AutoStartManager")}),F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("AppletActivationListener").asCtor(Ws)});function Ws(){var e=this;e.init=function(){},e.cleanResources=function(){}}function Gs(e,t){var n=this;n.init=i,n.cleanResources=o;function r(){}function i(){e.bind(t.run)}function o(){e.unbind(t.run)}r()}i.register("AutoStartTypes").asCtor(Hs).dependencies("DeployableTypes, BizFlowRunningState, WalkthruRunningState, SurveyRunningState");function Hs(e,t,n,r){var i=this;i.getDeployableTypes=o,i.getRunningStateServices=a;function o(){return[e.ShoutOut,e.BusinessSolution,e.Tutorial,e.Survey]}function a(){return[t,n,r]}}F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("AutoStartDeployablesIterator").asCtor(js).dependencies("DeployableTypes, DeployablesManagerFactory, AutoStartTypes")});function js(e,t,n){var r=this;r.iterate=o;var i=n.getDeployableTypes();function o(e){for(var n=0;n<i.length;n++)for(var r=i[n],o=t.get(r),a=o.getAll(),s=0;s<a.length;s++){var u=a[s];e(o,r,u)}}}F.register([D.PLATFORM.Android,D.PLATFORM.iOS],function(){i.register("AutoStartDeployablesIterator").asCtor(Ys).dependencies("DeployableTypes, DeployablesManagerFactory")});function Ys(e,t){var n=this;n.iterate=r;function r(n){var r=e.Category,i=t.get(r),o=i.getAll(),a=o[0];if(!a)return;var s=a.LinkedDeployables;s.sort(function(e,t){return e.OrderIndex-t.OrderIndex});for(var u=0;u<s.length;u++){var l=s[u],c=l.DeployableType,d=t.get(c),p=d.getById(l.DeployableID);p&&n(d,c,p)}}}i.register("PermalinkDeployableProvider").asCtor(zs).dependencies("DeployablesManagerFactory, DeployableTypes, Consts, SiteConfigManager");function zs(e,t,n,r){var i=this;i.getByString=o;function o(e){var n=a(),r=n.exec(e);if(r&&r.length>1){var i=r[2]||r[1],o=r[2]?r[1]:t.Tutorial,u={type:parseInt(o,10),id:parseInt(i,10)};if(s(u))return u}}function a(){var e,t=r.get();return e=t.IsDisplayPoweredBy===n.IS_DISPLAY_POWERED_BY.Hide?/(?:walkme|walkthroughid)=([0-9]+)-?([0-9]*)/:/walkme=([0-9]+)-?([0-9]*)/}function s(t){var n=e.get(t.type);if(!n)return;var r=n.getById(t.id);if(!r)return;return!0}}i.register("PermalinkString").asFunction(function(e){return e.location.href}).asProto(),i.register("PermalinkManager").asCtor(Qs).dependencies("CrossDomainManager, DeployablesManagerFactory, Lib, DeployableTypes, CommonUtils, Consts, CommonEvents, TimerManager, PermalinkDeployableProvider");function Qs(t,n,r,o,a,s,u,l,c){var d,p=this;p.window=window,p.isTrainingInStartingMode=m;var g=[o.Tutorial,o.BusinessSolution];p.run=function(){if(f()){var t=c.getByString(i.create("PermalinkString",p.window));if(t){var r=e.inArray(t.type,g)!=-1,o=n.get(t.type),a=o.getById(t.id),m=h(a,r);l.libSetTimeout(function(){u.raiseEvent(s.EVENTS.PermalinkClicked),o.activateById(t.id,{type:s.STEP_PLAY_INITIATOR_ENUM.PERMALINK}),r&&(d=!1)},m),r&&(d=!0)}}};function f(){return!t.get().enabled()||t.get().isOwnerByDefault()}function h(e,n){var r=1e3*parseFloat(a.getSettingsValue(e.Settings,"Delay",0)),i=n&&t.get().enabled()?2*t.get().crossDomainSampleRate():1;return Math.max(r,i)}function m(){return d}}i.register("RecorderServerManager").asCtor(Ks).args([""]),i.register("EventServerBaseUrl").asCtor(Ks).args([""]),i.register("PetaServerNameManager").asCtor(Ks);function Ks(){var e,t=this;function n(t){e=t}t.set=function(t){e=t},t.get=function(){return e},n.apply(t,arguments)}i.register("AuditSourceManager").asCtor(qs).dependencies("Consts");function qs(e){var t=this;t.set=i,t.get=o;var n;function r(){n=e.SOURCES.production}function i(t){var r=e.SOURCES[t];n=void 0!=r?r:parseInt(t)}function o(){return n}r()}i.register("IsInEditor").asCtor(Ks).args([!1]),i.register("IsInWYSIWYG").asCtor(Ks).args([!1]),i.register("IconTemplates").asInstance({customImages:[],htmlImages:[]}),i.register("FeaturesManager").asCtor(Xs).dependencies("SiteConfigManager");function Xs(e){var t=this;t.isFeatureEnabled=function(t){var n=e.get();if("undefined"!=n.Features&&n.Features)return n.Features.indexOf(t)>-1;return!1},t.isReady=function(){var t=e.get();return t&&0!==t.length}}i.register("LanguageManager").asCtor(Js).dependencies("win, Lib, ClientOrServerStorageManager");function Js(e,t,n){var r=this,i="wm-lang",o=31536e3,a="_default_",s="",u=[],l=[];r.setLanguages=function(e){u.length=l.length=0;var t=n.getData(i);t==a&&(t=s);for(var r=!1,o=0;o<e.length;o++)for(var c=e[o].languages,d=0;d<c.length;d++){var p=c[d];u.push(p),p.showInPlayer&&l.push(p),p.shortName===t&&(r=!0)}r||n.removeData(i)},r.getMenuLanguages=function(){return l},r.getCurrentLanguage=function(){var e=c();return g(e,u)?e:s};function c(){var t=n.getData(i);if(t==a&&(t=s),!t&&t!==s&&e.walkme_get_language)try{t=e.walkme_get_language()}catch(r){}if(!t||!g(t,u))return s;return t}r.changeLanguage=function(e){var t=e;if(e===s&&(t=a),d(t)||!g(e,u))return!1;return n.saveData(i,t,o),!0};function d(e){var t=c();return t===s&&(t=a),t===e}r.fixLanguageUrlInDataFiles=function(e,t){for(var n=c(),r=0;r<e.length;r++){var i=e[r];i.url=p(i,n,t)}return e};function p(e,t,n){var r=e.url;return t&&g(t,e.languages)&&(r=r.substring(0,r.length-3),r=r+"_"+t+".js"),r}function g(e,t){for(var n=0;n<t.length;n++)if(t[n].shortName==e)return!0;return!1}}i.register("OverlayManager").asCtor($s).asSingleton().dependencies();function $s(){var t,n,r=[];this.create=function(l,c,d){var p={element:l,color:d,opacity:c};return{remove:function(){i(p),p==n&&(n=u(),n?a(n):(t.remove(),t=null))},show:function(){p.zIndex=l[0].style.zIndex,p.index=l.index(),e.inArray(p,r)<0&&r.push(p),n&&n!=p&&!s(p,n)||(n=p,a(p))},getOverlayElement:function(){return t||o(p),t}}};function i(t){var n=e.inArray(t,r);n>-1&&r.splice(n,1)}function o(e){t||(t=l()),t.css({zIndex:e.zIndex,backgroundColor:e.color||"#000",opacity:e.opacity||.7})}function a(e){o(e),t.insertBefore(e.element)}function s(e,t){return e.zIndex>t.zIndex||e.zIndex==t.zIndex&&e.index>t.index}function u(){if(!r.length)return;for(var e=r[0],t=1;t<r.length;t++)s(r[t],e)&&(e=r[t]);return e}function l(){var t=e('<div id="walkme-overlay-all" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0;"/>');return t}}i.register("ServerStorageAjaxCaller").asCtor(Zs).dependencies("AuditSourceManager, RecorderServerManager, Logger, WmAjax, EndUsersManager");function Zs(e,t,n,r,i){var o,a,s,u,l=this,c=1e4;function d(){}l.init=function(){o=e.get(),a=i.getEndUserGuid(),s=t.get(),u=s+"/EndUserStorage/Get"},l.get=function(e,t,i,s){var l={walkmeUserGuid:e,source:o,endUserGuid:a,secondsSinceUpdate:t};r.execute({url:u,data:l,success:function(r,u,l){r.Data.ErrorMessage?(n.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+o+", end user: "+a+", seconds since update: "+t+". Error: "+r.Data.ErrorMessage+"."),s&&s()):i(r.Data)},error:function(r,i,u){n.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+o+", end user: "+a+", seconds since update: "+t+". Error: "+i+"."),s&&s()},timeout:c})},d.apply(null,arguments)}i.register("ServerStorageManager").asCtor(eu).dependencies("Consts, UserGuidContainer, EndUserStorageDataSender, ClientStorageManager, AuditSourceManager, ServerStorageAjaxCaller, CommonUtils, SettingsFile, EndUsersManager");function eu(t,n,r,i,o,a,s,u,l){var c,d,p,g,f,h,m=this,v=!1,S=!0,E="ss_ii",T=_,y="wm-ceug",C="wm-cenv",I=["wm-c-test","wm-dbg-cnf","wm-dbg","wm-ueug","wm-fgug","wm-gb","wm-load-testme","wm-prsst","wm-sf-lst-usr","wm-sf-users-data","wm-sat","wm-sst","wm-sk","wm-SrvSmt","wm-wtchd","wm-cond-win","wm-prf-stt","wm-prf-snk","wm-cdstop","wm-cdplay","wm-po-pc","wm-po-r","wm-po-q","wm-dt","wm-ne","wm-nx","wm_abg_","wm_ct_","wm-po-p",y,C,"wm-ftr-cnf","wm-ftr","wm-ltm","wm-ct-prv","wm-lg-act"];function b(){c=r,f=!1}m.init=function(e,r){if(f)return void(e&&e());f=!0,c.init(),a.init(),d=n.getUserGuid(),p=l.getEndUserGuid(),g=o.get();var u=i.getData(t.STORAGE_KEYS.lastGetDataTime,null,d);u&&(S=!1),w()&&(k(),u=null),O();var h=s.getDateAtUTC(),m=null==u?null:(h-u)/1e3;N(m)?D(m,h,e,r):e&&e()};function w(){var e=i.getData(y,null,d),t=i.getData(C,null,d);return!S&&(e!=p||t!=g)}function k(){for(var t=i.getInternalKeys(d),n=0;n<I.length;n++)e.each(t,function(e){0==e.indexOf(I[n])&&delete t[e]});for(var r in t)t.hasOwnProperty(r)&&i.removeData(r,d)}function O(){i.saveData(y,p,A,d),i.saveData(C,g,A,d)}function N(e){var t=u.getStorageType(),n=t[E]||T;return null===e||n<=e}function D(e,t,n,r){a.get(d,e,function(e){m.updateLocalStorage(e,t),h=0,n&&n()},function(){h=1,r&&r()})}m.updateLocalStorage=function(e,n){v=!!S,m.updateLocalStorageItems(e),i.saveData(t.STORAGE_KEYS.lastGetDataTime,n,P,d)},m.updateLocalStorageItems=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.IsDeleted?i.removeData(n.Key,d):i.saveData(n.Key,If(n.Value),n.SecondsToExpiry,d)}},m.shouldUpdateOldKeys=function(){return v},m.getStorageType=function(){var e=i.getStorageType();return e.mode="server",e},m.refreshGetData=i.refreshGetData,m.saveData=function(e,t,n,r){void 0==r&&(r=d),x(e,n,r)&&c.update(e,t,n,r),i.saveData(e,t,n,r)},m.getData=function(e,t,n,r){return void 0!==r&&L(n)&&(t=r),i.getData(e,t,n)};function L(e){return h}m.addToDictionary=function(e,t,n,r,o){x(e,r,o)&&c.updatePropertyInObject(e,t,n,r,o||d),i.addToDictionary(e,t,n,r,o)},m.addToSet=function(e,t,n,r){void 0==r&&(r=d),x(e,n,r)&&c.addToSet(e,t,n,r),i.addToSet(e,t,n,r)},m.removeData=function(e,t){void 0==t&&(t=d),c.remove(e,t),i.removeData(e,t)},m.addToQueue=i.addToQueue,m.convertOldCookieStorage=i.convertOldCookieStorage,m.increment=i.increment,m.getInternalKeys=i.getInternalKeys,m.removeAllData=i.removeAllData,m.sessionSetData=i.sessionSetData,m.sessionGetData=i.sessionGetData,m.setSyncFlag=i.setSyncFlag;function x(e,n,r){var i=!1;return n>=t.TIME_PERIODS.OneHourSeconds&&(i=!0),i}b.apply(null,arguments)}i.register("EndUserStorageDataSender").asCtor(tu).dependencies("CommonUtils, AuditSourceManager, ServerDataSenderManager, Logger, EndUsersManager, UserGuidContainer");function tu(e,t,n,r,i,o){var a,s,u,l,c,d,p,g=this;function f(){c=n.register("up",{actionUrl:"/EndUserStorage/UpdatePropertyInObject",prefixForStorage:"up",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.updateRequestParamsFunc,shouldTruncateData:!1}),d=n.register("as",{actionUrl:"/EndUserStorage/AddToSet",prefixForStorage:"as",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.updateRequestParamsFunc,shouldTruncateData:!1}),l=n.register("us",{actionUrl:"/EndUserStorage/Update",prefixForStorage:"us",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.updateRequestParamsFunc,shouldTruncateData:!1}),p=n.register("rs",{actionUrl:"/EndUserStorage/Remove",prefixForStorage:"rs",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.removeRequestParamsFunc,shouldTruncateData:!1})}g.init=function(){a=o.getUserGuid(),s=i.getEndUserGuid(),u=t.get()},g.updatePropertyInObject=function(e,t,n,r,i){a=i||a;var o={Key:e,FieldKey:t,FieldValue:n,Expiry:r};c.sendData(o)},g.addToSet=function(e,t,n,r){a=r||a,d.sendData(h(e,t,n))},g.update=function(e,t,n,r){a=r||a,l.sendData(h(e,t,n))};function h(t,n,r){return{Key:t,Value:e.toJSON(n),Expiry:r}}g.remove=function(e,t){a=t||a,p.sendData({Key:e})},g.getUpdateTypedDataSender=function(){return l},g.getRemoveTypedDataSender=function(){return p},g.updateRequestParamsFunc=function(t){return{walkmeUserGuid:a,source:u,endUserGuid:s,keyValueExpiryListSerialized:e.toJSON(t)}},g.removeRequestParamsFunc=function(t){return{walkmeUserGuid:a,source:u,endUserGuid:s,keyListSerialized:e.toJSON(t)}},f.apply(null,arguments)}i.register("SettingsCacheBusterActivator").asCtor(nu).asSingleton().dependencies("Lib, Logger, CommonUtils");function nu(e,t,n){var r=this;r.activeIfPublishedRecently=c;var i,o,a="wm-settings-cache-bust",s=900,u="jstorage";function l(){i=t.wrapCustomerLog("SettingsCacheBusterActivator"),o=e.getStorageManagerInstance(u)}function c(e){if(!o.isEnabled())return;if(d(e)){var t=new Date(e+1e3*s);p(t)}}function d(e){var t=((new Date).getTime()-e)/1e3,n=t<s;return i("SettingsCacheManager.shouldActivateSettingsCacheBuster - secondsSincePublish: "+t,5),n}function p(e){i(n.formatString("SettingsCacheManager - Will fetch newset settings file until {}",e),3);var t=(e.getTime()-(new Date).getTime())/1e3;if(t<=0)return;o.saveData(a,!0,t)}l.apply(null,arguments)}i.register("SettingsCacheManager").asCtor(ru).asSingleton().dependencies("Lib,SettingsFile,Logger,CommonUtils,WmAjax,TimerManager, SettingsCacheBusterActivator,CommonEvents");function ru(e,t,n,r,i,o,a,s){var u,l,c="jstorage",d=1e3;function p(){u=n.wrapCustomerLog("SettingsCacheManager"),l=e.getStorageManagerInstance(c)}this.start=function(){u("SettingsCacheManager.start - Check if need to fetch settings ",5),l.isEnabled()?g({onSuccess:f,onFailure:v,queryStringParams:"forceUpdate="+(new Date).getTime()}):u("SettingsCacheManager - storage is not enabled , settings file will not be checked",3)};function g(e){var n=t.getUrl()+"?"+e.queryStringParams;u("SettingsCacheManager - Fetching newest settings file from: "+n,3),i.execute({url:n,cache:!1,dataType:"jsonp",jsonpCallback:"fixedCallback",success:e.onSuccess,error:e.onFailure})}function f(e,t,n){if(u("SettingsCacheManager.settingsFileReceived - publishDate: "+new Date(e.PublishDate),5),!e.PublishDate)return;a.activeIfPublishedRecently(e.PublishDate),h(e)&&(s.raiseEvent(D.EVENTS.SettingsFileNewPublish,{settingsData:e}),m())}function h(e){var n=t.getSettingsFile().PublishDate!=e.PublishDate;return u("SettingsCacheManager.shouldActivateSettingsCacheBuster - isNewPublish: "+n,5),n}function m(){o.setWalkmeTimeout(function(){g({onFailure:v,queryStringParams:"b="+(new Date).getTime()})},d)}function v(e,t,n){u(r.formatString("SettingsCacheManager - Error fetching settings file. jqXHR: {0}, textStatus: {1}, errorThrown: {2}",e,t,n))}p.apply(null,arguments)}i.register("EndUserDataConverter").asCtor(iu).dependencies("ClientOrServerStorageManager, DeployablesManagerFactory, CommonUtils, StepUtils, EndUserDataConverterConfig, SiteConfigManager, UserGuidContainer");function iu(t,n,r,i,o,a,s){var u,l=this,c=o.get(),d=c.fixedKeys,p=c.keyNamesWithSuffixes,g=c.repeatKeysWithRelatedObject,f=c.keysWithRepeat,h="-",m=c.keysWithThreeParts;function v(){u=s.getUserGuid()}l.convertData=function(){if(t.shouldUpdateOldKeys&&t.shouldUpdateOldKeys()){var e=t.getInternalKeys(u);S(e),b(e)}};function S(e){for(var n in e)if(e.hasOwnProperty(n)){var r=E(n,e);r.Key&&t.saveData(r.Key,r.Value,r.Expiry,u)}}function E(e,t){var n,r={};if(d[e])n=d[e];else if(f[e])n=T(e);else{var i=I(e);if(i){var o=i.KeyWithoutSuffix;p[o]?n=p[o]:g[o]&&(n=y(i))}}return n&&(r.Key=e,r.Value=t[e],r.Expiry=n),r}function T(e){var t=f[e],n=t.SettingsKey,i=t.PropertyForKey,o=r.getSettingsValue(a.get().Settings[n],i,void 0),s=C(o);return s}function y(e){var t=g[e.KeyWithoutSuffix],i=e.SuffixParts;if("v"==i[i.length-1])return _;for(var o=0;o<t.length;o++){var a=t[o];if(a.Parts==i.length){var s,u=a.DeployableTypeIndex,l=void 0!==u?i[u]:a.DeployableType,c=n.get(parseInt(l)),d=c.getById(i[a.DeployableIdIndex]);a.SubSettings?s=r.getSettingsValue(d.Settings,a.SubSettings,void 0):d&&(s=d.Settings);var p;return s&&(p=r.getSettingsValue(s,a.SettingsKey,void 0)),C(p)}}}function C(e){var t;return r.isNumber(e)&&e>=_?t=e:"once"==e&&(t=A),t}function I(t){var n,r,i=t.split(h);if(i.length>1){var o,a=i[0]+h+i[1];i.length>2&&(o=a+h+i[2]),e.inArray(o,m)>-1?(n=o,r=i.slice(3)):(n=a,r=i.slice(2))}var s={KeyWithoutSuffix:n,SuffixParts:r};return s}function b(e){for(var o=n.get(0),a=o.getAll(),s={},l=0;l<a.length;l++)for(var c=a[l].Steps,d=0;d<c.length;d++){var p=c[d];if(i.isActionStep(p)){var g=r.getSettingsValue(p.Settings,"action",null);if(g&&"setWalkMeData"==g.actionType){var f=g.arguments,h=f.dataKey;if(e[h]){var m=f.dataDuration;if(m>=_)if(s[h])m>s[h].Expiry&&(s[h].Expiry=m);else{var v=e[h];if(void 0!==v){var S={Value:v,Expiry:m};s[h]=S}}}}}}for(var h in s)s.hasOwnProperty(h)&&t.saveData(h,s[h].Value,parseInt(s[h].Expiry),u)}v.apply(null,arguments)}i.register("EndUserDataConverterConfig").asCtor(ou).dependencies("Consts");function ou(e){var t=this;t.get=n;function n(){return{fixedKeys:{"wm-lang":P,"wm-ldv":A,"wm-ag-rep-v":_,"wm-ag-d":A},keyNamesWithSuffixes:{"wm-stpcond":A},repeatKeysWithRelatedObject:{"wm-ASRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"ASRep",DeployableType:e.DEPLOYABLE_TYPE.Tutorial},{Parts:2,DeployableTypeIndex:0,DeployableIdIndex:1,SettingsKey:"ASRep"}],"wm-SrvWtRep":[{Parts:2,DeployableIdIndex:0,SubSettings:"survey",SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Tutorial}],"wm-SrvRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Survey}]},keysWithRepeat:{"wm-ag-rep":{SettingsKey:"AG",PropertyForKey:"repeat"}},keysWithThreeParts:["wm-ag-rep"]}}}i.register("WalkmeConfigManager").asCtor(au).dependencies("WmAjax, SettingsFile, PerformanceTimestampAdder");function au(e,t,n){var r=this;function i(){}r.init=function(i){var o=t.getSettingsFile(),a=o.WalkMeConfigFile;a?(n.addTimeStamp("loadWalkmeConfigStart"),e.loadTextFile(a,"WalkMeConfigCallback",s,void 0,!0)):i&&i();function s(e,t,o){n.addTimeStamp("loadWalkmeConfigEnd"),window._walkmeInternals.walkmeConfig=e,r.Data=e,i&&i()}},i.apply(null,arguments)}i.register("ShoutOutActionDataProvider").asCtor(su).dependencies("Consts, DeployablesDataProvider, CommonUtils, ActionsFactory");function su(t,n,r,i){var o=this,a="none",s={};s=r.isMobileNative()?{rateApp:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.RateApp},openSettings:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.OpenSettings},browseToPage:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.BrowseToPage},playVideo:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.PlayVideo},sendEmail:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.SendEmail},openApp:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.OpenApp},openAppStore:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.OpenAppStore},none:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.None}}:{playWt:{idField:"wtId",deployableType:t.DEPLOYABLE_TYPE.Tutorial,eventType:t.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:t.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:t.DEPLOYABLE_TYPE.Content,eventType:t.EVENT_SENDER_ACTIONS.PlayResource,aAppType:t.EVENT_SENDER_EVENT_APPS.Content},playShuttle:{idField:"shuttleId",deployableType:t.DEPLOYABLE_TYPE.Shuttle,eventType:t.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:t.EVENT_SENDER_EVENT_APPS.Shuttle},openMenu:{eventType:t.EVENT_SENDER_ACTIONS.OpenMenu},none:{eventType:t.EVENT_SENDER_ACTIONS.None},playBf:{idField:"bfId",deployableType:t.DEPLOYABLE_TYPE.BusinessSolution,eventType:t.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:t.EVENT_SENDER_EVENT_APPS.BizFlow}},o.fillActionData=l,o.isWithAction=c;function u(){}function l(t,r){var i;if(r=r||{},t.Actions&&(i=e.grep(t.Actions,function(e){return d(e)})[0])){var o=s[i.Type];if(o){r.Type=o.eventType;var a=i.Args;a&&a[o.idField]&&(r.ItemId=a[o.idField].toString(),r.Name=n.getDeployableName(o.deployableType,r.ItemId),r.aAppType=o.aAppType)}}return r}function c(e){var t=e.Actions;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(d(r)&&r.Type!=a)return!0}return!1}function d(e){return i.get(e.Type).Type==t.DEPLOYABLE_ACTION_TYPES.Action}u.apply(null,arguments)}i.register("LauncherActionDataProvider").asCtor(uu).dependencies("Consts, DeployablesDataProvider");function uu(e,t){var n=this,r="none",i={playWt:{idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:e.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayResource,aAppType:e.EVENT_SENDER_EVENT_APPS.Content},playSurvey:{idField:"surveyId",deployableType:e.DEPLOYABLE_TYPE.Survey,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySurvey,aAppType:e.EVENT_SENDER_EVENT_APPS.Survey},playShuttle:{idField:"shuttleId",deployableType:e.DEPLOYABLE_TYPE.Shuttle,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:e.EVENT_SENDER_EVENT_APPS.Shuttle},shoutOut:{idField:"id",deployableType:e.DEPLOYABLE_TYPE.ShoutOut,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShoutOut,aAppType:e.EVENT_SENDER_EVENT_APPS.ShoutOut},openMenu:{actionEntityType:e.EVENT_SENDER_ACTIONS.OpenMenu},playBf:{idField:"bfId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:e.EVENT_SENDER_EVENT_APPS.BizFlow}};n.fillActionData=a,n.isWithAction=s;function o(){}function a(e,n){if(n=n||{},null==e)return n;var r=e.Settings;if(r&&r.action){var o=r.action,a=i[o.actionType];if(a){n.Type=a.actionEntityType;var s=o.arguments;s&&s[a.idField]&&(n.ItemId=s[a.idField].toString(),n.Name=t.getDeployableName(a.deployableType,n.ItemId),n.aAppType=a.aAppType)}}return n}function s(e){var t=e.Settings;if(t&&t.action){var n=t.action.actionType;if(n&&n!=r)return!0}return!1}o.apply(null,arguments)}i.register("DeployablesDataProvider").asCtor(lu).dependencies("DeployablesManagerFactory");function lu(e){var t=this;t.getDeployableName=r;function n(){}function r(t,n){if(null==t||null==n)return;var r=e.get(t);if(!r)return;var i=r.getById(n);if(i)return i.Name;return}n.apply(null,arguments)}function cu(e,t){var n=this;n.run=function(){e.start(),t.start()}}F.register(D.PLATFORM.iOS,function(){i.register("PlatformInitializer").asCtor(cu).dependencies("VisitsManager, VersionsManager")}),F.register(D.PLATFORM.Android,function(){i.register("PlatformInitializer").asCtor(cu).dependencies("VisitsManager, VersionsManager")});function du(){var e=this;e.run=function(){}}F.register(D.PLATFORM.Web,function(){i.register("PlatformInitializer").asCtor(du)}),F.register(D.PLATFORM.MobileWeb,function(){i.register("PlatformInitializer").asCtor(du)});function pu(e){var t,n=this,r="wm-nov",i="wm-lv";function o(){}function a(){var t=e.getData(r,0);e.saveData(r,t+1,P)}function s(){t=n.getLastVisitDate(),e.saveData(i,Date.now(),P)}n.start=function(){a(),s()},n.getVisitsNumber=function(){return e.getData(r,0)},n.getLastVisitDate=function(){return t||(t=e.getData(i,0),t=new Date(t).setHours(0,0,0,0),t=new Date(t)),t},o.apply(null,arguments)}i.register("VisitsManager").asCtor(pu).dependencies("ClientStorageManager");function gu(e){var t=this,n="wm-av",r="wm-awu";function o(){}function a(){var o=i.get("MobileUtils"),a=o.getAppVersionCode(),s=t.getAppVersion();void 0!==s&&s<a?e.saveData(r,!0,P):e.saveData(r,!1,P),e.saveData(n,a,P)}t.start=function(){a()},t.wasAppUpdated=function(){return e.getData(r,!1)},t.getAppVersion=function(){return e.getData(n,void 0)},o.apply(null,arguments)}i.register("VersionsManager").asCtor(gu).dependencies("ClientStorageManager"),i.register("WindowBeforeUnloadHandler").asCtor(fu).dependencies("win");function fu(t){var n=this;n.init=o,n.register=c,n.cleanResources=d;var r,i;function o(){d(),a(),s()}function a(){r=[]}function s(){i=t.onbeforeunload,t.onbeforeunload=u}function u(){if(l(),i)return i.apply(t,arguments)}function l(){e.each(r,t);function t(e,t){t()}}function c(e){r.push(e)}function d(){t.onbeforeunload===u&&(t.onbeforeunload=i)}}i.register("CrossDomainManager").dependencies("Logger, FeaturesManager, ClientStorageManager, AuditSourceProvider, UserGuidContainer").asCtor(hu);function hu(e,t,n,r,o){var a=this;a.isReady=l,a.get=u;var s;function u(){return l()||c(),s}function l(){return!!s}function c(){var a;a=t.isFeatureEnabled("po_frames")||t.isFeatureEnabled("passOwnership")?"FramedOwnershipManager":t.isFeatureEnabled("po_tabs")?"TabbedOwnershipManager":"PassOwnershipManager",i.entry(a).args({storageManager:n,errorHandler:e.error,userGuid:o.getUserGuid(),owner:window,isFeatureEnabled:t.isFeatureEnabled,allUserGuids:o.getAllUserGuids(),topWindow:top,isPlayMode:r.isInPlayMode()}),s=i.get(a)}}i.register("PageIdentifiersAPI").asCtor(mu).dependencies("PageComparerCacheManager, CommonUtils, UIChangeTracker");function mu(e,t,n){var r=this;r.setPageIdentifiers=a,r.capture=s;var i=e.editorApi;function o(){if(!i.isEnabled())return;n.bind(u),i.updateCurrentPage()}function a(e){if(!i.isEnabled())return;if(i.resetCollection(),e)for(var t=0;t<e.length;t++){var n=e[t];i.addSerializedPage(n.PageDescription,n.Id)}}function s(){if(!i.isEnabled())return null;var e=i.captureCurrentPage();return t.toJSON(e)}function u(){if(!i.isEnabled())return;i.updateCurrentPage()}o()}i.register("jQueryCacheCleaner").asCtor(vu).dependencies("HostData, TimerManager");function vu(t,n){var r=this;r.init=a,r.destroy=s;var i;function o(){}function a(){u()}function s(){i&&(i.clear(),i=null)}function u(){l(),i=n.setWalkmeTimeout(u,1e4)}function l(){try{for(var t in e.cache){var n=e.cache[t],r=c(n);r&&delete e.cache[t]}}catch(i){}}function c(e){try{if(e&&e.handle&&e.handle.elem)return d(e.handle.elem);if(e&&e.data&&e.data.iframe)return d(mtjQuery(e.data.iframe)[0])}catch(t){return!0}return!1}function d(e){var t=e.documentElement;t&&(e=e.documentElement);var n=e.parentNode;if(!n)return!0;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;if(!i)return!0}o()}i.register("wmjQuerySafe").asInstance(Su);function Su(e){return i.create("wmjQuerySafeProxy",{element:e})}var Eu=Tu();i.register("wmjQuerySafeProxy").asCtor(Eu).asProto().dependencies("wmjQuery, wmjQuerySafe, EventBinder");function Tu(){e.prototype.isSafe=t,e.prototype.getDocument=n,e.prototype.off=r,e.prototype.stop=i("stop"),e.prototype.remove=i("remove"),e.prototype.find=i("find"),e.prototype.show=i("show");function e(e,t,n,r){this.wmjQuery=e,this.wmjQuerySafe=t,this.eventBinder=n,this._element=e(r.element)}function t(){try{return this._element[0].ownerDocument,!0}catch(e){return!1}}function n(){var e=this,t=this;return this.safeExecute(function(){t=e.wmjQuerySafe(e._element[0].ownerDocument)}),t}function r(e,t){var n=this;return this.safeExecute(function(){n.eventBinder.unbind(n._element,e,t)}),this}function i(e){return function(){var t=this,n=arguments,r=t;return t.safeExecute(function(){var i=t._element[e].apply(t._element,n);r=t.wmjQuerySafe(i)}),r}}return e.prototype.safeExecute=function(e){try{e()}catch(t){this._element=this.wmjQuery()}},e}i.register("PopupStepElementProvider").asCtor(yu).dependencies("TopContainerProvider");function yu(e){var t=this;t.get=n;function n(t){var n=e.getTopContainer();if(0==n.length)return!1;var r=mtjQuery("#walkme-popup-element",n);if(r.length<=0||t){var i="walkme-popup-element";t&&(i+="-"+r.length),r=mtjQuery(n[0].ownerDocument.createElement("div")),r.attr({id:i}),r.css("width","0px;"),r.css("height","0px;"),mtjQuery(n.append(r))}return r}}i.register("UserGuidContainer").asCtor(Cu).dependencies("CommonUtils, ArrayUtils, SettingsFile");function Cu(e,t,n){var r=this;r.getUserGuid=a,r.setUserGuid=s,r.getAllUserGuids=u;var i=null,o=[];function a(){return i}function s(n){n=e.defaultValue(n,"No-User-Guid"),t.inArray(n,o)==-1&&o.push(n),i=n}function u(){return n.getAllUserGuids()||o}}i.register("AnalyticsPropertiesManager").asCtor(Iu).dependencies("SiteConfigManager, ValueProviderFactory");function Iu(e,t){var n=this;n.setPredefinedPropertyValue=a,n.getPropertyValue=s,n.init=o;var r;function i(){r={}}function o(){var n=e.get().Settings;if(n&&n.analyticsProperties)for(var i=0;i<n.analyticsProperties.length;i++){var o=n.analyticsProperties[i],a=t.get(o);r[o.name]=a}}function a(e,n){var i=t.getPredefinedProvider(n);r[e]=i}function s(e){if(r[e])return r[e].get();return}i.apply(this,arguments)}i.register("ValueProviderFactory").asCtor(bu).dependencies("FeaturesManager, Consts, ValueCalculatorFactory");function bu(e,t,n){var r=this;r.get=a,r.getPredefinedProvider=u;function o(){}function a(n){var r=s(n);if(e.isFeatureEnabled(t.FEATURES.StickyCustomVars)){var o={calculateValueFunc:r};return i.create("StickyValueProvider",o)}if(e.isFeatureEnabled(t.FEATURES.StrongStickyCustomVars)){var o={calculateValueFunc:r};return i.create("StrongStickyValueProvider",o)}var a=r();return u(a)}function s(e){var t=n.get(e.calculationMethod),r=e.variable,i=function(){return t.calculate(r)};return i}function u(e){var t={value:e};return i.create("PredefinedValueProvider",t)}o.apply(this,arguments)}i.register("StickyValueProvider").asCtor(wu).asProto();function wu(e){var t=this;t.get=o;var n,r;function i(e){r=e.calculateValueFunc,a()}function o(){return void 0===n&&a(),n}function a(){n=r()}i.apply(this,[e])}i.register("StrongStickyValueProvider").asCtor(_u).asProto();function _u(e){var t=this;t.get=o;var n,r;function i(e){r=e.calculateValueFunc}function o(){return a(),n}function a(){n=r()}i.apply(this,[e])}i.register("PredefinedValueProvider").asCtor(Pu).asProto();function Pu(e){var t=this;t.get=i;var n;function r(e){n=e.value}function i(){return n}r.apply(this,[e])}i.register("TopMostCssStyleSettter").asCtor(Au);function Au(){var e=this;e.setTopMostCssStyle=t;function t(e,t){e.css("position","absolute"),e.css("z-index",t),e.addClass("SkipThisFixedPosition")}}i.register("ElementCenterer").asCtor(ku).dependencies("FramesetsUtils, BiggestFrameProvider, PositionHelper, FacebookCanvasIndicator");function ku(e,t,n,r){var i=this;i.centerElementInPage=a;function o(){}function a(i,o,a,l){var c=window;if(e.shouldHandlePageAsFramesets()&&(c=t.getBiggestFrame().contentWindow),r.isInFacebookCanvas())return u(i,o);var d={top:0,left:0};a&&(d.top+=a.top,d.left+=a.left);var p=n.calculateOffset(i.parent()[0],c);return d.top-=p.top,d.left-=p.left,s(i,o,mtjQuery(c).scrollLeft(),mtjQuery(c).scrollTop(),mtjQuery(c).width(),mtjQuery(c).height(),d,l)}function s(e,t,n,r,i,o,a,s){if(void 0==a||null==a)var a={top:0,left:0};n>500&&(n=0);var u=(o-mtjQuery(e).outerHeight())/2+r+a.top,l=(i-mtjQuery(e).outerWidth())/2+n+a.left;if(u=Math.round(u>0?u:0),l=Math.round(l>0?l:0),Math.abs(u-mtjQuery(e).offset().top)<2&&Math.abs(l-mtjQuery(e).offset().left)<2)return;u+="px",l+="px",mtjQuery(e).css({
position:"absolute",margin:0}),t?(s=s?s:{duration:400},mtjQuery(e).animate({top:u,left:l},s)):mtjQuery(e).css({top:u,left:l})}function u(e,t){FB.Canvas.getPageInfo(function(n){l(e,t,n)})}function l(e,t,n){s(e,t,n.scrollLeft,n.scrollTop,mtjQuery(window).width(),n.clientHeight)}o()}i.register("PositionHelper").asCtor(Ou).dependencies("Lib, UiUtils, Logger, CommonUtils, Consts, FeaturesManager, ElementUtils, ScrollUtils, DocumentUtils, FindElementCornerFunctions, CommonEvents, HostData, FrameContentsProvider, BiggestFrameProvider, FramesetsUtils, SettingsValuesRetriever");function Ou(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m){var v,S,E,T,y=this,C={ALL_POINTS:0,ANY_POINT:1},I={0:"mt_visible",1:"wm_vsb_st",2:"wm_interact_any_point",3:"wm_interact_all_points"},b=5e3;function w(){v=e.expr.filters.mt_hidden,R()}y.getVisibleFilter=function(e){return":"+I[(e.Settings||e).filter||0]};function _(e){var t=0,n=0,r=mtjQuery(e),o=r.offset();if(t=o.top,n=o.left,a.isFeatureEnabled("iframepadding")&&r.is("iframe")&&(n+=parseFloat(r.css("padding-left")),t+=parseFloat(r.css("padding-top"))),e.ownerDocument){var s=P(i.getBody(e.ownerDocument)),u=P(e.ownerDocument.documentElement);t-=s.top==u.top?s.top:s.top+u.top,n-=s.left==u.left?s.left:s.left+u.left}var l={left:n,top:t};return l}function P(e){if(!e)return{top:0,left:0};return{top:e.scrollTop||0,left:e.scrollLeft||0}}function A(e){var t=0,n=0;do"FRAME"==s.getElementTagName(e)?(t+=mtjQuery(e).offset().top,n+=mtjQuery(e).offset().left):(t+=e.offsetTop||0,n+=e.offsetLeft||0),e=e.offsetParent;while(e);var r={left:n,top:t};return r}this.getPosRelativeToWindow=function(e,t,n){var r,o,a,s,u=0,c=0;for(t=t||top,n&&!window.opera&&e&&e.tagName&&"input"==e.tagName.toLowerCase()&&(u+=e.scrollLeft,c+=e.scrollTop);e;){if(o=e.ownerDocument,a=l.getDocumentWindow(o),n&&a==t){var d=i.getBody(o);u+=o.documentElement.scrollLeft||d.scrollLeft,c+=o.documentElement.scrollTop||d.scrollTop}if(s=!a||a==t,r=n?_(e):A(e),u+=r.left,c+=r.top,s)break;e=a.frameElement}var p={left:u,top:c};return p};function k(e,t){var n={};if(e.left>t.right||t.left>e.right)return null;if(e.bottom<t.top||t.bottom<e.top)return null;return n.left=Math.max(e.left,t.left),n.right=Math.min(e.right,t.right),n.top=Math.max(e.top,t.top),n.bottom=Math.min(e.bottom,t.bottom),n.height=n.bottom-n.top,n.width=n.right-n.left,n}function O(e,t){var n=t.left,r=t.top;e.left+=n,e.right+=n,e.top+=r,e.bottom+=r}function N(e,t){var n=u.getScrollOffset(t);e.left+=n.Left,e.right+=n.Left,e.top+=n.Top,e.bottom+=n.Top}this.getRectRelativeToWindow=function(e,t,n){var r,i,o,a=!1,s={left:0,top:0};for(o=e.length>1?y.getMultipleElementsRect(e):t.getBoundingClientRect(),n=n||top;!a;){r=t.ownerDocument,i=l.getDocumentWindow(r);var u=r.documentElement.getBoundingClientRect();if(o=k(o,u),!o)return o;a=!i||i==n,a||(s=i.frameElement.getBoundingClientRect(),O(o,s),t=i.frameElement)}return N(o,r),o};function D(e){var t=s.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}this.getDrawingArea=function(e,t,n){if(!n||y.isElementInViewport(e))return D(t?mtjQuery("body"):e);var r=mtjQuery(document);return{top:0,left:0,height:r.height(),width:r.width()}},this.isElementScrolledOut=function(e,t,n){var r=g.getFrameContents(t),i=e.offset().top,a=e.offset().left,s=e.outerHeight(),u=e.outerWidth(),l=parseInt(n);if(l==o.POSITION_TYPE.Bottom&&(i+=s),l==o.POSITION_TYPE.Right&&(a+=u),r.scrollTop()>i||t.height()+r.scrollTop()<i)return!0;if(r.scrollLeft()>a||t.width()+r.scrollLeft()<a)return!0;return!1},y.getCenterPositionByBounds=function(e){var t=e.left+e.width/2,n=e.top+e.height/2;return{left:t,top:n}},y.getEmbedInElementPosition=function(e,t){var n={},r=parseInt(m.getSettingsValue(t,"leftOffset",0)),i=parseInt(m.getSettingsValue(t,"topOffset",0));return L(e,n,{top:i,left:r}),n},this.getElementBounds=function(e,t,n,r){var o={},a=e[0];if(t){var s=y.getMultipleElementsRect(e),u=i.getElementDocument(e),l=y.getOffsetRect(a,u,n);o=y.getElementBoundsWithRectAndOffset(s,l)}else{var c=y.getPosRelativeToWindow(a,n,!0);L(e,o,c)}return o=J(o,r)},y.getMultipleElementsRect=function(e){for(var t,n,r,i,o,a=0;a<e.length;a++)o=e[a].getBoundingClientRect(),(void 0===t||o.left<t)&&(t=o.left),(void 0===n||o.top<n)&&(n=o.top),(void 0===i||o.bottom>i)&&(i=o.bottom),(void 0===r||o.right>r)&&(r=o.right);return{top:n,left:t,right:r,bottom:i}};function L(e,t,n){t.top=n.top,t.left=n.left;var r=e.outerWidth(),i=e.outerHeight();if(e.length>1){var o=y.getMultipleElementsRect(e);r=o.right-o.left,i=o.bottom-o.top}t.height=i,t.width=r,t.bottom=t.top+t.height,t.right=t.left+t.width}y.isElementVisible=function(t,n){var r=!0;try{t[0].tagName}catch(i){r=!1}if(r){n=n||0;var o=":"+I[n];e(t).filter(o).length!=e(t).length&&(r=!1)}return r},y.registerResizeAndScrollEvents=function(e){var n=e.callback;n||(n=function(e,n){t.centerElementInPage(e,!0,n)});var r=h.shouldHandlePageAsFramesets()?f.getBiggestFrame().contentWindow:window;x(r,e.element,e.offset,e.eventNameSuffix,n)},y.getWindowSize=function(){var t=e(h.shouldHandlePageAsFramesets()?f.getBiggestFrame().contentWindow:window),n={height:t.height(),width:t.width()};return n};function x(e,t,n,r,i){y.removeScrollAndResizeEvents(r);var o=M(r);mtjQuery(e).bind(o,function(){t.stop(!1,!0),n=F(n,r),i(t,n)})}function F(e,t){var n={offset:e,eventName:t,defaultValue:e};return d.raiseEvent(o.EVENTS.Scrolls.ScrollFired,n),n.returnValue}y.removeScrollAndResizeEvents=function(e){var n=window;if(t.shouldHandlePageAsFramesets()){var r=f.getBiggestFrame();null!=r&&(n=r.contentWindow)}var i=M(e);mtjQuery(n).unbind(i)},y.centerElementInParent=function(e,t){var n=t.outerHeight()/2-e.outerHeight()/2,r=t.outerWidth()/2-e.outerWidth()/2;e.css("top",n+"px"),e.css("left",r+"px")};function M(e){return e=e?e:"walkme",kf("scroll.{0}, resize.{0}, scrollstop.{0}, orientationchange.{0}",e)}function R(){B("wm_hdn_st",function(t){var n=e(t);return n.is(":mt_hidden")||!S&&!H(n)}),B("wm_vsb_st",function(t){return!e.expr.filters.wm_hdn_st(t)}),B("wm_interact_any_point",function(e){return Y(e,C.ANY_POINT)}),B("wm_interact_all_points",function(e){return Y(e,C.ALL_POINTS)})}y.extendVisibilityFilters=function(){S=!1,e.expr.filters.mt_hidden=v;e.expr.filters.mt_hidden;if(a.isFeatureEnabled("strongMtVisible")&&(S=!0,W(function(e){return!H(e)})),a.isFeatureEnabled("anyPointInteractable")&&W(function(e){return!Y(e[0],C.ANY_POINT)}),a.isFeatureEnabled("nonVisibleIframe")){var t=function(e){var t=e.data("iframe");return!(!t||!t.is(":mt_hidden"))};W(t),G(t)}if(a.isFeatureEnabled("visibleOpacity")&&(W(U),G(U)),window._walkmeInternals&&window._walkmeInternals.customMtHiddenFuncs)for(var n=window._walkmeInternals.customMtHiddenFuncs,r=n.length-1;r>=0;r--)W(n[r])};function B(t,n){e.expr.filters[t]=n}function U(t){if(V(t))return!0;var n=!1;return t.parents().each(function(){if(V(e(this)))return n=!0,!1}),n}function V(e){if(0==e.css("opacity"))return!0;var t=e[0].filters;return t&&t.alpha&&0===t.alpha.opacity}function W(t){var n=e.expr.filters.mt_hidden;e.expr.filters.mt_hidden=function(r){return n(r)||t(e(r))}}function G(t){W(t);var n=e.expr.filters.wm_vsb_st,r=e.expr.filters.wm_interact_any_point,i=e.expr.filters.wm_interact_all_points;e.expr.filters.wm_vsb_st=function(r){return n(r)&&!t(e(r))},e.expr.filters.wm_interact_any_point=function(n){return r(n)&&!t(e(n))},e.expr.filters.wm_interact_all_points=function(n){return i(n)&&!t(e(n))}}function H(t){for(var n=t.parents().add(t),r=n.length-1;r>0;r--)if(j(e(n[r]),e(n[r-1])))return!1;return!0}function j(e,t){if("absolute"==e.css("position"))return!1;if("hidden"!=t.css("overflow"))return!1;var n=de(t,"border-top"),r=de(t,"padding-top"),i=t.offset().top,o=n+r+i,a=t.height(),s=o+a,u=t.offset().left,l=u+t.width();if(o==s)return!0;var c=de(e,"border-top"),d=de(e,"padding-top"),p=e.offset().top,g=c+d+p,f=e.height(),h=g+f,m=e.offset().left,v=m+e.width(),S=h<o,E=g>s,T=v<u,y=m>l;return S||E||T||y}function Y(t,n){var r=t.ownerDocument,i=e(t),o=i.parents("html"),a=i.parents("body"),s=a.scrollTop()||o.scrollTop(),u=a.scrollLeft()||o.scrollLeft(),l={element:i,html:o,topScroll:s,leftScroll:u,workingDocument:r};return n==C.ALL_POINTS?z(l):Q(l)}function z(e){for(var t=c.length-1;t>=0;t--)if(!K(c[t],e))return!1;return!0}function Q(e){for(var t=c.length-1;t>=0;t--)if(K(c[t],e))return!0;return!1}function K(t,n){var r=n.element,i=t(r),o=i.x-n.leftScroll,a=i.y-n.topScroll,s=n.workingDocument.elementFromPoint(o,a);return s==r[0]||e.contains(r[0],s)}y.findNearestSelfOrParentByType=function(t,n){var r=t[0];if(!r)return;for(var i=[],o=0;o<n.length;o++)i.push(n[o].toLowerCase());for(var a=r.tagName.toLowerCase();"body"!=a&&"frameset"!=a&&"head"!=a;){if(e.inArray(a,i)>-1)return e(r);r=r.parentNode,a=r.tagName.toLowerCase()}},y.findFirstSelfOrChildByType=function(e,t){if(!e.exist())return;var n=t.join(", ");if(e.is(n))return e.first();var r=e.children(n).first();if(r.exist())return r;if(e.is("table"))return q(e,t)};function q(e,t){var n;if(n=y.findFirstSelfOrChildByType(e.children("tr"),t),n&&n.exist())return n;if(n=y.findFirstSelfOrChildByType(e.children("thead").children("tr"),t),n&&n.exist())return n;if(n=y.findFirstSelfOrChildByType(e.children("tbody").children("tr"),t),n&&n.exist())return n;if(n=y.findFirstSelfOrChildByType(e.children("tfoot").children("tr"),t),n&&n.exist())return n}y.getColumn=function(t){var n=[],r=y.findNearestSelfOrParentByType(t,["table"]);if(!r)return;var i,o=["td","th"];if(i=t.is(o)?t:t.is("table")||t.is("tr")?y.findFirstSelfOrChildByType(t,o):y.findNearestSelfOrParentByType(t,o),!i)return;var a,s,u=null,l=i.index(),c=e([]);e.merge(c,r.children("tr")),e.merge(c,r.children("thead, tbody, tfoot").children("tr"));for(var d=0;d<c.length;d++)a=c[d].cells[l],a&&(null==u&&(u=a.colSpan),a.colSpan<u&&(n.length=0,u=a.colSpan),a.colSpan==u&&(s=e(a),s.height()&&s.width()&&n.push(a)));return e(n,r)},this.getBodyInheritedMargin=function(){var e={top:0,left:0};if(!a.isFeatureEnabled("calcInheritedMargin"))return e;var t=!1,n=mtjQuery("body").find("div").filter(function(){if(t)return!1;var e=mtjQuery(this);if("relative"!=e.css("position"))return!1;var n=null,r=null,i=parseInt(e.css("margin-top")),o=0!=i&&parseInt((r=e.position()).top)==-1*parseInt((n=e.offset()).top),a=!1;if(!o){var s=parseInt(e.css("margin-left"));a=0!=s&&parseInt(null!=r?r.left:e.position().left)==-1*parseInt(null!=n?n.left:e.offset().left)}return t=(o||a)&&X(e)}).eq(0);return n.length>0&&(e={top:parseInt(n.css("margin-top")),left:parseInt(n.css("margin-left"))}),e};function X(e){var t=!0;return e.parentsUntil("html").each(function(e,n){"relative"!=mtjQuery(n).css("position")&&(t=!1)}),t}function J(e,t){var n=parseInt(m.getSettingsValue(t,"leftOffset",0)),r=parseInt(m.getSettingsValue(t,"topOffset",0));return e.top=e.top+r,e.left=e.left+n,e.right=e.right+n,e.bottom=e.bottom+r,e}y.fixFirefoxAutoMarginBug=function(e,t,r,i){if(p.isFirefox&&$(t,r)){e.top+=y.tryParsingStyleValue(r.marginTop);var o=n.getStyle(t.parentElement,i),a=(y.tryParsingStyleValue(o.width)-y.tryParsingStyleValue(r.width))/2;if(a<0)return;e.left+=a}};function $(e,t){if("BODY"==e.tagName&&"relative"==t.position&&"auto"==e.style.marginLeft&&"auto"==e.style.marginRight&&0==y.tryParsingStyleValue(t.marginLeft))return!0}y.tryParsingStyleValue=function(e){return"string"==typeof e&&(e=e.replace("px","")),isNaN(e)?0:parseInt(e)};function Z(e,t){return(new Date).getTime()-e<t}y.getCollapsedMargin=function(){return E&&Z(T,b)?E:(E=ee(),T=(new Date).getTime(),E)};function ee(){var t={top:0,left:0};if(!a.isFeatureEnabled("collapsedMargins"))return t;var n=e("body"),r=0;if(te(n)){n.css("margin-top");n.find("> div").each(function(){var t=e(this),n=t.offset().top,i=t.position().top;if(parseInt(t.css("margin-top"),10)>0){var o=n-i;o>r&&(r=o)}})}return t.top+=r,t}function te(e){return e.offset().top<=0&&"relative"==e.css("position")&&(!p.isIE()||"visible"==e.css("overflow-x")&&"visible"==e.css("overflow-y"))&&(!p.isIEBrowser(9)||ne(e))}function ne(t){try{var n=e("<div />");n.important({position:"absolute",top:0,visibility:"hidden"}),t.append(n);var r=n.offset().top;return n.remove(),r>0}catch(i){return!1}}y.getOffsetRect=function(e,t,n){try{var o=i.getBody(t),a=u.getScrollTop(t,o),s=u.getScrollLeft(t,o),l=y.calculateOffset(o,n);return a-=l.top,s-=l.left,{top:Math.round(a),left:Math.round(s)}}catch(c){r.error(c)}},y.calculateOffset=function(e,t){for(var r=e,i=n.getStyle(e,t);i&&"static"==i.position;)r=r.parentNode,i=n.getStyle(r,t);var o=y.getBodyInheritedMargin();o.top=y.tryParsingStyleValue(o.top),o.left=y.tryParsingStyleValue(o.left);var a={top:o.top,left:o.left},s=y.getCollapsedMargin();if(a.top+=s.top,a.left+=s.left,i)for(ie(a,r,i,"margin"),oe(a,r,i),re(a,r,i),y.fixFirefoxAutoMarginBug(a,r,i,t),r=r.parentNode,i=n.getStyle(r,t);i;)ie(a,r,i,"margin"),ie(a,r,i,"padding"),oe(a,r,i),re(a,r,i),r=r.parentNode,i=n.getStyle(r,t);return a};function re(e,t,n){"static"!=n.position&&(e.top+=y.tryParsingStyleValue(n.top),e.left+=y.tryParsingStyleValue(n.left))}function ie(e,t,n,r){e.top+=y.tryParsingStyleValue(n[r+"Top"]),e.left+=y.tryParsingStyleValue(n[r+"Left"])}function oe(e,t,n){if(/(html|body)/i.test(t.tagName))return;e.top+=ae(n.borderTopWidth),e.left+=ae(n.borderLeftWidth)}function ae(e){var t=1,n=3,r=5,i=0;switch(e){case"thin":i=t;break;case"medium":i=n;break;case"thick":i=r;break;default:i=Math.round(parseFloat(e))}return i}y.getElementBoundsWithRectAndOffset=function(e,t){var n=e.left+t.left,r=e.top+t.top,i=e.right-e.left,o=e.bottom-e.top,a=e.right+t.left,s=e.bottom+t.top;return{top:r,left:n,width:i,height:o,right:a,bottom:s}},y.isElementInViewport=function(t,n){n=e.extend({},o.DEFAULT_POSITIONS,n);var r=ue(t),i=t.offset();r.top+=i.top,r.left+=i.left,y.fixOffsetForIE(t,r);var u=a.isFeatureEnabled("fixIframeScroll")?s.getElementViewport(t):s.getWindowViewport(),l=a.isFeatureEnabled("bodyClientHeight")?e("body")[0].clientHeight:u.height(),c=u.top()+n.top,d=u.left()+n.left,p=l-n.bottom+(u.top()-0),g=u.width()-n.right+(u.left()-0),f=ce(r.top,r.left+t.width(),r.top+t.height(),r.left,c,g,p,d);return f};function se(e){try{if("1.7.1"!=e.jquery)return;var t=e[0].ownerDocument.documentMode;if(7==t||8==t){var n=e.data("iframe");if(n&&"FRAME"==n[0].tagName)return!0}}catch(r){}}y.fixOffsetForIE=function(e,t){if(se(e)){var n=e[0].ownerDocument,r=pr.getBody(n);t.top+=r.scrollTop||n.documentElement.scrollTop,t.left+=r.scrollLeft||n.documentElement.scrollLeft}};function ue(e){for(var t=le(e),n={top:0,left:0},r=0;r<t.length;r++){var o=t[r].offset(),a=i.getBody(t[r][0].contentWindow.document);n.top+=o.top,n.top-=a.scrollTop||t[r][0].contentWindow.document.documentElement.scrollTop,n.left+=o.left,n.left-=a.scrollLeft||t[r][0].contentWindow.document.documentElement.scrollLeft}return n}function le(e,t){var n=e.data("iframe");return t||(t=[]),n&&(t.push(n),le(n,t)),t}function ce(e,t,n,r,i,o,a,s){return n<=a&&e>=i&&r>=s&&t<=o}function de(e,t){var n=e.css(t);return n?parseFloat(n):0}w.apply(null,arguments)}i.register("PopupPosition").asCtor(Nu).asProto().dependencies("Positions, Lib");function Nu(e,t,n){var r=this;r.positionElementInPage=s;var i,o;function a(){o=n.animator,i=n.pagePosition}function s(n,r){i===e.Center?t.centerElementInPage(n,!1,r):u(n,!0,r)}function u(t,n,r){t.css({position:"fixed"});var a=null,s="",u="wm-position-",l=r.top||0,c=r.left||0;switch(i){case e.Top:s=u+"top",a={top:0,left:"50%",marginLeft:c,marginTop:l};break;case e.Right:s=u+"right",a={right:0,top:"50%",marginTop:l,marginRight:-c};break;case e.Bottom:s=u+"bottom",a={bottom:0,left:"50%",marginLeft:c,marginBottom:-l};break;case e.Left:s=u+"left",a={left:0,top:"50%",marginTop:l,marginLeft:c};break;case e.TopLeft:s=u+"top-left",a={left:0,top:0,marginTop:l,marginLeft:c};break;case e.TopRight:s=u+"top-right",a={right:0,top:0,marginTop:l,marginRight:-c};break;case e.BottomRight:s=u+"bottom-right",a={right:0,bottom:0,marginBottom:-l,marginRight:-c};break;case e.BottomLeft:s=u+"bottom-left",a={left:0,bottom:0,marginBottom:-l,marginLeft:c}}t.addClass(s),t.css(a),n&&o.setPagePositionOffset({marginTop:a.marginTop,marginLeft:a.marginLeft,marginBottom:a.marginBottom,marginRight:a.marginRight},i)}a.apply(null,arguments)}var Du=function(){function e(e,t){this.PLACE_HOLDER="%@",this.LocalSVNRevision="$Rev: 4206 $",this._win=e,this._mobileCallbacksHandler=t}return e.prototype.message=function(e,t,n,r){this.registerHandler(n,e,t,r)},e.prototype.getParams=function(e,t,n){var r={actionId:t,success:this._mobileCallbacksHandler.getSuccessCallback(e,t),fail:this._mobileCallbacksHandler.getFailCallback(e,t),close:this._mobileCallbacksHandler.getCloseCallback(e,t)};return n&&(r.data=n),r},e.prototype.registerHandler=function(e,t,n,r){this._mobileCallbacksHandler.registerMobileCallbacks(e,t,r),this.postMessage(this.getParams(t,e,n))},e}(),Lu=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.getSdkVersion=function(){return this._win.iOS&&this._win.iOS.SDKVersionName},t.prototype.getAppVersionCode=function(){return this._win.iOS&&this._win.iOS.appVersionCode},t.prototype.postMessage=function(e){this._win.webkit&&this._win.webkit.messageHandlers[D.MOBILE_COMMAND_NAME].postMessage(e)},t}(Du);F.register(D.PLATFORM.iOS,function(){i.register("MobileUtils").asCtor(Lu).dependencies("win,MobileCallbacksHandler")});var xu=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.getSdkVersion=function(){return this._win.android&&this._win.android.SDKVersionName},t.prototype.getAppVersionCode=function(){return this._win.android&&this._win.android.appVersionCode},t.prototype.postMessage=function(e){this._win.NativeBridge&&this._win.NativeBridge.call(D.MOBILE_COMMAND_NAME,Cf(e))},t}(Du);F.register(D.PLATFORM.Android,function(){i.register("MobileUtils").asCtor(xu).dependencies("win,MobileCallbacksHandler")}),i.register("DomEventDispatcher").asCtor(Fu).dependencies("HostData");function Fu(e){var t,n=this;function r(){if(!e.isIEBrowser())try{o("click");t=!0}catch(n){t=!1}}n.dispatchEvent=function(e,n){if(t){var r=o(n);e.dispatchEvent(r)}else if(window.dispatchEvent){var r=i(n);e.dispatchEvent(r)}else"input"==n&&(n="propertychange"),e.fireEvent("on"+n)};function i(e){var t=document.createEvent("UIEvents");return t.initUIEvent(e,!0,!0,window,1),t}function o(e){return new Event(e,{bubbles:!0})}r.apply(null,arguments)}i.register("InputGenerator").asCtor(Mu).dependencies("TextInjector, DomEventDispatcher, Logger, TimerManager, CssInjector, HostData, Consts, CommonEvents");function Mu(t,n,r,i,o,a,s,u){var l=this;l.click=g,l.hover=f,l.focus=h,l.text=m,l.select=v,l.selectByText=S,l.swipe=E;var c=n.dispatchEvent,d={MouseEnter:"mouseenter",MouseOver:"mouseover"};function p(){}function g(e,t){P(e)&&l.select(e.parent(),e[0].value),A(e),t&&t()}function f(e,t){y(e);var n=o.addElementClass(e,":hover");n||I(e.is("a")&&e.parent().is("li")?e.parent():e),t&&t()}function h(e,t){T(e,"focus",t)}function m(e,n,r,o,s){r=r||0,c(e[0],"focus"),i.setWalkmeTimeout(function(){if(s)var u=s.ElementDescription;t.injectText(e,n,u),a.isIEBrowser()||c(e[0],"paste"),c(e[0],"input"),i.setWalkmeTimeout(function(){c(e[0],"change"),c(e[0],"blur"),o&&o()},r)},r)}function v(e,t,n){e.val()!=t&&(c(e[0],"focus"),e.val(t),c(e[0],"change")),n&&n()}function S(t,n,r){var i=t.find("option:selected");if(i.text()!=n){c(t[0],"focus");for(var o=t[0].options,a=0;a<o.length;a++)if(o[a].text==n){e(o[a]).attr("selected","selected"),c(t[0],"change");break}}r&&r()}function E(e,t){T(e,"swipe",t)}function T(e,t,n){c(e[0],t),e[t](),n&&n()}function y(t){var n=t.closest("a");t=0!==n.length?n:t,e.each(d,function(n,r){b(t,r,e),window.jQuery&&b(t,r,jQuery),w(t,r)})}function C(e,t){switch(t){case d.MouseOver:e.trigger("mouseover");break;case d.MouseEnter:default:e.trigger("mouseenter")}}function I(t){var n=t.find("*:mt_hidden");n.filter(function(){return"none"==e(this).css("display")}).css("display","block"),n.css("visibility","visible"),n.css("opacity","1")}function b(t,n,r){var i=_(t,!0);e.each(i,function(e,t){t=r(t),C(t,n)})}function w(t,n){var r=_(t,!0);e.each(r,function(e,t){c(t,n)})}function _(e,t){var n=e.find("*:mt_visible");return t&&n.push(e[0]),n}function P(e){return e.is("option")&&e.parent().is("select")}function A(e){if(!e[0])return;c(e[0],"mousedown"),c(e[0],"mouseup"),e.trigger("mouseover"),e[0].click(),u.raiseEvent(s.EVENTS.Walkthrus.InputGeneratedClick,{element:e})}p.apply(null,arguments)}i.register("TextInjector").asCtor(Ru);function Ru(){var e=this;function t(){}e.injectText=function(e,t){e.val(t)},t()}var Bu=function(){function e(){this._overlayManager=i.get("OverlayManager"),this._uiUtils=i.get("UiUtils"),this._canDisplayOverlay=this._uiUtils.canDisplayOverlay()}return e.prototype.setUiObject=function(e){this._uiObject=e},e.prototype.setSettings=function(e){this._settings=e},e.prototype.getOverlay=function(){if(this._canDisplayOverlay&&this._settings.overlay){var e=this._settings.overlay.opct,t=this._settings.overlay.color;return this._overlay=this._overlay||this._overlayManager.create(this._uiObject,e,t),this._overlay}},e.prototype.removeOverlay=function(){this._canDisplayOverlay&&this._overlay&&this._overlay.remove()},e}();i.register("PopupUIUtil").asCtor(Bu).asProto();var Uu=function(){function n(e){this._methods={},this._mobileCallbacksHandler=e}return n.prototype.createEventFunction=function(t){var n="",r=e.proxy(function(r,i){var o=this._methods[i.funcName];o=o.slice(0,-2),n+=o;var a=e.extend(!0,{},i.data),s=Cf(a)||"",u="";if(i.data&&i.data.libAction){var l="_walkmeInternals.callbacks['"+t+"']['"+D.MOBILE_COMMAND_NAME+"']['"+r+"']['"+i.eventName+"']()";a.action=l,delete a.libAction,s=Cf(a)}var c=Cf(this._mobileCallbacksHandler.getSuccessCallback(t,i.actionId)),d=Cf(this._mobileCallbacksHandler.getFailCallback(t,i.actionId)),p='{ "actionId": '+i.actionId+(s&&', "data": '+s)+(c&&', "success": '+c)+(d&&', "fail": '+d)+"}";u+=this.createCallString(p),n+=u+"};"},this);return e.safeEach(this._events,r),n},n.prototype.registerCallbacks=function(e,t,n,r){this._mobileCallbacksHandler.registerMobileCallbacks(t,e,r)},n.prototype.bindEventsToUI=function(t){e.safeEach(this._events,e.proxy(function(e,n){t.find(e).add(t).filter(e).attr("on"+n.eventName,n.funcName+"()")},this))},n.prototype.registerEvent=function(e,t,n,r,i){this._events=this._events||{},this._events[e]={funcName:i,actionId:n,eventName:t,data:r},this._methods[i]=this._methods[i]||"\nvar "+i+"= function(){ };"},n.prototype.registerScripts=function(t){var n=this;e.safeEach(this._events,function(e,r){r.data.libAction&&n.createEventInLib(t,e,r.eventName,r.data.libAction)})},n.prototype.createEventInLib=function(e,n,r,i){var o=t.callbacks[e]=t.callbacks[e]||{},a=o[D.MOBILE_COMMAND_NAME]=o[D.MOBILE_COMMAND_NAME]||{},s=a[n]=a[n]||{};s[r]=i},n}(),Vu=function(){function n(n){this.PLACE_HOLDER="%@",this.createCallback=function(n,r,i,o){var a=function(a,s){delete t.callbacks[i][o+""],e.isEmptyObject(t.callbacks[i])&&delete t.callbacks[i],r[n].callback(a,s)};return a},this._constsDi=i.get("Consts"),t.callbacks=t.callbacks||{},t.callbacks.log=e.proxy(function(e){this.postMessage({actionId:-1,data:{log:e}})},this),t.callbacks.NativeAppUIChange=e.proxy(function(e){n.triggerUIChange()},this)}return n.prototype.getSuccessCallback=function(e,t){var n='_walkmeInternals.callbacks["'+e+'"]["'+t+'"].success('+this.PLACE_HOLDER+")",r='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+t+'"]) {'+n+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+t+" on "+e+'")}';return r},n.prototype.getFailCallback=function(e,t){var n='_walkmeInternals.callbacks["'+e+'"]["'+t+'"].fail('+this.PLACE_HOLDER+")",r='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+t+'"]) {'+n+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+t+" on "+e+'")}';return r},n.prototype.getCloseCallback=function(e,t){var n='_walkmeInternals.callbacks["'+e+'"]["'+D.MOBILE_COMMANDS.VIEW.externalClose+'"].close("'+e+'","'+this.PLACE_HOLDER+'")',r='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+D.MOBILE_COMMANDS.VIEW.externalClose+'"]) {'+n+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+D.MOBILE_COMMANDS.VIEW.externalClose+" on "+e+'")}';return r},n.prototype.registerMobileCallbacks=function(e,n,r){var i=t.callbacks[n]=t.callbacks[n]||{};this.setCallbackWrapper(i,e,n,r)},n.prototype.setCallbackWrapper=function(e,t,n,r){var i={success:function(){},fail:function(){}};if(r)for(var o=0;o<r.length;o++)switch(r[o].name){case"success":i.success=this.createCallback(o,r,n,t);break;case"fail":i.fail=this.createCallback(o,r,n,t);break;case"close":e[D.MOBILE_COMMANDS.VIEW.externalClose]={close:this.createCallback(o,r,n,t)}}e[t]=i},n}();i.register("MobileCallbacksHandler").asCtor(Vu).asProto().dependencies("UIChangeTracker");var Wu=function(e){__extends(t,e);function t(t){e.call(this,t)}return t.prototype.createCallString=function(e){var t='window.webkit && webkit.messageHandlers["'+D.MOBILE_COMMAND_NAME+'"].postMessage('+e+");";return t},t}(Uu);F.register(D.PLATFORM.iOS,function(){i.register("MobileEventsRegistrationsHandler").asCtor(Wu).asProto().dependencies("MobileCallbacksHandler")});var Gu=function(e){__extends(t,e);function t(t){e.call(this,t)}return t.prototype.createCallString=function(e){var t='window.NativeBridge && NativeBridge.call("'+D.MOBILE_COMMAND_NAME+'", '+Cf(e)+");";return t},t}(Uu);F.register(D.PLATFORM.Android,function(){i.register("MobileEventsRegistrationsHandler").asCtor(Gu).asProto().dependencies("MobileCallbacksHandler")}),i.register("GuidGenerator").asCtor(Hu);function Hu(){var e=this;e.generateGuid=t;function t(e){var t=e?"":"-";return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()}function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}}i.register("BalloonUtils").asCtor(ju).dependencies("Consts, HostData, CommonUtils, CdnServer");function ju(e,t,n,r){var i=this;i.setStyleForBalloon=function(t,n,o){t.css("border",""+n.BalloonBorderWidth+"px solid "+n.BorderColor),i.fixGradientColorsInConfiguration(n,"Color"),i.fixGradientColorsInConfiguration(n,"BalloonColor2");var a=void 0!=n.BalloonColor2?n.BalloonColor2:n.Color,s=void 0!=n.BalloonRadius?n.BalloonRadius:15,u=""+s+"px";if(t.css("-moz-border-radius",u),t.css("-webkit-border-radius",u),t.css("border-radius",u),n.Color==a?t.css("background",n.Color):(t.css("background","-moz-linear-gradient(top, "+n.Color+", "+a+")"),t.css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+n.Color+"), color-stop(100%,"+a+"))"),t.css("background","-webkit-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","-o-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","-ms-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","linear-gradient(to bottom, "+n.Color+" 0%,"+a+" 100%)"),t.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='"+n.Color+"', endColorstr='"+a+"',GradientType=0 )"),t.css("background-image").indexOf("gradient")==-1&&(t.css("background-image","url('"+r.get()+"/player/resources/images/spacer.gif')"),t.css("background-repeat","repeat")),i.isGradientWithBorderRadiusCompatible()||t.css("border-radius","0px")),!o){var l="0px 0px";switch(parseInt(n.Position)){case e.POSITION_TYPE.Top:l="-3px -3px";break;case e.POSITION_TYPE.Right:l="4px -4px";break;case e.POSITION_TYPE.Bottom:l="4px 4px";break;case e.POSITION_TYPE.Left:l="-4px 4px"}var c=" 3px rgba(0, 0, 0, 0.2)";t.css("-moz-box-shadow",l+c),t.css("-webkit-box-shadow",l+c),t.css("box-shadow",l+c)}},i.fixGradientColorsInConfiguration=function(e,n){e[n]&&"transparent"!=e[n]||(e[n]=t.isIE()?"#00000000":"transparent")},i.isGradientWithBorderRadiusCompatible=function(){return!t.isIE(9,"lte")},i.fixConfiguration=function(e){return e.BalloonColor2=n.isDefined(e.BalloonColor2)?e.BalloonColor2:e.Color,e.ButtonBgColor2=n.isDefined(e.ButtonBgColor2)?e.ButtonBgColor2:e.ButtonBgColor,e.BalloonBorderWidth=n.isDefined(e.BalloonBorderWidth)?parseInt(e.BalloonBorderWidth):1,e.BalloonButtonRadius=n.isDefined(e.BalloonButtonRadius)?parseInt(e.BalloonButtonRadius):15,e.ButtonShadowWidth=n.isDefined(e.ButtonShadowWidth)?parseInt(e.ButtonShadowWidth):0,e.BalloonRadius=n.isDefined(e.BalloonRadius)?parseInt(e.BalloonRadius):15,e.FooterTextColor=n.isDefined(e.FooterTextColor)?e.FooterTextColor:e.HeaderColor,e}}function Yu(e,t,n){var r=this;r.getElementTagName=i,r.getElementViewport=o,r.getWindowViewport=a;function i(e){var t=e.tagName;return t.toUpperCase&&(t=t.toUpperCase()),t}function o(t){var r=e.getElementDocument(t),i=n.getDocumentWindow(r),o=s(i);return o}function a(){var e=s(window);return e}function s(e){var n=e.document,r=mtjQuery(e);return r.left=function(){return t.getScrollOffset(n).Left},r.top=function(){return t.getScrollOffset(n).Top},r}}i.register("ElementUtils").asCtor(Yu).dependencies("CommonUtils, ScrollUtils, DocumentUtils");function zu(){var e=this;e.getDocumentWindow=t;function t(e){return e.parentWindow||e.defaultView}}i.register("DocumentUtils").asCtor(zu);function Qu(e,t,n){var r=this;r.SCROLL_MODES={Animated:0,Normal:1,None:2},r.getScrollOffset=function(t){var n=e.getBody(t),i=r.getScrollTop(t,n),o=r.getScrollLeft(t,n);return{Top:i,Left:o}},r.getScrollTop=function(e,t){return t.scrollTop||e.documentElement.scrollTop},r.getScrollLeft=function(e,t){return t.scrollLeft||e.documentElement.scrollLeft},r.jspScrollAttempt=function(t){var n=e.getJspParent(t),r=e.getClientjQuery();if(n)return r(n).data("jsp").scrollToElement(t,!0,!1),!0;return!1},r.shouldScroll=function(e,t,i){if(i!=n.STEP_TYPE.Popup&&t!=r.SCROLL_MODES.None&&"fixed"!=e.css("position"))return!0;return!1},r.isBalloonPositionVisibleRelativeToParents=function(e,n){return t.isBalloonPositionVisibleRelativeToParents(e,n)}}i.register("ScrollUtils").asCtor(Qu).dependencies("CommonUtils, BalloonPositionVisibilityChecker, Consts"),i.register("CookieValueCalculator").asCtor(Ku).dependencies("CookiesManager");function Ku(e){var t=this;t.calculate=n;function n(t){var n=e.getCookie(t);if(n===!1)return;return n}}i.register("JQueryValueCalculator").asCtor(qu).dependencies("JQueryElementFinder");function qu(e){var t=this;t.calculate=n;function n(t){var n=e.getjQueryElementText(t);if(""===n)return;return n}}i.register("VariableValueCalculator").asCtor(Xu).dependencies("CommonUtils");function Xu(e){var t=this;t.calculate=n;function n(t){var n=e.getWindowVar(t);return n}}i.register("LocalStorageValueCalculator").asCtor(Ju).dependencies("LocalStorageService");function Ju(e){var t=this;t.calculate=n;function n(t){return e?e.getItem(t):void 0}}i.register("ValueCalculatorFactory").asCtor($u).dependencies("Logger, Consts, CookieValueCalculator, JQueryValueCalculator, VariableValueCalculator, LocalStorageValueCalculator");function $u(e,t,n,r,i,o){var a=this;a.get=s;function s(a){switch(a){case t.VALUE_CALCULATOR_TYPE.JQuery:return r;case t.VALUE_CALCULATOR_TYPE.Cookie:return n;case t.VALUE_CALCULATOR_TYPE.Variable:return i;case t.VALUE_CALCULATOR_TYPE.LocalStorage:return o;default:e.error(new Error("Unknown calculation method"))}}}i.register("CssClassesAppender").asCtor(Zu);function Zu(){var e=this;e.appendClasses=t;function t(e,t){if(t)for(var n=0;n<t.length;n++)e.addClass(t[n])}}i.register("ImageLoader").asCtor(el).dependencies("TimerManager");function el(t){var n=this;n.getImageSize=i;var r=100;function i(n,i){var o,a=e("<img />");a.load(s),a.attr("src",n),o=t.setWalkmeInterval(u,r);function s(){var e={width:a[0].width,height:a[0].height};i(e),clearInterval(o),a.unbind("load")}function u(){a[0].width&&a[0].height&&s()}}}function tl(n,r,i,o){var a,s=this,u="alt",l="accessibility",c="body",d="walkme-accessibility",p=1,g=27,f=32,h=800,m={TITLE:".wm-title",CONTENT:".wm-template-text",ACTION_BUTTON:".wm-blue-btn",CLOSE_LINK:".wm-close-link",CLOSE_BUTTON:".wm-close-button"},v={TITLE:1,CONTENT:2,
ACTION_BUTTON:3,CLOSE_LINK:7,CLOSE_BUTTON:8};function S(){}s.init=function(){n.isFeatureEnabled(l)&&E()};function E(){t.bind("LauncherIsShown",w),t.bind("NewStepShown",P),t.bind("StepCompleted",N),t.bind("TutorialStopped",N),t.bind("show-end",A),T()}function T(){var e=window.walkme_event;window.walkme_event=function(t){if(e&&e(t),"BalloonCreated"==t.Type){var n=t.ExtraData.Element;y(n)}}}function y(t){var n=C(o,t);k(t,n.selectors,v);var r=e(n.elemWithContent);r.on("focus",function(){e(this).addClass(d)}),r.on("blur",function(){e(this).removeClass(d)});var i=e(o.CLOSE_LINK,t);b(t,i),r.keyup(I),s.setFocus(r.first())}s.setFocus=function(e){i.libSetTimeout(function(){e.focus()},h)};function C(t,n){var r={};r.elemWithContent=[],r.selectors={};for(var i in t)if(t.hasOwnProperty(i)){var o=e(t[i]+":visible",n);o.each(function(){var n=e(this);n.text()&&(r.selectors[i]=t[i],r.elemWithContent.push(n[0]))})}return r}function I(e){if(e.keyCode===f){var t=e.srcElement?e.srcElement:e.target;t.click()}}function b(t,n){n.length>0&&e(t).keyup(function(e){e.keyCode===g&&n.click()})}function w(e,t,n){var r=n.launcherDiv,i=r.attr("title"),o=n.customText?n.customText:n.name;_(r,o,i)}function _(e,t,n){var r=t;n&&(t?r+=". "+n:r=n),r&&e&&e.attr(u,r)}function P(e,t,n){if(r.isPopupStep(t)){a=document.activeElement;var i=n.Balloon.find(".walkme-custom-balloon-title");i.focus()}}function A(t,n){if(n&&n._uiComponent&&n._uiComponent.UiComponentId==p){var r=e("#wm-shoutout-"+n._uiComponent.Id),i=C(m,r),o=e(i.elemWithContent);k(r,i.selectors,v);var a=e(m.CLOSE_BUTTON,r);b(r,a),o.keyup(I),s.setFocus(o.first())}}function k(t,n){t=t?t:e(c);for(var r in n)if(n.hasOwnProperty(r)){var i=e(n[r],t);v?O(i,v[r]):O(i)}}function O(e,t){if(void 0===t)for(var n=0;n<e.length;n++)i.addTabIndex(e.eq(n),0);else for(var n=0;n<e.length;n++)i.addTabIndex(e.eq(n),t+n)}function N(e,t){r.isPopupStep(t)&&a&&(a.focus(),a=null)}S.apply(null,arguments)}i.register("focusableBalloonSelectors").asInstance({TITLE:".walkme-custom-balloon-title",CONTENT:".walkme-custom-balloon-content",ACTION_BUTTON:".walkme-custom-balloon-button",CLOSE_LINK:".walkme-custom-balloon-close-button"}),i.register("JawsAccessibilityUtil").asCtor(tl).dependencies("FeaturesManager, StepUtils, CommonUtils,focusableBalloonSelectors"),i.register("Mapper").asCtor(nl);function nl(){var e=this;e.setIfDefined=t;function t(e,t,n){if(void 0===t||null===t)return;e[n]=t}}i.register("PromiseUtils").asCtor(rl);function rl(){var t=this;t.executePromiseChain=r,t.executeParallely=o,t.executeParallelyOnArray=i;function n(){}function r(t,n){for(var r=e.when(n);t.length;){var i=t[0];r=r.pipe(i),t.splice(0,1)}return r}function i(t,n){if(!t||0==t.length)return e.when();for(var r=[],i=0;i<t.length;i++){var a=t[i],s=n(a);r.push(s)}return o(r)}function o(t){return e.when.apply(e,t)}n()}i.register("ConditionTreeUtils").asCtor(il).dependencies("NewToOldConditionConverter");function il(e){var t=this;t.anyMatchesCondition=r,t.checkIfTreeContainsSelectedElement=i;var n="SelectedElement";function r(t,n){if(t&&t.Root&&(t=e.convert(t.Root)),!t||!t.nodeType)return!1;var i=n(t);if(i)return!0;var o=!1,a=!1;return t.leftSon&&(a=r(t.leftSon,n)),t.rightSon&&(o=r(t.rightSon,n)),a||o}function i(e){return r(e,function(e){return"Func"==e.nodeType&&0==e.funcName.indexOf(n)})}}i.register("DataFixer").asCtor(ol).dependencies("SettingsValuesRetriever");function ol(e){var t=this;t.fixSteps=function(e,n){for(var r=e.Steps,i=0;i<r.length;i++)t.fixStep(r[i],i,n)},t.fixStep=function(t,n,r){if(t.fixed)return;t.StepIndex=n,t.Configuration&&t.Configuration!=-1?(t.End=t.Configuration.End,t.Duration=t.Configuration.Duration,t.Delay=t.Configuration.Delay,t.Position=t.Configuration.Position):t.Configuration=r.BalloonSettings,t.IgnorePosition=void 0!=t.IgnorePosition?t.IgnorePosition:parseInt(e.getSettingsValue(t.Settings,"ignorePosition",0)),t.fixed=!0}}i.register("DictionaryUtils").asCtor(al);function al(){var e=this;e.getDictionarySize=n,e.getDictionaryKeys=r,e.getDictionaryValues=i,e.reverseDictionary=o;function t(){}function n(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function o(e){if(!e)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];n=a(n)?parseFloat(n):n,t[r]=n}return t}function a(e){return!isNaN(e)}t()}i.register("LocationService").asCtor(sl).dependencies("UrlCommonStringsRemover, HtmlDecoder, win");function sl(e,t,n){var r=this;r.getUrlResourceName=i,r.getUrlLocation=s,r.getCurrentLocation=o,r.getCurrentUrlPath=a;function i(){return e.remove(n.location.href)}function o(){return n.location.href}function a(){return n.location.pathname}function s(e){return u(e)}function u(e){if(e=t.decodeHtml(e,["&"]),0==e.length)return e;return"/"==e.charAt(0)?n.location.protocol+"//"+n.location.hostname+(n.location.port?":"+n.location.port:"")+e:e}}i.register("RedirectService").asCtor(ul).dependencies("CommonUtils, win, LocationService, UrlCommonStringsRemover");function ul(e,t,n,r){var i=this;i.redirect=o,i.canRedirect=a,i.isUrlDifferentFromCurrentOnlyInHash=u;function o(e){var r=s();t.location=n.getUrlLocation(e);var i=s();return r.url==i.url&&r.hash!=i.hash}function a(t,i){if(!e.isValidUrl(t))return!1;var o=n.getUrlResourceName(),a=n.getUrlLocation(t);return a=r.remove(a),i||o!=a}function s(){var e=t.location.hash,n=t.location.href.replace(e,"");return{url:n,hash:e}}function u(e){var t=n.getUrlResourceName(),i=n.getUrlLocation(e);i=r.remove(i);var o=t.split("#"),a=i.split("#");if(a.length>1)return o.length>1?o[0]==a[0]&&o[1]!=a[1]:o[0]==a[0];return!1}}i.register("WalkthruRedirectService").asCtor(ll).dependencies("RedirectService, TimerManager, WalkthruStatePersister");function ll(e,t,n){var r=this;r.redirect=o,r.canRedirect=a,r.clearRedirectTimer=s;var i;function o(r,o){if(!e.canRedirect(r,o))return!1;return n.storeStateInCookie(),i=t.libSetTimeout(function(){e.redirect(r)},200),!e.isUrlDifferentFromCurrentOnlyInHash(r)}function a(t,n){return e.canRedirect(t,n)&&!e.isUrlDifferentFromCurrentOnlyInHash(t)}function s(){i&&i.clear()}}i.register("UrlCommonStringsRemover").asCtor(cl);function cl(){var e=this;e.remove=t;function t(e){return e=e.replace("http://",""),e=e.replace("https://",""),e=e.replace("www.",""),"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}}i.register("Stack").asCtor(dl).asProto();function dl(){var e=this;e.init=r,e.peek=i,e.pop=o,e.push=a,e.clear=s,e.isEmpty=u,e.length=l,e.getAll=c;var t;function n(){r()}function r(e){t=e||[]}function i(){return u()?null:t[t.length-1]}function o(){return t.pop()}function a(e){t.push(e)}function s(){r()}function u(){return 0==l()}function l(){return t?t.length:0}function c(){return t}n()}i.register("DisabledElementsRemover").asCtor(pl);function pl(){var e=this;e.remove=t;function t(e,t){if(!e)return;for(var n=e.length;n-- >0;){var r=e[n];t(r)&&e.splice(n,1)}}}i.register("PlayGuidGenerator").asCtor(gl).dependencies("GuidGenerator");function gl(e){var t=this;t.generateNewPlayGuid=n;function n(t){var n=e.generateGuid();return n=(new Date).getTime()+"-"+t+"-"+n}}i.register("AnchorTagsFixer").asCtor(fl).dependencies("HostData, WalkthruOnBeforeUnloadHandler");function fl(e,t){var n=this;n.fixAnchorTagsOnBeforeUnload=i;function r(){}function i(){if(e.isIE()){var n=mtjQuery("a[href^='javascript:']"),r="click.walkme.ignoreUnload";n.off(r),n.on(r,function(){t.setIgnoreNextBeforeUnload(!0)})}}r()}i.register("DevModeAlertRaiser").asCtor(hl).dependencies("Logger, Consts, TopContainerProvider, HostData, Lib, Mustache");function hl(e,t,n,r,o,a){var s=this;s.devModeAlert=l;function u(){}function l(){var t=i.get("ExternalWalkMeConfig").get("platform"),n="Lib on "+walkme_lib_notify_ServerName+": "+o.SVNRevision;if(window.walkme_lib_version&&(n+=", Version: "+walkme_lib_version),window.walkme_lib_upload_date&&(n+=", Uploaded On: "+walkme_lib_upload_date),window.walkme_lib_uploader&&(n+=", By: "+walkme_lib_uploader),r.isQuirksMode())return void e.customerLog(n,5);c(t,n)}function c(e,n){var r=e==t.PLATFORM.MobileWeb?"height: 26px; width:26px; overflow:hidden;":"",i="<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='z-index: {{{popupBalloonZindex}}}; position: fixed; top: 0; left: 30px; background-color: {{{backgroundColor}}}; font-size: 15px;"+r+" padding:0 4px;'>{{{message}}}</div>";e!==t.PLATFORM.MobileWeb?p(i,n):d(n)}function d(e){var t="#walkme-dev-mode-alert {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",n="<style type='text/css'>"+t+"</style>",r=n+"<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='z-index: {{{popupBalloonZindex}}}; position: fixed; top: 0; left: 30px; height: 26px; width:26px; background-color: {{{backgroundColor}}}; font-size: 15px; overflow:hidden; padding:0 4px;'>{{{message}}}</div>";p(r,e);var i=mtjQuery("#walkme-dev-mode-alert");i.mouseenter(a),i.mouseleave(o),i.touchstart(a),i.touchend(o);function o(e){e.target.style.overflow="hidden",e.target.style.height="26px",e.target.style.width="26px"}function a(e){e.target.style.overflow="auto",e.target.style.height="auto",e.target.style.width="auto"}}function p(e,r){var i=a.to_html(e,{popupBalloonZindex:t.POPUP_BALLOON_Z_INDEX,backgroundColor:g(walkme_lib_notify_ServerName),message:r}),o=n.getTopContainer(null,!0);mtjQuery("#walkme-dev-mode-alert",o).remove(),o.append(i)}function g(e){var t,e=e.toLowerCase();switch(e){case"dev":t="lightblue";break;case"qa":t="red";break;case"test":t="yellow";break;case"local":t="lightgreen";break;default:t="pink"}return t}u()}i.register("getTopContainer").dependencies("TopContainerProvider").asFunction(function(e){return e.getTopContainer}),i.register("TopContainerProvider").asCtor(ml).dependencies("BiggestFrameProvider, FramesetsUtils, FrameContentsProvider, ElementUtils");function ml(e,t,n,r){var i=this;i.getTopContainer=a;function o(){}function a(r,i){if(window.walkme_get_top_container){var o=window.walkme_get_top_container();if(o)return mtjQuery(o)}var a;return a=r?r.parents("body"):mtjQuery("body"),0!=a.length&&"FRAMESET"!=s(a[0])||(a=r?r.parents("html"):i||!t.shouldHandlePageAsFramesets()?mtjQuery("html"):mtjQuery("body",n.getFrameContents(mtjQuery(e.getBiggestFrame())))),a}function s(e){return r.getElementTagName(e)}o()}i.register("HtmlDecoder").asCtor(vl).dependencies("ArrayUtils");function vl(e){var t=this;t.decodeHtml=r;function n(){}function r(t,n){for(var r,i={"&amp;":"&","&apos;":"'","&#39;":"'","&quot;":'"',"&lt;":"<","&gt;":">"},o=[],a=0,s=0,u=0;a<t.length;){if(r=!1,"&"==t.charAt(a)){var l=t.substring(a,a+6).toLowerCase(),c=i[l];u=c?6:u;var d=t.substring(a,a+5).toLowerCase(),p=i[d];u=p?5:u;var g=t.substring(a,a+4).toLowerCase(),f=i[g];u=f?4:u;var h=f||p||c,m=e.inArray(h,n)!=-1;if(h&&m){var v=t.substring(s,a);o.push(v),o.push(h),a+=u,s=a,r=!0}}r||a++}var S=t.substring(s,a);o.push(S);var E=o.join("");return E}n()}i.register("FacebookCanvasIndicator").asCtor(Sl);function Sl(){var e=this;e.isInFacebookCanvas=n;function t(){}function n(){try{if(FB._inCanvas&&FB.Canvas.getPageInfo){if(1==window.walkme_dont_use_fb_scroll)return!1;return!0}}catch(e){return!1}}t()}i.register("LocationMatcher").asCtor(El).dependencies("UrlCommonStringsRemover, LocationService, StringUtils");function El(e,t,n){var r=this;r.isLocationMatchString=i;function i(r){var i,o,a="regexp:";if(n.startsWith(r,a)){r=r.substr(a.length),o=t.getCurrentLocation();try{i=o.match(r)}catch(s){return!1}}else{r=r.replace(new RegExp("[*]","g"),".*"),r=r.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),o=t.getUrlResourceName(),r=e.remove(r),o=o.toLowerCase(),r=r.toLowerCase();try{i=o.match(r)}catch(s){return!1}}if(null==i)return!1;return i[0]==o}}i.register("StringUtils").asCtor(Tl);function Tl(){var e=this;e.startsWith=t,e.endsWith=n;function t(e,t){return 0==e.indexOf(t)}function n(e,t){return e.length>=t.length&&e.lastIndexOf(t)+t.length==e.length}}i.register("ActionsFactory").asCtor(yl).dependencies("Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, SmartTipSetsManager, BusinessSolutionsManager, InitiatorTypeToDeployableTypeMapper, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, HtmlDecoder, DeployablesManagerFactory, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader");function yl(e,t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,E,T,y,C,I,b){this.get=function(e,t,n,r){return new w[e](t||{},n,r)};var w={none:M,playBf:N,playWt:D,openMenu:A,playContent:L,playSurvey:x,shoutOut:F,redirect:R,refresh:j,branchWt:B,stopWt:U,playStep:V,openPlayerMenu:W,waitForCond:G,delay:H,passOwnership:Y,setWalkMeData:z,destroy:Q,playShuttle:K,rateApp:q,openSettings:X,browseToPage:J,playVideo:$,checkMyForm:_,sendEmail:Z,openApp:ee,openAppStore:te,remindMeNextDay:ne,remindMeNextTime:re,openTeachMe:k};function _(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var t=o.getSetManagerById(e.businessSolutionId);t?t.turnOnWithImmediateValidations():y.customerLog("Failed to run set's validation. No set for Id : "+e.businessSolutionId)}catch(n){var r="Failed to run set's validations",i=kf(r,e.businessSolutionId,Cf(n));y.customerLog(i)}}}function A(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{void 0!=window.WalkMePlayerAPI&&WalkMePlayerAPI.toggleMenu(O(t,r))}catch(e){y.customerLog(kf("Failed opening menu. Exception: {0}",Cf(e)))}}}function k(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{void 0!=window.TeachMePlayerAPI&&TeachMePlayerAPI.toggleMenu(O(t,r))}catch(e){y.customerLog(kf("Failed opening TeachMe menu. Exception: {0}",Cf(e)))}}}function O(e,t){var n={type:e};if(t){n.objectId=t.Id;var r=t.Settings.action;n.collectionId=r&&r.arguments&&r.arguments.collectionId}return n}function N(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){var n=e&&e.playBfFromBeginning?void 0:e.NodeId;try{a.activateById(e.bfId,{type:t,objectId:r.Id},n)}catch(i){var o="Failed playing BizFlow with id {0} starting from step {1}. Exception is: {2}",s=kf(o,e.bfId,n,Cf(i));y.customerLog(s)}}}function D(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){b.afterStepsLoaded(e.wtId,i)};function i(){try{var n=e.playWtFromBeginning?0:c.getStepIndex(e.StepId,e.wtId);if(n==-1){var i=kf("Step with id: {0} was not found in walkthru with id {1}",e.StepId,e.wtId);y.customerLog(i)}else WalkMeAPI.startWalkthruById({id:parseInt(e.wtId),fromStep:n,playInitiator:{type:t,objectId:r.Id}})}catch(o){var a="Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",i=kf(a,e.wtId,e.StepId,Cf(o));y.customerLog(i)}}}function L(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.contentId;WalkMeAPI.startContentById(n,t,r.Id)}catch(i){var o="Failed playing content with id {0}. Exception is: {1}",a=kf(o,e.wtId,Cf(i));y.customerLog(a)}}}function x(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.surveyId,i={type:t,objectId:r?r.Id:void 0};WalkMeAPI.startSurveyById(n,i)}catch(o){var a="Failed playing survey with id {0}. Exception is: {1}",s=kf(a,e.surveyId,Cf(o));y.customerLog(s)}}}function F(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){try{i.get("ShoutOutsManager").activateById(e.id,{type:t,objectId:r.Id})}catch(n){y.customerLog(kf("Failed playing deployable with id {0}. Exception is: {1}",e.wtId,Cf(n)))}}}function M(e){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){}}function R(e){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){f.stepWasCompleted();var t=e.redirectUrl,n=l.redirect(t);n||(f.stepWasCompleted(),f.executeTutorialNextStep())}}function B(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return i(e.wtId)},this.doAction=function(){var t,n=e.wtId;1==e.returnToWt?(t=c.getStepIndex(e.StepId,r.TutorialId),h.makeSplit([n],t,!1,e.startingStepId)):h.makeSplit([n],t,!0,e.startingStepId)},this.getGoToData=function(){var t=d.getWalkthruIndexByWalkthruId(e.wtId);return{tutorialIndex:t,stepIndex:0}};function i(e){return!!d.getWalkthruById(e)}}function U(t){this.type="stopWt",this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),e.stopTutorial()}}function V(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return i(e.StepId,r.TutorialId)},this.doAction=function(){var t=e.StepId,i=c.getStepIndex(t,r.TutorialId);f.stepWasCompleted(),p.currentStep<i&&f.fillMissingStepAudits(p.currentWalkthru,p.currentStep+1,i,n.STEP_STATUS.SkippedByActionStep),p.currentStep=i,f.executeCurrentStep()},this.getGoToData=function(){var t=e.StepId,n=c.getStepIndex(t,r.TutorialId),i=d.getWalkthruIndexByWalkthruId(r.TutorialId);return{tutorialIndex:i,stepIndex:n}};function i(e,t){return c.getStepIndex(e,t)!=-1}}function W(e,t,r){this.isValid=function(){return void 0!=window.WalkMePlayerAPI},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{f.stepWasCompleted(),WalkMePlayerAPI.toggleMenu(O(t,r))}catch(e){}f.executeTutorialNextStep()}}function G(e){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){p.state=n.WALKTHRU_STATE.WAITING_FOR_CONDITION,g.storeStateInCookie();var t=p.getCurrentStep(),r={evaluationPollingIntervalMs:500,featureName:S,elementName:"Wait for condition step: "+t.StepTitle},i=C.createOld(r),o=e.condition;i.onValueChanged(function(e){m.isDebuggerOnWindow()&&u.deprecatedRaiseEvent(n.EVENTS.ActionConditionEvaluated,t),e&&(f.stepWasCompleted(),f.executeTutorialNextStep())}),i.evaluateAsync(o),f.addCurrentStepResource(i)}}function H(e){this.isValid=function(){return!0},this.doAction=function(){return g.storeStateInCookie(),T.playSetTimeout(function(){f.stepWasCompleted(),f.executeTutorialNextStep()},1e3*e.duration),!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function j(){this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),g.storeStateInCookie(),T.libSetTimeout(function(){location.reload(!0)},200)},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function Y(e,t,i){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action;var o={stepId:i.Id,tutorialId:i.TutorialId};this.doAction=function(){if(r.saveData(n.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY,(new Date).getTime(),3600),!I.get().enabled())return y.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void f.tutorialFinished();I.get().determineOwnership(o)}}function z(e){this.isValid=function(){return!0},this.doAction=function(){t.saveData(e.dataKey,e.dataValue,e.dataDuration),f.stepWasCompleted(),f.executeTutorialNextStep()},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function Q(e){this.isValid=function(){return!0},this.doAction=function(){e&&e.uiComponent&&e.uiComponent.destroy()},this.Type=n.DEPLOYABLE_ACTION_TYPES.Close}function K(e,t,r){this.isValid=function(){return!0},this.doAction=function(){try{var i={type:t};r&&(i.objectId=r.Id);var o=e.shuttleId;E.get(n.DEPLOYABLE_TYPE.Shuttle).activateById(o,i)}catch(a){var s="Failed playing shuttle with id {0}. Exception is: {1}",u=kf(s,e.wtId,Cf(a));y.customerLog(u)}},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function q(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.rateApp,this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function X(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.openSettings,this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function J(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.browseToPage,this.args={url:e.URL},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function $(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.playVideo,this.args={url:e.URL},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function Z(e){e.subject=e.subject||"",e.body=e.body||"";var t=["'",'"',"&",">"];this.mobileAction=n.MOBILE_COMMANDS.ACTION.sendEmail,this.args={emailData:{to:[],subject:v.decodeHtml(e.subject,t),body:v.decodeHtml(e.body,t)}},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function ee(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.openApp,this.args={iOSAppId:e.iOSAppId,iOSAppScheme:e.iOSAppScheme,androidApp:e.androidApp},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function te(e){e.diffApp&&"True"==e.diffApp?(this.mobileAction=n.MOBILE_COMMANDS.ACTION.openAppStore,this.args={iOSAppId:e.iOSAppId,androidApp:e.androidApp}):this.mobileAction=n.MOBILE_COMMANDS.ACTION.rateApp,this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function ne(e,t,r){this.doAction=function(){var e=new Date;e.setDate(e.getDate()+1),ie(e,t,r)},this.Type=n.DEPLOYABLE_ACTION_TYPES.RemindMeLater}function re(e,t,r){this.doAction=function(){ie(new Date,t,r)},this.Type=n.DEPLOYABLE_ACTION_TYPES.RemindMeLater}function ie(e,r,i){var o=s.map(r),a=n.STORAGE_KEYS.remindMeLater+"-"+o+"-"+i.Id,u={expiry:e.getTime()};t.saveData(a,Cf(u),P)}}i.register("PropertyUtils").asCtor(Cl).dependencies("Lib, Consts, SiteConfigManager, DeployablesManagerFactory");function Cl(e,t,n,r){var i=this;i.isGroup=function(e){if(!e)return!1;return void 0!==e.LinkedDeployables},i.isCollection=function(e){return e&&e.deployableType==t.DEPLOYABLE_TYPE.Collection},i.isSearchEnabled=function(){var e=n.get();return e.Settings&&Number(e.Settings.search)},i.hasChildren=function(e){for(var t=e.LinkedDeployables,n=0;n<t.length;n++){var o=r.get(t[n].DeployableType),a=o.getById(t[n].DeployableID),s=i.isGroup(a)?i.hasChildren(a):a;if(s)return!0}return!1},i.hasVisibleChildren=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(o(r))return!0}return!1};function o(e){return e.properties().hasProperty(t.UI_PROPERTIES.Visible)}i.supportsDeployableType=function(e,t){var n=e.Settings,r=n&&n.DeployableTypes;if(r&&mtjQuery.inArray(t+"",e.Settings.DeployableTypes)!=-1)return!0;return!1},i.hasUncompletedChildren=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r._typeId===t.DEPLOYABLE_TYPE.Category){if(i.hasUncompletedChildren(r._children))return!0}else if(o(r)&&!r.properties().hasProperty(t.UI_PROPERTIES.Completed))return!0}return!1},i.isTab=function(e){var t=e.Settings;return t&&t.DeployableTypes},i.isTasksTab=function(e){return i.isGroup(e)&&i.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Task)},i.isHelpTab=function(e){return i.isGroup(e)&&i.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Tutorial)}}i.register("PropertiesFactory").asCtor(Il).dependencies("FeaturesManager, CommonEvents, Consts, ShowInMenuCheckerFactory, SiteConfigManager, DeployablesManagerFactory, Logger");function Il(e,t,n,r,i,o,a){var s,u=this;function l(){s=a.wrapCustomerLog("showWidget"),Nl._tasksManager=o.get(n.DEPLOYABLE_TYPE.Task)}u.generateAll=function(a){return[new wl(a,o),new _l(a,e,t,n,r,i,s),new Nl(a,n,i,o),new Pl(a,n,i),new kl(a,n,o),new Al(a,n),new Ol(a,n)]},l()}var bl=function(){function t(e){this.logger=null,this.lib=null,this.deployable=null,this.isLoaded=!1,this.properties=[],this.propertyNames=[],this.utils=null,this.children=[],this.lib=e.lib,this.deployable=e.deployable,this.utils=e.utils,this.children=e.children}return t.prop=function(e){return e.toLowerCase()},t.prototype.getAll=function(){return this.isLoaded||this.load(),this.properties},t.prototype.hasProperty=function(t,n){return!n&&this.isLoaded||this.load(),e.inArray(t,this.properties)!=-1},t.prototype.load=function(){this.isLoaded=!0},t.prototype.clear=function(){this.properties=[],this.isLoaded=!1},t.prototype.generateSingle=function(e,t){var n=t?[e]:[];this.properties=n},t.prototype.canGenerate=function(t){return e.inArray(t,this.propertyNames)!=-1},t}(),wl=function(e){__extends(t,e);function t(t,n){e.call(this,t),this.deployablesManagerFactory=n,this.propertyNames=[]}return t.prototype.load=function(){var t=this.deployable.Settings;if(this.properties=[],!t||!t.DeployableTypes)return;for(var n=0;n<t.DeployableTypes.length;n++){var r=this.deployablesManagerFactory.get(t.DeployableTypes[n]).name();this.properties.push(bl.prop("contains-"+r))}e.prototype.load.call(this)},t}(bl),_l=function(e){__extends(t,e);function t(n,r,i,o,a,s,u){e.call(this,n),this.featuresManager=r,this.commonEvents=i,this.consts=o,this.showInMenuCheckerFactory=a,this.siteConfigManager=s,this.customerLog=u,this.propertyNames=[t._visiblePropertyName,t._invisiblePropertyName]}return t.prototype.load=function(){var n=!0;if(this.utils.isGroup(this.deployable)){var r=this.doesSupportSearchProviders(this.deployable),i=this.utils.hasChildren(this.deployable);n=i||r;var o=this.featuresManager.isFeatureEnabled("dontShowTabsWithNoVisibleChildren");o&&(n=n&&this.utils.hasVisibleChildren(this.deployable,this.children)),n||(this.utils.isTasksTab(this.deployable)&&this.customerLog("Show widget - not showing tasks tab because there are no tasks and the tab doesn't support search.",2),this.utils.isHelpTab(this.deployable)&&this.customerLog(pr.formatString("Show widget - not showing tab named {0} because there are no children and the tab doesn't support search.",this.deployable.Name),2))}n=n&&this.checkTasksCondition(this.deployable),n=n&&this.checkDisplayCondition(this.deployable),n?this.generateSingle(t._visiblePropertyName,!0):this.generateSingle(t._invisiblePropertyName,!0),e.prototype.load.call(this)},t.prototype.doesSupportSearchProviders=function(e){var t=!1,n=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Tutorial);return n&&this.utils.isSearchEnabled()&&(t=!0),t},t.prototype.checkTasksCondition=function(e){var t=!0,n=this.siteConfigManager.get().TodoListSettings,r=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Task);return n&&(r?(t=this.hasUncompletedChildren(n)&&1==n.isActive,t&&(t=this.checkCondition(n))):this.utils.isCollection(e)&&1==n.showOnlyTasksTab&&(t=!1)),t},t.prototype.checkCondition=function(e){var t=e.activateCondition,n=!0;return t&&(n=i.get("ConditionTreeEvaluator").evaluate(t),n||this.customerLog("Show widget - not showing tasks tab because it was segmented out by a condition in todo list settings.",2),this.commonEvents.deprecatedRaiseEvent(this.consts.EVENTS.TasksConditionEvaluated,this.siteConfigManager.get())),n},t.prototype.hasUncompletedChildren=function(e){var t=e.hideComplete&&parseInt(e.hideComplete);if(t){var n=this.utils.hasUncompletedChildren(this.children);return n||this.customerLog("Show widget - not showing tasks tab because all tasks are completed",2),n}return!0},t.prototype.checkDisplayCondition=function(e){var t=this.showInMenuCheckerFactory.getDisplayConditionCheckerFunc(e.deployableType);return t(e)},t._visiblePropertyName=bl.prop(i.get("Consts").UI_PROPERTIES.Visible),t._invisiblePropertyName=bl.prop(i.get("Consts").UI_PROPERTIES.Invisible),t}(bl),Pl=function(e){__extends(t,e);function t(t,n,r){e.call(this,t),this.consts=n,this.siteConfigManager=r,this.propertyNames=[n.UI_PROPERTIES.Search,n.UI_PROPERTIES.SearchProviders]}return t.prototype.load=function(){var t=[];this.utils.isTab(this.deployable)&&this.utils.supportsDeployableType(this.deployable,this.consts.DEPLOYABLE_TYPE.Tutorial)&&(t.push(bl.prop(this.consts.UI_PROPERTIES.Search)),this.isSearchEnabled()&&t.push(bl.prop(this.consts.UI_PROPERTIES.SearchProviders))),this.properties=t,e.prototype.load.call(this)},t.prototype.isSearchEnabled=function(){var e=this.siteConfigManager.get();return e.Settings&&Number(e.Settings.search)},t}(bl),Al=function(e){__extends(t,e);function t(t,n){e.call(this,t),this.consts=n,this.propertyNames=[n.UI_PROPERTIES.Default]}return t.prototype.load=function(){var t=pr.isTrue(this.deployable.Settings,this.consts.UI_PROPERTIES.Default,!1);t&&this.utils.hasUncompletedChildren(this.children)&&this.generateSingle(this.consts.UI_PROPERTIES.Default,!0),e.prototype.load.call(this)},t}(bl),kl=function(e){__extends(t,e);function t(n,r,i){e.call(this,n),this.consts=r,this.deployablesManagerFactory=i,this.propertyNames=[t._videoProperty,t._articleProperty]}return t.prototype.load=function(){if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Content){var n=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.Content).types(),r=this.deployable.Type;switch(r){case n.Video:this.generateSingle(t._videoProperty,!0);break;case n.Article:this.generateSingle(t._articleProperty,!0)}}e.prototype.load.call(this)},t._videoProperty=bl.prop(i.get("Consts").UI_PROPERTIES.Video),t._articleProperty=bl.prop(i.get("Consts").UI_PROPERTIES.Article),t}(bl),Ol=function(e){__extends(t,e);function t(t,n){e.call(this,t),this.consts=n,this.propertyNames=[n.UI_PROPERTIES.Accessible]}return t.prototype.load=function(){var t=!this.utils.isTab(this.deployable);this.generateSingle(this.consts.UI_PROPERTIES.Accessible,t),e.prototype.load.call(this)},t}(bl),Nl=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t),this.consts=n,this.siteConfigManager=r,this.deployablesManagerFactory=i,this._parentType=t.parentType,this._isLmsDeployable=this._parentType==n.DEPLOYABLE_TYPE.Course||this._parentType==n.DEPLOYABLE_TYPE.Lesson,this._parentId=t.parentId,this.propertyNames=[n.UI_PROPERTIES.Completed,n.UI_PROPERTIES.StrikedOut,n.UI_PROPERTIES.Uncompleted,n.UI_PROPERTIES.Active,n.UI_PROPERTIES.Inactive,n.UI_PROPERTIES.Phantom,n.UI_PROPERTIES.ProgressBar]}return t.prototype.load=function(){this._isLmsDeployable?this.handleLmsCompletion():this.handleTaskCompletion(),e.prototype.load.call(this)},t.prototype.handleLmsCompletion=function(){var e=i.get("LmsCompletionManager"),t=e.isCompleted(this.deployable.deployableType,this.deployable.Id,this._parentType,this._parentId);t?this.generateSingle(this.consts.UI_PROPERTIES.Completed,!0):this.generateSingle(this.consts.UI_PROPERTIES.Uncompleted,!0)},t.prototype.handleTaskCompletion=function(){var e=[];if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Task){var n=t._tasksManager.isTaskCompleted(this.deployable);this.handleCompletionProperties(e,n),this.handleActiveProperties(e,n),this.handlePhantomTask(e,this.deployable.Settings)}else this.utils.isTasksTab(this.deployable)&&e.push(bl.prop(this.consts.UI_PROPERTIES.ProgressBar));this.properties=e},t.prototype.handleCompletionProperties=function(e,t){if(t){e.push(bl.prop(this.consts.UI_PROPERTIES.Completed));var n=this.siteConfigManager.get();Number(n.TodoListSettings.strikeOutCompletedTasks)&&e.push(bl.prop(this.consts.UI_PROPERTIES.StrikedOut))}else e.push(bl.prop(this.consts.UI_PROPERTIES.Uncompleted))},t.prototype.handleActiveProperties=function(e,t){this.isActive(t)?e.push(bl.prop(this.consts.UI_PROPERTIES.Active)):e.push(bl.prop(this.consts.UI_PROPERTIES.Inactive))},t.prototype.isActive=function(e){var n=t._tasksManager.isTaskActive(this.deployable);return e&&!this.shouldPlayAfterCompletion()&&(n=!1),n},t.prototype.shouldPlayAfterCompletion=function(){var e=this.siteConfigManager.get(),t=Number(e.TodoListSettings.allowPlayAfterCompletion);return t},t.prototype.handlePhantomTask=function(e,t){t.Phantom&&e.push(bl.prop(this.consts.UI_PROPERTIES.Phantom))},t}(bl),Dl=function(){function e(e,t,n,r){this._lib=e,this._propertyUtils=t,this._propertiesFactory=n,this._deployable=r.deployable,this._deployableChildren=r.deployableChildren,this._parentType=r.parentType,this._parentId=r.parentId,this.createNewProperties()}return e.prototype.getAll=function(){var e=this,t=[];return this._lib.wrapFESession(function(){for(var n=0;n<e._properties.length;n++)t=t.concat(e._properties[n].getAll())}),t},e.prototype.clearCache=function(){for(var e=0;e<this._properties.length;e++)this._properties[e].clear()},e.prototype.hasProperty=function(e,t){
for(var n=0;n<this._properties.length;n++)if(this._properties[n].canGenerate(e)&&this._properties[n].hasProperty(e,t))return!0;return!1},e.prototype.createNewProperties=function(){var e={lib:this._lib,deployable:this._deployable,logger:{},children:this._deployableChildren,utils:this._propertyUtils,parentType:this._parentType,parentId:this._parentId};this._properties=this._propertiesFactory.generateAll(e)},e}();function Ll(e,t,n){this.create=function(r){return new Dl(e,t,n,r)}}i.register("PropertiesGeneratorFactory").asCtor(Ll).dependencies("Lib,PropertyUtils,PropertiesFactory");var xl=function(){function e(e){var t=e.id;this._type=e.type,this._typeId=e.typeId,this._id=t,this._description=e.description,this._children=e.childNodes,this._name=e.name,this._propertiesGenerator=e.propertiesGenerator,this._keywords=e.keywords?e.keywords:[];var n=e.activateFunction;this.activate=function(e){n(t,e)}}return e.prototype.children=function(){return this._children},e.prototype.properties=function(e){return e&&this._propertiesGenerator.clearCache(),this._propertiesGenerator},e.prototype.type=function(){return this._type.toLowerCase()},e.prototype.typeId=function(){return this._typeId},e.prototype.name=function(){return this._name},e.prototype.id=function(){return this._id},e.prototype.description=function(){return this._description||""},e.prototype.keywords=function(){return this._keywords},e}();i.register("DeployableTreeNodeCreator").asInstance(function(e){return new xl(e)}),i.register("DeployableTreeNodeFactory").asCtor(Fl).dependencies("Consts, CommonUtils, DeployableTreeNodeCreator, PropertiesGeneratorFactory, DeployablesManagerFactory");function Fl(e,t,n,r,i){var o=this;o.generate=a;function a(e,t,n){var o=i.get(e.deployableType),a={deployable:e,deployableChildren:t};n&&(a.parentType=n.deployableType,a.parentId=n.Id);var u=r.create(a);return s({deployable:e,deployableManager:o,children:t,propertiesGenerator:u})}function s(e){return n({typeId:e.deployable.deployableType,type:e.deployableManager.name(),id:e.deployable.Id,activateFunction:t,description:e.deployable.Description,childNodes:e.children,name:e.deployable.Name,propertiesGenerator:e.propertiesGenerator,keywords:u(e.deployable)});function t(t,n){e.deployableManager.activateById(t,n)}}function u(n){switch(n.deployableType){case e.DEPLOYABLE_TYPE.BusinessSolution:var r=t.getSettingsValue(n.Settings,"Keywords",void 0);return r;default:return n.Keywords}}}i.register("UiDataProvider").asCtor(Ml).dependencies("Consts, ObjectsTreeGenerator, DeployablesManagerFactory, ArrayUtils, PropertyUtils, CommonEvents");function Ml(e,t,n,r,i,o){this.uiObjectsTree=s,this.uiTasksTree=u;var a=e.DEPLOYABLE_TYPE.Collection;function s(){var t=l(d(a));return o.raiseEvent(e.EVENTS.UIObjectsTreeCreated,{uiObjectsTree:t}),t}function u(){return l(r.filter(d(a),c))}function l(e){return t.generate(e)}function c(t){return i.supportsDeployableType(t,e.DEPLOYABLE_TYPE.Task)}function d(e){for(var t=n.get(e).getAll(),r=0;r<t.length;r++)t[r].deployableType=e;return t}}i.register("ObjectsTreeGenerator").asCtor(Rl).dependencies("DeployableTreeNodeFactory, DeployablesManagerFactory");function Rl(e,t){var n=this;n.generate=r;function r(e){return i(e),o(e,null)}function i(e){if(!e)return;e.sort(function(e,t){return e.OrderIndex-t.OrderIndex})}function o(t,n){if(!t)return;for(var r=[],i=0;i<t.length;i++){var s=a(t[i]),u=o(s,t[i]);r.push(e.generate(t[i],u,n))}return r}function a(e){if(!e.LinkedDeployables)return null;for(var t=[],n=e.LinkedDeployables,r=0;r<n.length;r++){var i=s(n[r].DeployableType,n[r].DeployableID);i&&t.push(i)}return t}function s(e,n){var r=t.get(e),i=r.getById(n);return i&&(i.deployableType=e),i}}i.register("ObjectTreePercentageCalculator").asCtor(Bl).asProto().dependencies("Lib, FeaturesManager");function Bl(t,n){var r=this;r.calculate=i;function i(e,t){var n=o(e,t),r=Math.round(100*n.completed/n.total);return r}function o(t,n){var r={total:0,completed:0},i=t.children();return i&&e.each(i,function(e,t){var i=o(t,n);r.total+=i.total,r.completed+=i.completed,a(t,n)&&(r.total++,t.properties().hasProperty("completed")&&r.completed++)}),r}function a(e,t){return e.type()==t&&!e.properties().hasProperty("phantom")&&e.properties().hasProperty("visible")}}var Ul=function(){function e(e,t){this.storageManager=e,this.endUsersManager=t}return e.register=function(){i.register("DeployableViewsCounter").asCtor(e).dependencies("ClientOrServerStorageManager,EndUsersManager")},e.registerDummy=function(){i.register("DeployableViewsCounter").asInstance({get:function(){return 0},update:function(){},register:e.register})},e.prototype.update=function(e,t){var n=this.generateViewsCountKey(e,t);this.storageManager.increment(n,null,A)},e.prototype.get=function(e,t){var n=this.generateViewsCountKey(e,t);return this.storageManager.getData(n,0)},e.prototype.generateViewsCountKey=function(t,n){var r=this.endUsersManager.getEndUserGuid();return e.VIEWS_COUNT_KEY+r+"-"+t+"-"+n},e.VIEWS_COUNT_KEY="wm-views-",e}();F.register(D.PLATFORM.Android,Ul.register),F.register(D.PLATFORM.iOS,Ul.register),F.register(D.PLATFORM.Web,Ul.registerDummy),F.register(D.PLATFORM.MobileWeb,Ul.registerDummy),i.register("WalkthruStepsLoader").asCtor(Vl).dependencies("SettingsFile,WmAjax,DataFixer,CommonUtils,StepUtils,Logger,LanguageManager,CommonEvents,SiteConfigManager,WalkthrusContainer");function Vl(e,t,n,r,i,o,a,s,u,l){var c=this;c.afterStepsLoaded=function(e,t){var n=l.getWalkthrus(),r=v(e);return n[r]&&0==n[r].Steps.length?(p(r,e,t),!0):t()},c.LoadStepsForWT=function(e){return c.afterStepsLoaded(e,function(){})};function d(e,t){var n="data_"+e+"_wt_"+t,r=a.getCurrentLanguage();return r&&(n+="_"+r),n+".js"}function p(n,r,i){var a=e.getPublishDirectory(),s=e.getPublishVersion(),u=a+d(s,r);o.customerLog("Retriving steps for Walkthtu: "+r,3),t.execute({url:u,dataType:"jsonp",cache:!0,jsonpCallback:"walkme_steps_"+r,success:function(e,t,r){m(n,e),g(e,i)},error:function(){o.customerLog("Error: unable to receive data for Walkthtu: "+r,3),i()}})}function g(e,t){for(var n=[],o=0;o<e.length;o++){var a=e[o];if(i.isBranchStep(a)){var s=a.Settings.action.arguments.wtId;n.push(f(s))}n=n.concat(h(a))}r.executeParallel({functionsToExecute:n,successCallback:t})}function f(e){return function(t){c.afterStepsLoaded(e,t)}}function h(e){var t=[];if(e.LinkedTutorialIds)for(var n=e.LinkedTutorialIds.split(";"),r=0;r<n.length;r++)n[r]&&t.push(f(n[r]));return t}function m(e,t){var r=l.getWalkthrus();r[e].Steps=t,n.fixSteps(r[e],u.get())}function v(e){for(var t=l.getWalkthrus(),n=0;n<t.length;n++)if(t[n].TutorialId==e)return n;return-1}}var Wl=function(e){__extends(t,e);function t(t,n){var r={deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Category};e.call(this,r),this._name="Category"}return t}(si);i.register("CategoriesManager").asCtor(Wl).dependencies("Lib, Consts");var Gl=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Tutorial}),this.permalinkManager=r,this._name="Walkthru"}return t.prototype.activateById=function(e,t){WalkMeAPI.startWalkthruById({id:e,fromStep:0,playInitiator:t})},t.prototype.autoStartEnabled=function(e){if(this.permalinkManager.isTrainingInStartingMode())return!1;return!0},t}(si);i.register("TutorialsManager").asCtor(Gl).dependencies("Lib, Consts, PermalinkManager");var Hl=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p,f,h,m,v,S,E,T,y,C){var I=this;e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.Task}),this.consts=n,this.siteConfigManager=r,this.recorderServerManager=i,this.clientStorageManager=o,this.logger=a,this.walkMeInfo=s,this.contentsManager=u,this.tutorialsManager=l,this.commonEvents=c,this.auditTasksManager=d,this.walkthrusContainer=p,this.auditingEnabledIndicator=f,this.deployablesManagerFactory=h,this.dictionaryUtils=m,this.conditionCheckerFactory=v,this.settingsValuesRetriever=S,this.arrayUtils=E,this.conditionTreeEvaluator=T,this.businessSolutionsManager=y,this._todoListDataSynchronizer=C,this._name="Task",this.customerLog=_makeTutorial.Logger.wrapCustomerLog(g),this._isPreviewMode=s.getEnvironmentId()==n.SOURCES.preview,this._isPlayMode=s.getEnvironmentId()==n.SOURCES.play,this._siteConfig=r.get();var b=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition),w=i.get();this._endUserId=t.getEndUserId(),this._logError=a.error,this.setDeployables([]),this.customerLog('Initializing TodoListManager (isActive: "'+b+'", serverAddress: "'+w+'", userGuid: "'+s.getUserGuid()+'", endUserId: "'+this._endUserId+'")',3),window.walkMeRemoveTasksData&&(o.removeData(this._todoListDataSynchronizer.getEndUserUniqueDataKey(this._endUserId)),window.walkMeRemoveTasksData=!1),u.onActivated(function(e,t){I.updateDeployableCompleted(e,t)})}return t.prototype.init=function(){this._todoListDataSynchronizer.init()},t.prototype.setDeployables=function(t){if(!t)return;e.prototype.setDeployables.call(this,t);var n=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition);n=n&&t&&t.length>0,this.setActiveState(n),this.removeInvalidTasks()},t.prototype.activateById=function(e,t){var n=this.getById(e),r=this.deployablesManagerFactory.get(n.RelatedDeployableType);try{t=t||{type:this.consts.STEP_PLAY_INITIATOR_ENUM.NONE},t.objectId=void 0==t.id?t.objectId:t.id,this.auditTasksManager.auditTaskPlayed(n,t)}catch(i){this._logError(i)}var o={type:this.consts.STEP_PLAY_INITIATOR_ENUM.TASK,objectId:e};r.activateById(n.RelatedDeployableId,o)},t.prototype.getById=function(t){var n=e.prototype.getById.call(this,t);if(!n||!this.validateTask(n))return;return n},t.prototype.isTaskCompleted=function(e){var t=this.getCompletedTasks(),n=!!t&&this.arrayUtils.inArray(e.Id,t)>-1;return n},t.prototype.isTaskConditionsPassed=function(e){var t=!0;switch(e.RelatedDeployableType){case this.consts.DEPLOYABLE_TYPE.Tutorial:if(e.RelatedDeployableId){var n=this.walkthrusContainer.getWalkthruById(e.RelatedDeployableId);t=_makeTutorial.canShowTutorial(n)}}return t},t.prototype.isTaskActive=function(e){var t=e.Settings;if(!parseInt(t.ActivateConditionEnabled))return!0;return this.conditionTreeEvaluator.evaluate(t.ActivateCondition)},t.prototype.isTaskDisplayed=function(e){var t=e.Settings;if(!parseInt(t.DisplayConditionEnabled))return!0;var n=this.conditionCheckerFactory.createOld({bypassUIChange:!0,featureName:g,elementName:e.Name}),r=n.getCurrentEvaluationValueAndStopEvaluating(t.DisplayCondition);return r},t.prototype.compareTasks=function(e,t){if(e.Index<t.Index)return-1;if(e.Index>t.Index)return 1;return 0},t.prototype.areAllTaskGoalsCompleted=function(e,t){for(var n=0;n<e.Goals.length;n++){var r=e.Goals[n];if(!r.Id)continue;if(this.arrayUtils.inArray(r.Id,t.CompletedGoals)===-1)return 0}return 1},t.prototype.deactivateIfAllTasksCompleted=function(e,t){this.areAllTasksCompleted(e,t)&&this.deactivate()},t.prototype.areAllTasksCompleted=function(e,t){for(var n in e){var r=e[n];if(this.validateTask(r)){var i=t[r.Id];if(!i)return!1;if(!i.IsCompleted)return!1}}return!0},t.prototype.validateTask=function(e){if(!e.Id)return!1;if(e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Tutorial&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Content&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.BusinessSolution)return this.customerLog("Task (id: "+e.Id+") is of unknown type: "+e.RelatedDeployableType),!1;if(!e.RelatedDeployableId)return this.customerLog("Task (id: "+e.Id+") does not have any related Walk-Thru id"),!1;var t;if(t=e.RelatedDeployableType===this.consts.DEPLOYABLE_TYPE.Tutorial?this.tutorialsManager:e.RelatedDeployableType===this.consts.DEPLOYABLE_TYPE.Content?this.contentsManager:this.businessSolutionsManager,!t.getById(e.RelatedDeployableId))return this.customerLog("Task (id: "+e.Id+") related deployable ("+e.RelatedDeployableType+") (id: "+e.RelatedDeployableId+") does not exist"),!1;return!0},t.prototype.syncTaskCompletionWithLocalData=function(e){this.customerLog("syncing local tasks completion data",3),this.customerLog(e,5);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(n.IsCompleted)continue;var r=n.CompletedGoals,i=this.getById(t);if(i&&i.Goals){var o=i.Goals;if(o&&r&&r.length>0&&o.length>0){var a=this.areAllTaskGoalsCompleted(i,n);a&&(n.IsCompleted=1,this.completeTask(i,e))}}}},t.prototype.getGoalFromTask=function(e,t){for(var n=0;n<e.Goals.length;n++)if(e.Goals[n].Id==t)return e.Goals[n]},t.prototype.hasTaskGoalCompletionCondition=function(){return void 0===this._hasTaskGoalCompletionConditionCache&&(this._hasTaskGoalCompletionConditionCache=this.hasTaskGoalCompletionConditionInner()),this._hasTaskGoalCompletionConditionCache},t.prototype.hasTaskGoalCompletionConditionInner=function(){return this.checkForDeployablesAutostartConditions()||this.checkForWidgetConditions()||this.checkForAbExpermintesGoalsConditions()},t.prototype.checkForDeployablesAutostartConditions=function(){var e,t,n,r,i,o,a;for(var s in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(s)&&(o=this.consts.DEPLOYABLE_TYPE[s],n=this.deployablesManagerFactory.get(o),t=n&&n.getAll()))for(var u=0;u<t.length;u++)if(e=t[u],r=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCTEnabled",0),r&&(i=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCT",""),a=this.isTaskGoalFunctions(i)))return!0;return!1},t.prototype.checkForWidgetConditions=function(){var e=this.settingsValuesRetriever.getSettingsValue(this._siteConfig.Settings,this.consts.DISPLAY_WIDGET_CONDITION,"");return this.isTaskGoalFunctions(e)},t.prototype.checkForAbExpermintesGoalsConditions=function(){var e=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.AbExperiment);if(!e)return!1;for(var t,n,r,i,o=e.getAll(),a=0;a<o.length;a++){t=o[a],r=t.Goals;for(var s=0;s<r.length;s++)if(n=r[s],i=this.settingsValuesRetriever.getSettingsValue(n.Settings,"Conditions",""),this.isTaskGoalFunctions(i))return!0}},t.prototype.isTaskGoalFunctions=function(e){function t(e){return"Func"==e.nodeType?"TaskGoalReached"==e.funcName||"TaskGoalNotReached"==e.funcName:("And"==e.nodeType||"Or"==e.nodeType)&&(t(e.leftSon)||t(e.rightSon))}return null!=e&&t(e)},t.prototype.completeGoal=function(e,t,n){var r=t[e];r.CompletedGoals.push(n);var i=this.deployablesDict[e];r.IsCompleted=this.areAllTaskGoalsCompleted(i,r);var o=this.getGoalFromTask(i,n);r.IsCompleted?this.completeTask(i,t,o):(t[r.TaskId]=r,this.customerLog("Server update completed GOAL (taskId: "+e+", goalId: "+n+")",3),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,null,o,t,this.deployablesDict,this.isAuditEnabled()))},t.prototype.isAuditEnabled=function(){return this.auditingEnabledIndicator.isEnabled()&&!this._isPreviewMode},t.prototype.completeTask=function(e,t,n){try{var r=n?n.Id:-1;t[e.Id]={TaskId:e.Id,IsCompleted:1,CompletedGoals:[]},this.commonEvents.raiseEvent(this.consts.EVENTS.TaskCompleted,{TaskId:e.Id}),this.deactivateIfAllTasksCompleted(this.deployablesDict,t),this.customerLog("Server update completed TASK (taskId: "+e.Id+", goalId: "+r+")",3),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,e,n,t,this.deployablesDict,this.isAuditEnabled())}catch(i){this.deactivate(),this._logError(i,"An error occurred while trying to complete a Task")}},t.prototype.didTasksFinishLoading=function(){return this._tasksFinishedLoading},t.prototype.setTasksFinishedLoadingCallback=function(e){this._tasksFinishedLoadingCallback=e},t.prototype.raiseTasksFinishedCallback=function(e){this._tasksFinishedLoading=!0,this._tasksFinishedLoadingCallback&&this._tasksFinishedLoadingCallback(e),this._tasksFinishedLoadingCallback=null},t.prototype.loadTasks=function(e,t){var n=this;if(this.customerLog("loadTasks - start loading completion data",3),this._isPlayMode)return this.customerLog("loadTasks - Play mode - returning empty tasks completion data",3),this.deactivateIfAllTasksCompleted(this.deployablesDict,{}),void e({});if(!this._endUserId)return this.customerLog("loadTasks - No end user - Deactivating",3),void this.deactivate();try{var r=function(t){n.syncTaskCompletionWithLocalData(t),n.customerLog("Tasks completion data loaded successfully",3),n.commonEvents.raiseEvent(n.consts.EVENTS.TasksLoaded,{completedTasks:t}),n.deactivateIfAllTasksCompleted(n.deployablesDict,t),e&&e(t),n.raiseTasksFinishedCallback()},i=function(e){n.customerLog("Tasks completion data failed loading",3),n.deactivate(),t&&t(e)};this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),r,i)}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to load completed tasks to the local storage")}},t.prototype.getTaskGoalsIds=function(e){var t={};return mtjQuery.each(e,function(e,n){t[e]=n.Goals?mtjQuery.map(n.Goals,function(e){return e.Id}):[]}),t},t.prototype.getTaskIdByGoalId=function(e){for(var t=this.dictionaryUtils.getDictionaryKeys(this.deployablesDict),n=t.length-1;n>=0;n--){var r=this.deployablesDict[t[n]];if(this.hasWantedGoal(r,e))return r.Id}},t.prototype.hasWantedGoal=function(e,t){for(var n=e.Goals.length-1;n>=0;n--)if(e.Goals[n].Id==t)return t},t.prototype.getCompletedTasks=function(){if(this.customerLog("Getting completed tasks",3),this._isPlayMode)return this.customerLog("Play mode - returning empty array of completed tasks",3),[];if(!this._endUserId)return this.deactivate(),null;try{var e=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!e)return null;var t=[];return mtjQuery.each(e,function(e,n){if(!n.TaskId)return;n.IsCompleted&&t.push(n.TaskId)}),this.customerLog("Returning completed tasks ("+t+")",3),t}catch(n){this.deactivate(),this._logError(n,"An error occurred while trying to retrieve completed tasks")}return null},t.prototype.updateGoalCompleted=function(e){var t=this,n=e.RelatedObjectId,r=e.Id,i=e.Name;if(this.customerLog("Updating completed goal (taskId: "+n+", goalId: "+r+", goalName: "+i+")",3),this.commonEvents.sendAutomationEvent(this.consts.EVENTS.Goals.GoalReached,{GoalId:r,GoalName:i}),this._isPlayMode)return void this.customerLog("Play mode - exiting without updating",3);if(!this._endUserId)return void this.deactivate();try{this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){var i=e[n];if(i||(i={TaskId:n,IsCompleted:0,CompletedGoals:[]},e[n]=i),i.IsCompleted)return;if(t.arrayUtils.inArray(r,i.CompletedGoals)>-1)return;t.completeGoal(i.TaskId,e,r)})}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to update task completed")}},t.prototype.updateDeployableCompleted=function(e,t){var n=this;if(this.customerLog("Updating completed deployable ("+t+") deployableId: "+e+")",3),this._isPlayMode)return void this.customerLog("Play mode - exiting without updating",3);if(!this._endUserId)return void this.deactivate();mtjQuery.each(this.deployablesDict,function(r,i){if(!i.Id)return;if(i.RelatedDeployableType!==t)return;if(parseInt(i.RelatedDeployableId)!==e)return;if(i.Goals&&i.Goals.length>0)return;n._todoListDataSynchronizer.asyncRetrieveCompletedTasks(n._endUserId,n.getTaskGoalsIds(n.deployablesDict),function(e){if(e[i.Id]&&e[i.Id].IsCompleted)return;n.completeTask(i,e)})})},t.prototype.getTasksGoalsNotCompleted=function(){var e=this;if(this._isPlayMode)return this.customerLog("Play mode - not getting tasks not completed goals",3),[];this.customerLog("Getting tasks uncompleted goals",3);var t=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));t||(t=[]);var n=[];return mtjQuery.each(this.deployablesDict,function(r,i){if(!i.Id)return;var o=t[i.Id];if(o&&o.IsCompleted)return;var a={TaskId:i.Id,Name:i.Name,GoalsNotCompleted:[]};mtjQuery.each(i.Goals,function(t,n){if(!n.Id)return;var r=o&&o.CompletedGoals?o.CompletedGoals:[];if(e.arrayUtils.inArray(n.Id,r)===-1){var i=mtjQuery.extend(!0,{},n);a.GoalsNotCompleted.push(i)}}),n.push(a)}),n},t.prototype.getApiTasks=function(e){var t=this;this.customerLog("Getting tasks fot the API",3);var n=this.getCompletedTasks();n||(n=[]);var r=[];return mtjQuery.each(this.deployablesDict,function(i,o){if(!t.validateTask(o))return;var a=n&&t.arrayUtils.inArray(o.Id,n)>-1?1:0,s={Index:o.OrderIndex,Name:o.Name,Id:o.Id,IsCompleted:a,Settings:Af(o.Settings),Description:o.Description,RelatedDeployableType:o.RelatedDeployableType,RelatedDeployableId:o.RelatedDeployableId};s.TaskProperties=s.Settings,e&&(s.ConditionsPassed=t.isTaskConditionsPassed(o),s.IsActive=t.isTaskActive(o),s.IsDisplayed=t.isTaskDisplayed(o)),delete s.Settings.ActivateConditionEnabled,delete s.Settings.ActivateCondition,r.push(s)}),r.sort(this.compareTasks),r},t.prototype.isTaskGoalReached=function(e,t){var n=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!n)return!1;var r=n[e];if(!r)return!1;if(r.IsCompleted)return!0;return this.arrayUtils.inArray(t,r.CompletedGoals)!==-1},t.prototype.isActive=function(){return this._isActive},t.prototype.setActiveState=function(e){this.customerLog("Setting todo list active state to: "+e,3),this._isActive=e},t.prototype.activate=function(){var e=this;this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(t){if(e.areAllTasksCompleted(e.deployablesDict,t))return;e.setActiveState(!0)})},t.prototype.deactivate=function(){this.raiseTasksFinishedCallback(!1),this.setActiveState(!1)},t.prototype.toggleActiveState=function(){this.setActiveState(!this.isActive())},t.prototype.removeInvalidTasks=function(){for(var e=this.getAll(),t=0;t<e.length;t++)this.validateTask(e[t])||delete this.deployablesDict[e[t].Id]},t}(si);i.register("TodoListManager").asCtor(Hl).dependencies("Lib, Consts, SiteConfigManager, RecorderServerManager, ClientStorageManager, Logger, WalkMeInfo, ContentsManager, TutorialsManager, CommonEvents, AuditTasksManager, WalkthrusContainer, AuditingEnabledIndicator, DeployablesManagerFactory, DictionaryUtils,ConditionCheckerFactory, SettingsValuesRetriever, ArrayUtils, ConditionTreeEvaluator, BusinessSolutionsManager, TodoListDataSynchronizer");var jl=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Launcher}),this._name="Launcher",this._launcherActionDataProvider=r}return t.prototype.getActionData=function(t){var n=e.prototype.getActionData.call(this,t);return this._launcherActionDataProvider.fillActionData(t,n)},t.prototype.isWithAction=function(e){return this._launcherActionDataProvider.isWithAction(e)},t}(si);i.register("LaunchersManager").asCtor(jl).dependencies("Lib, Consts, LauncherActionDataProvider");var Yl=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Shuttle}),this.Consts=n,this.win=r,this.TimerManager=i,this.WalkMeGoalsManager=o,this.ClickAuditManager=a,this.CommonUtils=s,this.playGuidGenerator=u,this.walkmeVisibleReporter=l,this.htmlDecoder=c,this.logger=d,this._name="Shuttle"}return t.prototype.activateById=function(e,n){var r=this;try{n=n||{};var i=this.deployablesDict[e];if(!i)return void this.logger.customerLog(kf("Shuttle with id {0} doesn't exist",e),3);this.ClickAuditManager.SendClickAudit(this.Consts.DEPLOYABLE_TYPE.Shuttle,i.Id,{type:n.type,id:n.objectId});var o=parseInt(this.CommonUtils.getSettingsValue(i.Settings,t.PLAY_MODE_SETTING_KEY,this.Consts.PLAY_MODE.SameTab)),a=this.getShuttleUrl(i.DestinationUrl);this.CommonUtils.isValidUrl(a)&&(this.WalkMeGoalsManager.startWatchingDeployable(i,this.playGuidGenerator.generateNewPlayGuid(i.Id)),this.walkmeVisibleReporter.report(),o==this.Consts.PLAY_MODE.NewTab&&this.win.open(a,"_blank"),o==this.Consts.PLAY_MODE.SameTab&&this.TimerManager.libSetTimeout(function(){r.win.location.href=a},t.TIME_BEFORE_REDIRECTING))}catch(s){this.logger.customerLog(kf("Failed playing shuttle with id {0}. Exception is {1}",e,s),3)}},t.prototype.getShuttleUrl=function(e){if(e=this.htmlDecoder.decodeHtml(e,["&"]),this.win._walkmeInternals.customShuttleUrl){var t=this.win._walkmeInternals.customShuttleUrl(e);return t}return e},t.PLAY_MODE_SETTING_KEY="ShuttlePlayMode",t.TIME_BEFORE_REDIRECTING=100,t}(si);i.register("ShuttlesManager").asCtor(Yl).dependencies("Lib, Consts, win, TimerManager, WalkMeGoalsManager, ClickAuditManager, CommonUtils, PlayGuidGenerator, WalkmeVisibleReporter, HtmlDecoder, Logger");var zl=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.Content}),this.consts=n,this.logger=l,this._cdnServer=null,this._currentContentActivator=null,this._activateCallbacks=[],this._name="Content",this._cdnServer=r.get(),this._clickAuditManager=o,this._walkMeGoalsManager=i,this._featuresManager=a,this._playGuidGenerator=s,this._walkmeVisibleReporter=u}return n.prototype.onActivated=function(e){this._activateCallbacks.push(e)},n.prototype.activateById=function(e,t){try{t=t||{};var n=this.deployablesDict[e];if(!n)return void this.logger.customerLog(kf("Content with id {0} doesn't exist",e),3);var r={lib:this.lib,cdnServer:this._cdnServer,clickAuditManager:this._clickAuditManager,content:n};this.removeContent(),this._currentContentActivator=this.getContentActivator(n.Type,r),this._currentContentActivator.activateContent(n,t.type,t.objectId),this._walkmeVisibleReporter.report(),this._walkMeGoalsManager.startWatchingDeployable(n,this._playGuidGenerator.generateNewPlayGuid(n.Id));for(var i=0;i<this._activateCallbacks.length;i++)this._activateCallbacks[i](n.Id,this.consts.DEPLOYABLE_TYPE.Content)}catch(o){this.logger.customerLog(kf("Failed playing content with id {0}. Exception is {1}",e,o),3)}},n.prototype.getContentActivator=function(e,t){var r=null;switch(e){case n.CONTENT_TYPES.Video:var i=this.getVideoIdAndVendor(t.content.Url);i?(t.videoId=i.videoId,t.vendorName=i.vendorName,r=new Ba(t)):r=new Ua(t);break;case n.CONTENT_TYPES.Article:r=new Ua(t);break;default:throw kf("Invalid content type : {0}",e)}return r},n.prototype.getVideoIdAndVendor=function(t){var n,r=/^(?:http|https):\/\/.*youtube\..*v=([\w-]+)/i,i=/^(?:http|https):\/\/.*youtu.be\/([\w-]+)/i,o=/^(?:http|https):\/\/.*youtube.*\/embed\/([\w-]+)/i,a=/^(?:http:\/\/|https:\/\/).*vimeo.*\/([\w-]+)/i,s=[{regex:r,vendorName:"youtube"},{regex:i,vendorName:"youtube"},{regex:o,vendorName:"youtube"},{regex:a,vendorName:"vimeo"}];return e.each(s,function(e,r){var i=t.match(r.regex);if(i&&i.length>1)return n={videoId:i[1],vendorName:r.vendorName},!1}),!n&&this._featuresManager.isFeatureEnabled("html5video")&&(n={vendorName:"html5video"}),n},n.prototype.removeContent=function(){this._currentContentActivator&&this._currentContentActivator.removeContent()},n.prototype.types=function(){return n.CONTENT_TYPES},n.CONTENT_TYPES={Article:0,Video:1},n}(si);i.register("ContentsManager").asCtor(zl).dependencies("Lib, Consts, CdnServer, WalkMeGoalsManager, ClickAuditManager, FeaturesManager, PlayGuidGenerator, WalkmeVisibleReporter, Logger");var Ql=function(e){__extends(t,e);function t(t,n){var r={deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Collection};e.call(this,r),this._name="Tab"}return t}(si);i.register("CollectionsManager").asCtor(Ql).dependencies("Lib, Consts");var Kl=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Course}),this.consts=n,this.quizPlayer=r,this.initiatorManager=i,this._name="Course"}return t.prototype.activateQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;if(!n)return;var r=this.quizPlayer;this.initiatorManager.setForScope({type:this.consts.STEP_PLAY_INITIATOR_ENUM.COURSE,objectId:e,appType:this.consts.EVENT_SENDER_EVENT_APPS.Course},function(){r.playQuiz(n)})},t.prototype.getCourseByQuizId=function(e){for(var t in this.deployablesDict)if(this.deployablesDict.hasOwnProperty(t)){var n=this.deployablesDict[t];if(n.Quiz&&n.Quiz.Id==e)return n}},t.prototype.getQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;return n},t.prototype.releaseAll=function(e){this.quizPlayer.releaseAll(e)},t}(si);i.register("CoursesManager").asCtor(Kl).dependencies("Lib, Consts, QuizPlayer, InitiatorManager");var ql=function(e){__extends(t,e);function t(t,n){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Lesson}),this._name="Lesson"}return t}(si);i.register("LessonsManager").asCtor(ql).dependencies("Lib, Consts");var Xl=function(e){__extends(t,e);function t(t,n){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.AbExperiment}),this._name="Experiments"}return t}(si);i.register("ExperimentsManager").asCtor(Xl).dependencies("Lib, Consts");var Jl=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.ShoutOut}),this.Consts=n,this.UIComponentsFactory=r,this.WalkMeGoalsManager=i,this.ClickAuditManager=o,this.ClientOrServerStorageManager=a,this.actionDataProvider=s,this.DeployableViewsCounter=u,this.commonEvents=l,this.playGuidGenerator=c,this.walkmeVisibleReporter=d,this.logger=p,this._appendChain=[],this._activeComponents=[],this._name="ShoutOut",this.type=n.DEPLOYABLE_TYPE.ShoutOut}return t.prototype.getStopConditionKey=function(e,n){return t.STOP_CONDITION_KEY+this.type+"-"+e.Id+"-"+n},t.prototype.activateById=function(e,n,r){var i=this;try{if(this.handleActiveComponent(e,n))return;var o=this.deployablesDict[e];if(!o)return void this.logger.customerLog(kf("ShoutOut with id {0} doesn't exist",e),3);var a=this.UIComponentsFactory.get(o.UiComponentId,[o]);this.pushActiveComponent(a);var s=this.auditActivation(o,n);a.once("show-end",function(){i.WalkMeGoalsManager.startWatchingDeployable(o,i.playGuidGenerator.generateNewPlayGuid(o.Id)),i.DeployableViewsCounter.update(i.type,o.Id),a.once("action-start",function(e,n){var r;n==i.Consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater?r=i.Consts.SHOUTOUT_CLICK_TYPE.RemindMeLater:n==i.Consts.DEPLOYABLE_ACTION_TYPES.Action?(i.setStopCondition(o,t.STOP_CONDITIONS.Action),r=i.Consts.SHOUTOUT_CLICK_TYPE.Action):n==i.Consts.DEPLOYABLE_ACTION_TYPES.Close&&(i.setStopCondition(o,t.STOP_CONDITIONS.Cancel),r=i.Consts.SHOUTOUT_CLICK_TYPE.Close),i.auditClick(o,i.type,r,s),i.commonEvents.raiseEvent(i.Consts.EVENTS.ShoutOutClosed,{shoutOut:o,clickType:r})}),a.once("x-clicked",function(){i.setStopCondition(o,t.STOP_CONDITIONS.XButton),i.auditClick(o,i.type,i.Consts.SHOUTOUT_CLICK_TYPE.XButton,s),i.commonEvents.raiseEvent(i.Consts.EVENTS.ShoutOutClosed,{shoutOut:o,clickType:i.Consts.SHOUTOUT_CLICK_TYPE.XButton})}),a.once("destroy-end",function(){i.commonEvents.raiseEvent(i.Consts.EVENTS.UIComponentDestroyed),i.commonEvents.raiseEvent(i.Consts.EVENTS.DeployableDestroyed)})}),this.appendComponent(a,o),this.walkmeVisibleReporter.report();var u={deployable:o,uiComponent:a,deployableType:this.type};return this.commonEvents.raiseEvent(this.Consts.EVENTS.DeployableCreated,u),a}catch(l){this.logger.customerLog(kf("Failed playing shoutOut with id {0}. Exception is {1}",e,l),3)}},t.prototype.getActionData=function(t){var n=e.prototype.getActionData.call(this,t);return this.actionDataProvider.fillActionData(t,n)},t.prototype.isWithAction=function(e){return this.actionDataProvider.isWithAction(e)},t.prototype.handleActiveComponent=function(e,t){var n=this.getActiveComponent(e);return n&&this.isLauncherInitiation(t)&&this.flickerActiveComponent(n),!!n},t.prototype.isLauncherInitiation=function(e){return e&&e.type==this.Consts.STEP_PLAY_INITIATOR_ENUM.LAUNCHER},t.prototype.flickerActiveComponent=function(e){e.unbind("hide-end."+t.ACTIVE_COMPONENT_SUFFIX),e.once("hide-end."+t.ACTIVE_COMPONENT_SUFFIX,function(){e.show()}),e.hide()},t.prototype.getActiveComponent=function(e){for(var t=this._activeComponents.length-1;t>=0;t--)if(this._activeComponents[t].getComponent().Id==e)return this._activeComponents[t];
},t.prototype.appendComponent=function(e,t){var n=this;e.once("append-end",function(){e.show(),n.handleNextShoutOut()}),this._isAppending?this._appendChain.push(e):(this._isAppending=!0,e.append())},t.prototype.handleNextShoutOut=function(){var e=this._appendChain.splice(0,1)[0];e?e.append():this._isAppending=!1},t.prototype.setStopCondition=function(e,t){if(!e.Settings.stopOn||!e.Settings.stopOn[t])return;var n=this.getStopConditionKey(e,t);this.ClientOrServerStorageManager.saveData(n,1,A)},t.prototype.auditActivation=function(e,t){return t=t||{},this.ClickAuditManager.SendClickAudit(this.type,e.Id,{type:t.type,id:t.objectId})},t.prototype.auditClick=function(e,t,n,r){this.ClickAuditManager.SendShoutOutAudit(e.Id,t,n,r)},t.prototype.pushActiveComponent=function(e){var n=this,r=this._activeComponents.length;this._activeComponents.push(e),e.bind(t.EVENT_DESTROY_BEGIN,function(){e.unbind(t.EVENT_DESTROY_BEGIN),n._activeComponents.splice(r,1)})},t.prototype.releaseAll=function(e){try{for(var n=0;n<this._activeComponents.length;n++){var r=this._activeComponents[n];r.unbind(t.EVENT_DESTROY_BEGIN),r.destroy()}this._activeComponents.length=0}catch(i){}e&&e()},t.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e],n=t.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&this.checkStopCondition(t,r,n[r]))return!1;return!0},t.prototype.checkStopCondition=function(e,t,n){if(!n)return!1;switch(t){case"views":return this.DeployableViewsCounter.get(this.type,e.Id)>=n;default:var r=this.getStopConditionKey(e,t);if(this.ClientOrServerStorageManager.getData(r,!1))return!0}},t.EVENT_DESTROY_BEGIN="destroy-begin.manager",t.ACTION_NAME_DESTROY="destroy",t.STOP_CONDITION_KEY="wm-stpcond-",t.ACTIVE_COMPONENT_SUFFIX="acs",t.COOKIE_LIFE_10_YEARS=31536e4,t.STOP_CONDITIONS={XButton:"x",Cancel:"close",Action:"action"},t}(si);i.register("ShoutOutsManager").asCtor(Jl).dependencies("Lib, Consts, UIComponentsFactory, WalkMeGoalsManager, ClickAuditManager, ClientOrServerStorageManager, ShoutOutActionDataProvider, DeployableViewsCounter, CommonEvents, PlayGuidGenerator, WalkmeVisibleReporter, Logger");var $l=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n}),this._type=n,this._commonEvents=r,this._deployableViewsCounter=i.get("DeployableViewsCounter"),this._storageManager=i.get("ClientOrServerStorageManager"),this._clickAuditManager=i.get("ClickAuditManager"),this._consts=i.get("Consts"),this._logger=i.get("Logger")}return t.prototype.activateById=function(e,t){var n=this,r=this.deployablesDict[e];if(!r)return this._logger.customerLog(kf(this._name+" with id {0} doesn't exist",e),3),!1;var i=this.getAppletObj(r),o=this.auditActivation(i,t);i.once("close",function(e,t){t.isInteracted?(n.setStopCondition(r,Zl.STOP_CONDITIONS.Interacted),n.auditClick(i,n._consts.APPLET_INTERACTION_TYPES.Element,o)):n.auditClick(i,n._consts.APPLET_INTERACTION_TYPES.Overlay,o),n._commonEvents.raiseEvent(D.EVENTS.DeployableDestroyed)}),i.once("show-ended",function(t,i){n._deployableViewsCounter.update(n._type,e);var o={deployable:r,deployableType:n._type};n._commonEvents.raiseEvent(D.EVENTS.DeployableCreated,o)}),i.once("show-fail",function(e,t){var i={deployable:r};n._commonEvents.raiseEvent(D.EVENTS.DeployableNotShowing,i)}),i.show();var a={deployable:r};this._commonEvents.raiseEvent(D.EVENTS.DeployableHandleStarting,a)},t.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e],n=t.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&this.checkStopCondition(t,r,n[r]))return!1;return!0},t.prototype.getStopConditionKey=function(e,n){return t.STOP_CONDITION_KEY+this._type+"-"+e.Id+"-"+n},t.prototype.checkStopCondition=function(e,t,n){if(!n)return!1;switch(t){case"views":return this._deployableViewsCounter.get(this._type,e.Id)>=n;default:var r=this.getStopConditionKey(e,t);if(this._storageManager.getData(r,!1))return!0;return!1}},t.prototype.setStopCondition=function(e,n){if(!e.Settings.stopOn||!e.Settings.stopOn[n])return;var r=this.getStopConditionKey(e,n);this._storageManager.saveData(r,1,t.COOKIE_LIFE_10_YEARS)},t.prototype.auditActivation=function(e,t){return t=t||{},this._clickAuditManager.SendClickAudit(this._type,e.getId(),{type:t.type,id:t.objectId})},t.prototype.auditClick=function(e,t,n){this._clickAuditManager.SendInteractionAudit(e.getId(),this._type,t,n)},t.STOP_CONDITION_KEY="wm-stpcond-",t.COOKIE_LIFE_10_YEARS=31536e4,t}(si),Zl=function(e){__extends(t,e);function t(t,n,r){e.call(this,t,n.DEPLOYABLE_TYPE.Spotlight,r),this._consts=n,this._name="Spotlight"}return t.prototype.getAppletObj=function(e){return i.create("Spotlight",e)},t.STOP_CONDITIONS={Interacted:"interacted"},t}($l);i.register("SpotlightsManager").asCtor(Zl).dependencies("Lib, Consts, CommonEvents");var ec=function(e){__extends(t,e);function t(t,n,r){e.call(this,t,n.DEPLOYABLE_TYPE.Tooltip,r),this._consts=n,this._name="Tooltip"}return t.prototype.getAppletObj=function(e){return i.create("MobileNativeTooltip",e)},t.STOP_CONDITIONS={Interacted:"interacted"},t}($l);i.register("TooltipsManager").asCtor(ec).dependencies("Lib, Consts, CommonEvents");var tc=function(t){__extends(n,t);function n(e,n,r){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.SearchProviderUrl}),this._consts=n,this._conditionCheckerFactory=r,this._name="SearchProviderUrl",this.segmentedProvidersUrls=[]}return n.prototype.getAllSegmented=function(){return this.segmentedProvidersUrls},n.prototype.setSegmentedProviders=function(){this.segmentedProvidersUrls=[];var t=this.getAll();if(t.length>0){var n=this._conditionCheckerFactory.createConditionChecker(t[0].Settings.DisplayCondition);this.segmentedProvidersUrls=e(t).filter(function(e,t){return n.getCurrentEvaluationValueAndStopEvaluating(t.Settings.DisplayCondition)}).map(function(e,t){return t.Id}).toArray()}},n.STOP_CONDITIONS={Interacted:"interacted"},n}(si);i.register("SearchProviderUrlsManager").asCtor(tc).dependencies("Lib, Consts, ConditionCheckerFactory");var nc=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Survey}),this.consts=n,this.recorderServerManager=i,this.permalinkManager=o,this.guidGenerator=a,this.auditStepsManager=s,this.commonUtils=u,this.commonEvents=l,this.hostData=d,this.eventSender=p,this.logger=g,this.reportInitiatorMapper=f,this.endUsersManager=h,this.popupBalloonDisplayer=m,this.wmAjax=v,this.clientStorageManager=S,this.walkmeVisibleReporter=E,this.auditingEnabledIndicator=T,this.currentWalkthruData=y,this.questionToEventMapper=C,this._surveyStartedInCurrentPage=!1,this._surveyIsShown=!1,this._name="Survey",this._auditSource=c.get(),this._getPermutationId=r.getCurrentPermutation()}return t.prototype.submitResults=function(e){if(this._surveyIsShown=!1,e.answers.length>0)return this.sendResultsArrayToServer("SurveyCompleted",e),this.addSubmitCookie(e.surveyGuid),this.sendSurveyCompletedEvent(e,"CompletedWithAnswers"),!0;return this.sendSurveyCompletedEvent(e,"CompletedWithNoAnswers"),!1},t.prototype.submitExit=function(e){this._surveyIsShown=!1,this.sendResultsArrayToServer("SurveyExited",e),this.sendSurveyCompletedEvent(e,"ExitButtonClicked")},t.prototype.sendSurveyCompletedEvent=function(e,t){var n={surveyGuid:e.surveyGuid,status:t};e.answers&&e.answers.length>0&&(n.answers=e.answers),this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyCompleted,n)},t.prototype.sendResultsArrayToServer=function(e,n){if(!this.auditingEnabledIndicator.isEnabled())return;n.permutationId=this._getPermutationId,n.endUserGuid=this.endUsersManager.getEndUserGuid();var r=Cf(n),i=this.wmAjax.execute({url:this.recorderServerManager.get()+"/Survey/"+e,data:{surveyDataSerialized:r},timeout:t.SEND_TO_SERVER_TIMEOUT});i.success(function(e){}),i.error(function(e,t,n){})},t.prototype.addSubmitCookie=function(e){var t="wm-SrvSmt-"+e;this.clientStorageManager.saveData(t,1,_)},t.prototype.startSurvey=function(e,t){var n=this,r=!0;this._surveyIsShown=!0;var i=window.walkmeExternalSurvey;if(this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.StartSurvey,e),i&&(e.surveyJson.Settings.isExternal||e.isSurveyExternal)){this.logger.customerLog("Starting external survey"),e.playGuid=this.auditStepsManager._currentPlayGUID,e.source=this._auditSource;var o=i(e,e.callback);o===!1?(r=!1,this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyFailedShowing)):this.sendSurveyPlayedEvent(e.surveyJson)}else this.startInternalSurvey(e,function(t){t.show().then(function(){return n.commonEvents.raiseEvent("SurveyOnScreen")}),n.sendSurveyPlayedEvent(e.surveyJson)});return this.reportSurveyStarted(e,t,e.surveyJson.Questions),r},t.prototype.startInternalSurvey=function(e,t){var n=e.surveyJson.Settings.shouldShowOneByOne;1==n?(this.logger.customerLog(kf("Starting one by one survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),__webpack_require__.e(4,function(n){var r=[n(70)];(function(){t(i.create("OneByOneSurvey",e))}).apply(null,r)})):(this.logger.customerLog(kf("Starting regular survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),__webpack_require__.e(5,function(n){var r=[n(80)];(function(){t(i.create("AllQuestionsSurvey",e))}).apply(null,r)}))},t.prototype.sendSurveyPlayedEvent=function(e){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyPlayed,{surveyId:e.Id})},t.prototype.surveyIsShown=function(){return this._surveyIsShown},t.prototype.submitSurvey=function(e,t,n,r){var i=this.buildAnswersObjectForServer(e,n);e.submitResults(i),this.logger.customerLog(kf("Submitting answers for survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),this.reportSurveySubmitted(e,t,n),r&&r()},t.prototype.surveyExited=function(e,t,n,r){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyExited,{surveyParams:e,questions:t,answers:r,callback:n}),this.logger.customerLog(kf("Survey with id {0} and name {1} exited",e.surveyJson.Id,e.surveyJson.Name));var i=this.buildAnswersObjectForServer(e,[]);e.submitExit(i),this.reportSurveyExited(e,t),n&&n()},t.prototype.buildAnswersObjectForServer=function(e,t){var n={};return n.playGuid=e.surveyPlayGUID,n.surveyGuid=e.surveyJson.Guid,n.tutorialId=e.tutorialId,n.source=this._auditSource,n.customVarsData=this.commonUtils.getWindowData(O.Var,e.surveyJson.Settings.customVar),n.customCookiesData=this.commonUtils.getWindowData(O.Cookie,e.surveyJson.Settings.customCookie),n.answers=[].concat.apply([],t),n.fullUrl=this.hostData.getUrl(),n},t.prototype.activateById=function(e,t,n){var r=this;n=n||{};var i=this.deployablesDict[e];if(!i)return this.logger.customerLog(kf("Survey with id {0} doesn't exist",e),3),!1;n.surveyJson=i,n.submitResults=function(e){r.submitResults(e)},n.submitExit=function(e){r.submitExit(e)},n.drawBalloonFunc=this.popupBalloonDisplayer.showSpecialPopupBalloon,n.surveyPlayGUID=n.surveyPlayGUID||this.guidGenerator.generateGuid();var o=this.startSurvey(n,t);return this._surveyStartedInCurrentPage=o||this._surveyStartedInCurrentPage,o},t.prototype.autoStartEnabled=function(e){return!(this._surveyStartedInCurrentPage||this.permalinkManager.isTrainingInStartingMode()||this.currentWalkthruData.state!=this.consts.WALKTHRU_STATE.NOT_RUNNING&&this.currentWalkthruData.state!=this.consts.WALKTHRU_STATE.PAUSED)},t.prototype.reportSurveyExited=function(e,t){try{var n=this.mapSurveyParamsToEvent(e,t);n.reason=this.eventSender.CANCEL_REASONS.Xclick,this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Close,n)}catch(r){this.logger.error(r,"reportSurveyExited")}},t.prototype.reportSurveyStarted=function(e,t,n){try{this.walkmeVisibleReporter.report();var r=mtjQuery.extend(this.mapSurveyParamsToEvent(e,n),this.mapEventSource(e),this.reportInitiatorMapper.mapForExtend(t));this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Play,r)}catch(i){this.logger.error(i,"reportSurveyStarted")}},t.prototype.reportSurveySubmitted=function(e,t,n){try{var r=this.mapSurveyParamsToEvent(e,t);this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,r);for(var i=0;i<t.length;i++)for(var o=t[i],a=this.questionToEventMapper.map(o,e),s=n[i],u=0;u<s.length;u++){var l=mtjQuery.extend({},r,a,this.mapAnswerToProps(s[u],e.surveyJson),{indx:i+1});this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,l)}}catch(c){this.logger.error(c,"reportSurveySubmitted")}},t.prototype.mapEventSource=function(e){if(!e.eventSource)return{};return{reason:e.eventSource}},t.prototype.mapSurveyParamsToEvent=function(e,t){var n=this.eventSender.EVENT_APPS.Survey,r={type:n,oId:e.surveyJson.Id,oName:e.surveyJson.Name,pId:e.surveyPlayGUID,total:0};return t&&t.length&&(r.total=t.length),r},t.prototype.mapAnswerToProps=function(e,t){var n={};n.oId=e.questionId;var r=this.getQuestionAndAnswerTextFromSurvey(t,e.questionId,e.answerId);return n.oName=r.questionText,e.answerId&&(n.aoId=e.answerId,n.value=r.answerText),e.answerText&&(n.value=e.answerText),n.aType=this.consts.EVENT_SENDER_ACTIONS.SurveyQuestionAnswered,n.aAppType=this.consts.EVENT_SENDER_EVENT_APPS.SurveyQuestionAnswer,n},t.prototype.getQuestionAndAnswerTextFromSurvey=function(e,t,n){for(var r={},i=0;i<e.Questions.length;i++)if(e.Questions[i].Id==t){var o=e.Questions[i];if(r.questionText=o.Title,void 0===n)return r;for(var a=0;a<o.Answers.length;a++)if(o.Answers[a].Id==n){var s=o.Answers[a];return r.answerText=s.Title,r}}},t.SEND_TO_SERVER_TIMEOUT=1e4,t}(si);exports.SurveysManager=nc,i.register("SurveysManager").asCtor(nc).dependencies("Lib, Consts, AbCurrentPermutationProvider, RecorderServerManager, PermalinkManager, GuidGenerator, AuditStepsManager, CommonUtils, CommonEvents, AuditSourceManager, HostData, EventSender, Logger, ReportInitiatorMapper, EndUsersManager, PopupBalloonDisplayer, WmAjax, ClientStorageManager, WalkmeVisibleReporter, AuditingEnabledIndicator, CurrentWalkthruData, QuestionToEventMapper");var rc=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.ConditionBlock}),this.timerManager=r,this._resultsCache={}}return t.prototype.activateById=function(e,n){var r=this;if(void 0!=this._resultsCache[e])return this._resultsCache[e];var o={elementName:"conditionBlock"+e},a=i.get("ConditionCheckerFactory").createOld(o);a.onValueChanged(function(e){n&&n(e)});var s=this.getById(e);return a.evaluateAsync(s.ConditionsTree),this._resultsCache[e]=a.getCachedValue(),a.cleanResources(),this.timerManager.libSetTimeout(function(){r._resultsCache[e]=void 0},t.RESULT_CACHE_TIME),this._resultsCache[e]},t.RESULT_CACHE_TIME=500,t}(si);i.register("ConditionBlocksManager").asCtor(rc).dependencies("Lib,Consts,TimerManager");var ic=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u){e.call(this,{deployables:[],lib:t}),this.oldConditionsCombiner=n,this.tagsInjector=r,this.tagsSegmentationProperties=i,this.deployablesManagerFactory=o,this.consts=a,this.newConditionsCombiner=s,this.featuresManager=u,this._name="Tag"}return t.prototype.injectTagsToDeployables=function(){var e=this.getAll();this.injectConditionsToDeployable(e)},t.prototype.injectConditionsToDeployable=function(e){var t=this.getCombinedDeployableTagsConditions(e,"Or");for(var n in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(n)){var r=this.consts.DEPLOYABLE_TYPE[n],i=this.deployablesManagerFactory.get(r);if(i)for(var o=i.getAll(),a=0;a<o.length;a++){var s=o[a],u=t[r]&&t[r][s.Id],l=this.tagsSegmentationProperties.properties[r];s.Settings||(s.Settings={});var c=u;l&&(c=this.tagsInjector.inject(s,u,l)),s.Settings.ASEnabled&&this.injectConditionTreeToDeployableAutostart(s,c,l,"And")}}},t.prototype.injectConditionTreeToDeployableAutostart=function(e,t,n,r){this.shouldInjectTagsIntoAutoStart(n)&&(n&&n.isNewConditions?e.ConditionTrees.ASCT=this.newConditionsCombiner.combine(r,t,e.ConditionTrees.ASCT):e.Settings.ASCT=this.oldConditionsCombiner.combine(r,t,e.Settings.ASCT)),e.Settings.ASCT&&(e.Settings.ASCTEnabled=1)},t.prototype.shouldInjectTagsIntoAutoStart=function(e){return!e||!e.dontInjectTagsIntoAutoStartFeature||!this.featuresManager.isFeatureEnabled(e.dontInjectTagsIntoAutoStartFeature)},t.prototype.getCombinedDeployableTagsConditions=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.Settings&&i.Settings.Condition)for(var o=i.LinkedDeployables.length-1;o>=0;o--){var a=i.LinkedDeployables[o],s=this.deployablesManagerFactory.get(a.DeployableType),u=s.getById(a.DeployableID);u&&this.updateTagsConditionDictionary(n,i,u,a.DeployableType,t)}}return n},t.prototype.updateTagsConditionDictionary=function(e,t,n,r,i){e[r]||(e[r]={});var o=e[r][n.Id];e[r][n.Id]=this.oldConditionsCombiner.combine(i,t.Settings.Condition,o)},t}(si);i.register("TagsManager").asCtor(ic).dependencies("Lib, OldConditionsCombiner, TagsInjector, TagsSegmentationProperties, DeployablesManagerFactory, Consts, NewConditionsCombiner, FeaturesManager");function oc(e){var t;this.concat=function(n){if(e&&e.adapt(n),t)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);else t=n},this.get=function(e){for(var n=t,r=0;r<arguments.length;r++)n=n[arguments[r]];return n}}i.register("Positions").asInstance({Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}),i.register("FontsData").asFunction(function(){var e=new oc;return e.concat({"walkme-opensans":{id:"opensans",name:"opensans",url:"/player/resources/fonts/opensans"}}),e.concat({"lib-font":{id:"libFont",name:"lib-font",url:"/player/resources/fonts/lib-font_v1",dummeyText:"&#xed50;"}}),e}),i.register("LocalStorageService").dependencies("CommonUtils, Logger").asFunction(function(e,t){if(e.isLocalStorageEnabled())return window.localStorage;return t.customerLog("localStorage is not enabled"),!1}),i.register("DesignTemplates").asCtor(ac).dependencies("ArrayUtils");function ac(e){var t=this;t.reset=r,t.set=i;function n(){r()}function r(){i([])}function i(n){if(!n)return;t.value=e.filter(n,function(e){return e}),o()}function o(){t.defaults={};var n=e.filter(t.value,function(e){return e.isDefault});e.foreach(n,function(e){t.defaults[e.entityType]=e.id})}n()}i.register("DesignTemplatesCalculatedCssGetter").asCtor(sc).dependencies("DesignTemplates, ArrayUtils");function sc(e,t){var n=this;n.get=r;function r(){var n=t.map(e.value,function(e){return e.css});return n.join(" ")}}i.register("SpecificEntityDesignTemplateCssClassGetter").asCtor(uc).dependencies("SharedConsts, DesignTemplates");function uc(e,t){var n=this;n.get=r;function r(n,r){if(!n)return;var i=n.DesignTemplateId||t.defaults[r];return i?e.designTemplateCssClassPrefix+i:void 0}}i.register("DesignTemplateHtmlGetter").asCtor(lc).dependencies("DesignTemplates");function lc(e){var t=this;t.get=n;function n(t){if(!t)return;for(var n=0;n<e.value.length;n++){var r=e.value[n];if(r.id==t)return r.html}}}i.register("PlaceholdersReplacer").asCtor(cc).dependencies("NamedPlaceholderReplacer, VariablePlaceholderReplacer, FlowElementActionClassesAdder");function cc(e,t,n){var r=this;r.replace=i;function i(e,r,i,s){var u=o(r);a(e,u,s),t.replace(e,i),n.add(e)}function o(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r.Name]=r.Config}return t}function a(t,n,r){for(var i in n)n.hasOwnProperty(i)&&e.replace(t,i,n[i],r)}}i.register("NamedPlaceholderReplacer").asCtor(dc).dependencies("NamedDataPlaceholderReplacer, NamedActionPlaceholderReplacer");function dc(e,t){var n=this;n.replace=o;var r="wm-placeholder",i="wm-action-placeholder";function o(n,o,s,u){var l=a(n,o);l.attr(r)==o?e.replace(l,s):l.attr(i)==o&&t.replace(l,s,u)}function a(e,t){var n="["+r+"='"+t+"'],["+i+"='"+t+"']";return e.find(n).andSelf().filter(n)}}i.register("NamedDataPlaceholderReplacer").asCtor(pc).dependencies("BBCodeParser, CommonUtils");function pc(e,t){var n=this;n.replace=r;function r(e,t){i(e,t.attributes||{}),o(e,t.content)}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}function o(n,r){if(void 0!=r){var i=e.parse(t.nl2br(r));n.html(i)}}}i.register("VariablePlaceholderReplacer").asCtor(gc);function gc(){var e=this;e.replace=n;var t={"wm-variable-current-step":"passedVisibleSteps","wm-variable-total-steps":"totalVisibleSteps"};function n(e,n){for(var r in t){var i="["+r+"]",o=e.find(i).andSelf().filter(i);o.prepend(n[t[r]])}}}i.register("NamedActionPlaceholderReplacer").asCtor(fc).dependencies("ActionsFactory");function fc(e){var t=this;t.replace=n;function n(t,n,r){var i=e.get(n.Type,n.Args,r.type,r.initiator).doAction;t.bind("click",i)}}i.register("FlowElementActionClassesAdder").asCtor(hc).dependencies("FlowElementsActionClassesProvider");function hc(e){var t=this;t.add=i;var n;function r(){n=e.get()}function i(e){for(var t in n){var r=n[t],i=o(e,t);i.addClass(r)}}function o(e,t){var n="["+t+"]";return e.find(n).andSelf().filter(n)}r()}i.register("FlowElementsActionClassesProvider").asCtor(mc);function mc(){var e=this;e.get=n;var t={"wm-action-back":"walkme-action-back","wm-action-next":"walkme-action-next","wm-action-done":"walkme-action-done","wm-action-close":"walkme-action-close"};function n(){return t}}i.register("HtmlTemplateWrapper").asCtor(vc).dependencies("BalloonTemplatesProvider");function vc(e){var t=this;t.wrap=i;var n;function r(){n=e.TemplateWrap}function i(e){return n.replace("{template}",e)}r()}i.register("ShoutOutTemplateWrapper").asCtor(Sc).dependencies("BalloonTemplatesProvider");function Sc(e){var t=this;t.wrap=i;var n;function r(){n=e.ShoutOutTemplateWrap}function i(e){return n.replace("{template}",e)}r()}i.register("FlowElementsRemover").asCtor(Ec).dependencies("wmjQuery, FlowElementsExistencePropertiesProvider, FlowElementValidationChecker");function Ec(e,t,n){var r=this;r.remove=a;var i;function o(){i=t.get()}function a(t,r){for(var o in i){var a=i[o];n.isValid(a,r)||e("["+o+"]",t).remove()}}o()}i.register("FlowElementsExistencePropertiesProvider").asCtor(Tc);function Tc(){var e=this;e.get=n;var t={"wm-action-done":{property:"doneButton",type:"done",sibling:"wm-action-next",confAttribute:"wm-done-placeholder"},"wm-action-next":{property:"nextButton",type:"next",sibling:"wm-action-done",confAttribute:"wm-next-placeholder"},"wm-action-back":{property:"backButton",type:"back"}};function n(){return t}}i.register("FlowElementAttributesReplacer").asCtor(yc).dependencies("FlowElementsExistencePropertiesProvider, FlowElementValidationChecker, wmjQuery, ElementsAttributesReplacer");function yc(e,t,n,r){var i=this;i.replaceAttributes=u;var o,a="wm-action-next";function s(){o=e.get()}function u(e,i){for(var s=e.find("["+a+"]"),u=o[a],l=0;l<s.length;l++){var c=n(s[l]);if(void 0!==c.attr(u.sibling)&&c.attr(u.sibling)!==!1){var d=o[u.sibling];t.isValid(u,i)?r.replaceAttributes(c,u.sibling,d,u):t.isValid(d,i)&&r.replaceAttributes(c,a,u,d)}}}s()}i.register("FlowElementValidationChecker").asCtor(Cc);function Cc(){var e=this;e.isValid=t;function t(e,t){return n(e,t)||r(e,t)}function n(e,t){return t[e.property]}function r(e,t){if(t.settings&&t.settings.customButtons)for(var n=t.settings.customButtons,r=0;r<n.length;r++)if(n[r].type==e.type)return!0;return!1}}i.register("ElementsAttributesReplacer").asCtor(Ic);function Ic(){var e=this;e.replaceAttributes=n;var t="wm-placeholder";function n(e,n,r,i){e.removeAttr(n),e.removeAttr(r.confAttribute);var o=e.attr(i.confAttribute);e.attr(t,o),e.removeAttr(i.confAttribute)}}i.register("BBCodeDeployables").asFunction(bc).dependencies("Consts");function bc(e){return[{linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru},{linkSelector:".walkme-action-start-resource",idDataKey:"data-resource-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Resource},{linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Survey},{linkSelector:".walkme-action-start-bf",idDataKey:"data-bizflow-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Bizflow}]}i.register("BBCodeEventsBinder").asCtor(wc).dependencies("BBCodeActivatorsFactory, CommonEvents, BBCodeDeployables, Consts");function wc(e,t,n,r){var i=this;i.bind=o;function o(e,i,o){mtjQuery(n).each(function(n,s){mtjQuery(s.linkSelector,e).each(function(e){mtjQuery(this).click(function(e){var t=parseInt(mtjQuery(this).attr(s.idDataKey));a(s.clickEvent,t,o,i)}),t.raiseEvent(r.EVENTS.RegisterBBCodeDeployableClick,{element:mtjQuery(this)})})})}function a(n,r,i,o){var a=e.get(n);t.raiseEvent(n,{id:r,asyncCallback:function(){a(r,i),o&&o()}})}}i.register("BBCodeActivatorsFactory").asCtor(_c).dependencies("BBCodeDeployableActivators, Consts");function _c(e,t){var n=this,r=t.EVENTS.BBCodeStartActionClicked;n.get=i;function i(t){switch(t){case r.Walkthru:return e.walkthruActivator;case r.Bizflow:return e.bizflowActivator;case r.Resource:return e.resourceActivator;case r.Survey:return e.surveyActivator}}}i.register("BBCodeDeployableActivators").asCtor(Pc).dependencies("InitiatorTypeToAppTypeMapper, BusinessSolutionsManager, CommonEvents, ContentsManager, Consts, WalkthrusModule, CurrentWalkthruData, WalkthruStepsLoader, FlowsPlayer, FlowEventRaiser");function Pc(e,t,n,r,o,a,s,u,l,c){var d=this;d.walkthruActivator=p,d.bizflowActivator=g,d.resourceActivator=f,d.surveyActivator=h;function p(t,r){var i=e.mapBbcodeInitiator(r);n.deprecatedRaiseEvent("switchToWalkthru",t),u.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:i})})}function g(n,r){var i=e.mapBbcodeInitiator(r);t.activateById(n,i)}function f(t,n){var i=e.mapBbcodeInitiator(n);m(),r.activateById(t,i)}function h(t,n){var r=e.mapBbcodeInitiator(n),a=s.getCurrentWalkthru();if(m(),t==-1){if(a){var u=o.SURVEY_START_EVENTS.BbCodeClicked,l=a.Settings.survey&&a.Settings.survey.surveyId;i.get("WalkthruSurveyActivator").activateSurvey(a,u,r,l,"always")}}else WalkMeAPI.startSurveyById(t,r)}function m(){a.stopTutorial(!1,!0),c.raiseEventOnCurrentFlow(o.EVENTS.Flows.FlowStopped),l.stop()}}i.register("BBCodeAttributeState").asCtor(Ac).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeNestedTagParser");function Ac(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.currentIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:n.parse(r,e.ATTRIBUTE_STATE);break;case e.CLOSE_TAG:return t.go(r);default:r[e.ATTRIBUTE_STATE]+=i}}}}i.register("BBCodeCloseTagState").asCtor(kc).dependencies("BBCodeParserConsts, BBCodeTagTranslator");function kc(e,t){var n=this;n.go=r;function r(n){for(n.currentIndex=n.currentIndex+1;n.currentIndex<n.exp.length;n.currentIndex++){var r=n.exp.charAt(n.currentIndex);switch(r){case e.CLOSE_TAG:return t.translateTag(n);default:n[e.CLOSE_TAG_STATE]+=r}}}}i.register("BBCodeDataState").asCtor(Oc).dependencies("BBCodeParserConsts, BBCodeCloseTagState, BBCodeNestedTagParser");function Oc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.currentIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:if("/"==r.exp.charAt(r.currentIndex+1))return t.go(r);n.parse(r,e.DATA_STATE);break;default:r[e.DATA_STATE]+=i}}}}i.register("BBCodeOpenTagState").asCtor(Nc).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeAttributeState");function Nc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.startIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:r.startIndex=r.currentIndex;break;case e.CLOSE_TAG:return t.go(r);case"=":case" ":return n.go(r);default:r[e.OPEN_TAG_STATE]+=i}}}}i.register("BBCodeNestedTagParser").asCtor(Dc);function Dc(){var e=this;e.parse=t;function t(e,t){var n=i.get("BBCodeSingleTagParser").parseSingleTag(e.exp,e.currentIndex);e[t]+=n.parsedExpPart||"",e.exp!=n.exp?(e.currentIndex=n.startIndex,e.exp=n.exp):e[t]+=e.exp.charAt(e.currentIndex)}}i.register("BBCodeParser").asCtor(Lc).dependencies("CommonUtils, BBCodeSingleTagParser");function Lc(e,t){var n=this,r={font:"font-family:$1",size:"font-size:$1px",color:"color:$1"},i=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel"],o={};function a(){for(var e in r)o["\\["+e+"=([^\\]]+)]"]='<span style="'+r[e]+'">',o["\\[/"+e+"]"]="</span>"}n.parse=function(e){if(!e)return"";for(var n=0,r={exp:s(e),length:e.length};n<r.exp.length-1;)r=t.parseSingleTag(r.exp,n),n=r.startIndex;return r.exp};function s(e){if(e=u(e),e=l(e),e.replace)for(var t in o)e=e.replace(new RegExp(t,"g"),o[t]);return e}function u(e){return e.replace?e.replace(/javascript:/gi,""):e}function l(e){if(!e.indexOf)return e;if(e.indexOf("on")<0)return e;for(var t=0;t<i.length;t++)e=e.replace(new RegExp(i[t]+"\\s*=","gi"),"^");return e}a.apply(null,arguments)}i.register("BBCodeSingleTagParser").asCtor(xc).dependencies("BBCodeParserConsts, BBCodeOpenTagState");function xc(e,t){var n=this;n.parseSingleTag=r;function r(n,r){var o=n.indexOf(e.OPEN_TAG,r);if(o>-1){var a=i(n,o),s=t.go(a);if(s)return s}return{exp:n,startIndex:n.length}}function i(t,n){var r={startIndex:n,currentIndex:n,exp:t};return r[e.OPEN_TAG_STATE]="",r[e.ATTRIBUTE_STATE]="",r[e.DATA_STATE]="",r[e.CLOSE_TAG_STATE]="",r}}i.register("BBCodeTagTranslator").asCtor(Fc).dependencies("BBTagHandlerProvider");function Fc(e){var t=this;t.translateTag=n;function n(e){var t=e.exp.substring(e.startIndex,e.currentIndex+1),n=r(e,t),i=void 0!=n?n:t;return i!=t&&(e.exp=e.exp.replace(t,i)),{startIndex:e.currentIndex+(i.length-t.length),exp:e.exp,parsedExpPart:i}}function r(t,n){if("/"+t.openTag!=t.closeTag)return n;t.attr.indexOf("javascript:")>-1&&(t.attr="");var r=e.get(t.openTag);return r.getHTML(n,t.openTag,t.attr,t.data)}}i.register("BBCodeParserConsts").asCtor(Mc);function Mc(){var e=this;e.ATTRIBUTE_STATE="attr",e.DATA_STATE="data",e.OPEN_TAG_STATE="openTag",e.CLOSE_TAG_STATE="closeTag",e.OPEN_TAG="[",e.CLOSE_TAG="]"}i.register("BBCodeUtils").asCtor(Rc).dependencies("CommonUtils");function Rc(t){var n=this;this.generateCustomTagAttributes=function(e){var t="";if(mtjQuery.each(e,function(e,n){t+=e+'="'+n+'" '}),t=t.replace(/\s+$/,""))return" "+t;return t},this.getStrictProperties=function(e,t,r){var i=n.getProperties(e,t,r);return a(i,e),i},this.getProperties=function(e,t,n){void 0!=t&&(t=t.replace(/&quot;/gi,'"'));var i=o(t);return s(n,e,i),r(i),i};function r(e){for(var t=["width","height"],n=0;n<t.length;n++){var r=t[n];e[r]&&(e[r]=i(e[r]))}}function i(e){if(e&&(t.isNumber(e)||e.match(/^\d+$/)))return e+"px";return e}function o(e){for(var t,n={},r=new RegExp('([^\\s]+)="([^\\"]*)"',"g");t=r.exec(e);){var i=t[1],o=t[2];n[i]=o}return n}function a(t,n){e.each(t,function(r,i){var o=e.inArray(r,n)==-1;o&&delete t[r]})}function s(e,t,n){if(void 0==e)return;for(var r=0;r<t.length;r++){var i=t[r],o=n[i],a=void 0==o,s=void 0!=e[i],u=a&&s;u&&(n[i]=e[i])}}}i.register("BBCodePropertiesConfig").asFunction(Bc);function Bc(){var e=["title"],t=["alt"].concat(e),n=["style","class","id","tabindex","aria-label","aria-live","role"].concat(e),r=["width","height"].concat(n),i=["channelmode","directories","fullscreen","left","top","target","location","menubar","resizable","scrollbars","status","titlebar","toolbar"].concat(r),o=["border","cellspacing","cellpadding"].concat(n),a=["autoplay"].concat(r),s=["href"].concat(n),u={table:o,tr:n,th:n,td:n,tbody:n,p:n,div:r,span:r,iframe:r,youtube:a,vimeo:a,wistia:a,brightcove:a,html5video:a,wt:s,bf:s,flow:s,swt:s,url:i,flash:r,img:t,b:e,u:e,i:e,ul:e,li:e,survey:s,trg:n,resource:s};return u}i.register("BBCodeVideoVendorsConfig").asCtor(Uc).dependencies("RecorderServerManager,Logger");function Uc(e,t){var n;this.get=function(e){var n=r(e);if(n)return n;t.error(new Error("Unsupported video vendor "+e))};function r(e){return n=n||{youtube:{url:i("http://www.youtube.com/embed/"),
name:"youtube",allowFullScreen:"allowfullscreen"},vimeo:{url:i("http://player.vimeo.com/video/"),name:"vimeo",allowFullScreen:"webkitAllowFullScreen mozallowfullscreen allowFullScreen"},wistia:{url:i("http://fast.wistia.net/embed/iframe/"),name:"wistia",allowFullScreen:"allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen",additionalParams:' allowtransparency="true" scrolling="no" class="wistia_embed" name="wistia_embed"'}},n[e]}function i(e){return o()?e.replace("http:","https:"):e}function o(){return e.get()&&e.get().indexOf("https:")!=-1}}i.register("BBCodeUrlTagHandler").asCtor(Vc).dependencies("BBCodePropertiesConfig,BBCodeUtils, CommonUtils, SiteConfigManager, Mustache");function Vc(e,t,n,r,i){var o=0,a={url:'href="',anchor:'name="',email:'href="mailto: '};this.getHTML=function(n,r,o,u){var c=o;if(c){var g=c.split(" ");if(!p(g[0],e[r])){var f=g[0];c=g.splice(1,g.length-1).join(" ")}}var h,m=t.getStrictProperties(e[r],c,{"class":"",style:"",target:"_blank"}),v={classes:m["class"],target:m.target,src:d(f||u),label:u,style:m.style,title:m.title,data:c.replace(new RegExp("^"+f||u),"")};h=m.height&&m.width?s(m,v):l(m,v,a[r]);var S=i.to_html(h,v);return S};function s(e,t){var n='<span id="walkme-new-window-link-{{{spanId}}}"'+(t.title?' title="{{{title}}}"':"")+"><a class=\"walkme-custom-bbcode-link {{{classes}}}\" style=\"color: inherit; text-decoration:underline; {{{style}}}\" href=# onclick=\"event.preventDefault ? event.preventDefault() : event.returnValue = false;_walkmeInternals.ctx.get('CommonEvents').raiseEvent('BBCodeLinkClicked', {Src : '{{{src}}}' });window.open({{{srcForOpen}}},'{{{target}}}',{{{specs}}});\" data-url='"+t.data+"'>{{{label}}}</a></span>",r=o++;t.spanId=r;var i=u(e);return t.specs="'"+i+"'",t.srcForOpen="'"+t.src.replace(/\'/g,"")+"'",n}function u(e){for(var t=["width","height","channelmode","directories","fullscreen","left","top","location","menubar","resizable","scrollbars","status","titlebar","toolbar"],n="",r=t.length-1;r>=0;r--){var i=t[r];e[i]&&(n+=kf("{0}={1},",i,e[i].replace(/\'/g,"").replace(/px$/,"")))}return n.length>0&&(n=n.substring(0,n.length-1)),n}function l(e,t,n){var r="<a"+(t.title?' title="{{{title}}}"':"")+' target="{{{target}}}" class="walkme-custom-bbcode-link {{{classes}}}" onclick="_walkmeInternals.ctx.get(\'CommonEvents\').raiseEvent(\'BBCodeLinkClicked\', {Src : \'{{{src}}} \'});" style="color: inherit; text-decoration:underline; {{{style}}}" {{{linkTypes}}}{{{src}}}" data-url=\''+t.data+"'>{{{label}}}</a>";return t.linkTypes=n,r}var c=function(){var e=r.get().Settings;return e&&e.UrlWl};function d(e){var t=c();if(void 0==t)return e;for(var r=0;r<t.length;r++)if(n.isLike(e,t[r]))return e;return""}function p(e,t){for(var n=0;n<t.length;n++){var r=e.indexOf("=");if(r>-1&&(e=e.substring(0,r)),t[n]==e)return!0}return!1}}i.register("BBCodeWTTagHandler").asCtor(Wc).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils");function Wc(e,t,n){this.getHTML=function(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=l[0],s=n.isNumber(s)?s:-1,u=l.splice(1,l.length-1).join(" ")}var c=t.getStrictProperties(e[i],u,{"class":"",style:""}),d=c["class"],p=c.style;return delete c["class"],delete c.style,'<a style="cursor: pointer; '+p+'" class="walkme-custom-bbcode-wt-link walkme-action-start-wt '+d+'" data-walkthru-id="'+s+'"'+t.generateCustomTagAttributes(c)+" data-"+i+"='"+u+"'>"+a+"</a>"}}i.register("BBCodeBFTagHandler").asCtor(Gc).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils");function Gc(e,t,n){this.getHTML=function(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=l[0],s=n.isNumber(s)?s:-1,u=l.splice(1,l.length-1).join(" ")}var c=t.getStrictProperties(e[i],u,{"class":"",style:""}),d=c["class"],p=c.style;return delete c["class"],delete c.style,'<a style="cursor: pointer; '+p+'" class="walkme-custom-bbcode-bf-link walkme-action-start-bf '+d+'" data-bizflow-id="'+s+'"'+t.generateCustomTagAttributes(c)+" data-"+i+"='"+u+"'>"+a+"</a>"}}i.register("BBCodeImgTagHandler").asCtor(Hc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function Hc(e,t){this.getHTML=function(r,i,o,a){var s=e.getStrictProperties(t[i],o);return'<img src="'+a+'"'+n(o)+e.generateCustomTagAttributes(s)+"/>"};function n(e){var t=r(e);return t.toTagAttributes()}function r(e){var t=new RegExp("^(\\d+)x(\\d+)[^\\]]*"),n=o(e,t);return{height:n[0],width:n[1],toTagAttributes:i}}function i(){return this.height&&this.width?' width="'+this.height+'px" height="'+this.width+'px" style="width:'+this.height+"px; height:"+this.width+'px"':""}function o(e,t){var n=t.exec(e);return null!=n&&n.length>2?n.splice(0,1):n=[void 0,void 0],n}}i.register("BBCodeVideoTagHandler").asCtor(jc).dependencies("BBCodePropertiesConfig, BBCodeUtils, BBCodeVideoVendorsConfig, Mustache");function jc(t,n,r,i){this.getHTML=function(e,a,s,u){var l=n.getProperties(t[a],s,{width:420,height:315}),c=o(l),d=r.get(a),p=d.url+u+"?"+c,g='<iframe data-{{{vendorName}}}-id="{{{videoId}}}" src="{{{src}}}" frameborder="0" {{{allowFullScreen}}} style="position:relative; width: {{{width}}}; height: {{{height}}};"{{{additionalParams}}}></iframe>',f=i.to_html(g,{vendorName:d.name,videoId:u,width:l.width,height:l.height,src:p,allowFullScreen:d.allowFullScreen,additionalParams:d.additionalParams});return f};function o(t){var n="",r=Af(t);return delete r.height,delete r.width,e.each(r,function(e,t){n+=kf("{0}={1}&",e,t)}),n}}i.register("BBCodeIframeTagHandler").asCtor(Yc).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache");function Yc(e,t,n){this.getHTML=function(r,i,o,a){var s=e.getProperties(t[i],o,{width:420,height:315}),u=a,l='<iframe src="{{{src}}}" frameborder="0" style="width: {{{width}}}; height: {{{height}}};"></iframe>',c=n.to_html(l,{src:u,width:s.width,height:s.height});return c}}i.register("BBCodeHTMLTagHandler").asCtor(zc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function zc(e,t){this.getHTML=function(n,r,i,o){return"p"==r&&(i=" "+i),"<"+r+e.generateCustomTagAttributes(e.getStrictProperties(t[r],i))+" data-"+r+"='"+i+"'>"+o+"</"+r+">"}}i.register("BBCodeSurveyTagHandler").asCtor(Qc).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils");function Qc(e,t,n){var r=this;r.getHTML=i;function i(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=n.isNumber(l[0])?l[0]:-1}var c=e.getStrictProperties(t[i],u);return delete c["class"],delete c.style,'<a data-survey-id="'+s+'" class="walkme-custom-bbcode-survey walkme-action-start-survey" style="cursor: pointer;"'+e.generateCustomTagAttributes(c)+">"+a+"</a>"}}i.register("BBCodeResourceTagHandler").asCtor(Kc).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils");function Kc(e,t,n){this.getHTML=function(r,i,o,a){var s="",u=o;if(u){var l=u.split(" ");s=n.isNumber(l[0])?l[0]:""}var c=e.getStrictProperties(t[i],u);return delete c["class"],delete c.style,'<a data-resource-id="'+s+'" class="walkme-action-start-resource" style="cursor: pointer;"'+e.generateCustomTagAttributes(c)+">"+a+"</a>"}}i.register("BBCodeFlashTagHandler").asCtor(qc).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache");function qc(e,t,n){this.getHTML=function(r,i,o,a){var s=e.getStrictProperties(t[i],o,{width:420,height:315}),u='<div class="walkme-custom-flash-wrapper" style="width: {{{width}}}; height: {{{height}}};"><object type="application/x-shockwave-flash" data="{{{swf}}}" allowNetworking="none" allowFullScreen="false" width="{{{width}}}" height="{{{height}}}"><param name="SRC" value="{{{swf}}}"/><param name="allowNetworking" value="none"/><param name="allowFullScreen" value="false"/></object></div>',l=n.to_html(u,{swf:a,width:s.width,height:s.height});return l}}i.register("BBCodeJQueryTagHandler").asCtor(Xc).dependencies("CommonUtils, JQueryElementFinder, IsInWYSIWYG");function Xc(e,t,n){this.getHTML=function(r,o,a,s){if(n.get())return'<img alt="'+s+'" dynamic-type="jquery" class="dynamic-text-content">';var u=e.encodeText(t.getjQueryElementText(s));return i.get("BBCodeParser").parse(u)}}i.register("BBCodeCookieTagHandler").asCtor(Jc).dependencies("CommonUtils, IsInWYSIWYG");function Jc(e,t){this.getHTML=function(n,r,o,a){if(t.get())return'<img alt="'+a+'" dynamic-type="cookie" class="dynamic-text-content">';var s=e.getWindowCookie(a);return null!=s&&s!==!1||(s=""),i.get("BBCodeParser").parse(e.encodeText(s))}}i.register("BBCodeVarTagHandler").asCtor($c).dependencies("CommonUtils, IsInWYSIWYG");function $c(e,t){this.getHTML=function(n,r,o,a){if(t.get())return'<img alt="'+a+'" dynamic-type="var" class="dynamic-text-content">';var s=e.getWindowVar(a);return null!=s&&s!==!1||(s=""),i.get("BBCodeParser").parse(e.encodeText(s))}}i.register("BBCodeHTML5VideoTagHandler").asCtor(Zc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function Zc(e,t){this.getHTML=function(n,r,i,o){var a=e.getProperties(t[r],i,{width:420,height:315}),s='<video controls height="{{height}}" width="{{width}}" {{autoplay}} src="{{{src}}}"></video>',u=mf.to_html(s,{src:o,width:a.width,height:a.height,autoplay:a.autoplay?"autoplay":""});return u}}i.register("BBCodeCustomTagHandler").asCtor(ed);function ed(){var e=this;e.getHTML=t;function t(e,t,n,r){var i=window.walkme_custom_bbcode_parser;if("function"==typeof i)return i(e,t,n,r)}}i.register("BBCodeTriggerTagHandler").asCtor(td).dependencies("CommonUtils");function td(e){var t=this;t.getHTML=n;function n(t,n,r,i){var o=-1,a=r;if(a){var s=a.split(" ");o=s[0],o=e.isNumber(o)?o:-1,a=s.splice(1,s.length-1).join(" ")}return'<a style="cursor: pointer;" class="trg-'+o+'" data-'+n+"='"+a+"'>"+i+"</a>"}}i.register("BBTagHandlerProvider").asCtor(nd).dependencies("BBCodeUrlTagHandler, BBCodeWTTagHandler, BBCodeBFTagHandler, BBCodeImgTagHandler, BBCodeVideoTagHandler,BBCodeIframeTagHandler, BBCodeHTMLTagHandler, BBCodeSurveyTagHandler, BBCodeFlashTagHandler,BBCodeJQueryTagHandler, BBCodeCookieTagHandler, BBCodeVarTagHandler, BBCodeCustomTagHandler,BBCodeTriggerTagHandler, BBCodeResourceTagHandler, BBCodeHTML5VideoTagHandler");function nd(e,t,n,r,i,o,a,s,u,l,c,d,p,g,f,h){var m=this;m.get=v;function v(m){switch(m){case"url":return e;case"wt":return t;case"bf":case"flow":case"swt":return n;case"img":return r;case"youtube":case"vimeo":case"wistia":return i;case"html5video":return h;case"iframe":return o;case"b":case"u":case"i":case"table":case"tr":case"th":case"td":case"tbody":case"div":case"span":case"ul":case"li":case"p":return a;case"survey":return s;case"resource":return f;case"flash":return u;case"jquery":return l;case"cookie":return c;case"var":return d;case"trg":return g;default:return p}}}i.register("UIVariationsAdapter").asCtor(id).dependencies("ResourceManager"),i.register("UITemplatesAdapter").asCtor(od).dependencies("ResourceManager");function rd(e,t,n){if(!e)return n;n=n||{};var r=e.attributes;if(r)for(var i in r)if(r.hasOwnProperty(i)&&"string"==typeof r[i]&&(r[i]=r[i].replace("###ResourcesDir###",t),"font-family"==i)){n.fonts=n.fonts||[];var o=r[i].split(",");n.fonts.push(mtjQuery.trim(o[0]))}var a=e.children;if(a)for(var s in a)a.hasOwnProperty(s)&&rd(a[s],t,n);return n}function id(e){this.adapt=function(t){if(!t)return;for(var n in t){var r=e.getResourcePath("/player/resources/templates/"+n),i=rd(t[n],r);t[n].metaData=i}}}function od(e){this.adapt=function(t){if(!t)return;for(var n in t)if(t[n])for(var r in t[n]){var i=t[n][r];if(i&&i.Css){var o=e.getResourcePath("/player/resources/templates/"+n+"/"+r),a=rd(i.Css,o);i.Css.metaData=a}}}}i.register("UITemplates").asCtor(oc).dependencies("UITemplatesAdapter"),i.register("UIVariations").asCtor(oc).dependencies("UIVariationsAdapter"),i.register("UIDisplayers").asFunction(function(){var e=new oc;return e.concat({1:"PopupDisplayer"}),e}).asSingleton(),i.register("UIComponents").asFunction(function(){var e=new oc;return e.concat({1:"ShoutOut",2:"ShoutOut",3:"Quiz",4:"QuizAnnouncement"}),e}).asSingleton();var ad=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,i,a,l),this._bbCodeEventsBinder=o,this._consts=a,this._commonEvents=r,this._specificEntityDesignTemplateCssClassGetter=s,this._sharedConsts=u,this.createUi()}return n.prototype.registerEvents=function(){t.prototype.registerEvents.call(this),this.registerBBCodeEvents()},n.prototype.registerBBCodeEvents=function(){var e=this.getBBcodeEventCallback(),t={objectId:this._uiComponent.Id,type:D.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT};this._bbCodeEventsBinder.bind(this._uiCreator.ui,e,t)},n.prototype.getBBcodeEventCallback=function(){var t=e.proxy(function(){this.destroy()},this),n={uiCreator:this._uiCreator,defaultt:t,defaultValue:t,returnValue:null};this._commonEvents.raiseEvent("shoutoutBBCodeClickCallback",n);var r=n.returnValue;return r},n.prototype.createConfig=function(){var e=t.prototype.createConfig.call(this),n=this._specificEntityDesignTemplateCssClassGetter.get(this._uiComponent,this._sharedConsts.templateEntityType.popup);return n&&(e.designTemplateCssClass=n),e},n.prototype.getInitiatorType=function(){return D.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT},n}(q);i.register("ShoutOut").asCtor(ad).asProto().dependencies("ActionsFactory, CommonUtils, CommonEvents, BBCodeParser, BBCodeEventsBinder, Consts, SpecificEntityDesignTemplateCssClassGetter, SharedConsts");var sd=function(){function t(){this.events={}}return t.prototype.setUI=function(t,n,r,o){var a=t.Actions?e(t.Actions).filter(function(e,t){return t.IsActive}).length:0,s="wm-one-button";2==a?s="wm-two-buttons":0==a&&(s="wm-no-buttons"),r.ButtonsClass=s,this.ui=i.get("TemplatesFactory").get(t.UITemplateId,t.UITemplateVersion,n,r,o,t.DesignTemplateId,t.DesignTemplatePlaceholderConfigs)},t.prototype.registerEvents=function(e,t,n,r,i){this.events[e]={name:t,actionId:n,body:r.libAction}},t.prototype.getUI=function(){return this.bindEvents(),this.ui},t.prototype.bindEvents=function(){},t}(),ud=function(t){__extends(n,t);function n(){t.apply(this,arguments)}return n.prototype.bindEvents=function(){var t=this;e.safeEach(this.events,function(e,n){t.ui.find(e).on(n.name,n.body)})},n}(sd);F.register(D.PLATFORM.Web,function(){i.register("UICreator").asCtor(ud).asProto()}),F.register(D.PLATFORM.MobileWeb,function(){i.register("UICreator").asCtor(ud).asProto()});var ld=function(t){__extends(n,t);function n(){t.apply(this,arguments),this._resourceManager=i.get("ResourceManager"),this._eventsRegistrator=i.get("MobileEventsRegistrationsHandler"),this._customCssSetter=i.get("CustomCssSetter")}return n.prototype.getUI=function(){t.prototype.getUI.call(this),this.buildHTML(),this.setID();var n=e("head",this._uiHTML);return this.appendMetaTag(),this.appendCustomCSS(n),this.appendScriptTag(),this.appendUIObjectToBody(),this.registerScripts(),this._uiHTML},n.prototype.registerEvents=function(e,t,n,r,i){this._eventsRegistrator.registerEvent(e,t,n,r,i),this._eventsRegistrator.registerCallbacks(this.ui.attr("id"),n)},n.prototype.bindEvents=function(){this._eventsRegistrator.bindEventsToUI(this.ui)},n.prototype.registerScripts=function(){this._eventsRegistrator.registerScripts(this.ui.attr("id"))},n.prototype.buildHTML=function(){this._uiHTML=e("<html>"),this._head=e("<head>"),this._body=e("<body>"),this._uiHTML.append(this._head),this._uiHTML.append(this._body)},n.prototype.setID=function(){this._uiHTML.attr("id",this.ui.attr("id"))},n.prototype.appendCustomCSS=function(e){var t=this._customCssSetter.getAllCustomCssProp();this._resourceManager.injectCss(t,"walkme-custom-css",e)},n.prototype.appendMetaTag=function(){this._head.append('<meta name="viewport" content= "width=device-width, initial-scale=1.0">')},n.prototype.appendUIObjectToBody=function(){this.ui.show(),this._body.append(this.ui)},n.prototype.getScriptContent=function(){return this._eventsRegistrator.createEventFunction(this.ui.attr("id"))},n.prototype.appendScriptTag=function(){var e=this.getScriptContent();this.addScriptTagWithContent(e)},n.prototype.addScriptTagWithContent=function(e){var t=document.createElement("script");t.type="text/javascript",t.appendChild(document.createTextNode(e)),this._head[0].appendChild(t)},n}(sd);F.register(D.PLATFORM.iOS,function(){i.register("UICreator").asCtor(ld).asProto()}),F.register(D.PLATFORM.Android,function(){i.register("UICreator").asCtor(ld).asProto()});var cd=function(t){__extends(n,t);function n(n){t.call(this),this._isVisible=!1;var r=i.get("Lib"),o=i.get("FramesetsUtils").shouldHandlePageAsFramesets()?i.get("BiggestFrameProvider").getBiggestFrame().contentWindow:window;this._lib=r,this._topWindow=e(o),this._topContainer=i.get("TopContainerProvider").getTopContainer(),this._settings=n}return n.prototype.setUiObject=function(e){this._uiObject=e},n.prototype.getContainer=function(){return this._topWindow},n.prototype.append=function(e){this._topContainer.append(this._uiObject),e&&e()},n.prototype.remove=function(e){this._uiObject.remove(),this._isVisible=!1,e&&e()},n.prototype.show=function(e){this._uiObject.show(),this._isVisible=!0,e&&e()},n.prototype.hide=function(e){this._uiObject.hide(),this._isVisible=!1,e&&e()},n.prototype.isVisible=function(){return this._isVisible},n}(K),dd=function(t){__extends(n,t);function n(e){t.call(this,e),this.DEFAULT_Z_INDEX=2147483631,this._positions=i.get("Positions"),this._popupUtil=i.get("PopupUIUtil"),this._popupUtil.setSettings(e)}return n.prototype.setUiObject=function(e){t.prototype.setUiObject.call(this,e),this._popupUtil.setUiObject(this._uiObject)},n.prototype.show=function(t){if(this._isVisible)return void(t&&t());this.unbindEvents();var n;n=this._settings["z-index"]?this._settings["z-index"]:this.DEFAULT_Z_INDEX,this._uiObject.css("z-index",n);var r=e.proxy(function(){this._isVisible=!0,t&&t()},this);this.pop(r)},n.prototype.pop=function(e){var t=parseInt(this._settings.position,10),n=t==this._positions.Center;n?this.popCenter(e):this.popCorner(t,e)},n.prototype.handleOverlay=function(){var e=Number(this._uiObject[0].style.zIndex),t=this._popupUtil.getOverlay();t&&(e==this.DEFAULT_Z_INDEX&&this._uiObject.css("z-index",e+1),t.show())},n.prototype.popCorner=function(e,t){this._uiObject.css({position:"fixed"}),this.handleOverlay();var r=(this._settings.marginV||0)+"px",i=(this._settings.marginH||0)+"px";switch(e){case this._positions.Top:this._uiObject.addClass(n.POSITION_PREFIX+"top"),this._uiObject.css({top:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginTop:r});break;case this._positions.Right:this._uiObject.addClass(n.POSITION_PREFIX+"right"),this._uiObject.css({right:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginRight:i});break;case this._positions.Bottom:this._uiObject.addClass(n.POSITION_PREFIX+"bottom"),this._uiObject.css({bottom:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginBottom:r});break;case this._positions.Left:this._uiObject.addClass(n.POSITION_PREFIX+"left"),this._uiObject.css({left:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginLeft:i});break;case this._positions.TopLeft:this._uiObject.addClass(n.POSITION_PREFIX+"top-left"),this._uiObject.css({left:0,top:0,marginTop:r,marginLeft:i});break;case this._positions.TopRight:this._uiObject.addClass(n.POSITION_PREFIX+"top-right"),this._uiObject.css({right:0,top:0,marginTop:r,marginRight:i});break;case this._positions.BottomRight:this._uiObject.addClass(n.POSITION_PREFIX+"bottom-right"),this._uiObject.css({right:0,bottom:0,marginBottom:r,marginRight:i});break;case this._positions.BottomLeft:this._uiObject.addClass(n.POSITION_PREFIX+"bottom-left"),this._uiObject.css({left:0,bottom:0,marginBottom:r,marginLeft:i})}this.fadeIn(t)},n.prototype.popCenter=function(t){this._uiObject.addClass("wm-position-center"),this._lib.centerElementInPage(this._uiObject,!1),this.handleOverlay(),this.fadeIn(t),this._resizeHandler=e.proxy(function(){this._uiObject.stop(!1,!0),this._lib.centerElementInPage(this._uiObject,!0)},this),this._topWindow.bind(n.MOVEMENT_EVENTS,this._resizeHandler)},n.prototype.fadeIn=function(e){this._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,e)},n.prototype.hide=function(t){if(this._popupUtil.removeOverlay(),!this._isVisible)return void(t&&t());this.unbindEvents(),this._uiObject.stop(!0,!1).css("opacity",1).show().fadeOut(200,e.proxy(function(){this._isVisible=!1,t&&t()},this))},n.prototype.remove=function(t){this.hide(e.proxy(function(){this._uiObject.remove(),t&&t()},this))},n.prototype.unbindEvents=function(){this._resizeHandler&&this._topWindow.unbind(n.MOVEMENT_EVENTS,this._resizeHandler),this._resizeHandler=null},n.EVENT_SUFFIX="walkmeDisplayer",n.MOVEMENT_EVENTS="scroll."+n.EVENT_SUFFIX+", resize."+n.EVENT_SUFFIX,n.POSITION_PREFIX="wm-position-",n}(cd);F.register(D.PLATFORM.Web,function(){i.register("PopupDisplayer").asCtor(dd).asProto()});var pd=function(t){__extends(n,t);function n(){t.apply(this,arguments),this._css="/* Template 4.3 Only Fallbacks */ /* All */ @media only screen and (max-width: 640px) {   .wm-template-light,   .wm-template-standout-title,   .wm-template-standout-actions {    min-width: 85% !important;   }    } /* Light */ @media only screen and (max-height: 400px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 400px; \t} }  /* Standout Title */ @media only screen and (max-height: 400px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 75px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }  /* Standout Action */ @media only screen and (max-height: 400px) { \t.wm-template-standout-actions .wm-template-text{ \t\tmax-height: 75px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-button { \t\tpadding-top: 8px; \t\tpadding-bottom: 8px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }",this._resourceManager=i.get("ResourceManager")}return n.prototype.append=function(n){this._uiObject.css("position","fixed");var r=e("#walkme-mobile-css-old-version");0==r.length&&this._resourceManager.injectCss(this._css,"walkme-mobile-css-old-version"),t.prototype.append.call(this,n)},n.prototype.pop=function(e){this.handleOverlay(),this.fadeIn(e)},n.prototype.handleOverlay=function(){t.prototype.handleOverlay.call(this);var n=this._popupUtil.getOverlay(),r=n&&n.getOverlayElement();if(!r)return;r.on("click.walkme touchend.walkme",e.proxy(function(){this.remove()},this))},n}(dd);F.register(D.PLATFORM.MobileWeb,function(){i.register("PopupDisplayer").asCtor(pd).asProto()});var gd=function(t){__extends(n,t);function n(e){t.call(this),this._isVisible=!1,this._popupUtil=i.get("PopupUIUtil"),this._mobileUtils=i.get("MobileUtils"),this._constsDi=i.get("Consts"),this._popupUtil.setSettings(e),this._settings=e}return n.prototype.setUiObject=function(t){this._uiObject=t,this._body=e("body",this._uiObject)},n.prototype.getContainer=function(){return},n.prototype.append=function(e){e&&e()},n.prototype.remove=function(e){this.hide(e)},n.prototype.show=function(t){if(this._isVisible)return void(t&&t());var n=e.proxy(function(){this._isVisible=!0,t&&t()},this),r=e.proxy(function(e){this._mobileUtils.message(this._uiObject[0].id,{action:"_walkmeInternals.callbacks['"+e+"']['message']['.walkme-x-button']['click']()"},D.MOBILE_COMMANDS.ACTION.libAction)},this),i=this._settings.viewType||this._constsDi.SHOUTOUT_TYPES.customView,o=[{name:"success",callback:n},{name:"close",callback:r}];this.setOverlayInHtml(),this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id,html:this._uiObject.html(),viewType:i},D.MOBILE_COMMANDS.VIEW.show,o)},n.prototype.hide=function(t){if(!this._isVisible)return void(t&&t());var n=e.proxy(function(){this._isVisible=!1,t&&t()},this),r=[{name:"success",callback:n}];this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id},D.MOBILE_COMMANDS.VIEW.hide,r)},n.prototype.isVisible=function(){return this._isVisible},n.prototype.setOverlayInHtml=function(){if(this._overlay=this._popupUtil.getOverlay(),this._overlay){var e=this._overlay.getOverlayElement();e.css("position","absolute"),e.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");var t=i.get("MobileEventsRegistrationsHandler"),n="Close",r="#"+e.attr("id");t.registerEvent(r,"click",D.MOBILE_COMMANDS.ACTION.libAction,null,n),t.bindEventsToUI(e),this._body.prepend(e)}},n}(K);F.register(D.PLATFORM.iOS,function(){i.register("PopupDisplayer").asCtor(gd).asProto()}),F.register(D.PLATFORM.Android,function(){i.register("PopupDisplayer").asCtor(gd).asProto()});var fd=function(){function t(e,t,n,r,i,o,a,s,u,l,c){this.CLASSES_PREFIX="wm-",this.STATES_DATA_KEY="templatesFactoryStates",this._logger=e,this._mustache=t,this._uiTemplates=n,this._resourceManager=r,this._fontsData=i,this._siteConfigManager=o,this._hostData=a,this._commonUtils=s,this._designTemplateHtmlGetter=u,this._placeholdersReplacer=l,this._shoutOutTemplateWrapper=c}return t.prototype.addResources=function(e,t,n,r,i){var o=this._uiTemplates.get(e,t).Css;this.loadVariationsFonts([o].concat(n),r,i)},t.prototype.get=function(e,t,n,r,i,o,a){var s=this._designTemplateHtmlGetter.get(o),u=s?{Html:this._shoutOutTemplateWrapper.wrap(s)}:this._uiTemplates.get(e,t),l=this._commonUtils.createElementInDocument(this._mustache.to_html(u.Html,r||{}),i||window.document);this._placeholdersReplacer.replace(l,a||[],{},{}),this.addDefaultClasses(l),this.inheritProperties(l);for(var c=l.wrap("<div />").parent(),d=n.length-1;d>=0;d--)this.recursiveApplyStyle(c,n[d]);return this.recursiveApplyStyle(c,u.Css),this.addResetCss(l),this.addStateHandler(l),l.unwrap(),l.addClass(r.designTemplateCssClass),l.hide()},t.prototype.loadVariationsFonts=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i].metaData&&e[i].metaData.fonts;if(o)for(var a=0;a<o.length;a++){var s=this._fontsData.get(o[a]);s&&r.push(s)}}this._resourceManager.fonts(r,n||null,t,t)},t.prototype.addDefaultClasses=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.addClass(this.CLASSES_PREFIX+t),e.addClass(this.CLASSES_PREFIX+this._hostData.browser.name.toLowerCase()),"IE"==this._hostData.browser.name&&e.addClass(this.CLASSES_PREFIX+"ie-"+this._hostData.browser.version)},t.prototype.inheritProperties=function(t){var n=this,r=t.allCss();t.children().each(function(t,i){var o=e(i);o.cssReset(r),n.inheritProperties(o)})},t.prototype.addResetCss=function(e){},t.prototype.addStateHandler=function(t){var n=this;t.find("*").andSelf().each(function(t,r){r=e(r);var i=r.data(n.STATES_DATA_KEY);if(!i)return;var o=i.hover;n.addHoverState(r,o);var a=i.click;n.addClickState(r,a),r.removeData(n.STATES_DATA_KEY)})},t.prototype.addHoverState=function(e,t){if(!t)return;var n=e.attr("style");e.hover(function(){e.css(t)},function(){e.attr("style",n)})},t.prototype.addClickState=function(e,t){if(!t)return;var n=e.attr("style");e.mousedown(function(n){e.css(t)}),e.bind("mouseup blur",function(){e.attr("style",n)})},t.prototype.recursiveApplyStyle=function(e,t){if(!t||!t.children)return;this.changePropertyOrder(t,"*");for(var n in t.children)if(t.children.hasOwnProperty(n)){var r=n.split(":"),i=e.find(r[0]),o=t.children[n].attributes;for(var a in o)o.hasOwnProperty(a)&&(this._commonUtils.isIe7or8()&&"-ms-filter"==a||this.handleCSS(i,a,o[a],r[1]));this.recursiveApplyStyle(i,t.children[n].children)}},t.prototype.changePropertyOrder=function(e,t){if(e.children[t]){var n=e.children[t];delete e.children[t],e.children[t]=n}},t.prototype.handleCSS=function(e,t,n,r){if(n instanceof Array)for(var i in n)this.appendCSS(e,t,n[i],r);else this.appendCSS(e,t,n,r)},t.prototype.appendCSS=function(e,t,n,r){if(!r)return void e.cssReset(t,n);r=r.toLowerCase(),this.stateCss(r,e,t,n)},t.prototype.stateCss=function(e,t,n,r){var i=t.data(this.STATES_DATA_KEY)||{};i[e]||(i[e]={}),i[e][n]||(i[e][n]=r),t.data(this.STATES_DATA_KEY,i)},t}();F.register(D.PLATFORM.Android,function(){i.register("TemplatesFactory").asCtor(fd).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, PlaceholdersReplacer, ShoutOutTemplateWrapper")}),F.register(D.PLATFORM.iOS,function(){i.register("TemplatesFactory").asCtor(fd).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, PlaceholdersReplacer, ShoutOutTemplateWrapper")});var hd=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.addResetCss=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.find("span,button,input,label,a,b,br,img,i,u").cssReset("display","inline"),e.find("li").cssReset("display","list-item"),e.find("ul").cssReset("padding-left","40px"),e.find("*").andSelf().cssReset(k).cssReset("direction",t)},t}(fd);F.register(D.PLATFORM.MobileWeb,function(){i.register("TemplatesFactory").asCtor(hd).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, PlaceholdersReplacer, ShoutOutTemplateWrapper")}),F.register(D.PLATFORM.Web,function(){i.register("TemplatesFactory").asCtor(hd).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, PlaceholdersReplacer, ShoutOutTemplateWrapper")}),i.register("UIComponentsFactory").asCtor(md).asSingleton().dependencies("Logger, UIComponents, CommonEvents"),i.register("DisplayersFactory").asCtor(md).asSingleton().dependencies("Logger, UIDisplayers, CommonEvents");function md(e,t,n){
this.get=function(r,o){try{var a=t.get(r),s=i.create(a,o);return s.once("show-end",function(){n.deprecatedRaiseEvent("show-end",s)}),s}catch(u){e.error(u,"error generating class")}}}var vd=function(){function e(e){this._logger=e}return e.prototype.show=function(e,t){this.logError()},e.prototype.hide=function(e){this.logError()},e.prototype.isVisible=function(){return this.logError(),!1},e.prototype.logError=function(){this._logger.error("This applet cannot be played on this platform.")},e}();F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("PlatformDisplayer").asCtor(vd).asProto().dependencies("Logger")});var Sd=function(){function t(e,t,n){this._consts=e,this.htmlDecoder=t,this._component=n,this._mobileUtils=i.get("MobileUtils"),this._isVisible=!1}return t.prototype.show=function(t,n,r){if(this._isVisible)return void(t&&t());var i=e.proxy(function(){this._isVisible=!0,t&&t()},this),o=e.proxy(function(e,t){this._isVisible=!1,n&&n(e,t)},this),a=e.proxy(function(){r&&r()},this),s=[{name:"success",callback:i},{name:"close",callback:o},{name:"fail",callback:a}],u={deployableType:this._component.getDeployableType(),deployableData:this._component.getDrawInstructions(),IdentifySettings:this._component.getIdentifySettings()};this._mobileUtils.message(this._component.getId(),u,D.MOBILE_COMMANDS.VIEW.show,s)},t.prototype.hide=function(t){if(!this._isVisible)return void(t&&t());var n=e.proxy(function(){this._isVisible=!1,t&&t()},this),r=[{name:"success",callback:n}];this._mobileUtils.message(this._component.getId(),{id:this._component.getId()},D.MOBILE_COMMANDS.VIEW.hide,r)},t.prototype.isVisible=function(){return this._isVisible},t.prototype.decodeEscapedHtml=function(e){var t=["'",'"',"&",">"];return this.htmlDecoder.decodeHtml(e,t)},t}();F.register([D.PLATFORM.iOS,D.PLATFORM.Android],function(){i.register("PlatformDisplayer").asCtor(Sd).asProto().dependencies("Consts, HtmlDecoder")});var Ed=function(t){__extends(n,t);function n(e,n){t.call(this),this._consts=e,this._data=n,this._displayer=i.create("PlatformDisplayer",this)}return n.prototype.getId=function(){return this._data.Id},n.prototype.getDeployableType=function(){return this._consts.DEPLOYABLE_TYPE.Spotlight},n.prototype.getDrawInstructions=function(){return{type:this._data.Settings.type,title:this._displayer.decodeEscapedHtml(this._data.Title),description:this._displayer.decodeEscapedHtml(this._data.Description),styling:this._data.Settings.styling,animation:this._data.Settings.animation}},n.prototype.getIdentifySettings=function(){return this._data.IdentifySettings},n.prototype.show=function(){var t=e.proxy(function(){this.trigger("show-ended")},this),n=e.proxy(function(e,t){this.trigger("close",{isInteracted:"true"===t})},this),r=e.proxy(function(){this.trigger("show-fail")},this);this._displayer.show(t,n,r)},n.prototype.hide=function(){var t=e.proxy(function(){this.trigger("close")},this);this._displayer.hide(t)},n}(K);i.register("Spotlight").asCtor(Ed).asProto().dependencies("Consts");var Td=function(t){__extends(n,t);function n(e,n){t.call(this),this._consts=e,this._data=n,this._displayer=i.create("PlatformDisplayer",this)}return n.prototype.getId=function(){return this._data.Id},n.prototype.getDeployableType=function(){return this._consts.DEPLOYABLE_TYPE.Tooltip},n.prototype.getDrawInstructions=function(){return{title:this._displayer.decodeEscapedHtml(this._data.Title),description:this._displayer.decodeEscapedHtml(this._data.Description),styling:this._data.Settings.styling}},n.prototype.getIdentifySettings=function(){return this._data.IdentifySettings},n.prototype.show=function(){var t=e.proxy(function(){this.trigger("show-ended")},this),n=e.proxy(function(e,t){this.trigger("close",{isInteracted:"true"===t})},this),r=e.proxy(function(){this.trigger("show-fail")},this);this._displayer.show(t,n,r)},n.prototype.hide=function(){var t=e.proxy(function(){this.trigger("close")},this);this._displayer.hide(t)},n}(K);i.register("MobileNativeTooltip").asCtor(Td).asProto().dependencies("Consts"),i.register("DebuggerManager").asCtor(yd).dependencies("WmInternals, ClientStorageManager, SiteConfigManager, CommonUtils, Logger, Consts, SettingsFile");function yd(){var e,t,n,r,o,a,s,u=this,l="wm-ftr-cnf";function c(i,u,l,c,d,p,g){e=i,t=u,n=l,r=c,o=d,a=p,s=g,e.bind("removeWalkMe",m)}u.launchDebuggerIfEnabled=function(e,t){d()&&u.launchDebugger(e,t)},u.launchDebugger=function(n,i){u.isDebuggerOnWindow()||(n?t.saveData(l,n,P):t.removeData(l),i&&(e.dbgr||(e.dbgr={}),e.dbgr.debuggerWasLoaded=i),g(!0),r.postMessageToFrameAndDescendants(window.top,Cf({requestType:"DEBUGGER_LOADED"})))},u.closeDebugger=function(){if(u.isDebuggerOnWindow()){var t=e.dbgr.close;t&&t()}delete e.dbgr},u.loadDebuggerFromStorage=function(){p(),g()},u.isDebuggerOnWindow=function(){return!!e.dbgr},u.loadDebuggerForEditor=function(e){u.closeDebugger(),t.saveData(l,{uiState:"wmd-minimize"},P),t.saveData(a.DEBUGGER_STATE_NAME,w.ActiveAndReset,P),t.refreshGetData(void 0,e)},u.clearDebuggerState=function(){t.removeData(a.DEBUGGER_STATE_NAME),t.removeData(l)};function d(){return n.get().DebuggerSettings&&"1"==n.get().DebuggerSettings.IsInPublish}function p(){i.get("PostMessageListener").listen(function(e){try{var t=If(e.data);"DEBUGGER_LOADED"==t.requestType&&g()}catch(n){o.customerLog("Error loading debugger from post message: "+n,4)}})}function g(t){h(t),e.dbgr.shouldClear=t;var n;n||(n=s.getPlayerRelatedPath()+"debugger/"+i.get("WalkMeInfo").getLibVersion()+"/"),e.dbgr||(e.dbgr={}),e.dbgr.rootPath=n,r.addScript(n+"walkme_debugger.js",null,f)}function f(){o.customerLog("Failed loading the Flow Tracker!",1);var t=e.dbgr;t&&t.debuggerWasLoaded&&t.debuggerWasLoaded()}function h(t){e.dbgr||(e.dbgr={})}function m(){e.dbgr&&(e.dbgr.debuggerWasLoaded=null)}c.apply(null,arguments)}i.register("LoggerManager").asCtor(Cd).asSingleton().dependencies("SettingsFile");function Cd(t){var n=this,r="wmLogger.js",i="logger/"+r;function o(){}n.launchLogger=function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t.getPlayerRelatedPath()+i),document.getElementsByTagName("head")[0].appendChild(e)},n.isLoggerActivated=function(){return e("script[src*='"+r+"']").length>0},o.apply(null,arguments)}function Id(){this.isEnabled=e,this.registerProfilerCallback=e,this.startProfile=e;function e(){}}i.register("ProfilerAPI").asCtor(Id),i.register("PerformanceTimestampAdder").asCtor(bd).dependencies("CommonEvents");function bd(e){var n=this;n.addTimeStamp=r;function r(n){try{t.addTimeStamp(n),e.deprecatedRaiseEvent("PerfTimestamp",n)}catch(r){}}}i.register("PerformanceTracker").asCtor(wd).dependencies("Logger");function wd(t){var n,r=this,o=[],a=100;function s(e){return 0===Math.floor(Math.random()*e)}r.startSending=function(){n=i.get("EventCollectorLogger");try{for(;o.length;){var e=o.pop();r.track(e.type,e.data)}}catch(a){t.error(a)}},r.track=function(t,r){n?n.log.info("performance log",e.extend({performanceType:t,testName:window.perf_test_name||"undefined"},r)):o.push({type:t,data:r})},r.trackFunctionExecutionTime=function(e,n,i){try{if(!n||"function"!=typeof e)return;i=i||{};var o=e,a=0,s=i.maxTracks||3;return function(){var e=(new Date).getTime(),u=o.apply(i.context||void 0,arguments),l=(new Date).getTime()-e;try{(a<s&&!i.threshold||l>=i.threshold)&&(a++,r.track("executionTime",{funcName:n,execTime:l,args:"function"==typeof i.trackedArgs?i.trackedArgs(arguments):void 0}))}catch(c){t.error(c)}return u}}catch(u){t.error(u)}},r.init=function(){try{s(a)&&i.decorate("JQueryElementFinder",function(e){try{e.findElements=r.trackFunctionExecutionTime(e.findElements,"JQueryElementFinder.findElements",{threshold:200,trackedArgs:function(e){if(!e)return;return{jQuerySelector:"undefined"!=typeof e[0]?e[0].JquerySelector:void 0,isVisible:"undefined"!=typeof e[1]?!!e[1]:void 0}}})}catch(n){t.error(n)}return e})}catch(e){t.error(e)}}}var _d=Pd();i.register("UIVisibilityManagerType").asInstance(_d),i.register("UIVisibilityManager").asCtor(_d).asProto().dependencies("Logger, ConditionCheckerFactory, ConditionTreeUtils, Consts, UIChecksTriggerer, DOMSessionManager");function Pd(){var t=function(n,r,o,a,s,u,l){var c=this;this.watchForVisibility=b,this.getVisibilityState=w,this.shouldShow=N,this.cleanResources=_;var d,p,g,f,h,m,v,S=3,E=a.FEATURES_LOGS.Flows;function T(){y(),C(),g=a.VISIBILITY_STATE.HIDDEN,f=o.checkIfTreeContainsSelectedElement(l.conditionTree),t.registerInstance(c)}function y(){l.elementVisibilityParams&&(l.elementVisibilityParams.logContext=l.logContext,p=i.create("ElementVisibilityEvaluator",l.elementVisibilityParams))}function C(){l.conditionCheckerParams&&(l.conditionCheckerParams.evaluationPollingIntervalMs=2e3,l.conditionCheckerParams.onlyPollConditionFunctions=!0,l.conditionCheckerParams.evaluateSonar=!1,l.conditionCheckerParams.stopPollingAfterEvaluateTrue=!1,l.conditionCheckerParams.getSelectedElement=I,d=r.createConditionChecker(l.conditionTree,l.conditionCheckerParams))}function I(){return p&&p.getElement()}function b(){m=!1,n.customerLog(kf("UIVisibilityManager watchForVisibility for {0} with stickyType {1}, with condition {2}, isRemoveByCondition {3}",l.logContext,l.stickyType,!!d,l.isRemoveByCondition),S,E),s.bindCheckByState(P),s.bindCheckIfShouldHideOrReposition(M),G()&&s.bindCheckIfShouldShow(k),d&&(d.evaluateAsyncAndDontEvaluateImmediately(l.conditionTree),d.onSonar(k)),k()}function w(){return g}function _(){g=a.VISIBILITY_STATE.HIDDEN,V(),s.unbindCheckByState(P),s.unbindCheckIfShouldHideOrReposition(M),s.unbindCheckIfShouldShow(k),u.remove(N),v=null,p&&p.cleanResources(),d&&d.cleanResources(),t.unregisterInstance(c),m=!0}function P(){w()==a.VISIBILITY_STATE.HIDDEN?O():A()}function A(){L()&&x()||U()}function k(e){if(w()==a.VISIBILITY_STATE.HIDDEN){var t=O();if(e){var n=e.result||[];return n.push(t),n}}}function O(){return v?v.then(k):v=u.measure(N).then(D)}function N(){var t=f?[L,x]:[x,L],n=!0;return e.each(t,function(e,t){n=n&&t()}),n}function D(e){if(v=null,m)return;e?R():G()||l.trackUIChanges||_()}function L(){if(!p)return!0;return p.evaluateElementVisibility()==a.VISIBILITY_STATE.VISIBLE}function x(){if(!d)return!0;return d.getValue()}function F(){L()||U()}function M(){w()==a.VISIBILITY_STATE.VISIBLE&&l.isRemoveByCondition&&!x()&&U()}function R(){if(m)return;g=a.VISIBILITY_STATE.VISIBLE,p&&(h=s.bindCheckRemoveForElement(I(),F)),B(),l.stickyType!=a.STICKY_TYPE.STRONG&&s.unbindCheckIfShouldShow(k)}function B(){l.onShow&&(n.customerLog(kf("UIVisibilityManager elementIsShown for {0}",l.logContext),S,E),l.onShow(I()))}function U(){V(),g=a.VISIBILITY_STATE.HIDDEN,W(),l.stickyType==a.STICKY_TYPE.STRONG||l.trackUIChanges||_()}function V(){h&&(h.unbind(),h=null)}function W(){l.onRemove&&(n.customerLog(kf("UIVisibilityManager elementWasRemoved for {0}",l.logContext),S,E),l.onRemove())}function G(){return l.stickyType==a.STICKY_TYPE.SOFT||l.stickyType==a.STICKY_TYPE.STRONG}T.apply(null,arguments)};return t.instances={},t.sequence=0,t.registerInstance=function(e){e._id=t.sequence,++t.sequence,t.instances[e._id]=e},t.unregisterInstance=function(e){delete t.instances[e._id]},t.cleanResources=function(){for(var e in t.instances)t.instances.hasOwnProperty(e)&&t.instances[e].cleanResources();t.instances={}},t}i.register("UIChecksTriggerer").asCtor(Ad).dependencies("UIChangeTracker, TimerManager, ElementFinder, MutationObserverWrapper, EventsTriggerSyncer");function Ad(t,n,r,i,a){var s=this;s.bindCheckByState=y,s.bindCheckIfShouldShow=C,s.bindCheckIfShouldHideOrReposition=I,s.unbindCheckByState=b,s.unbindCheckIfShouldShow=w,s.unbindCheckIfShouldHideOrReposition=_,s.bindCheckRemoveForElement=T;var u="CheckByState",l="CheckIfShouldShow",c="CheckIfShouldHideOrReposition",d=2e3,p=800;function g(){t.bind(f),h(),v()}function f(){E(u)}function h(){E(l,m)}function m(){var e=a.sync("pollForShowLoop");n.setWalkmeTimeout(h,e||d)}function v(){E(c,S)}function S(){var e=a.sync("pollForRemoveLoopStart");n.setWalkmeTimeout(v,e||p)}function E(t,n){var i;r.wrapSession(function(){i=e(s).triggerHandler(t)}),n&&o.all(i||[]).then(n)}function T(e,t){if(i.isEnabled())return i.watchElement(e,t);return I(t),{unbind:function(){_(t)}}}function y(t){e(s).on(u,t)}function C(t){e(s).on(l,t)}function I(t){e(s).on(c,t)}function b(t){e(s).off(u,t)}function w(t){e(s).off(l,t)}function _(t){e(s).off(c,t)}g()}i.register("ElementInteractionEvents").asFunction(kd).dependencies("Consts, FeaturesManager");function kd(e,t){var n=[e.EVENT_SENDER_EVENT_TYPES.Click,e.EVENT_SENDER_EVENT_TYPES.Blur];return t.isFeatureEnabled("extendedEvents")&&(n.push(e.EVENT_SENDER_EVENT_TYPES.MouseEnter),n.push(e.EVENT_SENDER_EVENT_TYPES.Focus)),n}i.register("ElementInteractionEventsBinder").asCtor(Od).asProto().dependencies("wmjQuerySafe, ElementInteractionEvents");function Od(t,n){var r=this;r.bind=i,r.unbind=o;function i(t,r,i){var o=e(t);e(n).each(function(e,t){o.off(t+r),o.on(t+r,{eventName:t},a)});function a(e){i(e.data.eventName)}}function o(r,i){var o=t(r);e(n).each(function(e,t){o.off(t+i)})}}var Nd=function(){function e(t,n,r,i,o,a,s,u){this.logger=t,this.consts=n,this.elementFinder=r,this.positionHelper=i,this.timerManager=o,this.uiChangeTracker=a,this.elementIframesAttachedIndicator=s,this._log=t.wrapCustomerLog(e.LOG_FEATURE),this._logContext=u.logContext,this._findElementParams=u.findElementParams,this._watchElementTimeoutTime=u.elementEvaluationIntervalMs||e.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._trackUIChanges=u.trackUIChanges,u.element?(this._element=u.element,this._state=this.consts.VISIBILITY_STATE.VISIBLE):this._state=this.consts.VISIBILITY_STATE.HIDDEN}return e.prototype.evaluateElementVisibilityAsynch=function(t){this._log(kf("ElementVisibilityEvaluator evaluateElementVisibility for {0}",this._logContext),e.DEFAULT_LOG_LEVEL),this._isStopEvaluate=!1,this.handleUIChangeTracking(),this._watchElementTimeoutTime<0?t||this.evaluateElementVisibility():this.evaluateElementVisibilityAsynchLoop()},e.prototype.handleUIChangeTracking=function(){var e=this;this._trackUIChanges&&(this._onUIChange=function(){e._isStopEvaluate||e.evaluateElementVisibility()},this.uiChangeTracker.bind(this._onUIChange))},e.prototype.evaluateElementVisibility=function(){var t=this.findByState();return this._log(kf("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} new state is {1}",this._logContext,t),e.DEFAULT_LOG_LEVEL),t!=this._state&&(this._log(kf("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} state changed from {1} to {2}",this._logContext,this._state,t),e.DEFAULT_LOG_LEVEL),this.callOnValueChangeIfExist(t)),this._state=t,this.getElementVisibility()},e.prototype.getElementVisibility=function(){return this._state},e.prototype.calculateElementVisibility=function(){return this.findIfVisible()},e.prototype.getElement=function(){return this._element},e.prototype.setOnVisibilityChanged=function(e){this._onVisibilityChanged=e},e.prototype.cleanResources=function(){this._log(kf("ElementVisibilityEvaluator cleanResources for {0}",this._logContext),e.DEFAULT_LOG_LEVEL),this._elementTimeoutObject&&(this._elementTimeoutObject.clear(),this._elementTimeoutObject=void 0),this._state=this.consts.VISIBILITY_STATE.HIDDEN,this._isStopEvaluate=!0,this._watchElementTimeoutTime=e.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._element=void 0,this._onVisibilityChanged=void 0,this.uiChangeTracker.unbind(this._onUIChange)},e.prototype.findByState=function(){var e;switch(this._state){case this.consts.VISIBILITY_STATE.VISIBLE:e=this.findIfHidden();break;case this.consts.VISIBILITY_STATE.HIDDEN:e=this.findIfVisible();break;default:this._log(kf("ElementVisibilityEvaluator findByState unknown state {0} for {1}",this._state,this._logContext),1)}return e},e.prototype.evaluateElementVisibilityAsynchLoop=function(){this.evaluateElementVisibility(),this.scheduleEvaluateElementVisibilityAsynchLoop()},e.prototype.scheduleEvaluateElementVisibilityAsynchLoop=function(){var e=this;this._isStopEvaluate||(this._elementTimeoutObject=this.timerManager.setWalkmeTimeout(function(){e.evaluateElementVisibilityAsynchLoop()},this._watchElementTimeoutTime))},e.prototype.findIfVisible=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN;return this.elementFinder.wrapSession(function(){e._element=e.findElementByParams()}),this._element&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},e.prototype.findIfHidden=function(){var e,t=this.consts.VISIBILITY_STATE.HIDDEN;e=this._findElementParams.IdentifySettings?this._findElementParams.IdentifySettings.filter:void 0;var n=this.positionHelper.isElementVisible(this._element,e);return n&&this.elementIframesAttachedIndicator.areIframesAttached(this._element)&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},e.prototype.callOnValueChangeIfExist=function(e){this._onVisibilityChanged&&(this._log(kf("ElementVisibilityEvaluator callOnValueChangeIfExist calling onValueChange for {0}",this._logContext),5),this._onVisibilityChanged(e))},e.prototype.findElementByParams=function(){return this.elementFinder.findElement(this._findElementParams.IdentifySettings,this._findElementParams.isVisible,this._findElementParams.score,this._findElementParams.mode)},e.WATCH_ELEMENT_DEFAULT_TIMEOUT=-1,e.DEFAULT_LOG_LEVEL=3,e.LOG_FEATURE="elementVisibility",e}();i.register("ElementVisibilityEvaluator").asCtor(Nd).asProto().dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator"),i.register("ElementIframesAttachedIndicator").asCtor(Dd);function Dd(){var e=this;e.areIframesAttached=t;function t(e){try{for(var t=!0,n=e.data("iframe");n&&t;)t=t&&n&&n.parents("html").length>0,n=n.data("iframe");return t}catch(r){return!1}}}i.register("UIElementVisibilityAttributes").asCtor(Ld).dependencies("Consts, CommonUtils");function Ld(e,t){var n=this;n.getStickyType=r,n.getIsRemoveByCondition=i;function r(n){var r=t.getSettingsValue(n,e.IS_STICKY_SETTING_KEY,!1),i=e.STICKY_TYPE.ONCE;if(r){var o=parseInt(t.getSettingsValue(n,e.STICKINESS_TYPE_SETTING_KEY,null));i=o==e.OLD_STICKIES.STICKINESS_TYPES.soft?e.STICKY_TYPE.SOFT:e.STICKY_TYPE.STRONG}return i}function i(e){return void 0==e.condHide?!!e.isEvaluationFrequency:!!e.condHide}}i.register("UiElementPositionTracker").asCtor(xd).asProto().dependencies("ElementPositionCalculator, UIChecksTriggerer");function xd(e,t,n){var r=this;r.track=l,r.destroy=p;var i,o,a,s;function u(){i=n.element,o=n.positionChangedCallback,a=n.embedmentType}function l(){s=e.getElementPosition(a,i),t.bindCheckIfShouldHideOrReposition(c)}function c(){var t=e.getElementPosition(a,i);d(t)&&(s=t,o&&o())}function d(e){return s.top!=e.top||s.left!=e.left||s.height!=e.height||s.width!=e.width}function p(){t.unbindCheckIfShouldHideOrReposition(c)}u()}i.register("UiElementPositionTrackerCreator").asCtor(Fd).dependencies("EmbedmentTypeProvider");function Fd(e){var t=this;t.create=r;function n(){}function r(t,n){var r=!1,o=e.get(r,t),a={element:t,positionChangedCallback:n,embedmentType:o};return i.create("UiElementPositionTracker",a)}n()}i.register("UiWindowSizeTracker").asCtor(Md).asProto().dependencies("win, Consts, CommonUtils, wmjQuery");function Md(e,t,n,r,i){var o=this;o.track=d,o.destroy=p;var a,s,u,l;function c(){a=i.callback}function d(){l=n.registerEventHandler(t.WINDOW_EVENTS.Resize,g,!1,e)}function p(){l&&l()}function g(e){if(!f())return;a.apply(void 0,arguments)}function f(){var t=r(e),n=t.width(),i=t.height(),o=s!=n||u!=i;return s=n,u=i,o}c()}i.register("UiChangesTrackerWrapper").asCtor(Rd).asProto().dependencies("EmbedmentTypeProvider");function Rd(e){var t,n,r=this;r.trackChanges=o,r.stopTrackingChanges=a;function o(e){s(e),t.track(),e.isEmbedInElement||(u(e),n.track())}function a(){t&&t.destroy(),n&&n.destroy(),n=null}function s(e){var e={callback:e.callback};t=i.create("UiWindowSizeTracker",e)}function u(t){var t={embedmentType:e.get(!1,t.element),element:t.element,positionChangedCallback:t.callback};n=i.create("UiElementPositionTracker",t)}}function Bd(e){var t=this;t.createUIElement=a;var n={};function r(){o()}function o(){n[e.FLOW_UIELEMENT_TYPE.Popup]=s,n[e.FLOW_UIELEMENT_TYPE.Element]=u}function a(e){return n[e.Type](e)}function s(e){return i.create("UIPopUpBalloon",e)}function u(e){return i.create("UIElementBalloon",e)}r.apply(null,arguments)}i.register("UIElementFactory").asCtor(Bd).dependencies("Consts"),i.register("FlowBalloonDisplayer").asCtor(Ud).asProto().dependencies("Logger, SiteConfigManager, Consts, PositionHelper, FlowStack, BalloonDrawerProvider, BBCodeEventsBinder,FlowDataPersister, ComplexHtmlElementsProvider, FlowVisualStepsIndicator, FeaturesManager");function Ud(t,n,r,o,a,s,u,l,c,d,p,g){var f=this;f.showAndWaitForTrigger=D,f.destroy=L;var h,m,v,S,E,T,y,C,I,b,w,_,P,A,k=3,O=r.FEATURES_LOGS.Flows;function N(){T=g.uiElement,C=T.Triggers,y={title:T.Title,content:T.Text,subText:Y()},E=T.Id,I=g.balloonButtons,b=g.stepType,A=!1,j()}function D(e){return j(),t.customerLog(kf("FlowBalloonDisplayer showUIElement showing balloon {0}",E),k,O),P=e,F(),h.promise()}function L(){return x(function(){S({wasElementShown:A})}),h.promise()}function x(e){W(),G(e)}function F(){var d=n.get(),p=d.BalloonSettings,g=s.getBalloonDrawer(p,T),f=a.peek().flowId;T.Settings.customButtons=e.map(I,function(e){return e.template});var h,v=c.getComplexHtmlElements({Settings:T.Settings},P);v&&(h=v.parentElement,P=v.elements),w=i.create("Balloon",{element:P,parentElement:h,position:T.Settings.Position,stepSettings:T.Settings,logger:t,isFirstStep:l.getIsFirstVisualStep(),text:y,configuration:p,siteConfig:d,data:{balloonEntityId:T.Id,containerEntityId:f,type:b,containerEntityType:"flow",balloonEntityType:"flow-balloon"},positionHelper:o,drawer:g,placeholderConfigurations:T.DesignTemplatePlaceholderConfigs,placeholderVariableValues:z(),initiatorData:{initiator:T,type:r.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},bindButtonsFunc:function(e,t){M(e,I),u.bind(e,void 0,t)}}),w.Show(!0,function(e,t){A=!0,w.SetTimeoutOn(),m("stageShown",{uiElementId:T.Id,siteElement:P})})}function M(e,t){H(),R(e);for(var n=[],r=0;r<C.length;r++)n.push({element:P,balloonDiv:e,logContext:E,balloonButtons:t,trigger:C[r],uiElementId:T.Id});var o={uiElementType:T.Type,triggers:n,uiElement:T};_=i.create("UITriggersManager",o),_.listen().then(U,V)}function R(e){B(e).on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){V(!0)}),e.bind("click mousedown mouseup",function(e){e.stopPropagation()})}function B(t){return e(".walkme-action-close, .walkme-action-cancel",t)}function U(e){v(e),t.customerLog(kf("FlowBalloonDisplayer OnTrigger was called but no triggers were found for uiElement {0}",E),1,O)}function V(e){S({wasElementShown:A,wasClosedByUser:e})}function W(){if(!w)return;var e=w.getBalloonDiv();B(e).off("click"+r.FLOW_TRIGGER_WORKSPACE),e.unbind("click mousedown mouseup")}function G(e){H(),w?w.destroy(!1,e):e&&e()}function H(){_&&(_.destroy(),_=void 0)}function j(){h=e.Deferred(),m=h.notify,v=h.resolve,S=h.reject}function Y(){var e=z(),t=e.totalVisibleSteps,i=e.passedVisibleSteps,o=n.get().StepsInfoText;return p.isFeatureEnabled("floatingsubtext")?(o=o.replace("{0}",r.SUBTEXT_CURRENT_START+i+r.SUBTEXT_CURRENT_END),o=o.replace("{1}",r.SUBTEXT_TOTAL_START+t+r.SUBTEXT_TOTAL_END)):(o=o.replace("{0}",i),o=o.replace("{1}",t)),o}function z(){return{totalVisibleSteps:d.getTotalVisualSteps(),passedVisibleSteps:d.getNextVisualStepIndex(T.Id)}}N.apply(null,arguments)}i.register("UIPopUpBalloon").asCtor(Vd).asProto().dependencies("PopupStepElementProvider, UiUtils, Consts, FlowPopupBalloonButtonsProvider");function Vd(e,t,n,r,o){var a=this;a.show=g,a.destroy=f;var s,u,l,c,d="UIPopUpBalloon";function p(){u=o.Id,c=e.get();var t={uiElement:o,balloonButtons:m(),stepType:n.STEP_TYPE.Popup};l=i.create("FlowBalloonDisplayer",t),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){return s.customerLog("{0}: Show Popup Balloon with id {1} step index {2}",d,u,o.PointIndex),l.showAndWaitForTrigger(c).always(h)}function f(){return s.customerLog("{0}: Destroy Popup Balloon with id {1} step index {2}",d,u,o.PointIndex),l.destroy()}function h(){t.removeOverlay()}function m(){return r.getButtons(o)}p.apply(null,arguments)}i.register("UIElementBalloon").asCtor(Wd).asProto().dependencies("Consts, FlowElementBalloonButtonsProvider");function Wd(t,n,r){var o=this;o.show=v,o.destroy=S;var a,s,u,l,c,d,p,g,f,h="UIElementBalloon";function m(){c=r.Id,d=r.PointIndex,r.score={};var e={uiElement:r,balloonButtons:y(),stepType:t.STEP_TYPE.Normal};p=i.create("FlowBalloonDisplayer",e),f=i.create("UiElementVisibilityManager",{uiElement:r,isSticky:E(),onShow:C,onRemove:b,onError:S}),l=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function v(){return l.customerLog("{0}: Show Balloon - Calling visibility manager for ui element with id {1} step index {2}",h,c,d),g=e.Deferred(),a=g.resolve,s=g.reject,u=g.notify,f.evaluateAsync(),g.promise().always(T)}function S(){return T(),b().always(s)}function E(){return void 0===r.IsSticky||r.IsSticky}function T(){f.cleanResources()}function y(){return n.getButtons(r)}function C(e){l.customerLog("{0}: showUIElement showing balloon with id {1} step index {2}",h,c,d),p.showAndWaitForTrigger(e).then(a).progress(u).fail(I)}function I(e){e.wasClosedByUser&&s(e)}function b(){return l.customerLog("{0}: removeUIElement removing balloon with id {1} step index {2}",h,c,d),p.destroy()}m.apply(null,arguments)}i.register("UiElementVisibilityManager").asCtor(Gd).asProto().dependencies("Consts, FlowDataPersister");function Gd(e,t,n){var r=this;r.evaluateAsync=g,r.cleanResources=p;var o,a,s,u,l,c=500;function d(){a=n.uiElement,s=n.onShow,u=n.onRemove,l=n.onError;var e={logContext:a.Id,findElementParams:{IdentifySettings:a.IdentifySettings,score:a.score},trackUIChanges:!0,elementEvaluationIntervalMs:n.isSticky?c:void 0};o=i.create("ElementVisibilityEvaluator",e)}function p(){o&&(o.cleanResources(),o=void 0)}function g(){t.getIsFirstVisualStep()?f():h()}function f(){var t=o.calculateElementVisibility();t==e.VISIBILITY_STATE.VISIBLE?h():(p(),l())}function h(){o.setOnVisibilityChanged(m),o.evaluateElementVisibilityAsynch()}function m(t){switch(t){case e.VISIBILITY_STATE.VISIBLE:s(o.getElement());break;case e.VISIBILITY_STATE.HIDDEN:u()}}d()}i.register("FlowElementBalloonButtonsProvider").asCtor(Hd).dependencies("UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider");function Hd(e,t,n){var r=this;r.getButtons=i;function i(e){var r=[],i=n.getContinueButton(e);return i&&(r.push(i),o()&&r.unshift(t.get())),r}function o(){return!e.isEmpty()}}i.register("FlowPopupBalloonButtonsConfigProvider").asCtor(jd).dependencies("Consts, UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider, FlowStartBalloonButtonProvider, FlowCancelBalloonButtonProvider");function jd(e,t,n,r,i,o){var a=this;a.get=u;var s={Cancel:{getButton:o.get,order:1},Back:{getButton:n.get,canAdd:l,order:2},"Next/Done":{getButton:function(e){return r.getContinueButton(e)},order:3},Start:{getButton:i.get,order:4}};function u(){return s}function l(){return!t.isEmpty()}}i.register("FlowPopupBalloonButtonsProvider").asCtor(Yd).dependencies("FlowPopupBalloonButtonsConfigProvider");function Yd(e){var t=this;t.getButtons=i;var n;function r(){n=e.get()}function i(e){for(var t=[],n=o(e),r=0;r<n.length;r++){var i=n[r];i.canAdd&&!i.canAdd()||t.push(i.getButton(e))}return t}function o(e){for(var t=[],r=e.Settings.popupStepButtons,i=0;i<r.length;i++){var o=n[r[i].name];t.push(o)}return t.sort(function(e,t){return e.order-t.order})}r()}i.register("FlowBackBalloonButtonProvider").asCtor(zd).dependencies("Consts, UiFlowNodesExecutionStack, BalloonButtonDataGenerator");function zd(e,t,n){var r=this;r.get=i;function i(){var t={selector:".walkme-action-back",template:n.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Back),action:o};return t}function o(e,n){n.resolve({nextStageId:t.pop(),isFlowGoingBack:!0})}}i.register("FlowCancelBalloonButtonProvider").asCtor(Qd).dependencies("Consts, WelcomeBalloonButtonDataGenerator");function Qd(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-cancel",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Cancel),action:i};return n}function i(e,t){t.reject({wasElementShown:!0,wasClosedByUser:!0})}}i.register("ButtonTriggersProvider").asCtor(Kd).dependencies("Consts");function Kd(t){var n=this;n.get=r;function r(n){return e(n.Triggers).filter(function(e,n){return n.Type==t.FLOW_TRIGGER_TYPE.Button})}}i.register("FlowContinueBalloonButtonProvider").asCtor(qd).dependencies("ButtonTriggersProvider, FlowNodePlayIndicator, FlowNextBalloonButtonProvider, FlowDoneBalloonButtonProvider, CommonUtils, FlowGroupLastStageIndicator, FlowStack");function qd(e,t,n,r,i,o,a){var s=this;s.getContinueButton=l;function u(){}function l(t){var i=a.peek().flowId,s=e.get(t);if(0==s.length)return;var u=o.isPreviousGroupHasNextStage(),l=c(i,s);return u||l?n.get():r.get()}function c(e,t){return i.doesAnyMeetCondition(t,function(t){return d(e,t)})}function d(e,n){if(!n.TargetFlowNodeId)return!1;var r=t.isPlayable(e,n.TargetFlowNodeId);return r}u()}i.register("FlowContinueBalloonButton").asFunction(Xd).asProto().dependencies("");function Xd(e){var t={selector:e.selector,template:e.template,action:n};return t;function n(e,t){t.resolve({nextStageId:e.TargetFlowNodeId})}}i.register("FlowDoneBalloonButtonProvider").asCtor(Jd).dependencies("Consts, BalloonButtonDataGenerator");function Jd(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-done",template:t.generate(e.BALLOON_BUTTON_TYPE.Done)};return i.create("FlowContinueBalloonButton",n)}}i.register("FlowNextBalloonButtonProvider").asCtor($d).dependencies("Consts, BalloonButtonDataGenerator");function $d(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-next, .walkme-action-start",template:t.generate(e.BALLOON_BUTTON_TYPE.Next)};return i.create("FlowContinueBalloonButton",n)}}i.register("FlowStartBalloonButtonProvider").asCtor(Zd).dependencies("Consts, WelcomeBalloonButtonDataGenerator");function Zd(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-start",template:t.generate(e.BALLOON_BUTTON_TYPE.Start)};return i.create("FlowContinueBalloonButton",n)}}i.register("ClickTriggersListCreator").asCtor(ep).dependencies("FeaturesManager");function ep(e){var t=this;t.get=n;function n(){var t=["click","mousedown","mouseup"];return e.isFeatureEnabled("ipad_touch_as_click")&&t.push("touchstart"),e.isFeatureEnabled("noFocusTrigger")||t.push("focus"),t}}i.register("UITriggersManager").asCtor(tp).asProto().dependencies("UITriggersFactory, FlowPlayerMetadata, Consts, MockDelayTriggerProvider");function tp(t,n,r,i,o){var a=this,s=[];a.listen=f,a.destroy=h;var u={},l=[r.FLOW_TRIGGER_TYPE.Button];function c(){u[r.FLOW_TRIGGER_TYPE.PeerStep]=!0;for(var e=0;e<o.triggers.length;e++)u[o.triggers[e].trigger.Type]||(s=s.concat(d(o.triggers[e])))}function d(e){var t=[];return p(t,e),g(e.trigger)&&p(t,i.createMockDelayTriggerParams(e)),t}function p(e,n){e.push({trigger:t.createUITrigger(n),data:n.trigger})}function g(t){return e.inArray(t.Type,l)>-1&&o.uiElementType==r.FLOW_UIELEMENT_TYPE.Popup&&t.Settings&&t.Settings.Duration>=0}function f(){for(var t=e.Deferred(),n=0;n<s.length;n++){var r=s[n].trigger,i=s[n].data;m(r,i,t)}return t.promise()}function h(){for(var e=0;e<s.length;e++)s[e].trigger.destroy()}function m(t,n,r){t.listen().then(v(n)).then(function(t){t=e.extend({firedTrigger:n,uiElementId:o.uiElement.Id},t),r.resolve(t)})}function v(e){return function(t){return n.lastTriggerFired=e,t}}c.apply(null,arguments)}i.register("UITriggersFactory").asCtor(np).dependencies("Consts, UITriggerTransitionDelayer");function np(t,n){var r=this;r.createUITrigger=c;var o={},a=[{triggerName:t.FLOW_TRIGGER_TYPE.Click,className:"ClickUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Hover,className:"HoverUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Text,className:"TextUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Delay,
className:"DelayUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.PageChanged,className:"PageChangedUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Button,className:"ButtonUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.SelectAny,className:"SelectAnyUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.SelectValue,className:"SelectValueUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.BbCode,className:"BBCodeUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Custom,className:"CustomUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Swipe,className:"SwipeUITrigger"}];function s(){u()}function u(){e.each(a,function(e,t){o[t.triggerName]=l(t)})}function l(e){return function(t){var r=i.create(e.className,t);return n.addDelay(r,e.triggerName),r}}function c(e){return o[e.trigger.Type](e)}s.apply(null,arguments)}i.register("UITriggerTransitionDelayer").asCtor(rp).dependencies("FlowTransitionDelayer");function rp(e){var t=this;t.addDelay=n;function n(e,t){e.listen=r(e.listen,t)}function r(t,n){return function(){return t().then(function(t){return e.setDelayByTrigger(n),t})}}}i.register("UITriggerEventBindingService").asCtor(ip).dependencies("Consts");function ip(e){var t=this;t.getFullEventNames=n,t.bindEventsToElement=r,t.unbindEventsFromElement=i;function n(t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]+e.FLOW_TRIGGER_WORKSPACE);return n}function r(e,t,n){for(var r=0;r<t.length;r++)e.on(t[r],function(e){n(e)})}function i(e,t){for(var n=0;n<t.length;n++)e.off(t[n])}}i.register("TriggerTimeoutService").asCtor(op).dependencies("TimerManager");function op(e){var t=this;t.createTimeout=r,t.cleanTimeout=i;var n={};function r(t,r,i,o){var a=e.setWalkmeTimeout(function(){i.customerLog("{0}: Executing {1} trigger with id {2} for {3} seconds to target node id {4}",o,r.Name,r.Id,r.Settings.Duration,r.TargetFlowNodeId),t.resolve({nextStageId:r.TargetFlowNodeId})},1e3*r.Settings.Duration);n[r.Id]=a}function i(e){var t=n[e.Id];t&&(t.clear(),t=null,delete n[e.Id])}}i.register("MockDelayTriggerProvider").asCtor(ap).dependencies("Consts");function ap(t){var n=this;n.createMockDelayTriggerParams=r;function r(n){var r=e.extend(!0,{},n),i=n.trigger;return r.trigger={Type:t.FLOW_TRIGGER_TYPE.Delay,Id:"mock_delay_"+i.Id,Name:i.Name,TargetFlowNodeId:i.TargetFlowNodeId,Settings:{Duration:i.Settings.Duration}},r}}i.register("ClickUITrigger").asCtor(sp).asProto().dependencies("UITriggerEventBindingService, ClickTriggersListCreator, Consts");function sp(t,n,r,o){var a,s,u,l=this,c=[],d="ClickUITrigger";l.listen=g,l.destroy=f;function p(){a=o.element,s=o.trigger;var e=n.get();c=t.getFullEventNames(e),u=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function g(){var n=e.Deferred();return u.customerLog("{0}: Listening to Click trigger with id {1}",d,s.Id),t.bindEventsToElement(a,c,r),n.promise();function r(){u.customerLog("{0}: Executing Click trigger with id {1} to target node id {2}",d,s.Id,s.TargetFlowNodeId),n.resolve({nextStageId:s.TargetFlowNodeId})}}function f(){u.customerLog("{0}: Destroying Click trigger with id {1}",d,s.Id),t.unbindEventsFromElement(a,c)}p.apply(null,arguments)}i.register("HoverUITrigger").asCtor(up).asProto().dependencies("UITriggerEventBindingService, Consts");function up(t,n,r){var o,a,s,u=this,l=[],c="HoverUITrigger",d=["mouseenter"];u.listen=g,u.destroy=f;function p(){o=r.element,a=r.trigger,l=t.getFullEventNames(d),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){var n=e.Deferred();s.customerLog("{0}: Listening to Hover trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Hover trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(o,l,r),n.promise()}function f(){s.customerLog("{0}: Destroying Hover trigger with id {1}",c,a.Id),t.unbindEventsFromElement(o,l)}p.apply(null,arguments)}i.register("TextUITrigger").asCtor(lp).asProto().dependencies("UITriggerEventBindingService, TimerManager, Consts");function lp(t,n,r,o){var a,s,u,l,c=this,d=[],p=[],g="TextUITrigger",f=["keydown","change"],h=["paste"],m=800;c.listen=S,c.destroy=E;function v(){a=o.element,s=o.trigger,d=t.getFullEventNames(f),p=t.getFullEventNames(h),l=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function S(){var n=e.Deferred();return l.customerLog("{0}: Listening to Text trigger with id {1}",g,s.Id),t.bindEventsToElement(a,d,function(){T(n)}),t.bindEventsToElement(a,p,function(){y(n)}),n.promise()}function E(){l.customerLog("{0}: Destroying Text trigger with id {1}",g,s.Id),C(),t.unbindEventsFromElement(a,d),t.unbindEventsFromElement(a,p)}function T(e){C(),u=n.libSetTimeout(function(){y(e)},m)}function y(e){l.customerLog("{0}: Executing Text trigger with id {1} to target node id {2}",g,s.Id,s.TargetFlowNodeId),e.resolve({nextStageId:s.TargetFlowNodeId})}function C(){u&&u.clear()}v.apply(null,arguments)}i.register("DelayUITrigger").asCtor(cp).asProto().dependencies("TriggerTimeoutService, Consts");function cp(t,n,r){var o,a,s,u=this,l="DelayUITrigger";u.listen=d,u.destroy=p;function c(){o=r.element,a=r.trigger,s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred();return s.customerLog("{0}: Listening to Delay trigger with id {1}",l,a.Id),t.createTimeout(n,a,s,l),n.promise()}function p(){s.customerLog("{0}: Destroying bbCode trigger with id {1}",l,a.Id),t.cleanTimeout(a)}c.apply(null,arguments)}i.register("PageChangedUITrigger").asCtor(dp).dependencies("Consts, FlowDataPersister").asProto();function dp(t,n,r){var o=this;o.listen=c,o.destroy=d;var a,s,u;function l(){a=r.element,s=r.trigger,u=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){var t=e.Deferred();return n.saveWaitingForRefreshTrigger({refreshTrigger:s.TargetFlowNodeId,firedTrigger:s,uiElementId:r.uiElementId}),t.promise()}function d(){n.clearWaitingForRefreshTrigger()}l.apply(null,arguments)}i.register("ButtonUITrigger").asCtor(pp).asProto().dependencies("Consts");function pp(t,n){var r=this;r.listen=c,r.destroy=d;var o,a,s,u="ButtonUITrigger";function l(){o=n.balloonButtons,a=n.trigger;for(var e=0;e<o.length;e++)o[e].buttonElement=h(o[e].selector,n.balloonDiv);s=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){return s.customerLog("{0}: Listening to Next trigger with id {1}",u,a.Id),p()}function d(){s.customerLog("{0}: Destroying Next trigger with id {1}",u,a.Id),f()}function p(){for(var t=e.Deferred(),n=0;n<o.length;n++){var r=o[n];g(r,t)}return t.promise()}function g(e,n){e.buttonElement.on("click"+t.FLOW_TRIGGER_WORKSPACE,function(){s.customerLog("{0}: Executing Next trigger with id {1} to target node id {2}",u,a.Id,a.TargetFlowNodeId),e.action(a,n)})}function f(){for(var e=0;e<o.length;e++)o[e].buttonElement&&(o[e].buttonElement.off("click"+t.FLOW_TRIGGER_WORKSPACE),o[e].buttonElement=void 0)}function h(t,n){var r=e(t,n);return r}l.apply(null,arguments)}i.register("SelectAnyUITrigger").asCtor(gp).asProto().dependencies("UITriggerEventBindingService, Consts");function gp(t,n,r){var o,a,s,u=this,l=[],c="SelectAnyUITrigger",d=["change"];u.listen=g,u.destroy=f;function p(){o=r.element,a=r.trigger,l=t.getFullEventNames(d),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){var n=e.Deferred();s.customerLog("{0}: Listening to Select Any trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Select Any trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(o,l,r),n.promise()}function f(){s.customerLog("{0}: Destroying Select Any trigger with id {1}",c,a.Id),t.unbindEventsFromElement(o,l)}p.apply(null,arguments)}i.register("SelectValueUITrigger").asCtor(fp).asProto().dependencies("UITriggerEventBindingService, Consts");function fp(t,n,r){var o,a,s,u,l=this,c=[],d="SelectValueUITrigger",p=["change"];l.listen=f,l.destroy=h;function g(){o=r.element,a=r.trigger,s=a.Settings.complexHtml,c=t.getFullEventNames(p),u=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function f(){var n=e.Deferred();u.customerLog("{0}: Listening to Select Value trigger with id {1}",d,a.Id);var r=function(e){var t;t="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex],t.value!=s.val&&t.text!=s.txt||(u.customerLog("{0}: Executing Select Value trigger with id {1} to target node id {2}",d,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId}))};return t.bindEventsToElement(o,c,r),n.promise()}function h(){u.customerLog("{0}: Destroying Select Value trigger with id {1}",d,a.Id),t.unbindEventsFromElement(o,c)}g.apply(null,arguments)}i.register("BBCodeUITrigger").asCtor(hp).asProto().dependencies("Consts");function hp(t,n){var r,o,a,s,u,l=this,c="BBCodeUITrigger";l.listen=p,l.destroy=g;function d(){r=n.element,o=n.trigger,a=n.balloonDiv,u=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var t=e.Deferred();return u.customerLog("{0}: Listening to BBCode trigger with id {1}",c,o.Id),f(t),t.promise()}function g(){u.customerLog("{0}: Destroying BBCode trigger with id {1}",c,o.Id),h()}function f(n){var r=o.Settings.bbCodeId;s=e(".trg-"+r,a),s.on("click"+t.FLOW_TRIGGER_WORKSPACE,function(){u.customerLog("{0}: Executing BBCode trigger with id {1} and bbCode id {2} to target node id {3}",c,o.Id,o.Settings.bbCodeId,o.TargetFlowNodeId),n.resolve({nextStageId:o.TargetFlowNodeId})})}function h(){s.off("click"+t.FLOW_TRIGGER_WORKSPACE)}d.apply(null,arguments)}i.register("CustomUITrigger").asCtor(mp).asProto().dependencies("Consts,ConditionCheckerFactory");function mp(t,n,r){var o,a,s,u=this,l="CustomUITrigger";u.listen=d,u.destroy=p;function c(){o=r.trigger,s=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function d(){var t=e.Deferred();s.customerLog("{0}: Listening to Custom trigger with id {1}",l,o.Id);var r=o.ConditionTrees.CustomTrigger,i={evaluationPollingIntervalMs:500,featureName:"Custom Trigger",elementName:"Custom Trigger: "+o.Name};return a=n.createNew(i),a.onValueChanged(function(e){if(e)return s.customerLog("{0}: Executing Custom trigger with id {1} to target node id {2}",l,o.Id,o.TargetFlowNodeId),t.resolve({nextStageId:o.TargetFlowNodeId})}),a.evaluateAsync(r),t.promise()}function p(){s.customerLog("{0}: Destroying Custom trigger with id {1}",l,o.Id),a&&(a.cleanResources(),a=void 0)}c.apply(null,arguments)}i.register("SwipeUITrigger").asCtor(vp).asProto().dependencies("UITriggerEventBindingService, Consts");function vp(t,n,r){var o,a,s,u=this,l=[],c="SwipeUITrigger";u.listen=p,u.destroy=g;function d(){o=r.element,a=r.trigger,l=t.getFullEventNames(["swipe"]),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function p(){var n=e.Deferred();s.customerLog("{0}: Listening to Swipe trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Swipe trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(o,l,r),n.promise()}function g(){s.customerLog("{0}: Destroying Swipe trigger with id {1}",c,a.Id),t.unbindEventsFromElement(o,l)}d.apply(null,arguments)}i.register("StatesMachine").asCtor(Sp).asProto().dependencies("TimerManager, CommonUtils");function Sp(e,t,n){var r=this;r.evaluate=h,r.reset=f;var i,o,a,s,u,l,c,d,p;function g(){s=n.initState,o=n.transitions||[],a=n.timedOutTransitions||[],p=n.defaultTransitionValuesToReturn||[],u=n.globalActionFlags||{},c=n.onStateChangedCallback||function(){},f()}function f(){i=s,l={}}function h(e,t){m(e),v(e);var n=I(e);n&&E(n,t)}function m(e){u[e]&&u[e].addFlag&&S(u[e].addFlag,function(e){l[e]=!0})}function v(e){u[e]&&u[e].removeFlag&&S(u[e].removeFlag,function(e){delete l[e]})}function S(e,t){for(var n=0;n<e.length;n++){var r=e[n];t(r)}}function E(e,t){A(),y(e,t);var n=T(e);n&&P(function(){y(n,t)},n.timeout)}function T(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.fromState==e.toState)return n}return null}function y(e,t){i=e.toState;var n=C(e);c(e.toState,n,t)}function C(e){if(e.valueToReturn)return e.valueToReturn;if(p)for(var t=0;t<p.length;t++){var n=p[t],r=!n.fromState||n.fromState==e.fromState,i=!n.toState||n.toState==e.toState;if(r&&i)return n.valueToReturn}return null}function I(e){for(var t=0;t<o.length;t++){var n=o[t],r=b(n,e);if(r)return n}return null}function b(e,t){var n=("*"==e.fromState||e.fromState==i)&&e.onAction==t;if(!n)return!1;var r=!e.ifFlagged||w(e.ifFlagged),o=!e.ifNotFlagged||_(e.ifNotFlagged),a=r&&o;return a}function w(e){return t.doesAnyMeetCondition(e,function(e){return void 0!=l[e]})}function _(e){return t.doAllMeetCondition(e,function(e){return void 0==l[e]})}function P(t,n){d=e.libSetTimeout(t,n)}function A(){d&&d.clear()}g()}i.register("StatesMachineCreator").asCtor(Ep);function Ep(){var e=this;e.create=n;function t(){}function n(e){return i.create("StatesMachine",e)}t.apply(null,arguments)}i.register("StagesFactory").asCtor(Tp).dependencies("Logger, ActionStagesFactory, Consts");function Tp(e,t,n){var r=this;r.createStage=a;var o=n.FEATURES_LOGS.Flows;function a(r){switch(r.Type){case n.FLOW_STEP_TYPE.UI:return i.create("UIFlowStage",r);case n.FLOW_STEP_TYPE.Action:return t.createActionStage(r);default:e.customerLog(kf("StagesFactory getStage - Unknown flow node type: {0}",r.FlowNodeType),1,o)}}}i.register("StageCreator").asCtor(yp).dependencies("StagesFactory");function yp(e){var t=this;t.createStage=n;function n(t,n){var r=t.Nodes[n];return r?e.createStage(r):void 0}}i.register("UIFlowStage").asCtor(Cp).asProto().dependencies("UIElementFactory, CommonUtils, FlowDataPersister, Consts, FlowEventRaiser");function Cp(t,n,r,o,a,s){var u=this;u.execute=f,u.destroy=h,u.Id=s.Id;var l,c=0,d=[],p="UIFlowStage";function g(){l=i.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows});for(var e=0;e<s.UIElements.length;e++)d.push(t.createUIElement(s.UIElements[e]))}function f(){l.customerLog("{0}: Executing UI step with id {1}",p,u.Id);var t=e.Deferred();a.raiseEventOnCurrentFlow(o.EVENTS.Flows.LookingForElement,{step:s});for(var n=0;n<d.length;n++)m(t,d[n].show);return t.promise()}function h(){l.customerLog("{0}: Destroying UI step with id {1}",p,u.Id);var t=e.Deferred();return n.executeParallel({objectsArray:d,functionsToExecute:[function(e,t){e.destroy().then(function(){},t)}],successCallback:function(e){t.resolve(e)}}),d.length=0,t.promise()}function m(e,t){t().progress(function(t,n){var r=E(n.uiElementId);a.raiseEventOnCurrentFlow(o.EVENTS.Flows.UiElementFound,{step:s,score:r.score});var i={id:u.Id,uiElementId:n.uiElementId,triggers:r.Triggers,siteElement:n.siteElement};e.notify(t,i)}).then(function(t){v(e,t)},function(t){S(e,t)})}function v(e,t){l.customerLog("{0}: UI step - Moving to next step. From step id {1} to step id {2}",p,u.Id,t.nextStageId),r.saveIsFirstVisualStep(!1),e.resolve(t)}function S(e,t){l.customerLog("{0}: Balloon was closed for UI step with id {1}, params {2}",p,u.Id,n.toJSON(t)),c++,(t.wasClosedByUser||c==d.length)&&e.reject(t)}function E(e){for(var t=0;t<s.UIElements.length;t++)if(s.UIElements[t].Id==e)return s.UIElements[t]}g.apply(null,arguments)}i.register("ActionStagesFactory").asCtor(Ip).dependencies("Consts");function Ip(e){var t=this;t.createActionStage=a;var n={};function r(){o()}function o(){n[e.FLOW_ACTION_TYPE.ConnectToBizflow]=s,n[e.FLOW_ACTION_TYPE.Delay]=u,n[e.FLOW_ACTION_TYPE.OpenMenu]=l,n[e.FLOW_ACTION_TYPE.PassOwnership]=c,n[e.FLOW_ACTION_TYPE.Redirect]=d,n[e.FLOW_ACTION_TYPE.Refresh]=p,n[e.FLOW_ACTION_TYPE.Style]=g,n[e.FLOW_ACTION_TYPE.SetData]=f,n[e.FLOW_ACTION_TYPE.Split]=h,n[e.FLOW_ACTION_TYPE.Stop]=m,n[e.FLOW_ACTION_TYPE.WaitForCondition]=v,n[e.FLOW_ACTION_TYPE.OnPageAction]=S,n[e.FLOW_ACTION_TYPE.ErrorHandling]=E}function a(e){return n[e.ActionType](e)}function s(e){return i.create("BranchActionStage",e)}function u(e){return i.create("DelayActionStage",e)}function l(e){return i.create("OpenMenuActionStage",e)}function c(e){return i.create("PassOwnershipActionStage",e)}function d(e){return i.create("RedirectActionStage",e)}function p(e){return i.create("RefreshActionStage",e)}function g(e){return i.create("StyleActionStage",e)}function f(e){return i.create("SetDataActionStage",e)}function h(e){return i.create("SplitActionStage",{node:e})}function m(e){return i.create("StopActionStage",e)}function v(e){return i.create("WaitForConditionActionStage",e)}function S(e){return i.create("OnPageActionStage",e)}function E(e){return i.create("ErrorHandlingActionStage",e)}r.apply(null,arguments)}i.register("BranchActionStage").asCtor(bp).asProto().dependencies("Consts, FlowsContainer, FlowStack, FlowVisualStepsIndicator, TimerManager");function bp(t,n,r,o,a,s){var u=this;u.execute=p,u.destroy=g,u.backFromFlowGroup=f,u.Id=s.Id;var l,c="BranchActionStage";function d(){l=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var t=e.Deferred(),i=s.Settings.actionArgs;if(l.customerLog("{0}: Executing Connect To Bizflow with step id {1} step index {2}. Branching to flow: {3}, starting from {4}",c,u.Id,s.PointIndex,i.flowId,i.playFromBeginning?"the beginning of the flow":"stage"+i.startingNodeId),!n.getFlowById(i.flowId)){var o={nextStageId:s.Links[0].TargetFlowNodeId,nextFlowId:r.peek().flowId};return h(t,o)}var d=i.playFromBeginning?void 0:i.startingNodeId,o={currentNode:s,nextFlowId:i.flowId,nextStageId:d,shouldCreateFlowGroup:!0,isBranch:!0};return a.playSetTimeout(function(){h(t,o,i.flowId)},500),t}function g(){return l.customerLog("{0}: Destroying Connect To Bizflow with step id {1} step index {2}",c,u.Id,s.PointIndex),e.Deferred().resolve()}function f(){l.customerLog("{0}: Connect To Bizflow - Back from branch - Step id {1} step index {2}",c,u.Id,s.PointIndex);var t=e.Deferred(),n={currentNode:s,nextFlowId:void 0,nextStageId:s.Links[0].TargetFlowNodeId,shouldCreateFlowGroup:void 0};return h(t,n,r.peek().flowId)}function h(e,t,n){return l.customerLog("{0}: Connect To BizFlow - Moving to next stage. From step id {1} step index {2} to step id {3}, from flow id {4} to flow id {5}. (create flow group: {6})",c,u.Id,s.PointIndex,t.nextStageId,t.nextFlowId,r.peek().flowId,t.shouldCreateFlowGroup?t.shouldCreateFlowGroup:"false"),o.init(n),e.resolve(t)}d.apply(null,arguments)}i.register("DelayActionStage").asCtor(wp).asProto().dependencies("TimerManager, Consts, FlowDataPersister");function wp(t,n,r,o){var a=this;a.execute=d,a.destroy=p,a.Id=o.Id;var s,u,l="DelayActionStage";function c(){s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred(),i=o.Settings.actionArgs.Duration;s.customerLog("{0}: Executing Delay with step id {1} step index {2}. Waiting {3} seconds.",l,a.Id,o.PointIndex,i||"0");var c=o.Links[0].TargetFlowNodeId;return r.saveWaitingForRefreshTrigger({refreshTrigger:c}),u=t.playSetTimeout(function(){return g(n,c)},1e3*i),n.promise()}function p(){return s.customerLog("{0}: Destroying Delay with step id {1}",l,a.Id),r.clearWaitingForRefreshTrigger(),e.Deferred().resolve()}function g(e,t){s.customerLog("{0}: Delay - Moving to next step. From step id {0} to step id {1}",l,a.Id,t),r.clearWaitingForRefreshTrigger();var n={nextStageId:t};return e.resolve(n)}c.apply(null,arguments)}i.register("OpenMenuActionStage").asCtor(_p).asProto().dependencies("Consts, win");function _p(t,n,r){var o=this;o.execute=l,o.destroy=c,o.Id=r.Id;var a,s="OpenMenuActionStage";function u(){a=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function l(){a.customerLog("{0}: Executing Open Menu with step id {1}",s,o.Id);var i=e.Deferred(),u={appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,objectId:r.Id,type:t.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP};return void 0!=n.WalkMePlayerAPI&&n.WalkMePlayerAPI.toggleMenu(u),d(i,r.Links[0].TargetFlowNodeId)}function c(){return a.customerLog("{0}: Destroying Open Menu with step id {1}",s,o.Id),e.Deferred().resolve()}function d(e,t){a.customerLog("{0}: Open Menu - Moving to next step. From step id {0} to step id {1}",s,o.Id,t);var n={nextStageId:t};return e.resolve(n)}u.apply(null,arguments)}i.register("StyleActionStage").asCtor(Pp).asProto().dependencies("Consts, WmInternals, SiteConfigManager");function Pp(t,n,r,o){var a=this;a.execute=c,a.destroy=d,a.Id=o.Id;var s,u="StyleActionStage";function l(){s=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){s.customerLog("{0}: Executing Style with step id {1}",u,a.Id);var t=e.Deferred();if(!f())return s.customerLog("{0}: Style step not supported, skipping to next step",u),p(t,o.Links[0].TargetFlowNodeId);var r=o.Settings.actionArgs,l=i.create("DynamicCss",{css:r.css,Id:a.Id});return l.add(),n.one(g(),function(){s.customerLog("{0}: Removing Style with step id {1}",u,a.Id),l.remove()}),p(t,o.Links[0].TargetFlowNodeId)}function d(){return s.customerLog("{0}: Destroying Apply Css with step id {1}",u,a.Id),e.Deferred().resolve()}function p(e,t){s.customerLog("{0}: Apply Css - Moving to next step. From step id {0} to step id {1}",u,a.Id,t);var n={nextStageId:t};return e.resolve(n)}function g(){return[t.EVENTS.Flows.FlowStopped,t.EVENTS.Flows.FlowCompleted].join(" ")}function f(){return r.get().Settings&&r.get().Settings.StyleActionStage}l.apply(null,arguments)}i.register("PassOwnershipActionStage").asCtor(Ap).asProto().dependencies("Consts, CrossDomainManager, FlowStack, FlowsContainer, ClientStorageManager, FlowEventRaiser");function Ap(t,n,r,o,a,s,u){var l=this;l.execute=g,l.destroy=f,l.Id=u.Id;var c,d="PassOwnershipActionStage";function p(){c=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function g(){var i=e.Deferred();a.saveData(t.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY,(new Date).getTime(),3600),c.customerLog("{0}: checking ownership for stage with step id {1}",d,l.Id);var o=n.get().determineOwnership(r.peek());if(!o)return s.raiseEventOnCurrentFlow(t.EVENTS.Flows.AfterCompletingFlowStage,{step:u}),r.updateTopStageId(u.Links[0].TargetFlowNodeId),m(i);return h(i,u.Links[0].TargetFlowNodeId)}function f(){return c.customerLog("{0}: Destroying PassOwnership stage with step id {1}",d,l.Id),e.Deferred().resolve()}function h(e,t){c.customerLog("{0}: Moving to next step. From step id {1} to step id {2}",d,l.Id,t);var n={nextStageId:t};return e.resolve(n)}function m(e){return e.reject({lostOwnership:!0})}p.apply(null,arguments)}i.register("RedirectActionStage").asCtor(kp).asProto().dependencies("TimerManager, RedirectService, win, Consts, FlowDataPersister");function kp(t,n,r,o,a,s){var u=this;u.execute=p,u.destroy=g,u.Id=s.Id;var l,c="RedirectActionStage";function d(){l=i.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}function p(){var r=e.Deferred(),i=s.Settings.actionArgs,o=i.url,d=i.dontRedirectIfIdentical,p=n.canRedirect(o,!d);l.customerLog("{0}: Executing Redirect with step id {1} to url {2}. dontRedirectIfIdentical: {3}, canRedirect: {4}",c,o,u.Id,d,p);var g=s.Links[0].TargetFlowNodeId;if(!p)return f(r,g);return a.saveWaitingForRefreshTrigger({refreshTrigger:g}),t.libSetTimeout(function(){var e=n.redirect(o);e&&f(r,g)},200),r.promise()}function g(){return l.customerLog("{0}: Destroying Redirect with step id {1}",c,u.Id),e.Deferred().resolve()}function f(e,t){l.customerLog("{0}: Redirect - Moving to next step. From step id {1} to step id {2}",c,u.Id,t);var n={nextStageId:t};return e.resolve(n)}d.apply(null,arguments)}i.register("RefreshActionStage").asCtor(Op).asProto().dependencies("TimerManager, win, Consts, FlowDataPersister");function Op(t,n,r,o,a){var s=this;s.execute=p,s.destroy=g,s.Id=a.Id;var u,l,c="RefreshActionStage";function d(){u=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function p(){u.customerLog("{0}: Executing Refresh with step id {1}",c,s.Id);var r=e.Deferred();return o.saveWaitingForRefreshTrigger({refreshTrigger:a.Links[0].TargetFlowNodeId}),l=t.libSetTimeout(function(){n.location.reload(!0)},200),r.promise()}function g(){return u.customerLog("{0}: Destroying Refresh with step id {1}",c,s.Id),l&&l.clear(),e.Deferred().resolve()}d.apply(null,arguments)}i.register("SetDataActionStage").asCtor(Np).asProto().dependencies("ClientOrServerStorageManager, CookiesManager, JQueryElementFinder, CommonUtils, Consts, Lib");function Np(t,n,r,o,a,s,u){var l=this;l.execute=f,l.destroy=h,l.Id=u.Id;var c,d="SetDataActionStage",p={Value:"Value",Variable:"Variable",jQuery:"jQuery",Cookie:"Cookie",OnScreenElement:"OnScreenElement"};function g(){c=i.create("FeaturedLogger",{feature:a.FEATURES_LOGS.Flows})}function f(){var t=e.Deferred(),n=u.Settings.actionArgs;return v(n),m(t,u.Links[0].TargetFlowNodeId)}function h(){return c.customerLog("{0}: Destroying Set WalkMe Data with step id {1} step index {2}",d,l.Id,u.PointIndex),e.Deferred().resolve()}function m(e,t){c.customerLog("{0}: Set WalkMe Data - Moving to next step. From step id {0} to step id {1} step index {2}",d,l.Id,t,u.PointIndex);var n={nextStageId:t};return e.resolve(n)}function v(i){var s,g=i.dataType,f=i.key,h=i.duration,m=i.value,v=i.IdentifySettings;switch(g){case p.Value:s=m;break;case p.Variable:s=o.getWindowData(a.WINDOW_CUSTOM_DATA_TYPE.Var,m);break;case p.jQuery:var E=r.findElementsByjQueryComplexSelector(m);s=o.checkElementText(e(E));break;case p.Cookie:s=n.getCookie(m);break;case p.OnScreenElement:s=v?S(v):""}c.customerLog("{0}: Executing Set WalkMe Data with step id {1} step index {2}. Type {3}, Value {4}, Duration {5}",d,l.Id,u.PointIndex,g,s,h),t.saveData(f,s,h)}function S(t){var n=s.findElement(t);return n?o.checkElementText(e(n)):""}g.apply(null,arguments)}i.register("SplitActionStage").asCtor(Dp).asProto().dependencies("SplitFlowNodePlayableLinkProvider, Consts");function Dp(t,n,r){var o=this;o.execute=c,o.destroy=d;var a,s,u="SplitActionStage";function l(){a=r.node,o.Id=a.Id,s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function c(){var n=e.Deferred();s.customerLog("{0}: Executing Split with step id {1}",u,o.Id);var r=t.getPlayableLink(a);if(r)return s.customerLog("{0}: Split with step id {1} - Found link with id {2}",u,o.Id,r.Id),p(n,r);return s.customerLog("{0}: Split with step id {1} - No link was found"),g(n)}function d(){return s.customerLog("{0}: Destroying Split with step id {1}",u,o.Id),e.when()}function p(e,t){s.customerLog("{0}: Split - Moving to next step. From step id {0} to step id {1}",u,o.Id,t.TargetFlowNodeId);var n={nextStageId:t.TargetFlowNodeId,value:t.Name};return e.resolve(n)}function g(e){return e.reject()}l()}function Lp(t){var n=this;n.execute=i,n.destroy=o,n.Id=t.Id;function r(){}function i(){}function o(){return e.Deferred().resolve()}r.apply(null,arguments)}i.register("StopActionStage").asCtor(Lp).asProto(),i.register("WaitForConditionActionStage").asCtor(xp).asProto().dependencies("DebuggerManager, Consts, ConditionCheckerFactory, FlowEventRaiser");function xp(t,n,r,o,a){var s=this;s.execute=p,s.destroy=g,s.Id=a.Id;var u,l,c="WaitForConditionActionStage";function d(){l=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function p(){var i=e.Deferred(),d=a.ConditionTrees.WaitFor;l.customerLog("{0}: Executing Wait For Condition with step id {1}. Evaluating condition with id {2}",c,s.Id,d.Id);var p={evaluationPollingIntervalMs:500,featureName:"Wait For Condition",elementName:"Wait for condition node: "+a.Name};return u=r.createNew(p),u.onValueChanged(function(e){if(l.customerLog("{0}: Condition value changed for Wait For Condition step with id {1}. Result {2}",c,s.Id,e),t.isDebuggerOnWindow()&&o.raiseEventOnCurrentFlow(n.EVENTS.Flows.WaitForConditionEvaluated,{step:a}),e)return f(i,a.Links[0].TargetFlowNodeId)}),u.evaluateAsync(d),i.promise()}function g(){return l.customerLog("{0}: Destroying Wait For Condition with step id {1}",c,s.Id),u&&(u.cleanResources(),u=void 0),e.Deferred().resolve()}function f(e,t){l.customerLog("{0}: Wait For Condition - Moving to next step. From step id {0} to step id {1}",c,s.Id,t);var n={nextStageId:t};return e.resolve(n)}d.apply(null,arguments)}i.register("ErrorHandlingActionStage").asCtor(Fp).asProto().dependencies("ErrorHandlingSegmentationChecker, Consts, TimerManager");function Fp(t,n,r,o){var a=this;a.execute=c,a.destroy=d,a.backFromFlowGroup=p,a.Id=o.Id;var s,u="ErrorHandlingActionStage";function l(){s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function c(){var n=e.Deferred();s.customerLog("{0}: Executing Error Handling with step id {1} step index {2}",u,a.Id,o.PointIndex);var i=o.Links.length-1;if(t.isSegmented(o)){s.customerLog("{0}: Error Handling condition applies. Step id {1} step index {2}",u,a.Id,o.PointIndex);var l=o.Links[i].TargetFlowNodeId||o.Id;return r.playSetTimeout(function(){g(n,l,!0)},500),n.promise()}return s.customerLog("{0}: Error Handling condition does not apply. Step id {1} step index {2}",u,a.Id,o.PointIndex),g(n,o.Links[0].TargetFlowNodeId)}function d(){return s.customerLog("{0}: Destroying Error Handling with step id {1} step index {2}",u,a.Id,o.PointIndex),e.Deferred().resolve()}function p(){return s.customerLog("{0}: Back from Error Handling group - Step id {1} step index {2}",u,a.Id,o.PointIndex),c()}function g(e,t,n){s.customerLog("{0}: Error Handling - Moving to next step. From step id {1} step index {2} to step id {3}. (create flow group {4})",u,a.Id,o.PointIndex,t,n?n:"false");var r={currentNode:o,nextStageId:t,shouldCreateFlowGroup:n};return e.resolve(r)}l.apply(null,arguments)}i.register("ErrorHandlingSegmentationChecker").asCtor(Mp).dependencies("ObjectJpath, ConditionCheckerFactory");function Mp(e,t){var n=this;n.isSegmented=r;function r(t){var n=e.getValue(t,"ConditionTrees.ErrorHandle");if(!n||!n.Root)return!1;return i(t,n)}function i(e,n){var r={featureName:"evaluate error handling segmentation",elementName:e.Name},i=t.createNew(r);return i.getCurrentEvaluationValueAndStopEvaluating(n)}}i.register("OnPageActionStage").asCtor(Rp).asProto().dependencies("OnElementActionVisibilityEvaluator, OnElementActionExecutor, Consts, OnPageActionStageValueProvider");function Rp(t,n,r,o,a){var s=this;s.execute=p,s.destroy=g,s.Id=a.Id;var u,l="OnPageActionStage",c=!1;function d(){u=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function p(){var r=e.Deferred(),i=a.Settings.actionArgs;return u.customerLog("{0}: Evaluating visibility for On Page Action with id {1} step index {2}. On element action {3}",l,s.Id,a.PointIndex,i.onElementAction),t.evaluate(a.Id,i.IdentifySettings).then(function(){var e=t.getElement();u.customerLog("{0}: Element found. Executing On Page Action with step id {1} step index {2}",l,s.Id,a.PointIndex),n.execute(e,i,function(){c||f(r,a)})}),r.promise()}function g(){return c=!0,u.customerLog("{0}: Destroying On Page Action with step id {1} step index {2}",l,s.Id,a.PointIndex),t.cleanResources(),e.Deferred().resolve()}function f(e,t){var n=t.Links[0].TargetFlowNodeId,r=t.Settings.actionArgs;u.customerLog("{0}: On Page Action - Moving to next step. From step id {1} step index {2} to step id {3}",l,s.Id,t.PointIndex,n);var i={nextStageId:n,value:o.getValue(r)};return e.resolve(i)}d.apply(null,arguments)}i.register("OnPageActionStageValueProvider").asCtor(Bp).asProto().dependencies("Consts");function Bp(e){var t=this;t.getValue=i;var n;function r(){n={},n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.FillText]="fillText",n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.SelectListValue]="dropdownSelectedValue"}function i(e){var t=e.onElementAction;if(t in n){var r=n[t];return e[r]}}r()}i.register("StartPointSegmentationChecker").asCtor(Up).dependencies("ObjectJpath, Consts");function Up(e,t){var n=this;n.isSegmented=r;function r(t){var n=e.getValue(t,"ConditionTrees.StartPoint");if(!n||!n.Root)return!1;var r=o(t,n);return a(r)}function o(e,n){var r={logContext:e.Id,isRemoveByCondition:!1,stickyType:t.STICKY_TYPE.ONCE,conditionCheckerParams:{featureName:"evaluate start point segmentation",elementName:e.Title},conditionTree:n};return e.IdentifySettings&&(r.elementVisibilityParams={findElementParams:{IdentifySettings:e.IdentifySettings}},r.trackUIChanges=!0),r}function a(e){var t=i.create("UIVisibilityManager",e);
t.watchForVisibility();var n=t.shouldShow();return t.cleanResources(),n}}i.register("FlowStartingStageProvider").asCtor(Vp).dependencies("BaseGraphDfsService, StartPointSegmentationChecker");function Vp(e,t){var n=this;n.getStageData=r;function r(t){var n={};return e.runDfs(t,{afterPointDescendantsVisited:function(e){i(e,n)}}),{startingNodeId:n.nodeId||t.RootFlowNodeId,startingUiElementId:n.uiElementId,startedFromStartPoint:!!n.nodeId}}function i(e,n){if(n.nodeId)return;t.isSegmented(e.point)&&(n.nodeId=e.node.Id,n.uiElementId=e.uiElement?e.uiElement.Id:void 0)}}i.register("FlowStartPointOrderCreator").asCtor(Wp).dependencies("Consts");function Wp(t){var n,r,i=this;i.createNodesStack=o;function o(e){n=[],r=[];var t=e.RootFlowNodeId;for(r.push(t);r.length>0;){var i=r.shift(),o=e.Nodes[i];a(o)}return n}function a(e){switch(e.Type){case t.FLOW_STEP_TYPE.UI:l(e);break;case t.FLOW_STEP_TYPE.Action:s(e)}}function s(e){p(e,e.Id),u(e)}function u(e){for(var t=e.Links,n=t.length-1;n>=0;n--)d(t[n])}function l(e){for(var t=e.UIElements,n=t.length-1;n>=0;n--){var r=t[n];p(r,e.Id),c(r)}}function c(e){for(var t=e.Triggers,n=t.length-1;n>=0;n--)d(t[n])}function d(e){var t=e.TargetFlowNodeId;t&&r.push(t)}function p(t,r){var i=t.ConditionTrees&&t.ConditionTrees.StartPoint;i&&!e.isEmptyObject(i)&&n.push({point:t,nodeId:r})}}i.register("OnElementActionVisibilityEvaluator").asCtor(Gp);function Gp(){var t=this;t.evaluate=r,t.cleanResources=a,t.getElement=o;var n;function r(t,r){var o=e.Deferred(),a={logContext:t,findElementParams:{IdentifySettings:r},elementEvaluationIntervalMs:500};return n=i.create("ElementVisibilityEvaluator",a),n.setOnVisibilityChanged(function(){o.resolve()}),n.evaluateElementVisibilityAsynch(),o.promise()}function o(){if(n)return n.getElement()}function a(){n&&n.cleanResources()}}i.register("OnElementActionExecutor").asCtor(Hp).dependencies("InputGenerator");function Hp(e){var t=this;t.execute=i;var n={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue",Tap:"Tap",Swipe:"Swipe"};function r(){}function i(t,r,i){var o=r.onElementAction;switch(o){case n.Click:case n.Tap:e.click(t,i);break;case n.Hover:e.hover(t,i);break;case n.Focus:e.focus(t,i);break;case n.FillText:var a=r.fillText;e.text(t,a,void 0,i);break;case n.SelectListValue:var s=r.dropdownSelectedValue;e.selectByText(t,s,i);break;case n.Swipe:e.swipe(t,i)}}r.apply(null,arguments)}i.register("FlowManager").asCtor(jp).asProto().dependencies("Consts, CommonEvents, wmjQuery, WalkMeGoalsManager, PlayGuidGenerator");function jp(e,t,n,r,i,o){var a=this;a.unbindEventPropagation=p;var s;function u(){s=o.businessSolutionModel,l()}function l(){n(s.Flow).on(e.FLOW_INNER_EVENTS.EventPropogationPrefix,function(e,r){var i={businessSolutionId:s.Id,businessSolutionName:s.Name};i=n.extend(i,r),t.raiseEvent(r.eventType,i),c(r.eventType)})}function c(t){t==e.FLOW_INNER_EVENTS.FlowIsPlaying&&d()}function d(){r.startWatchingDeployable(s,i.generateNewPlayGuid(s.Id))}function p(){n(s.Flow).off(e.FLOW_INNER_EVENTS.EventPropogationPrefix)}u()}i.register("FlowManagerCreator").asCtor(Yp);function Yp(){var e=this;e.create=t;function t(e){return i.create("FlowManager",{businessSolutionModel:e})}}i.register("FlowsManager").asCtor(zp).dependencies("FlowManagerCreator, PromiseUtils, FlowsContainer");function zp(t,n,r){var i=this;i.init=s,i.stopAllFlowEventsPropagation=l;var o,a;function s(e){o=e;var t=u();r.init(t)}function u(){var e=[];a=[];for(var n=0;n<=o.length-1;n++){var r=o[n];a.push(t.create(r)),e.push(r.Flow)}return e}function l(){if(!a)return e.when();return n.executeParallelyOnArray(a,c)}function c(e){return e.unbindEventPropagation()}}var Qp=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u){t.call(this,{lib:e,type:n.DEPLOYABLE_TYPE.BusinessSolution}),this.consts=n,this.promiseUtils=r,this.smartTipSetsManager=i,this.flowsManager=o,this.permalinkManager=a,this.initiatorManager=s,this.logger=u,this._name="Flow",this._bizFlowApi=void 0,this.setDeployables([])}return n.prototype.setDeployables=function(n){if(!n)return;var r=e.grep(n,function(e){return e.SmartTips&&e.SmartTips.length>0});this.smartTipSetsManager.init(r);var i=e.grep(n,function(e){return!!e.Flow});this.flowsManager.init(i),t.prototype.setDeployables.call(this,n)},n.prototype.activateById=function(e,n,r){try{var i=t.prototype.getById.call(this,e);if(!i)return this.logger.customerLog(kf("Failed playing bizflow with id {0} - The Id {0} does not exist.",e),3),!1;if(void 0!=r&&!i.Flow.Nodes[r])return this.logger.customerLog(kf("Failed playing bizflow with id {0} - The NodeId {1} does not exist.",e,r),3),!1;var o=this.getBizFlowApi();return this.initiatorManager.setForScope(n,function(){o.start(i.Flow.Id,r,i.Name,n)}),!0}catch(a){return this.logger.customerLog(kf("Failed playing bizflow with id {0}. Exception is {1}",e,a),3),!1}},n.prototype.releaseAll=function(){return this.promiseUtils.executeParallely([this.destroySmartTipSetManagers(),this.destroyFlowPlayer(),this.destroyFlowManagers()])},n.prototype.restore=function(){return this.permalinkManager.isTrainingInStartingMode()?e.when():this.getBizFlowApi().restore()},n.prototype.autoStartEnabled=function(e){if(this.permalinkManager.isTrainingInStartingMode())return!1;return!0},n.prototype.destroyFlowPlayer=function(){return this.getBizFlowApi().pause()},n.prototype.destroySmartTipSetManagers=function(){return this.smartTipSetsManager.turnOffAllSets()},n.prototype.getBizFlowApi=function(){return this._bizFlowApi||(this._bizFlowApi=i.get("BizflowApi")),this._bizFlowApi},n.prototype.destroyFlowManagers=function(){return this.flowsManager.stopAllFlowEventsPropagation()},n}(si);i.register("BusinessSolutionsManager").asCtor(Qp).dependencies("Lib, Consts, PromiseUtils, SmartTipSetsManager, FlowsManager, PermalinkManager, InitiatorManager, Logger"),i.register("FlowsPlayer").asCtor(Kp).dependencies("StageCreator, FlowDataPersister, CommonUtils, Consts, FlowStack, FlowInnerGroupService, FlowTransitionChecker, FlowsContainer, FlowGroupEventRaiser, FlowEventRaiser, FlowGroupLastStageIndicator,FlowVisualStepsIndicator, DeployableSafeStartExecuter, DeployableTypes, LibDestroyer, FlowStartPointDataProvider");function Kp(t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v){var S=this;S.execute=x,S.backFromFlowGroup=L,S.stop=I,S.pause=b,S.play=w;var E,T,y;function C(){E=void 0,T=i.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}function I(){return T.customerLog("FlowPlayer stop - Stopping current flow"),a.clear(),A()}function b(){return T.customerLog("FlowPlayer pause - Pausing current flow"),A()}function w(e,t){T.customerLog("FlowPlayer play from flow with id {0} stage id {1}",e,t),m.releaseBalloons(),s.pushInnerGroupIfExists(e,t),a.push(e,t),n.saveIsFirstVisualStep(!0),g.init(e),c.raiseFlowStartedEvent(e,t),d.raiseEventOnCurrentFlow(o.FLOW_INNER_EVENTS.FlowIsPlaying,{}),x(e,t,o.FLOW_PLAY_MODES.PLAY)}function _(t){T.customerLog("FlowPlayer onStageSuccess - next stage id: {0}{1}",t.nextStageId,t.nextFlowId?", next flow id: "+t.nextFlowId:""),A();var n=a.peek();t=e.extend({step:l.getNodeById(n.flowId,n.stageId)},t),d.raiseEventOnCurrentFlow(o.EVENTS.Flows.AfterCompletingFlowStage,t);var r=t.nextStageId;if(t.currentNode&&p.setPreviousGroupHasNextStage(t.shouldCreateFlowGroup,t.currentNode),t.shouldCreateFlowGroup){var i=t.nextFlowId;i||(i=n.flowId),T.customerLog("FlowPlayer new flow group - flow {0} with node {1}",i,r);var s=a.peek();t.isBranch&&!t.currentNode.Links[0].TargetFlowNodeId&&a.pop(),r=v.get(i,r).startingNodeId,a.push(i,r),t.isBranch&&c.raiseFlowBranchedEvent(i,r,s.stageId),d.raiseEventOnCurrentFlow(o.FLOW_INNER_EVENTS.FlowIsPlaying,{}),x(i,r)}else r?k(r):R()}function P(e,t){if(T.customerLog("FlowPlayer onStageError - params: {0}",r.toJSON(e)),e&&e.nextStageId)_(e);else{var i=e&&e.lostOwnership;if(!i){if(e&&!e.wasElementShown&&n.getIsFirstVisualStep()){var a={flowId:t,eventParams:e},s=l.getFlowById(t);y==o.FLOW_PLAY_MODES.PLAY&&(n.getSafeStartFlowId()||(e.isSafeStartHandling=f.handleSafeStart(h.BusinessSolution,s,a)),d.raiseEventOnCurrentFlow(o.EVENTS.Flows.FailedToStart,e))}else p.removePreviousGroupHasNextStage(),d.raiseEventOnCurrentFlow(o.EVENTS.Flows.FlowStopped,e);I()}}}function A(){if(!E)return e.Deferred().resolve().promise();var t=E.destroy();return E=null,t}function k(e){T.customerLog("FlowPlayer transition - Transitioning to node {0}",e),a.updateTopStageId(e),N().then(D)}function O(){var e=a.peek();n.saveIsGroupBack(!0),N().then(function(){L(e.flowId,e.stageId)})}function N(){return u.canContinue()}function D(){var e=a.peek();x(e.flowId,e.stageId)}function L(e,t,r){n.clearIsGroupBack(),F(e,t,o.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP,r)}function x(e,t,n){F(e,t,o.FLOW_STAGE_ACTIONS.EXECUTE,n)}function F(e,r,i,a){T.customerLog("FlowPlayer run - Running flow id: {0}, node id: {1} with action: {2}",e,r,i),a&&(y=a);var s=l.getFlowById(e);if(E=t.createStage(s,r)){d.raiseEventOnCurrentFlow(o.EVENTS.Flows.BeforeExecutingFlowStage,{step:l.getNodeById(e,r)});var u=n.getSafeStartFlowId();E[i]().progress(M).then(_,function(t){P(t,e)}).always(function(){u&&n.saveSafeStartFlowId(void 0)})}else R()}function M(e,t){if("stageShown"!=e)return;d.raiseEventOnCurrentFlow(o.EVENTS.Flows.UIFlowStageShown,t)}function R(){var e=a.pop();if(T.customerLog("FlowPlayer flowGroupCompleted - With previous group settings flowId: {0}, stageId: {1}",e.flowId,e.stageId),!a.isEmpty()){var t=a.peek().flowId;return O(),void(e.flowId!=t&&d.raiseEventOnCurrentFlow(o.EVENTS.Flows.FlowBranchReturned,{flowId:e.flowId}))}I(),d.raiseEventOnCurrentFlow(o.EVENTS.Flows.FlowCompleted,{flowId:e.flowId})}C()}i.register("FlowsRestorer").asCtor(qp).dependencies("Consts, FlowStack, FlowEventRaiser, FlowVisualStepsIndicator, FlowDataPersister, FlowsContainer,FlowsPlayer, FlowStartingStageProvider");function qp(e,t,n,r,o,a,s,u){var l=this;l.restore=p;var c;function d(){c=i.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}function p(){if(c.customerLog("FlowsRestorer restore - restoring current flow"),t.isEmpty())c.customerLog("FlowsRestorer restore - nothing to restore");else{n.raiseEventOnCurrentFlow(e.EVENTS.Flows.RestoringFlow,{});var i=t.peek();r.init(i.flowId),g(i)}}function g(t){var n=h(t),r=f();s[r](t.flowId,n,e.FLOW_PLAY_MODES.RESTORE)}function f(){return o.getIsGroupBack()?e.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP:e.FLOW_STAGE_ACTIONS.EXECUTE}function h(r){var i=o.getWaitingForRefreshTrigger(),s=r.stageId;return i?(c.customerLog("FlowsRestorer restore - refresh happened, skipping stage id {0} and moving to {1}",s,i.refreshTrigger),n.raiseEventOnCurrentFlow(e.EVENTS.Flows.AfterCompletingFlowStage,{step:a.getCurrentNode(),firedTrigger:i.firedTrigger,uiElementId:i.uiElementId}),o.clearWaitingForRefreshTrigger(),s=i.refreshTrigger,t.updateTopStageId(s)):s||(s=m(r.flowId),t.updateTopStageId(s)),s}function m(e){var t=a.getFlowById(e);return u.getStageData(t).startingNodeId}d()}i.register("FlowPlayerMetadata").asInstance({lastTriggerFired:void 0}),i.register("FlowDataValidator").asCtor(Xp);function Xp(){var t=this;t.isFlowsArrayValid=n;function n(t,n){return e.isArray(t)&&r(t,n)}function r(t,n){var r=e(t).filter(function(e,t){return void 0!=n&&t.flowId==n||void 0!=t.flowId&&void 0!=t.stageId});return r.length==t.length}}i.register("FlowDataPersister").asCtor(Jp).dependencies("ClientStorageManager, FlowDataValidator, FlowDataPersisterConsts");function Jp(e,t,n){var r=this;r.getPlayGuid=m,r.getFlows=v,r.getIsFirstVisualStep=S,r.getWaitingForRefreshTrigger=E,r.getSafeStartFlowId=T,r.getPlayInitiator=y,r.getIsGroupBack=C,r.load=h,r.saveFlows=a,r.savePlayGuid=s,r.saveIsFirstVisualStep=u,r.saveWaitingForRefreshTrigger=l,r.saveSafeStartFlowId=c,r.savePlayInitiator=d,r.saveIsGroupBack=p,r.clearWaitingForRefreshTrigger=g,r.clearIsGroupBack=f;var i;function o(){i={}}function a(e){i.flows=e,I()}function s(e){i.playGuid=e,I()}function u(e){i.isFirstVisualStep=e,I()}function l(e){i.isWaitingForRefresh=e,I()}function c(e){i.safeStartFlowId=e,I()}function d(e){i.playInitiator=e,I()}function p(e){i.isGroupBack=e,I()}function g(){l(void 0)}function f(){p(void 0)}function h(){i=b()}function m(){return i.playGuid}function v(){return i.flows}function S(){return i.isFirstVisualStep}function E(){return i.isWaitingForRefresh}function T(){return i.safeStartFlowId}function y(){return i.playInitiator}function C(){return i.isGroupBack}function I(){e.saveData(n.FLOW_STACK_NAME,i,n.FLOW_STACK_STORE_TIME)}function b(){var r=e.getData(n.FLOW_STACK_NAME);return r&&t.isFlowsArrayValid(r.flows,r.safeStartFlowId)?r:{flows:[]}}o.apply(null,arguments)}i.register("FlowDataPersisterConsts").asInstance({FLOW_STACK_NAME:"wm-flow-stack",FLOW_STACK_STORE_TIME:600}),i.register("FlowStack").asFunction($p).dependencies("FlowDataPersister");function $p(t){var n=i.create("Stack"),r=n.push;n.push=s,n.updateTopStageId=a,n.load=u;function o(){var t=["push","pop","updateTopStageId","clear"];e(t).each(function(e,t){n[t]=l(n[t])})}function a(e){var t=n.peek();t.stageId=e}function s(e,t){r({flowId:e,stageId:t})}function u(){t.load(),n.init(t.getFlows())}function l(e){return function(){var r=e.apply(n,arguments);return t.saveFlows(n.getAll()),r}}return o(),n}i.register("BizflowApi").asCtor(Zp).dependencies("FlowsPlayer, FlowsRestorer, BizflowOwnershipManager, Consts, WalkthrusModule, FlowStack, FlowDataPersister, FlowGroupEventRaiser, FlowStartPointDataProvider");function Zp(e,t,n,r,o,a,s,u,l){var c=this;c.start=f,c.restore=g,c.stop=e.stop,c.pause=e.pause;var d;function p(){d=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function g(){a.load(),t.restore()}function f(t,r,i,a){d.customerLog("BizflowApi start - Starting flow {0} id {1}{2}",i,t,r?" from node "+r:""),e.stop().then(function(){s.savePlayInitiator(a),o.removeCrossUsersState();var e=l.get(t,r);u.raiseBeforeFlowStartedEvent(t,e),n.determineOwner(t,e.startingNodeId)})}p()}i.register("FlowEventRaiser").asCtor(eg).dependencies("Consts, FlowStack, FlowsContainer, wmjQuery");function eg(e,t,n,r){var i=this;i.raiseEventOnCurrentFlow=o,i.raiseEvent=a;function o(e,t){t=r.extend(s(),t),a(e,t)}function a(t,i){var o=n.getFlowById(i.flowId);i.eventType=t,r(o).trigger(e.FLOW_INNER_EVENTS.EventPropogationPrefix,i)}function s(){var e=t.peek();if(!e)return{};return{flowId:e.flowId,stageId:e.stageId}}}i.register("FlowGroupEventRaiser").asCtor(tg).dependencies("Consts, FlowEventRaiser, FlowPlayerMetadata");function tg(e,t,n){var r=this;r.raiseFlowStartedEvent=i,r.raiseFlowBranchedEvent=a,r.raiseBeforeFlowStartedEvent=o;function i(n,r){var i=s(n,r);t.raiseEvent(e.EVENTS.Flows.FlowStarted,i)}function o(n,r){t.raiseEvent(e.EVENTS.Flows.BeforeFlowStarted,{flowId:n,startPointUIElementId:r.startingUiElementId,startedFromStartPoint:r.startedFromStartPoint,startingStageId:r.startingNodeId})}function a(n,r,i){var o=s(n,r);o.branchOriginStageId=i,u()&&(o.isBbCodeTrigger=!0),t.raiseEvent(e.EVENTS.Flows.FlowBranched,o)}function s(e,t){return{flowId:e,requestedStageId:t,startingStageId:t}}function u(){return n.lastTriggerFired&&n.lastTriggerFired.Type==e.FLOW_TRIGGER_TYPE.BbCode}}i.register("FlowLinkedTaskCompletionHandler").asCtor(ng).dependencies("Consts, TodoListManager, WmInternals");function ng(e,t,n){var r=this;r.init=i;function i(){n.on(e.EVENTS.Flows.FlowCompleted,function(e,t){o(t.businessSolutionId)}),n.on(e.EVENTS.Flows.FlowBranchReturned,function(e,t){o(t.businessSolutionId)})}function o(n){t.updateDeployableCompleted(n,e.DEPLOYABLE_TYPE.BusinessSolution)}}i.register("BizFlowOnBeforeUnloadChecker").asCtor(rg).dependencies("Consts, WindowBeforeUnloadHandler, SiteConfigManager, TimerManager, FlowTransitionChecker, CrossDomainManager, FeaturesManager, FlowStack");function rg(t,n,r,i,o,a,s,u){var l=this;l.init=f,l.destroy=E;var c,d,p,g=3e3;function f(){h(),n.register(m),o.register(t.FLOW_TRANSITION_HANDLER_IDS.ON_BEFORE_UNLOAD,S)}function h(){c=!1,d=null,p=null}function m(){if(u.isEmpty())return;if(c=!0,i.pauseAllTimeouts(),!a.get().enabled()){d=e.Deferred(),p&&p.clear();var t=r.get().Settings.BeforeUnloadTimeout||g;p=i.setWalkmeTimeout(v,t)}}function v(){s.isFeatureEnabled("noUnload")&&i.resumeAllTimeouts(),d.resolve(),h()}function S(){return c?a.get().enabled()?(h(),a.get().loseOwnership(!1,!0),e.Deferred().reject()):d.promise():e.Deferred().resolve()}function E(){p&&p.clear(),h()}}i.register("SplitFlowNodePlayableLinkProvider").asCtor(ig).dependencies("FlowLinkSegmentationChecker, ObjectJpath");function ig(e,t){var n=this;n.getPlayableLink=i;function r(){}function i(t){for(var n=o(t.Links),r=0;r<n.length;r++){var i=n[r];if(!a(i)||e.isSegmented(i))return i}return null}function o(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];a(i)?t.push(i):n.push(i)}return t=t.concat(n)}function a(e){var n=t.getValue(e,"ConditionTrees.Branch.Root");return!!n}r()}i.register("FlowLinkSegmentationChecker").asCtor(og).dependencies("ConditionCheckerFactory");function og(e){var t=this;t.isSegmented=r;function n(){}function r(t){var n={featureName:"evaluate split node link segmentation",elementName:t.Name},r=e.createNew(n),i=r.getCurrentEvaluationValueAndStopEvaluating(t.ConditionTrees.Branch);return i}n()}i.register("FlowsContainer").asCtor(ag).dependencies("FlowStack");function ag(e){var t=this;t.init=r,t.getNodeById=o,t.getFlowById=i,t.getCurrentNode=a;var n;function r(e){n={};for(var t=0;t<e.length;t++)n[e[t].Id]=e[t]}function i(e){return n[e]}function o(e,t){return n[e].Nodes[t]}function a(){if(e.isEmpty())return;var t=e.peek();return o(t.flowId,t.stageId)}}i.register("FlowSurveyActivator").asCtor(sg).dependencies("WmInternals, Consts, BusinessSolutionsManager, DeployableSurveyActivator, FlowDataPersister");function sg(t,n,r,i,o){function a(){t.on(n.EVENTS.Flows.FlowCompleted,s),t.on(n.EVENTS.Flows.FlowStopped,u)}function s(e,t){l(t.businessSolutionId,n.SURVEY_START_EVENTS.WalkThruCompleted)}function u(e,t){l(t.businessSolutionId,n.SURVEY_START_EVENTS.WalkThruExited)}function l(e,t){var a=r.getById(e);if(!a.Surveys||0==a.Surveys.length)return;var s=c(a.Surveys,t);if(!s)return;var u="wm-SrvWtRep-"+n.DEPLOYABLE_TYPE.BusinessSolution+"-"+a.Id,l=n.SURVEY_FREQUENCY[s.Frequency],d={objectId:a.Id,type:n.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},p={businessSolutionId:a.Id,eventSource:t,surveyPlayGUID:o.getPlayGuid()};i.activateSurvey(s.SurveyId,u,l,d,p)}function c(t,r){var i=n.SURVEY_START_EVENTS.Both,o=void 0;return e.each(t,function(e,t){t.TriggerType!=r&&t.TriggerType!=i||(o=t)}),o}a()}i.register("FlowTransitionChecker").asCtor(ug).dependencies("Consts");function ug(t){var n=this;n.register=s,n.canContinue=u;var r,i,o;function a(){i=[],o=[],r={},r[t.FLOW_TRANSITION_HANDLER_IDS.DELAYER]=!0}function s(e,t){r[e]?i.push(t):o.push(t)}function u(){var t=e.Deferred();return l(i).then(function(){l(o).then(t.resolve,t.reject)},t.reject),t.promise()}function l(t){var n=e.map(t,c);return e.when.apply(e,n)}function c(e){return e()}a()}i.register("FlowTransitionDelayer").asCtor(lg).dependencies("Consts, FlowTransitionChecker, SiteConfigManager, TimerManager, FlowTransitionDelayerDefaultMap");function lg(e,t,n,r,i){var o=this;o.setDelayByTrigger=c,o.destroy=p;var a,s,u;function l(){u=mtjQuery.Deferred().resolve(),a=u,t.register(e.FLOW_TRANSITION_HANDLER_IDS.DELAYER,d)}function c(e){var t=g(e);t&&(a=mtjQuery.Deferred()),s=r.setWalkmeTimeout(a.resolve,t)}function d(){return a.promise()}function p(){s&&(s.clear(),s=null)}function g(e){return f()[e]||i[e]||0}function f(){return n.get().Settings.TriggersDelays||{}}l()}i.register("FlowTransitionDelayerDefaultMap").asCtor(cg).dependencies("Consts");function cg(e){var t={};return t[e.FLOW_TRIGGER_TYPE.Click]=1e3,t}i.register("NextExecutionFlowNodeProvider").asCtor(dg).dependencies("FlowNodeExtensions, SplitFlowNodeDecisionProvider");function dg(e,t){var n=this;n.getNextNodeToExecute=i;function r(){}function i(n){if(e.isSplitNode(n))return t.getNextNodeId(n);var r=e.getNodeConnectors(n);return r[0].TargetFlowNodeId}r()}i.register("SplitFlowNodeDecisionProvider").asCtor(pg).asProto().dependencies("SplitFlowNodePlayableLinkProvider");function pg(e){var t=this;t.getNextNodeId=r;function n(){}function r(t){var n=e.getPlayableLink(t);if(!n)return null;var r=n.TargetFlowNodeId;return r}n()}i.register("FlowExecutionTraverser").asCtor(gg).dependencies("FlowsContainer, NextExecutionFlowNodeProvider");function gg(e,t){var n=this;n.executionTraverse=i;function r(){}function i(n,r,i){var o={};a(r);function a(r){if(o[r])return;var s=e.getNodeById(n,r),u=i(s);if(!u)return;o[r]=1;var l=t.getNextNodeToExecute(s);l&&a(l)}}r()}i.register("FlowGroupLastStageIndicator").asCtor(fg).dependencies("ClientStorageManager, Consts");function fg(e,t){var n=this;n.setPreviousGroupHasNextStage=i,n.removePreviousGroupHasNextStage=o,n.isPreviousGroupHasNextStage=a;var r="wm-nls";function i(n,i){var u=a();if(n&&!u&&s(i)){var l=t.TIME_PERIODS.OneHourSeconds/2;e.saveData(r,i.Id,l)}else n||u!=i.Id||o()}function o(){e.removeData(r)}function a(){return e.getData(r,!1)}function s(e){return e.Links[0].TargetFlowNodeId}}i.register("UiFlowNodesExecutionStack").asCtor(hg).dependencies("Consts, FlowsContainer, FlowNodeExtensions, FlowStack, WmInternals, ButtonTriggersProvider");function hg(e,t,n,r,o,a){var s=this,u=i.create("Stack");s.clear=u.clear,s.push=u.push,s.pop=u.pop,s.isEmpty=u.isEmpty;function l(){c()}function c(){o.bind(e.EVENTS.Flows.FlowStarted,u.clear),o.bind(e.EVENTS.Flows.BeforeExecutingFlowStage,d),o.bind(e.EVENTS.Flows.AfterCompletingFlowStage,g)}function d(e,t){p(t)&&!v(t)||u.clear()}function p(e){var r=t.getNodeById(e.flowId,e.stageId),i=r&&n.isUiNode(r);return i}function g(e,t){f(t)&&m(t)&&u.push(r.peek().stageId)}function f(e){return!e.isFlowGoingBack}function h(e){var t=e.step,n=t.UIElements[0],r=a.get(n);return r.length>0}function m(e){return p(e)&&h(e)}function v(e){return p(e)&&!h(e)}l()}i.register("FlowInnerGroupService").asCtor(mg).dependencies("FlowsContainer, FlowStack, FlowGroupLastStageIndicator");function mg(e,t,n){var r=this;r.pushInnerGroupIfExists=i;function i(r,i){if(!i)return;var o,a=e.getFlowById(r),s=a.Nodes[i];o=s.ErrorHandlingParentId?s.ErrorHandlingParentId:s.Settings&&s.Settings.ErrorHandlingParentId,o&&(t.push(r,o),n.setPreviousGroupHasNextStage(!0,a.Nodes[o]))}}i.register("FlowVisualStepsIndicator").asCtor(vg).dependencies("Consts, FlowsContainer");function vg(t,n){var r=this;r.init=o,r.getTotalVisualSteps=a,r.getNextVisualStepIndex=s;var i;function o(e){u(e)}function a(){return i.length}function s(t){return e.inArray(t,i)+1}function u(e){var r,o=[],a=n.getFlowById(e),s=a.Nodes;for(var u in s)r=s[u],r.Type==t.FLOW_STEP_TYPE.UI&&(o=o.concat(r.UIElements));o.sort(c),i=l(o)}function l(t){return e.map(t,function(e){return e.Id})}function c(e,t){var n=e.PointIndex,r=t.PointIndex;return n<r?-1:1}}i.register("FlowSafeStartHandler").asCtor(Sg).dependencies("RedirectService, Consts, FlowStack, FlowDataPersister, FlowEventRaiser");function Sg(e,t,n,r,i){var o=this;o.auditSafeStartStatus=u,o.redirect=a,o.auditStayButtonClicked=s,o.auditSafeStartDisabled=l,o.auditSafeStartFirstStatus=u;function a(t,i){n.push(i.flowId),r.saveSafeStartFlowId(i.flowId),e.redirect(t)}function s(e){u(t.SAFESTART_ACTION.StayClicked,e)}function u(e,n){n.eventParams.status=e,n.eventParams.flowId=n.flowId,i.raiseEventOnCurrentFlow(t.EVENTS.Flows.SafeStartStatusChanged,n.eventParams)}function l(e){u(t.SAFESTART_ACTION.ErrorShown,e)}}var Eg=function(){function t(e,t,n,r,i,o){var a=this,s=o.css,u=o.Id;this.resourceManager=e,this.uiChangeTracker=t,this.timerManager=n,this.cssUtils=r,this._logger=i,this.uiChangeListener=function(){a.jSelectorsOff(),a.jSelectorsOn()},this.Id=u,this.DYNAMIC_CSS_CLASS="wm-dynamic-css-"+u+"-",this.parseCss(s)}return t.prototype.parseCss=function(e){var t=this.cssUtils.clearComments(e),n=this.secureScreen(t),r=this.replaceJQuerySelectors(n),i=r.pureCss,o=r.jSelectors;this._jSelectors=o,this._css=i},t.prototype.secureScreen=function(e){if(!this.cssUtils.isSecure(e))return this._logger.customerLog("[Dynamic Css] - Forbidden tokens detected - css reset to empty",3),"";return e},t.prototype.add=function(){try{0==this.getStyleSheet().length&&this.resourceManager.injectCss(this._css,this.getStyleSheetId()),this.jSelectorsOn(),this.uiChangeTracker.bind(this.uiChangeListener),this.listenToMutations()}catch(e){this._logger.customerLog("[Dynamic Css] - Faied to add css",3)}},t.prototype.remove=function(){this.getStyleSheet().remove(),this.jSelectorsOff(),this.uiChangeTracker.unbind(this.uiChangeListener),this.observer&&this.observer.disconnect()},t.prototype.replaceJQuerySelectors=function(t){var n=this,r=this.cssUtils.getSelectors(t),i=e.grep(r,function(e){return e&&!n.isCss(e)}).map(function(e,t){return{selector:e,"class":""+n.DYNAMIC_CSS_CLASS+t}}),o=e(i).reduce(function(e,t){return e.replace(t.selector,"."+t["class"])},t);return{pureCss:o,jSelectors:i}},t.prototype.isCss=function(e){try{return document.querySelector(e),!0}catch(t){return!1}},t.prototype.listenToMutations=function(){var e=this;window.MutationObserver&&(this.observer=new MutationObserver(function(){return e.timerManager.libSetTimeout(e.uiChangeListener,0)}),this.observer.observe(document,{childList:!0,subtree:!0}))},t.prototype.jSelectorsOn=function(){e(this._jSelectors).safeEach(function(t,n){var r=e(n.selector);r.addClass(n["class"])})},t.prototype.jSelectorsOff=function(){e(this._jSelectors).safeEach(function(t,n){var r=e("."+n["class"]);r.removeClass(n["class"])})},t.prototype.getStyleSheet=function(){return e("#"+this.getStyleSheetId())},t.prototype.getStyleSheetId=function(){return"wm-dymanic-css-"+this.Id},t}();i.register("DynamicCss").asCtor(Eg).asProto().dependencies("ResourceManager, UIChangeTracker, TimerManager, CssUtils, Logger"),i.register("FlowStartPointDataProvider").asCtor(Tg).dependencies("FlowsContainer, FlowStartingStageProvider");function Tg(e,t){var n=this;n.get=r;function r(n,r){if(r)return{startingNodeId:r};var i=e.getFlowById(n);return t.getStageData(i)}}i.register("FlowNodePlayIndicator").asCtor(yg).dependencies("FlowNodeExtensions, FlowExecutionTraverser");function yg(e,t){var n=this;n.isPlayable=i;function r(){}function i(e,n){var r=!1;return t.executionTraverse(e,n,function(e){var t=!0;return o(e)&&(r=!0,t=!1),t}),r}function o(t){return!e.isSplitNode(t)}r()}i.register("WalkthrusModule").asCtor(Cg).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, WalkthruBalloonContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer, AuditSourceProvider,BalloonDrawerProvider, LocationMatcher, DeployableTypes");function Cg(t,n,r,o,a,s,u,c,d,p,g,f,h,m,v,S,E,T,y,C,I,b,w,_,P,A,k,O,N,D){var L=this;L.setTutorials=Y,L.isTutorialPackageHidden=$,L.canShowTutorial=ie,L.stopTutorial=ge,L.startNewTutorial=fe,L.tutorialFinished=ye,L.executeTutorialNextStep=Ie,L.postWelcomeStep=Ye,L.executeCurrentStep=qe,L.executePreviousStep=Xe,L.getAction=z,L.getSiteConfigByTutorialId=J,L.isTutorialIdsExist=Z,L.isStepTrigger=ee,L.terminateTutorial=pe,L.checkTutorialSkipFirstStepCondition=ae,L.fillMissingStepAudits=Ee,L.getNextStepIncludingSplit=Pe,L.releaseEvents=Le,L.stepWasCompleted=Be,L.getPlayConditionMode=Ge,L.checkPlayStepCondition=He,L.executeTutorialStep=Oe,L.checkIfStepExistsWithSkippables=ze,L.isStepPlayable=Ke,L.checkTutorialRedirectCondition=se,L.loadTutorial=le,L.releaseBalloonsTimeouts=de,L.resetState=he,L.cleanCurrentStepResources=$e,L.addCurrentStepResource=Je,L.setMember=R,L.removeCrossUsersState=me,L.getMatchedSurvey=Se,L.getWalkthruSurveyFrequency=ve;var x={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},F={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},M="PSCTMode";function R(e,t){x[e]=t}var B="stepCheck",U={},V=[],W=!1,G=0,H="wm-wfow",j=[];function Y(e){U={};for(var t=0;t<e.length;t++)e[t].Steps&&n.fixSteps(e[t],r.get());o.setWalkthrus(e)}function z(e){if(void 0!=U[e.Id])return U[e.Id];var t=a.getSettingsValue(e.Settings,"action",null);if(!t)return s.customerLog("No action core. aborting..."),null;return U[e.Id]=i.get("ActionsFactory").get(t.actionType,t.arguments,u.STEP_PLAY_INITIATOR_ENUM.STEP,e),U[e.Id]}function Q(e){if(!V||0==V.length)return!1;for(var t=[],n=void 0,r=!1;V.length>0;){if(n=V.pop(),n.id==e){r=!0;break}t.push(n)}if(t.length>0)for(;t.length>0;)V.push(t.pop());return r}function K(e){for(var t=0;t<V.length;t++){var n=V[t];if(n.id==e)return!0}return!1}function q(e,t){V.push({id:e.Id,mode:t})}function X(e){var t=o.getWalkthruByIndex(e);if(x.tutorialRunSettingsMap[t.TutorialId]){var n=x.tutorialRunSettingsMap[t.TutorialId].siteConfig;n&&r.set(n)}}function J(e){var t;return t=x.tutorialRunSettingsMap[e]?x.tutorialRunSettingsMap[e].siteConfig:r.get()}function $(e){var t=x.tutorialRunSettingsMap[e.TutorialId];if(!t)return!1;return t.isPackageHidden}function Z(e){var t=c.map(e,o.getWalkthruIndexByWalkthruId),n=c.inArray(-1,t);return void 0==n||n==-1}function ee(e,t){if("number"==typeof e)return e==t;for(var n=e.split(","),r=0;r<n.length;r++)if(t+""==n[r])return!0;return!1}function te(e,t,n,r){for(var i=t;i<n;i++)if(r!=u.STEP_STATUS.SkippedByActionStep){var a=o.getWalkthruByIndex(e);d.deprecatedRaiseEvent("NewSkippedStep",a.Steps[i])}}function ne(e,t){var n=Array();if(!e.Conditions)return n;for(var r=0;r<e.Conditions.length;r++)e.Conditions[r].Type==t&&(void 0!=e.Conditions[r].IsEnabled&&1!=e.Conditions[r].IsEnabled||n.push(e.Conditions[r]));return n}function re(e){return ne(e,F.FIRST_STEP_MUST_EXIST).length>0}function ie(e){if(0==e.IsVisible)return!1;for(var n=ne(e,F.URL),r=!1,o=0;o<n.length;o++)if(oe(e,n[o])){r=!0;break}if(n.length>0&&!r)return!1;var s=a.getSettingsValue(e.Settings,"DOCTEnabled",0);if(1==s){var u=a.getSettingsValue(e.Settings,"DOCT","");if(""!=u)try{var l=i.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:e.Name}),c=l.getCurrentEvaluationValueAndStopEvaluating(u);if(d.deprecatedRaiseEvent("WtConditionEvaluated",e),!c)return d.deprecatedRaiseEvent("CannotShowWt",e),!1}catch(p){}}if(re(e)){if(0==e.Steps.length)return!1;var g=e.Steps[0];return t.findElement(g,null,null,'First Step Condition for "'+(g.StepTitle||g.StepText)+', Walk-Thru "'+e.Name+'"')}return d.deprecatedRaiseEvent("CanShowWt",e),!0}function oe(e,t){switch(t.Type){case F.URL:return!!N.isLocationMatchString(t.Content);default:s.error(new Error("Invalid condition type: "+t.Type))}}function ae(e){for(var t=o.getWalkthruByIndex(e),n=ne(t,F.SKIP_FIRST_STEP),r=0;r<n.length;r++){var i=n[r];if(N.isLocationMatchString(i.Content)){var a=i.ExtraData,u=a?a-1:1;return s.customerLog("The walk-thru has a skip step condition ("+i.Content+") which is true. Skipping to: "+u),u}}return 0}function se(e,t){var n=o.getWalkthruByIndex(e),r=ne(n,F.REDIRECT);if(0==r.length)return!1;return ue(r[0],t)}function ue(e,t){var n=e.Content;return t?g.redirect(n):g.canRedirect(n)}function le(e,t,n,r,a,l){try{i.get("WalkmeVisibleReporter").report(),v.stepAppearanceIndex=0;var c=o.getWalkthruByIndex(e);d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruLoaded,c),X(e),i.get("ContentsManager").removeContent(),r=p.defaultValue(r,E.generateNewPlayGuid(c.TutorialId)),n=p.defaultValue(n,!0),t=p.defaultValue(t,0);var g=void 0==l?t:l;0===t&&(t=ae(e)),ce(e,t,r,a,[],[],[]);try{a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.NONE},i.get("AuditWtsManager").auditWalkthruStart(c,a,g,t,r)}catch(f){s.error(f)}T.get()!=u.SOURCES.play&&i.get("WalkMeGoalsManager").startWatchingDeployable(c,r),Ye(e)}catch(h){s.error(h)}}function ce(e,t,n,r,o,a,s){de(),A.releaseBalloons(),i.get("FlowsPlayer").stop(),v.state=u.WALKTHRU_STATE.RUNNING,v.currentWalkthru=e,v.currentStep=t-1,v.stepPlayHistory=o,v.stepPlayStack=a,v.stepCompletedHistory=s,i.get("AuditStepsManager")._currentPlayGUID=n,
i.get("AuditStepsManager")._currentPlayInitiator=r,S.storeStateInCookie()}function de(){f.stopTimeoutsArray("playTimeouts"),x.executeTutorialNextStepNotFinished=!1}function pe(){v.stepPlayStack=[],A.releaseBalloons(),de(),d.raiseEvent("WalkthruAborted")}function ge(e,t){d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruStopped,v.getCurrentStep()),de(),A.releaseBalloons(),v.state=u.WALKTHRU_STATE.NOT_RUNNING;var n=v.currentStep;if(v.currentStep=-1,e||S.storeStateInCookie(),i.get("CrossDomainManager")&&i.get("CrossDomainManager").get().enabled()&&i.get("CrossDomainManager").get().reset(),!t){var r=v.getCurrentWalkthru();if(r&&r.Settings.survey){var o=u.SURVEY_START_EVENTS.WalkThruExited,a=r.Settings.survey.surveyId,s=ve(r.Settings.survey,o),l={objectId:r.Id,type:u.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};i.get("WalkthruSurveyActivator").activateSurvey(r,o,l,a,s,void 0,n)}}}function fe(e,t,n,r){var a=o.getWalkthruByIndex(e);return i.get("WalkthruStepsLoader").afterStepsLoaded(a&&a.TutorialId,function(){return l()});function l(){try{s.customerLog("startNewTutorial : Index = "+e+". From Step = "+t+" testMode: "+n),y.fixFlash(),X(e);var o=!1;if(i.get("AuditStepsManager")._currentPlayInitiator=r,t=p.defaultValue(t,0),n=p.defaultValue(n,!1),!n){if(v.state!=u.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!i.get("WalkthruOwnershipManager").walkthruStarted(e,t))return!0;he(!0,!0),i.get("CrossDomainManager").get().enabled()||me(),i.get("OldBalloonNotifier").closePopup()}d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruStarted,a);var l=[],c=t;t=i.get("PlayManager").findFirstStep(e,t,l);var g=0==t;if(t>0&&!n){var f=T.get();f==u.SOURCES.play||f==u.SOURCES.preview?te(e,c,t,u.STEP_STATUS.SkippedStartedFromBiggerStep):(o=!0,Ee(e,0,t,u.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==t&&(t=ae(e),t>0&&!n&&(o=!0,Ee(e,0,t,u.STEP_STATUS.SkippedByTutorialCondition)));if(!se(e,!1)&&t<0){if(n)return!1;i.get("AuditStepsManager").createPlayGuidIfNeeded(a.TutorialId);var h={tutorialIndex:e,wt:a,checkStepExistsTrace:l};if(!i.get("DeployableSafeStartExecuter").handleSafeStart(D.Tutorial,a,h)){for(var m=0;m<l.length;m++){var S=l[m].stepStatus==u.STEP_STATUS.SupposedToShow;i.get("AuditStepsManager").auditStep(a,a.Steps[l[m].stepIndex],l[m].stepStatus,S),te(e,l[m].stepIndex,l[m].stepIndex+1,l[m].stepStatus)}var E=l[l.length-1].stepIndex,C=a;Te(C,E),he()}}else{if(n)return!0;le(e,t,g,o?i.get("AuditStepsManager")._currentPlayGUID:void 0,r,c)}}catch(I){return s.error(I),!1}return d.deprecatedRaiseEvent("WtHasGuid",a,{playGuid:i.get("AuditStepsManager")._currentPlayGUID}),d.raiseEvent(u.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:i.get("AuditStepsManager")._currentPlayGUID}),!0}}function he(e,t){v.currentWalkthru=-1,v.state=u.WALKTHRU_STATE.NOT_RUNNING,v.currentStep=-1,v.splitPointStack=[],v.stepPlayHistory=[],v.stepPlayStack=[],v.stepCompletedHistory=[],v.lastBackButtonStepIndex=-1,i.get("AuditStepsManager")._currentPlayGUID="",x.executeTutorialNextStepNotFinished=!1,U={},x.dontContinueTutorial=!1,W=!1,e||(i.get("AuditStepsManager")._currentPlayInitiator=null),t||S.storeStateInCookie()}function me(){for(var e=i.get("UserGuidContainer").getAllUserGuids(),t=0;t<e.length;t++){var n=e[t];i.get("ClientStorageManager").removeData(u.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,n)}}function ve(e,t){var n=Se(e,t);return n.repeat||"visit"}function Se(e,t){if(e.startCondition==t||e.startCondition==u.SURVEY_START_EVENTS.Both)return e}function Ee(e,t,n,r){for(var a=t;a<n;a++){var s=o.getWalkthruByIndex(e);i.get("AuditStepsManager").auditStep(s,s.Steps[a],r)}}function Te(e,t){if(k.isInPlayMode()){var n=e.Steps[t],r={step:n,tutorial:e};d.raiseEvent("WalkthruFailedToStart",r)}else i.get("PopupNotificationsService").showWalkthruFailedToStartPopup(e)}function ye(e){A.releaseBalloons(),v.state=u.WALKTHRU_STATE.NOT_RUNNING,S.storeStateInCookie();var n=Ce(),r={hadSplit:!!n,finishAfterRefresh:!!e},a=v.getCurrentWalkthru();if(d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruCompleted,a,r),i.get("TodoListManager").updateDeployableCompleted(a.TutorialId,u.DEPLOYABLE_TYPE.Tutorial),a.Settings.survey){var s=u.SURVEY_START_EVENTS.WalkThruCompleted,l=a.Settings.survey.surveyId,c=ve(a.Settings.survey,s),p={objectId:a.Id,type:u.STEP_PLAY_INITIATOR_ENUM.WALKTHRU},g=v.currentStep;i.get("WalkthruSurveyActivator").activateSurvey(a,s,p,l,c,void 0,g)}if(n){var f=o.getWalkthruByIndex(n.tutorialIndex);d.deprecatedRaiseEvent("switchToWalkthru",f.Id),d.deprecatedRaiseEvent("BackFromBranch",f),ce(n.tutorialIndex,n.stepIndex,n.playGuid,n.playInitiator,n.stepPlayHistory,n.stepPlayStack,n.stepCompletedHistory),t.executeTutorialNextStep()}else v.stepPlayStack=[],i.get("CrossDomainManager").get().loseOwnership()}function Ce(){return v.splitPointStack.length>0?v.splitPointStack.pop():null}function Ie(){s.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),C.waitForFramesToLoad().then(be)}function be(){if(x.executeTutorialNextStepNotFinished)return void s.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);if(W)return W=!1,s.customerLog("executeTutorialNextStep: waiting for other window",5),s.customerLog("Waiting for other window..."),void we();if(x.dontContinueTutorial)return void s.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);if(v.getCurrentWalkthru().Steps.length-1==v.currentStep)return void ye();x.executeTutorialNextStepNotFinished=!0;var e=_e();s.customerLog(kf("Next step including split is: {0} seconds",e),5,l),f.playSetTimeout(function(){v.currentStep++;function e(){x.executeTutorialNextStepNotFinished=!1,qe()}v.currentStep>0&&!ee(v.getPreviousStep().End,u.WALKTHRU_STEP_TRIGGER.NOTHING)?A.releaseBalloons(e):e()},1e3*e)}function we(){i.get("ClientStorageManager").refreshGetData(),f.playSetTimeout(function(){var e=i.get("ClientStorageManager").getData(H,void 0,v.getCurrentWalkthru().userGuid);1==e?(s.customerLog("Other window finished. Resuming walk-thru here."),i.get("ClientStorageManager").saveData(H,0,u.DEFAULT_COOKIE_SECONDS,v.getCurrentWalkthru().userGuid),i.get("WalkthruStateRestorer").restoreCrossUsersState()):we()},500)}function _e(){var e=Pe();return null==e?0:e.Delay}function Pe(){return Ae(v.currentWalkthru,v.currentStep,0)}function Ae(e,t,n){var r=o.getWalkthruByIndex(e);if(r.Steps.length>t+1){var i=r.Steps[t+1];return i.TutorialIndex=e,i}var a=v.splitPointStack;if(a.length>n){var s=a[a.length-1-n];return Ae(s.tutorialIndex,s.stepIndex-1,n+1)}return null}function ke(){var e=v.stepPlayHistory;if(e.length<2)return!0;for(var t=0;t<e.length-1;t++){var n=o.getWalkthruByIndex(v.currentWalkthru),r=I.getStepById(e[t],n);if(!p.isDefined(r.Settings.action))return!1}return!0}function Oe(n){function c(e){s.customerLog(e,5,l)}var g=p.getTimer(c),E={};G!=n.Id&&v.stepAppearanceIndex++,n.playNumber=v.stepAppearanceIndex,G=n.Id,d.raiseEvent(u.EVENTS.Walkthrus.StepExecuting,{playNum:v.stepAppearanceIndex});var T=o.getWalkthruByIndex(v.currentWalkthru),y=kf("Processing step # {0} . Step title: {1}. Walkthru: {2}",n.StepIndex+1,n.StepTitle,T.Name);if(s.customerLog(y),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepStarted,n),b.isFeatureEnabled("highPerf")||i.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),v.state!=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&v.state!=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&v.state!=u.WALKTHRU_STATE.WAITING_FOR_CONDITION){var C=_.isActionStep(n)?u.STEP_STATUS.Shown:u.STEP_STATUS.SupposedToShow;i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,C)}var w=Ge(n),A=L.checkPlayStepCondition(n);if(!A&&(w==u.playConditionModes.PLAY_CONDITION||w==u.playConditionModes.BOTH&&v.state!=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return s.customerLog("Play step condition is false. Skipping step."),i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.SkippedByCondition),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepSkipped,n),void Ie();if(We(n)){var k=ze(v.currentWalkthru,n.StepIndex,0,1,void 0,u.CHECK_STEP_MODE.Normal);if(k==-1)return s.customerLog("Keep looking for element after popup."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.LookingForStepElement,n,{playGUID:i.get("AuditStepsManager")._currentPlayGUID}),v.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT,f.playSetTimeout(function(){qe()},500),void S.storeStateInCookie();if(k==-2||k==-5){var N="Play condition isn't met, skipping the popup.";return k==-5&&(N="Loop detecetd"),s.customerLog(N),i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.SkippedNotFound),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepSkipped,n),void Ie()}}var D=void 0;if(A||v.state!=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var x={},F=p.getTimer(c);D=t.findElement(n,null,x,"Step - Play Condition"),E.FETime=F("Done looking for sticky step named "+(n.StepTitle||n.StepText)+" with id "+G),n.Score=x.score}else s.customerLog("Sticky PlayCondition isn't met."),D=!1;if(D){if(D&&D!==!0){s.customerLog("Element found:"),s.customerLog(D);var M,R=P.getComplexHtmlElements(n,D);R&&(D=R.elements,M=R.parentElement)}d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepElementFound,n),d.raiseEvent("BeforeNewStepShown");var B=v.stepPlayStack.length>0?v.stepPlayStack[v.stepPlayStack.length-1]:null,U=B?I.getStepById(B).StepIndex:null;if(je(n.Id),a.getSettingsValue(n.Settings,"fake",!1))return s.customerLog("This is a fake step. Continue to next step."),S.storeStateInCookie(),i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.FakeFound),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.FakeStep,n),void Ie();if(v.state=u.WALKTHRU_STATE.RUNNING,_.isActionStep(n))return void f.playSetTimeout(function(){z(n).doAction(),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepPerforming,n)},100);var V=i.get("TriggersManager").handle(D,n,v.currentStep,v.currentWalkthru,U),H=V.executeNextStep,j=V.clearElementEventsFuncs,Y=V.buttons;a.getSettingsValue(n.Settings,"waitOtherWindow",!1)&&(W=!0),E.logicTime=g("Finished pre-balloon logic");var Q=n.StepTitle,K=n.StepText,q=i.create("Balloon",{element:D,parentElement:M,forceEmbedBalloonInIframe:!1,positionHelper:h,dontShowIoBalloon:!b.isFeatureEnabled("multSpot")&&Re(n),isFirstStep:ke(),stepSettings:n.Settings,text:{title:Q,content:K,subText:xe()},end:n.End,position:n.Position,buttons:{next:Y.nextButton,done:Y.doneButton,back:Y.backButtonStepIndex>=0},data:{balloonEntityId:n.Id,containerEntityId:n.TutorialId,type:n.Type},configuration:n.Configuration,logger:s,drawer:O.getBalloonDrawer(n.Configuration,n),siteConfig:r.get(),bindButtonsFunc:i.get("BalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:n.DesignTemplatePlaceholderConfigs,placeholderVariableValues:Fe(),initiatorData:{initiator:n,type:u.STEP_PLAY_INITIATOR_ENUM.STEP}});if(q.onDestroy(function(){Le(D,elementEvents)}),q.setReleaseEvents(j),m.add(q),S.storeStateInCookie(),i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.Shown),b.isFeatureEnabled("jawsAccessibility")){var X=Q||K;Q&&K&&(X+=". "+K),X&&D.attr("alt",X)}q.Show(!0,function(t,r){e.extend(!0,E,t),Ne(r,n);var i={Element:D,Balloon:r};d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepShown,n,i),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepPerforming,n,i),q.SetTimeoutOn(),H&&(Be(),Ie())}),a.getSettingsValue(n.Settings,"isSelfExecuting",!1)&&De(n,D)}else s.customerLog("Element not found."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepElementNotFound,n,{playGUID:i.get("AuditStepsManager")._currentPlayGUID}),v.state==u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(s.customerLog("Step was sticky. Keep looking for the element."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WaitingForStickyStep,n),v.state=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,f.playSetTimeout(function(){qe()},500),S.storeStateInCookie()):n.IsSkippable||a.getSettingsValue(n.Settings,"skipNotExists",!1)?(_.isActionStep(n)?(s.customerLog("Action step isn't valid. Skipping to next step."),i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.NonValidActionStep)):(s.customerLog("Skippable step. Skip to next step."),i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.SkippedNotFound)),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepSkipped,n),Ie()):(s.customerLog("Keep looking for the element."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.LookingForStepElement,n,{playGUID:i.get("AuditStepsManager")._currentPlayGUID}),v.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT,f.playSetTimeout(function(){qe()},500),S.storeStateInCookie())}function Ne(e,t){var n={balloonDiv:e,step:t};d.raiseEvent(u.EVENTS.Walkthrus.ShowStepBalloon,n)}function De(e,t){f.libSetTimeout(n,1e3*e.Settings.reactionTime||u.DEFAULT_REACTION_TIME);function n(){var n=r();switch(n){case u.WALKTHRU_STEP_TRIGGER.CLICK:s.customerLog("Self Executed Step - Trigger: Click",3),w.click(t);break;case u.WALKTHRU_STEP_TRIGGER.HOVER:s.customerLog("Self Executed Step - Trigger: Hover",3),w.hover(t);break;case u.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:s.customerLog("Self Executed Step - Trigger: Text Input",3),w.text(t,e.Settings.selfExecuteText,void 0,void 0,e);break;case u.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var i=e.Settings.complexHtml&&e.Settings.complexHtml.val;i?(w.select(t,i),s.customerLog("Self Executed Step - Trigger: Select Value",3)):s.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:s.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),x.dontContinueTutorial=!1,Ie()}}function r(){var t=e.End.split(/,/);return t[0]==u.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&t.length>1?p.getInt(t[1]):p.getInt(t[0])}}function Le(e,t){for(var n=0;n<t.length;n++)e.unbind(t[n]+".mt");return!1}function xe(){var e=r.get().StepsInfoText,t=Fe(),n=t.totalVisibleSteps,i=t.passedVisibleSteps;return b.isFeatureEnabled("floatingsubtext")?(e=e.replace("{0}",u.SUBTEXT_CURRENT_START+i+u.SUBTEXT_CURRENT_END),e=e.replace("{1}",u.SUBTEXT_TOTAL_START+n+u.SUBTEXT_TOTAL_END)):(e=e.replace("{0}",i),e=e.replace("{1}",n)),e}function Fe(){for(var e=o.getWalkthruByIndex(v.currentWalkthru).Steps,t=0,n=0,r=0;r<e.length;r++)Me(e[r])&&(t++,r<=v.currentStep&&n++);return{totalVisibleSteps:t,passedVisibleSteps:n}}function Me(e){return!(e.Type==u.STEP_TYPE.Action||parseInt(a.getSettingsValue(e.Settings,"isInvisible",0))||parseInt(a.getSettingsValue(e.Settings,"fake",0)))}function Re(e){var t=e,n=v.stepPlayHistory;if(n.length>1){var r=o.getWalkthruByIndex(v.currentWalkthru);t=I.getStepById(n[n.length-2],r)}return ee(e.End,u.WALKTHRU_STEP_TRIGGER.NOTHING)||ee(t.End,u.WALKTHRU_STEP_TRIGGER.NOTHING)}function Be(e){e=p.defaultValue(e,!0);var t=v.getCurrentStep();d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepCompleted,t),Ue(t),e?(i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),t,u.STEP_STATUS.Performed),Ve(t)):i.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),t,u.STEP_STATUS.MovedBack)}function Ue(e){v.stepCompletedHistory.push(e.Id)}function Ve(e){var t=a.getSettingsValue(e.Settings,"resumeOtherWindow",!1);t&&i.get("ClientStorageManager").saveData(H,1,u.DEFAULT_COOKIE_SECONDS,v.getCurrentWalkthru().userGuid)}function We(e){if(e.Type!=u.STEP_TYPE.Popup)return!1;return 1==a.getSettingsValue(e.Settings,"popup-play-condition",0)}function Ge(e){return a.getSettingsValue(e.Settings,M,u.playConditionModes.PLAY_CONDITION)}function He(e){var t=a.getSettingsValue(e.Settings,"skipStepCond","");if(t.length>0)try{return!i.get("ConditionEvaluator").evaluate(t)}catch(n){return!0}var r=a.getSettingsValue(e.Settings,"PSCTEnabled",0);if(1!=r)return!_.isActionStep(e)||"never"!=a.getSettingsValue(e.Settings,"whenToFire","");var o=a.getSettingsValue(e.Settings,"PSCT","");if(""==o)return!0;try{var s=i.get("ConditionTreeEvaluator").evaluate(o);return d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepHasPlayCondition,e,{playGUID:i.get("AuditStepsManager")._currentPlayGUID}),s}catch(n){return!1}}function je(e){v.stepPlayHistory.push(e);var t=v.stepPlayStack.length>0?v.stepPlayStack[v.stepPlayStack.length-1]:null;t!=e&&v.stepPlayStack.push(e)}function Ye(e){if(v.currentStep==-1&&se(e,!0))return;Ie()}function ze(e,n,r,l,c,d,g){return i.get("ElementFinder").wrapSession(function(){function i(t){if(!We(t)||1!=l)return t.StepIndex;var n=o.getWalkthruByIndex(e);if(n.Steps.length>t.StepIndex){var i=ze(e,t.StepIndex+1,r,l,c,u.CHECK_STEP_MODE.Normal);return i<0?i:t.StepIndex}}function f(e){var t=z(e);if(t.getGoToData){var n=t.getGoToData(),i=ze(n.tutorialIndex,n.stepIndex,r,l,c,u.CHECK_STEP_MODE.Normal);if(i<0)return i}else if("stopWt"==t.type)return-2;return e.StepIndex}function h(e,t){return Q(t),s.customerLog("returned checking "+n+" ("+E.Id+") result: "+e,5,B),e}function m(e,t){c&&c.push({stepIndex:e,stepStatus:t})}var S=o.getWalkthruByIndex(e),E=S.Steps[n];l=p.defaultValue(l,1),r=p.defaultValue(r,0);var T=K(E.Id);if(s.customerLog("Checking if step index "+n+" ("+E.Id+") can be played. looped: "+T+" on mode:"+d,5,B),q(E,d),T)return h(-5,E.Id);var y=Ge(E),C=!0;y!=u.playConditionModes.STICKY_CONDITION&&(C=L.checkPlayStepCondition(E));var I=a.getSettingsValue(E.Settings,"fake",!1),b=a.getSettingsValue(E.Settings,"skipNotExists",!1),w=b||E.IsSkippable||!C||I;if(m(n,Qe(w,C)),C&&!I&&t.findElement(E,null,null,"Step - Find Element "+(g||"")))return _.isActionStep(E)?h(f(E),E.Id):_.isPopupStep(E)?h(i(E),E.Id):h(n,E.Id);var P=n+l;if(w){var A;if(P<0)return h(-2,E.Id);if(P==S.Steps.length){var k=v.splitPointStack;if(k.length>r){var O=k[k.length-1-r];return A=ze(O.tutorialIndex,O.stepIndex,r+1,l,c,u.CHECK_STEP_MODE.Normal),s.customerLog("Checking if step "+n+" ("+E.Id+") can be played. reached last step",5,B),h(A,E.Id)}return h(-2,E.Id)}return s.customerLog("Checking if step "+n+" ("+E.Id+") can be played. Skipping to: "+P,5,B),A=ze(e,P,r,l,c,u.CHECK_STEP_MODE.Normal),h(A,E.Id)}return h(-1,E.Id)})}function Qe(e,t){return e?t?u.STEP_STATUS.SkippedNotFound:u.STEP_STATUS.SkippedByCondition:u.STEP_STATUS.SupposedToShow}function Ke(e,t){var n=ze(e,t,void 0,void 0,void 0,u.CHECK_STEP_MODE.Normal);return n==t}function qe(){var e=v.getCurrentStep();i.get("ElementFinder").wrapSession(function(){Oe(e)})}function Xe(){v.state=u.WALKTHRU_STATE.RUNNING,A.releaseBalloons(function(){L.stepWasCompleted(!1),v.currentStep=v.lastBackButtonStepIndex-1,L.executeTutorialNextStep()})}function Je(e){j.push(e)}function $e(){if(!j)return;for(var e=j.length-1;e>=0;e--)j[e].cleanResources();j=[]}}i.register("WalkthruOnBeforeUnloadHandler").asCtor(Ig).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack");function Ig(e,t,n,r,i,o){var a=this;a.onbeforeunload=u,a.setIgnoreNextBeforeUnload=l;var s=!1;function u(a){if(!o.isEmpty())return;e.customerLog("onbeforeunload called",1),s?s=!1:(t.setMember("dontContinueTutorial",!0),n.pauseAllTimeouts(),r.get().enabled()?r.get().loseOwnership(!1,!0):i.isFeatureEnabled("noUnload")&&c())}function l(e){s=e}function c(){n.setWalkmeTimeout(function(){t.setMember("dontContinueTutorial",!1),n.resumeAllTimeouts()},3e3)}}i.register("WalkthrusContainer").asCtor(bg);function bg(){var e=this;e.getWalkthrus=r,e.setWalkthrus=i,e.getWalkthruByIndex=o,e.getWalkthruById=s,e.getWalkthruIndexByWalkthruId=a,e.getStepByIndex=u;var t=[];function n(){}function r(){return t}function i(e){t=e}function o(e){return t[e]}function a(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].TutorialId==e){n=r;break}return n}function s(e){for(var n=0;n<t.length;n++)if(t[n].TutorialId==e)return t[n];return null}function u(e,t){var n=o(e);if(n&&n.Steps[t])return n.Steps[t]}n()}i.register("WalkthruBalloonContainer").asCtor(wg).dependencies("CommonUtils");function wg(e){var t=this;t.add=i,t.removeAll=o,t.getAll=a,t.stopAll=s;var n;function r(){o()}function i(e){n.push(e)}function o(){n=[]}function a(){return n}function s(){e.executeParallel({objectsArray:a(),functionsToExecute:[function(e,t){e.stop(),t&&t()}]})}r()}i.register("CurrentWalkthruData").asCtor(_g).dependencies("WalkthrusContainer, Consts");function _g(e,t){var n=this;n.currentWalkthru=-1,n.currentStep=-1,n.stepAppearanceIndex=0,n.splitPointStack=[],n.stepPlayHistory=[],n.stepPlayStack=[],n.stepCompletedHistory=[],n.lastBackButtonStepIndex=-1,n.getCurrentWalkthru=r,n.getCurrentStep=i,n.getPreviousStep=a,n.getNextStep=o,n.getStep=s,n.state=t.WALKTHRU_STATE.NOT_RUNNING;function r(){return e.getWalkthruByIndex(n.currentWalkthru)}function i(){return s(n.currentStep)}function o(){return s(n.currentStep+1)}function a(){return s(n.currentStep-1)}function s(e){var t=r();return t&&t.Steps&&t.Steps[e]}}i.register("WalkthruStatePersister").asCtor(Pg).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents");function Pg(e,t,n,r,o,a,s){var u=this;u.storeStateInCookie=d,u.getPersistenceData=g,u.getRunningWalkthruId=f;var l=e.WALKTHRU_PERSISTANCE_DATA_FIELDS;function c(){}function d(){var n=void 0,r=void 0,s=void 0,u=void 0,l=o.getCurrentWalkthru(),c=l?l.TutorialId:-1,d=l?l.userGuid:i.get("UserGuidContainer").getUserGuid(),g=t.getCurrentInteractionGuid();o.state==e.WALKTHRU_STATE.RUNNING||o.state==e.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(n=o.currentStep+1,l.Steps.length<=o.currentStep+1&&(r=1)):o.state==e.WALKTHRU_STATE.WAITING_FOR_SPLIT?(n=o.currentStep,s=a.splitTutorialIds,u=a.splitStartFromStepId):n=o.currentStep;var f=p(c,n,r,s,u,g);i.get("ClientStorageManager").saveData(e.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,f,e.DEFAULT_COOKIE_SECONDS,d)}function p(e,t,n,r,a,u){var c={};return c[l.CURRENT_TUTORIAL_COOKIE_NAME]=e,c[l.CURRENT_STATE_COOKIE_NAME]=o.state,c[l.CURRENT_STEP_COOKIE_NAME]=t,c[l.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=o.stepAppearanceIndex,c[l.CURRENT_PLAY_GUID_COOKIE_NAME]=i.get("AuditStepsManager")._currentPlayGUID,c[l.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=i.get("AuditStepsManager")._currentPlayInitiator,c[l.SPLIT_POINT_COOKIE_NAME]=o.splitPointStack,c[l.TUTORIAL_FINISHED_COOKIE_NAME]=n,c[l.STEP_PLAY_HISTORY_COOKIE_NAME]=o.stepPlayHistory,c[l.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=r,c[l.SPLIT_START_FROM_STEP_COOKIE_NAME]=a,c[l.INTERACTION_GUID_COOKIE_NAME]=u,window._testMe&&(c[l.STEP_COMPLETED_HISTORY_COOKIE_NAME]=o.stepCompletedHistory),s.raiseEvent("SavingPersistenceData",c),c}function g(t){var i=m(t),a=h(i,-1),u={state:r.getInt(i[l.CURRENT_STATE_COOKIE_NAME],e.WALKTHRU_STATE.NOT_RUNNING),step:r.getInt(i[l.CURRENT_STEP_COOKIE_NAME],-1),playNum:i[l.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||o.stepAppearanceIndex,tutotrialGUID:i[l.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:i[l.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:r.defaultValue(i[l.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:r.defaultValue(i[l.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:r.defaultValue(i[l.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:r.defaultValue(i[l.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:n.getWalkthruIndexByWalkthruId(a),splitTutorialIds:r.defaultValue(i[l.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:r.defaultValue(i[l.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:i[l.INTERACTION_GUID_COOKIE_NAME]};return s.raiseEvent("GettingPersistenceData",{persistenceData:i,current:u}),u}function f(e){return h(m(e))}function h(e,t){return r.getInt(e[l.CURRENT_TUTORIAL_COOKIE_NAME],t)}function m(t){return i.get("ClientStorageManager").getData(e.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}c()}i.register("WalkthruStateRestorer").asCtor(Ag).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, Lib, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer");function Ag(e,t,n,r,o,a,s,u,l,c,d,p,g,f,h,m){var v=this;v.restoreCrossUsersState=E,v.restoreStateFromCookie=T;function S(){}function E(e){s.customerLog("Restoring cross user state",5);var t=m.getAllUserGuids();if(!t.length)return e&&e(),!1;for(var n=0;n<t.length;n++){var r=t[n],i=T(r,e);if(i)return r}return!1}function T(c,m){var v=d.getRunningWalkthruId(c);v?e.afterStepsLoaded(v,S):S();function S(){var e=y(c);n.stepAppearanceIndex=e.playNum,n.splitPointStack=e.splitPointStack,n.stepPlayHistory=e.stepPlayHistory,n.currentWalkthru=e.tutorial,n.currentStep=e.step,n.stepCompletedHistory=e.stepCompletedHistory,n.state=e.state,l.raiseEvent("RestoringStateFromCookie",e),r.setCurrentInteractionGuid(e.interactionGuid),e.tutotrialGUID&&(i.get("AuditStepsManager")._currentPlayGUID=e.tutotrialGUID),i.get("AuditStepsManager")._currentPlayInitiator=e.playInitiator;var d=t.getStepByIndex(n.currentWalkthru,n.currentStep);function v(){o.playSetTimeout(function(){a.executeCurrentStep()},1e3*d.Delay)}if(n.state==g.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||n.state==g.WALKTHRU_STATE.PASSING_OWNERSHIP&&d){n.currentStep--;var S=t.getStepByIndex(n.currentWalkthru,n.currentStep);S&&(S.playNumber=n.stepAppearanceIndex),a.stepWasCompleted(!0),n.currentStep++}if(s.customerLog("isTutorialFinished: "+e.isTutorialFinished,5),1!=e.isTutorialFinished||n.state!=g.WALKTHRU_STATE.RUNNING&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&n.state!=g.WALKTHRU_STATE.PASSING_OWNERSHIP)if(s.customerLog("Continue from cookie: currentTutorial: "+n.currentWalkthru+" -- currentState: "+n.state+" -- currentStep: "+n.currentStep+" -- currentPlayGUID: "+i.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+c,5),!d||n.state!=g.WALKTHRU_STATE.RUNNING&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_CONDITION&&n.state!=g.WALKTHRU_STATE.PASSING_OWNERSHIP)if(d&&n.state==g.WALKTHRU_STATE.WAITING_FOR_REDIRECT)a.loadTutorial(n.currentWalkthru,0,!1,i.get("AuditStepsManager")._currentPlayGUID,i.get("AuditStepsManager")._currentPlayInitiator);else if(d&&n.state==g.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)a.startNewTutorial(n.currentWalkthru,n.currentStep,!1,i.get("AuditStepsManager")._currentPlayInitiator);else if(!d||n.state!=g.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(n.state==g.WALKTHRU_STATE.WAITING_FOR_SPLIT)f.splitTutorialIds=e.splitTutorialIds,f.splitStartFromStepId=e.splitStartFromStepId,p.resumeSplit();else{if(n.state!=g.WALKTHRU_STATE.PAUSED)return a.resetState(),s.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+c+")",5),m&&m(!1),!1;s.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),h.releaseBalloons(),a.releaseBalloonsTimeouts(),a.resetState(),l.raiseEvent("WalkthruAborted")}else u.getSettingsValue(d.Settings,"sticky",0)?(s.customerLog("Sticky - keep looking for element",5),n.state=g.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,v()):d.IsSkippable&&(n.getCurrentWalkthru().Steps.length==n.currentStep+1?a.tutorialFinished():(n.currentStep++,n.state=g.WALKTHRU_STATE.RUNNING,v()));else v();else a.tutorialFinished(!0);return m&&m(!0),!0}}function y(e){var n=d.getPersistenceData(e),r=t.getStepByIndex(n.tutorial,n.step);return r&&(n.isTutorialFinished||n.state!=g.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||u.getSettingsValue(r.Settings,"sticky",0)||r.IsSkippable||(s.customerLog("page change happened while waiting for element - pausing walkthru",2),n.state=g.WALKTHRU_STATE.PAUSED)),n}S()}i.register("WalkthruBranchPlayer").asCtor(kg).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData");function kg(e,t,n,r,o,a,s,u,l,c,d,p){var g=this;g.makeSplit=h,g.resumeSplit=S;function f(){}function h(e,t,r,i,o){l.state=u.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=r&&m(t),p.splitTutorialIds=e,p.splitStartFromStepId=i,c.storeStateInCookie(),n.stepWasCompleted(),S(o)}function m(e){v()||l.splitPointStack.push({tutorialIndex:l.currentWalkthru,stepIndex:void 0!=e?e:l.currentStep+1,playGuid:i.get("AuditStepsManager")._currentPlayGUID,playInitiator:i.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:l.stepPlayHistory,stepCompletedHistory:l.stepCompletedHistory,stepPlayStack:l.stepPlayStack})}function v(){return l.getCurrentWalkthru().Steps.length<=l.currentStep+1}function S(o){i.get("ElementFinder").wrapSession(function(){try{var i=1e3;o=o||i;var d,g,f=0;if(1==p.splitTutorialIds.length){if(g=p.splitTutorialIds[0],void 0!=p.splitStartFromStepId){var h=t.getStepIndex(p.splitStartFromStepId,g);h!=-1&&(f=h),e.customerLog(kf("Resuming split, walkthru id: {0}, step index: {1}",g,f))}}else g=T(p.splitTutorialIds);g?(s.deprecatedRaiseEvent("switchToWalkthru",g),d=r.getWalkthruIndexByWalkthruId(g),a.playSetTimeout(function(){var e={type:u.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:l.getCurrentStep().Id,appType:u.EVENT_SENDER_EVENT_APPS.Step};n.loadTutorial(d,f,!1,void 0,e)},o),c.storeStateInCookie()):(e.customerLog("Try again in "+i+"ms."),a.playSetTimeout(function(){S()},i))}catch(m){e.error(m)}})}function E(t){var n=d.map(t,function(t){var n=y(t.TutorialId);e.customerLog("Check walk-thru: "+t.TutorialId+" ("+n+")");var r=o.findElement(t,null,null,'Checking Walk-Thru "'+n+'"');return r?e.customerLog("First step found."):e.customerLog("First step not found."),{step:t,element:r}});return n=d.filter(n,function(e){return e.element}),d.map(n,function(e){return e.step})}function T(t){try{e.customerLog("Multiple branch: Going through all walk-thrus.");var n=C(t),r=E(n);if(1==r.length)return r[0].TutorialId;if(!(r.length>1))return null;e.customerLog("can't decide which tutorial to play",5),e.customerLog(r.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(i){e.error(i)}}function y(e){var t=r.getWalkthruById(e);return t?t.Name:""}function C(e){var t=d.map(e,function(e){return r.getWalkthruById(e).Steps[0]});return t}f()}i.register("ComplexHtmlElementsProvider").asCtor(Og).dependencies("PositionHelper");function Og(e){var t=this;t.getComplexHtmlElements=i;function n(){}var r={TABLE:1,DROPDOWN:2};function i(t,n){var i,o=n.data("iframe");if(t.Settings.complexHtml){if((t.Settings.complexHtml.type==r.TABLE||"table"==t.Settings.complexHtml.type)&&(i=e.findNearestSelfOrParentByType(n,["table"]),t.Settings.complexHtml.settings)){switch(t.Settings.complexHtml.settings.triggerType){case"cell":n=e.findFirstSelfOrChildByType(n,["td","th"])||e.findNearestSelfOrParentByType(n,["td","th"]);break;case"column":n=e.getColumn(n);break;case"row":n=e.findFirstSelfOrChildByType(n,["tr"])||e.findNearestSelfOrParentByType(n,["tr"]);break;case"table":n=e.findNearestSelfOrParentByType(n,["table"])}t.Settings.complexHtml.settings.onTable||(i=void 0)}if(n&&n.length>0)return o&&n.data("iframe",o),{parentElement:i,elements:n}}}n()}i.register("WalkthruBranchData").asCtor(Ng);function Ng(){var e=this;e.splitTutorialIds=[],e.splitStartFromStepId;function t(){}t()}i.register("WalkthruStepShower").asCtor(Dg).dependencies("Logger, Lib, StaticUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper, BalloonDrawerProvider,SiteConfigManager, WalkthruBalloonContainer, WalkthruStepShowerButtonsCalculator");function Dg(e,t,n,r,o,a,s,u,l,c){var d=this;d.showStep=p;function p(d,p){var g=n.secureEvalJSON(d);r.fixStep(g,0,u.get());var f=t.findElement(g,null,null,'Show Step for Editor "'+(g.StepTitle||g.StepText)+'"');if(e.customerLog("element:",5),e.customerLog(f,5),!f)return!1;var h,m=o.getComplexHtmlElements(g,f);m&&(f=m.elements,h=m.parentElement);var v=window._walkmeInternals.ctx.create("Balloon",{element:f,parentElement:h,forceEmbedBalloonInIframe:p,positionHelper:a,stepSettings:g.Settings,text:{title:g.StepTitle,content:g.StepText,
subText:""},position:g.Position,data:{stepId:g.Id,type:g.Type},buttons:c.calculate(g),configuration:g.Configuration,logger:e,drawer:s.getBalloonDrawer(g.Configuration,g),isViewStep:!0,siteConfig:u.get(),bindButtonsFunc:i.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:g.DesignTemplatePlaceholderConfigs});return l.add(v),v.Show(!0,function(){v.SetTimeoutOn()}),v}}i.register("WalkthruStepShowerButtonsCalculator").asCtor(Lg).dependencies("ArrayUtils, SharedConsts, WalkthrusModule");function Lg(e,t,n){var r=this;r.calculate=o;var i={};function o(e){if(e.Type==t.stepType.Simple)return a(e);return s(e)}function a(e){if(n.isStepTrigger(e.End,t.stepTrigger.Button))return{next:!0};return{}}function s(t){var n=t.Settings&&t.Settings.popupStepButtons||[],r={};return e.foreach(n,function(e){var t=i[e.action];r[t]=!0}),r}function u(){var e=t.POPUP_BUTTON_ACTIONS;i[e.NextDone]="next",i[e.Start]="start",i[e.Back]="back",i[e.Cancel]="cancel"}u()}i.register("WalkthruSurveyActivator").asCtor(xg).dependencies("DeployableSurveyActivator, AuditStepsManager");function xg(e,t){var n=this;n.activateSurvey=r;function r(n,r,i,o,a,s,u){var l="wm-SrvWtRep-"+n.TutorialId,c={tutorialId:n.Id,eventSource:r,callback:s,stepIndex:u,lastStepIndex:n.Steps.length-1,surveyPlayGUID:t._currentPlayGUID};e.activateSurvey(o,l,a,i,c)}}i.register("WalkthruSafeStartHandler").asCtor(Fg).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager");function Fg(e,t,n,r,i,o){var a=this;a.auditSafeStartStatus=s,a.redirect=l,a.auditStayButtonClicked=u,a.auditSafeStartDisabled=d,a.auditSafeStartFirstStatus=p;function s(e,n){var r=n.wt;void 0!=r.Id&&t.safeStartAudit(e,r)}function u(t){s(e.SAFESTART_ACTION.StayClicked,t)}function l(t,o){r.currentStep=0,r.state=e.WALKTHRU_STATE.WAITING_FOR_REDIRECT,r.currentWalkthru=o.tutorialIndex,i.storeStateInCookie(),n.redirect(t)}function c(e){for(var n=0;n<e.checkStepExistsTrace.length;n++)t.auditStep(e.wt,e.wt.Steps[e.checkStepExistsTrace[n].stepIndex],e.checkStepExistsTrace[n].stepStatus,!1)}function d(n){var r={tutorialId:n.wt.TutorialId,tutorialName:n.wt.Name,playGuid:t._currentPlayGUID,playInitiator:t._currentPlayInitiator,status:e.SAFESTART_ACTION.ErrorShown};o.send(r)}function p(e,t){s(e,t),c(t)}}i.register("WalkthrusSiteConfigDataMigrator").asCtor(Mg).dependencies("WalkthrusContainer, WalkthrusModule, UserGuidContainer, DataFixer");function Mg(e,t,n,r){var o=this;o.migrateSiteConfigData=a;function a(o){var a=e.getWalkthrus();s(o,a);for(var u={},l=0;l<a.length;l++)r.fixSteps(a[l],o),u[a[l].TutorialId]={siteConfig:o,isPackageHidden:i.get("LibInitializer").isNextDataPackageIsHidden()},a[l].userGuid=n.getUserGuid();t.setMember("tutorialRunSettingsMap",u)}function s(e,t){void 0==e.BalloonSettings&&t.length>0&&(e.BalloonSettings=t[0].Steps[0].Configuration)}}i.register("WalkMePlayerLazyAPI").asCtor(Rg).dependencies("WmInternals, Consts, UIChangeTracker, WidgetVisibilityEvaluator, TimerManager");function Rg(t,n,r,o,a){var s,u=this;u.hidePlayer=p("hidePlayer"),u.showPlayer=p("showPlayer"),u.removePlayer=p("removePlayer"),u.hideMenu=p("hideMenu"),u.showMenu=p("showMenu"),u.removeMenu=p("removeMenu"),u.toggleMenu=p("toggleMenu"),u.removeAttenGrab=p("removeAttenGrab"),u.showWalkthruPlayer=p("showWalkthruPlayer"),u.hideWalkthruPlayer=p("hideWalkthruPlayer"),u.removeWalkthruPlayer=p("removeWalkthruPlayer"),u.showWalkthruMenu=p("showWalkthruMenu"),u.hideWalkthruMenu=p("hideWalkthruMenu"),u.removeWalkthruMenu=p("removeWalkthruMenu"),u.redrawPlayer=d,u.isMenuOpen=g,u.isWalkthruMenuOpen=g;function l(){e(t).on(n.EVENTS.Widget.WidgetAPICreated,c)}function c(e,t){for(var n in t.WalkMePlayerAPI)t.WalkMePlayerAPI.hasOwnProperty(n)&&(u[n]=t.WalkMePlayerAPI[n]);s=!0}function d(){i.get("WidgetLoader").loadWidget()}function p(n){return function(){var r=arguments;e(t).one("PlayerInitComplete",function(){a.setWalkmeTimeout(function(){var e=s?u:window.WalkMePlayerAPI;e[n].apply(null,r)},0)}),d()}}function g(){return!1}l()}i.register("LegacyWidgetApiModule").asCtor(Bg).dependencies("Lib, wmjQuery, DebuggerManager, LoggerManager, UiUtils, SiteConfigManager, ClickAuditManager, WmAjax, RecorderServerManager, AbPermutationManager, EndUsersManager, AuditSourceManager, Consts, WalkMeVisibilityChecker, WidgetApi, AttentionGrabberManagerAPI, Mustache, PerformanceTimestampAdder, WalkmeVisibleReporter, AutoStartManager, AuditingEnabledIndicator, BiggestFrameProvider, WidgetVisibilityEvaluator");function Bg(e,t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I){var b=this;b.searchTermChangedOnWidget=P,b.widgetLoaded=A,b.sendWidgetOpenLogToServer=k,b.sendSearchResultClickedToServer=O,b.getSearchResultsFromServer=N,b.saveSearchToServer=D,b.sendResultClickedBeforeSearchToServer=L,b.shouldShowWidgetAccordingToAbTesting=f.isWalkMeVisible,b.widgetApi=h,b.UiProperties=x,b.getAttentionGrabberManager=F,b.getMustache=M,b.getConsts=R,b.getEventsTrigger=B,b.auditClick=s.SendClickAudit,b.getClickAuditManager=U,b.userSawWalkMe=E.report,b.checkRepeatCookie=T.checkRepeatCookie,b.isAuditDisabled=V,b.getBiggestFrame=C.getBiggestFrame,b.checkShowOnlyInUrl=I.checkShowOnlyInUrl,b.playerCreationComplete=W,b.triangleLoaded=G,b.mt_log=H;var w=6e3;function _(){t.extend(e,b)}function P(t){"walkmetracker"!=t||n.isDebuggerOnWindow()?"walkmelogger"!=t||r.isLoggerActivated()||e.launchLogger():n.launchDebuggerIfEnabled()}function A(e){S.addTimeStamp("widgetEndLoad"),e&&e.bind("on-activate",o.fixFlash)}function k(){if(!y.isEnabled())return!0;s.SendWidgetOpen({})}function O(e,t,n,r,i,o){if(!y.isEnabled())return;var a=l.get(),s=u.execute({url:a+"/Search/SearchResultClicked",dataType:"jsonp",data:{userGuid:e,searchGuid:t,resultSearchProvider:n,selectedItem:r,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get()}});s.success(i),s.error(o)}function N(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/Search",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get(),saveSearch:!i},timeout:w});return a.success(n),a.error(r),a}function D(e,t,n,r){if(!y.isEnabled())return;var i=l.get(),o=u.execute({url:i+"/Search/SaveSearch",dataType:"jsonp",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get()},timeout:w});o.success(n),o.error(r)}function L(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/ResultClickedBeforeSearch",dataType:"jsonp",data:{userGuid:t,searchQuery:e,selectedItem:n,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get()}});a.success(r),a.error(i)}function x(){return g.UI_PROPERTIES}function F(){return m}function M(){return v}function R(){return g}function B(){return i.get("EventsTrigger")}function U(){return s}function V(){return!y.isEnabled()}function W(e){if(e)return;var n=t("#mt-menu-closed, #walkme-menu-closed"),r={config:a.get(),player:n},o=i.get("CommonUtils").attentionGrabberClass(r);o.setupAttenGrab()}function G(e){i.get("PostDataFileLoadedHandler").dataFinishedLoading(e)}function H(e){i.get("Logger").customerLog(e,5)}_()}i.register("WidgetVisibilityEvaluator").asCtor(Ug).dependencies("LocationMatcher, SettingsValuesRetriever, SiteConfigManager, Consts, Lib, CommonEvents, UIChangeTracker, FeaturesManager, TimerManager");function Ug(e,t,n,r,i,o,a,s,u){var l=this;l.init=f,l.checkShowOnlyInUrl=v;var c,d=!0,p="monitorWidget",g=5e3;function f(){a.bindPreListener(S),h(),m()}function h(){(n.get().Settings[p]||s.isFeatureEnabled(p))&&(d=!1)}function m(e){S(),d||c||u.libSetTimeout(m,g)}function v(){return void 0!==c&&d||S(),c}function S(){var e=!!E(),t=void 0===c?e:e!==c;t&&(c=e,o.raiseEvent("WidgetVisibilityChanged",{isVisible:e}))}function E(){var a=!0,s=n.get(),u=t.getSettingsValue(s.Settings,r.DISPLAY_WIDGET_CONDITION,null);return u?(a=i.evaluateConditionTree(u),o.deprecatedRaiseEvent("WidgetConditionEvaluated",s)):null!=s.ShowInUrl&&0!=s.ShowInUrl.length&&(a=e.isLocationMatchString(s.ShowInUrl)),a}}i.register("WidgetApi").asCtor(Vg).dependencies();function Vg(){var e=this;e.getEventSender=function(){return i.get("EventSender")},e.getCtx=function(){return i}}i.register("WidgetLoader").asCtor(Wg).dependencies("CommonUtils, CommonEvents, PerformanceTimestampAdder, Consts, WidgetVisibilityEvaluator, WmInternals, WalkMePlayerLazyAPI, Logger");function Wg(t,n,r,i,o,a,s,u){var l=this;l.init=p,l.loadWidget=g;var c,d;function p(t){if(!t)return;c=t,window.WalkMePlayerAPI=s,u.customerLog("Waiting for widget visibility evaluator"),e(a).one("WidgetVisibilityChanged",g),o.init(),o.checkShowOnlyInUrl()}function g(){if(d)return;d=!0,e(a).off("WidgetVisibilityChanged",g),r.addTimeStamp("widgetStartLoad");var o=[c];o.asyncCallback=function(){t.addScript(c)},n.raiseEvent(i.EVENTS.WidgetLoad,o)}}i.register("TestmeApi").asCtor(Gg).dependencies("WalkMeInfo, CommonUtils, ClientStorageManager, SettingsFile");function Gg(e,t,n,r){var i=this;i.loadTestMe=o,i.startTestMe=a,i.rememberTestMeIsOn=s,i.isTestMeLoaded=u;function o(n){var i,o;i||(i=r.getPlayerRelatedPath()+"testme/"),o||(o="walkme_testme_"+e.getLibVersion()+".js"),t.addScript(i+o,n)}function a(){u()?(window._testMe.exit(),window._testMe.start()):o()}function s(){n.saveData(C,1,I)}function u(){return!!window._testMe}}i.register("UiObjectsTreeConverter").asCtor(Hg).dependencies("Logger, Consts");function Hg(t,n){var r=this;r.convert=i;function i(n){if(!n||0==n.length)return;t.customerLog("converting objects tree started for root "+n[0]._name,4);var r=e.map(n,function(e){var t=i(e._children,e),n=o(e,t);return n});return t.customerLog("converting objects tree ended for root "+n[0]._name,4),r}function o(e,t){var r=a(e);return{getTitle:function(){return e._name},getDescription:function(){return e._description},getKeywords:function(){return e._keywords},getType:function(){return e._type},getChildren:function(){return t},getContentType:function(){return r.getContentType()},isVisible:function(){return r.isProperty(n.UI_PROPERTIES.Visible)},isCompleted:function(){return r.isProperty(n.UI_PROPERTIES.Completed)},isActive:function(){return r.isProperty(n.UI_PROPERTIES.Active)},isAccessible:function(){return r.isProperty(n.UI_PROPERTIES.Accessible)},isSearchSupported:function(){return r.isProperty(n.UI_PROPERTIES.Search)},activate:e.activate}}function a(e){var t=function(){var t;return function(){return t||(t=e.properties().getAll()),t}}();return{isProperty:function(e){return t().indexOf(e)>-1},getContentType:function(){if(t().indexOf(n.UI_PROPERTIES.Video)>-1)return n.UI_PROPERTIES.Video;if(t().indexOf(n.UI_PROPERTIES.Article)>-1)return n.UI_PROPERTIES.Article;return!1}}}}i.register("WidgetUiApi").asCtor(jg).dependencies("UiDataProvider, UiObjectsTreeConverter, Logger");function jg(e,t,n){var r=this;r.getObjectsTree=i;function i(){n.customerLog("getting objects tree",4);var r=e.uiObjectsTree();return t.convert(r)}}i.register("LegacyExternalApiModule").asCtor(Yg).dependencies("Lib, wmjQuery, EndUsersManager, FramesetsUtils, RecorderServerManager, LanguageManager, PerformanceTimestampAdder, ElementFinder, Logger, CustomCssSetter, SiteConfigManager, ElementCenterer, DeployablesManagerFactory, FeaturesManager, WalkMeVisibilityChecker, AuditSourceManager, BBCodeEventsBinder, UserGuidContainer,LaunchersModule, LibDestroyer, DataFileDataLoader, PostDataFileLoadedHandler, WalkthrusModule");function Yg(e,t,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I){var b=this;b.getTimerManager=_,b.getHostData=P,b.getClientStorageManager=A,b.getStorageManagerInstance=k,b.getServerStorageManager=O,b.getABPermutationId=i.get("AbPermutationManager").getPermutation,b.getEndUserGuid=n.getEndUserGuid,b.getUiTracker=N,b.getSalesForceManager=D,b.getUiUtils=L,b.getDataFileExtraData=x,b.getFramesetsUtils=F,b.getPlayerServer=o.get,b.getCurrentLanguage=a.getCurrentLanguage,b.addTimeStamp=s.addTimeStamp,b.getUiDataProvider=M,b.generateNewGuid=i.get("GuidGenerator").generateGuid,b.getBrowser=R,b.isQuirksMode=P().isQuirksMode,b.getBiggestFrame=i.get("BiggestFrameProvider").getBiggestFrame,b.injectCustomCSS=c.setCustomCssIfNeeded,b.shouldHandlePageAsFramesets=r.shouldHandlePageAsFramesets,b.getServerDataSenderManager=B,b.getCommonUtils=U,b.getPositionHelper=V,b.getCommonEvents=W,b.getSiteConfig=d.get,b.setSiteConfig=d.set,b.centerElementInPage=p.centerElementInPage,b.getDeployablesManager=g.get,b.isFeatureActive=f.isFeatureEnabled,b.isWalkMeVisible=h.isWalkMeVisible,b.getWmAjax=G,b.getEnvId=m.get,b.getPlayInitiatorEnum=H,b.elkState=j,b.getIsInEditor=Y,b.getCenteredElement=z,b.startNewInteraction=Q,b.registerFindElementPlugin=K,b.getFindElementPluginManager=q,b.overrideBalloonEmbedder=X,b.getTodoListManager=J,b.getBalloonDrawer=$,b.getExecuteParallel=Z,b.getSurveys=ee,b.bindBBCodeEvents=v.bind,b.getBodyInheritedMargin=te,b.setIsInEditor=ne,b.setRecorderServer=re,b.getElementStrength=ie,b.setTutorialsForEditor=ce(oe),b.getState=ae,b.getUserGuid=S.getUserGuid,b.setUserGuid=S.setUserGuid,b.ConditionFunctionsObj=i.get("ConditionFunctions"),b.ResourceManager=i.get("ResourceManager"),b.Logger=l,b.lib_error=se,b.getLaunchers=E.getLaunchers,b.setLaunchers=E.setLaunchers,b.showAllLaunchers=E.showAllLaunchers,b.getLauncherAction=E.getLauncherAction,b.releaseLaunchers=E.releaseLaunchers,b.releaseAllElements=T.releaseAllElements,b.releaseBalloons=T.releaseBalloons,b.releaseShoutOuts=T.releaseShoutOuts,b.releaseFlow=T.releaseFlow,b.removeWalkMe=T.removeWalkMe,b.destroyAll=T.destroyAll,b.appendDataPackage=y.appendDataPackage,b.appendWalkMeConfigData=y.appendWalkMeConfigData,b.dataFileLoaded=y.dataFileLoaded,b.dataFinishedLoading=C.dataFinishedLoading,b.setTutorials=I.setTutorials,b.isTutorialPackageHidden=I.isTutorialPackageHidden,b.canShowTutorial=I.canShowTutorial,b.stopTutorial=I.stopTutorial,b.startNewTutorial=I.startNewTutorial,b.tutorialFinished=I.tutorialFinished,b.executeTutorialNextStep=I.executeTutorialNextStep,b.postWelcomeStep=I.postWelcomeStep,b.executeCurrentStep=I.executeCurrentStep,b.getCurrentTutorial=i.get("CurrentWalkthruData").getCurrentWalkthru,b.getTutorials=i.get("WalkthrusContainer").getWalkthrus,b.runTutorialsActionConditions=ue,b.setSurveysForRecorder=ue,b.forceSplit=le,b.parseBBCode=i.get("BBCodeParser").parse,b.completeGoalById=i.get("GoalsManager").completeGoalById,b.getElementTextArray=i.get("ElementTextExtractor").getElementTextArray,b.wrapFESession=u.wrapSession,b.findElement=ce(u.findElement),b.setAuditSource=m.set,b.evaluateConditionTree=i.get("ConditionTreeEvaluator").evaluate,b.getWalkmeOOP=de,b.getEndUserId=pe,b.getStorageType=ge,b.launchLogger=fe,b.getAbtestingGoalsManager=he;function w(){t.extend(e,b)}function _(){return i.get("TimerManager")}function P(){return i.get("HostData")}function A(){return i.get("ClientStorageManager")}function k(e){if(e)return i.get("StorageManagerFactory").byType(e);return A()}function O(){return i.get("ClientOrServerStorageManager")}function N(){return i.get("UIChangeTracker")}function D(){return i.get("SalesForceManager")}function L(){return i.get("UiUtils")}function x(){return i.get("DataFileExtraData").data}function F(){return r}function M(){return i.get("UiDataProvider")}function R(){return P().browser.string}function B(){return i.get("ServerDataSenderManager")}function U(){return i.get("CommonUtils")}function V(){return i.get("PositionHelper")}function W(){return i.get("CommonEvents")}function G(){return i.get("WmAjax")}function H(){return i.get("Consts").STEP_PLAY_INITIATOR_ENUM}function j(e){U().elementLastKeeper.setState(e)}function Y(){return i.get("IsInEditor").get()}function z(e){return i.get("CenteredElementProvider").get(e)}function Q(){i.get("InteractionManager").beginNewInteraction()}function K(e){q().registerPlugin(e)}function q(){return i.get("FindElementPluginManager")}function X(e){i.register("BalloonEmbedder").asCtor(e).dependencies("getTopContainer")}function J(){return i.get("TodoListManager")}function $(e){return i.get("BalloonDrawerProvider").getBalloonDrawer(e)}function Z(){return U().executeParallel}function ee(){return i.get("SurveysManager").getAll()}function te(){return V().getBodyInheritedMargin()}function ne(e){i.get("IsInEditor").set(e)}function re(e){var t=i.get("RecorderServerManager");t.set(e);var n=i.get("LibInitializer").getPlayerServer();null!==n&&void 0!==n&&t.set(n)}function ie(t){var n={score:-1},r=i.get("StaticUtils").secureEvalJSON(t);i.get("DataFixer").fixStep(r,0,{BalloonSettings:{}});var o=e.findElement(r,null,n);if(o)return n.score;return null}function oe(e,t){for(var n=i.get("StaticUtils").secureEvalJSON(e),r=0;r<n.length;r++)n[r].userGuid=t;I.setTutorials(n)}function ae(){return i.get("CurrentWalkthruData").state}function se(e,t){l.error(e,t)}function ue(){}function le(){i.get("WalkthruBranchPlayer").makeSplit.apply(null,arguments)}function ce(e){return function(){try{return e.apply(null,arguments)}catch(t){l.error(t)}}}function de(){return vf}function pe(){var e=!i.get("AbTestingManager").isAbTestingEnabled();return n.getEndUserGuid(e)}function ge(){var e=i.get("ClientOrServerStorageManager").getStorageType();return e.mode+" - "+e.type}function fe(){var e=i.get("LoggerManager");e.isLoggerActivated()||e.launchLogger()}function he(){return i.get("AbTestingGoalsManagerInstance").value}w()}i.register("CenteredElementProvider").asCtor(zg).dependencies("Logger, StringUtils, ArrayUtils");function zg(e,t,n){var r=this;r.get=a;var i=void 0,o=void 0;function a(t){for(var n=mtjQuery(t).parents(),r=null,i=n.length-1;i>=0;i--)try{var o=l(n[i]);if(o){var a=mtjQuery(n[i]),s=mtjQuery(window).width(),u=a.width(),c=a.offset().left,p=s-u;if(p>0&&p/2==c){r=a;break}if(p<0&&p==c){r=a;break}if(d(a)){r=mtjQuery(a);break}}}catch(g){e.customerLog("error-----------------------------------",5),e.error(g)}return r}function s(){return void 0==o&&(o=[],n.foreach(document.styleSheets,u)),o}var u=function S(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?S(r.styleSheet):g(r.style)&&o.push(r.selectorText)}}catch(i){}},l=function(e){var t=mtjQuery(e),n=t.data("mt_isElementFixedWidth");if(1==n)return!0;if(0==n)return!1;var r=c(e);return t.data("mt_isElementFixedWidth",r),r},c=function(e){if(f(e.style))return!0;var t=h(e,m());return t},d=function(e){var t=mtjQuery(e),n=t.data("mt_isElementMarginAuto");if(1==n)return!0;if(0==n)return!1;var r=p(e);return t.data("mt_isElementMarginAuto",r),r},p=function(e){if(g(e.style))return!0;var t=h(e,s());return t},g=function(e){if(e){var n=mtjQuery.trim(e.margin),r=mtjQuery.trim(e.marginLeft),i=mtjQuery.trim(e.marginRight),o=t.startsWith(n,"0")&&t.endsWith(n,"auto"),a="auto"==r&&"auto"==i;if(o||a)return!0}return!1},f=function(e){var t=e.width;if(t){for(var n="",r=0;r<t.length;r++)isNaN(t[r])||(n+=t[r]);if(n&&parseInt(n)>700&&(t.indexOf("p")!=-1||t.indexOf("e")!=-1||t.indexOf("m")!=-1||t.indexOf("i")!=-1))return!0}return!1},h=function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(n=mtjQuery(e).is(mtjQuery(i)))return n}return n},m=function(){return void 0==i&&(i=[],n.foreach(document.styleSheets,v)),i},v=function E(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?E(r.styleSheet):f(r.style)&&i.push(r.selectorText)}}catch(o){}}}i.register("CustomVariableAuditor").asCtor(Qg).dependencies("SiteConfigManager,CommonUtils,CommonEvents,Consts");function Qg(e,t,n,r){var i=this,o=[];function a(){var t=e.get().Settings.customAuditVars;if(t)for(var n=0;n<t.length;n++){var r=t[n];r.value&&""!=r.value&&(r.value.indexOf("walkme_sf_vars")>-1?o.push({index:n+1,value:r.value}):s(n+1,r.value))}}i.handleSfVars=function(){for(var e=0;e<o.length;e++){var t=o[e];s(t.index,t.value)}};function s(e,t){var n=u(t);"string"==typeof n?WalkMeAPI.setAnalyticsCustomField(e,n):"boolean"==typeof n||"number"==typeof n&&!isNaN(n)?WalkMeAPI.setAnalyticsCustomField(e,n.toString()):void 0==n&&WalkMeAPI.setAnalyticsCustomField(e,"")}function u(e){var i={};return i.name=e,i.value=t.getWindowVar(e),i.defaultValue=i.value,n.raiseEvent(r.EVENTS.CustomAuditVar,i),i.returnValue}a()}i.register("BalloonEmbedder").asCtor(Kg).dependencies("getTopContainer, ElementUtils, UiUtils");function Kg(e,t,n){var r=this;r.getContainer=i,r.handleEmbedding=o,r.fixPosition=a,r.isEmbeded=s;function i(t,r,i,o){if(s(t))return n.closestCanEmbed(r);var a=null;return i&&(a=e(r)),a&&a.length||(a=e(null,!0)),a}function o(e,t,n){if(!s(e))return;t.css("cursor","default")}function a(e,n,r){if(!s(n))return;if("BODY"==t.getElementTagName(r[0]))return;var i=r.offset();e.left-=i.left-r.scrollLeft(),e.top-=i.top-r.scrollTop()}function s(e){return e&&e.embed}}i.register("StartFailureHandler").asCtor(qg).dependencies("Consts, WmInternals, PopupNotificationsService, FlowDataPersister");function qg(e,t,n,r){var i=this;i.init=o;function o(){t.bind(e.EVENTS.Flows.FailedToStart,function(e,t){t.isSafeStartHandling||r.getSafeStartFlowId()||n.showFlowFailedToStartPopup(t)})}}i.register("ElementInIframeIndicator").asCtor(Xg).dependencies("FeaturesManager, Consts");function Xg(e,t){var n=this;n.isInIframe=r;function r(n){if(e.isFeatureEnabled(t.FEATURES.OldIsInIframeIndication))return!!n.data("iframe");return n[0].ownerDocument!=window.document}}i.register("AuditSourceProvider").asCtor(Jg).dependencies("AuditSourceManager, Consts");function Jg(e,t){var n=this;n.isInPreviewMode=r,n.isInPlayMode=i,n.isProductionEnv=o;function r(){return e.get()===t.SOURCES.preview}function i(){return e.get()===t.SOURCES.play}function o(){return e.get()===t.SOURCES.production}}i.register("CorsSupportIndicator").asCtor($g);function $g(){var e=this;e.hasCorsSupport=t;function t(){var e="withCredentials"in new XMLHttpRequest;return e}}i.register("BiggestFrameProvider").asCtor(Zg).dependencies("FramesetsUtils, Logger, FeaturesManager");function Zg(e,t,n){var r=this;r.getBiggestFrame=o;var i=null;function o(){var t=!1;try{t=!i||!e.isFrameActive(i)||mtjQuery("frameset",i.contentWindow.document).length>0}catch(r){t=!0}var o=i;return t&&(o=e.findBiggestFrame(),n.isFeatureEnabled("noBiggestFrameCache")||(i=o)),o}}i.register("CustomCssSetter").asCtor(ef).dependencies("WalkMeVisibilityChecker, SiteConfigManager, IconTemplates, DirectHeadProvider, IsInEditor, HtmlDecoder, ResourceManager, CommonEvents, Consts, DesignTemplatesCalculatedCssGetter");function ef(t,n,r,i,o,a,s,u,l,c){var d=this;d.setCustomCssIfNeeded=h,d.getAllCustomCssProp=C,d.setUiTemplates=f;var p,g;function f(e){g=e}function h(e,r){if(!t.isWalkMeVisible()&&!r)return;u.raiseEvent(l.EVENTS.BeforeSettingCustomCss,{element:e});var a=n.get().CustomCss||"",s=v()||"",d=m()||"",g=E()||"",f=c.get()||"",h=s+d+a+g+f;if(!T(h))return;var S=i.getDirectHead(e);if(!S)return;var C="wm_custom_css_set";o.get()&&S.data(C,!1);var I=S.data(C);if(!I)return p=h,y(h,S,C)}function m(){return S(r.customImages)}function v(){return S(r.htmlImages)}function S(e){for(var t="",n=0;n<e.length;n++){var r=e[n];r.Css&&(t+=r.Css)}return t}function E(){if(!g)return;var t="";return e.safeEach(g,function(e,n){for(var r in n)n[r].ExternalCss&&(t+=n[r].ExternalCss)}),t}function T(e){return void 0!=e&&e.length>0}function y(e,t,n){try{return e=a.decodeHtml(e,["&",'"',"'",">"]),s.injectCss(e,"walkme-custom-css",t,null,"walkme-player-css"),t.data(n,!0),!0}catch(r){return!1}}function C(){return p}}i.register("DirectHeadProvider").asCtor(tf).dependencies("FramesetsUtils, FrameContentsProvider, IsInEditor, ElementInIframeIndicator, BiggestFrameProvider");function tf(t,n,r,i,o){var a=this;a.getDirectHead=s;function s(a){if(!a){var s;return t.shouldHandlePageAsFramesets()&&(s=n.getFrameContents(e(o.getBiggestFrame()))),e("head",s)}if(r.get()||i.isInIframe(a))return a.parents("html").children("head")}}i.register("FrameContentsProvider").asCtor(nf).dependencies("CommonUtils");function nf(e){var t=this;t.getFrameContents=n;function n(t){var n=t[0];if(void 0==n)return[];var r;try{r=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:[],r=mtjQuery(r)}catch(i){e.handleCrossDomainError(i),r=[]}return r}}i.register("WhiteListChecker").asCtor(rf).dependencies("RecorderServerManager, ClientStorageManager, FeaturesManager, WmAjax");function rf(t,n,r,i){var o=this;o.isUserInWhiteList=u;var a=1e4,s="wm-wl";function u(t,i){var o=e.Deferred();if(r.isFeatureEnabled("whitelist")){var a=n.getData(s);1===a?o.resolve():0===a?o.reject():l(t,i,o)}else o.resolve();return o.promise()}function l(e,n,r){i.execute({dataType:"jsonp",url:t.get()+"/EndUser/IsEndUserInWhiteList",data:{endUserGuid:n,walkmeUserGuid:e},timeout:a,success:function(e){"true"==e.result?(c(e,1),r.resolve()):"false"==e.result?(c(e,0),r.reject()):r.reject()},error:function(){r.reject()}})}function c(e,t){n.saveData(s,t,e.cacheTimeInSeconds)}}i.register("AbTestingManager").asCtor(of).dependencies("ClientStorageManager, SiteConfigManager, Lib, Logger, RecorderServerManager, WmAjax, AuditSourceProvider, AuditingEnabledIndicator, FeaturesManager, UserGuidContainer");function of(e,t,n,r,i,o,a,s,u,l){var c,d,p,g,f=this,h="wm-absl-",m="wm-abss-";function v(){c=t.get(),p=n.getEndUserId,d=r.error}f.shouldLoadWalkme=function(){try{if(!f.isAbTestingEnabled())return!0;return E(h,c.Settings.abTesting.loadPercentage)}catch(e){return d(e,"Could not check if Walkme should be loaded according to AB Testing"),!0}},f.shouldShowWidget=function(){try{if(!f.isAbTestingEnabled())return!0;var e=m;return window.walkme_ab_imp_cookie&&(e+=p()+"-"),E(e,c.Settings.abTesting.showPercentage,S)}catch(t){return d(t,"Could not check if widget should be shown according to AB Testing"),!0}};function S(e){try{if(g||!s.isEnabled())return!0;var t=c.Settings.abTesting.testNumber,n=void 0!=window.wm_customData?wm_customData.abTestingData:null;o.execute({url:i.get()+"/Statistics/AddAbTestingWidgetVisible",data:{userGuid:l.getUserGuid(),endUserId:p(),testNumber:t,isVisible:e,customDataSerialized:Cf(n)}})}catch(r){d(r,"Could not report ab testing result to server")}}f.isAbTestingEnabled=function(){var e=c.Settings&&c.Settings.abTesting&&parseInt(c.Settings.abTesting.enabled),t=u.isFeatureEnabled("abtesting")&&e&&!a.isInPreviewMode()&&!a.isInPlayMode();return t},f.disableReport=function(){g=!0};function E(t,n,r){var i=t+c.Settings.abTesting.testNumber,o=e.getData(i);if(o===!0||o===!1)return o;var a=T(1,100);return o=a<=n,e.saveData(i,o,A),r&&r(o),o}function T(e,t){return Math.floor(Math.random()*(t-e+1)+e)}v.apply(null,arguments)}i.register("AbTestingGoalsManagerInstance").asInstance({value:void 0}),i.register("DataFileKeyToDeployableType").asCtor(af).dependencies("DeployableTypes");function af(e){var t=this;t.Tutorials=e.Tutorial,t.Tasks=e.Task,t.Launchers=e.Launcher,t.Labels=e.LabelGroup,t.Surveys=e.Survey,t.Categories=e.Category,t.Contents=e.Content,t.Collections=e.Collection,t.Shuttles=e.Shuttle,t.Tags=e.Tag,t.ShoutOuts=e.ShoutOut,t.ConditionBlocks=e.ConditionBlock,t.BusinessSolutions=e.BusinessSolution,t.Lessons=e.Lesson,t.Courses=e.Course,t.TrackedPages=e.TrackedPage,t.Spotlights=e.Spotlight,t.Tooltips=e.Tooltip,t.TrackedElements=e.TrackedElement,t.SearchProviderUrls=e.SearchProviderUrl}i.register("DeployablesContainersFacade").asCtor(sf).dependencies("WalkthrusContainer, LaunchersModule, DataFileKeyToDeployableType, DeployableTypes");function sf(t,n,r,o){var a=this;a.emptyAllDeployablesContainers=s,a.addRangeToAllDeployablesContainers=u;function s(){t.setWalkthrus([]),n.setLaunchers([]),l(function(e,t){c(e,[])})}function u(e){var r=t.getWalkthrus();r=r.concat(e[o.Tutorial]),t.setWalkthrus(r);var i=n.getLaunchers();i=i.concat(e[o.Launcher]),n.setLaunchers(i),l(function(t,n){d(t,e[n])})}function l(t){e.each(r,function(e,n){n!=o.Tutorial&&n!=o.Launcher&&t(e,n)})}function c(e,t){p(e,function(e){e.set(t)})}function d(e,t){p(e,function(e){e.addRange(t)})}function p(e,t){var n=e+"Container",r=i.get(n);t(r)}}i.register("LibInitializer").asCtor(uf).dependencies("Lib, AbPermutationManager, WalkMeInfo, ConditionTreeEvaluator, CommonUtils, SettingsFile, WmInternals,LanguageManager, WmAjax, WalkmeConfigManager, CommonEvents, Consts, TimerManager, LaunchersModule, LibDestroyer,IsInEditor, StaticUtils, PerformanceTimestampAdder, Logger, UserGuidContainer, SiteConfigManager, MessageSender");function uf(e,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,y,C,I){var b,w,_,P,A="wm-customWidgetUrl",k=null,O=[],N=[],L=null,x=!1,F=!1,M=!1,R=!1,B=!1,U=!1,V=!0;this.isNextDataPackageIsHidden=function(){return x},this.getPlayerServer=function(){return _};function W(){b=a.addScript,G(),u&&!u.isSelfHosted||(V=!1)}function G(){window.wmPlaySnippet?(P=window.wmPlaySnippet,U=!0,R=!0):window.wmPreviewSnippet?(P=window.wmPreviewSnippet,B=!0,R=!0):window.wmSnippet&&(P=window.wmSnippet,R=!0)}this.changeLanguage=function(e,t){var n=function(n){n&&p.raiseEvent(D.EVENTS.LanguageChanged,{language:e}),t&&t(n)},r=l.changeLanguage(e,O);if(r){var i=this.releaseResources();i.then(this.reloadDataFileAfterRelease(n))}else n(r);return r},this.releaseResources=function(){return e.stopTutorial(void 0,!0),h.releaseLaunchers(void 0,void 0,!0),m.releaseShoutOuts(),m.releaseTeachMeElements(),m.releaseFlow()},this.reloadDataFileAfterRelease=function(e,t){t&&(O=t),L=e,k=0,F=!0,M=!0;var r=n.getPermutation();J(O,r)},this.isNewLanguage=function(){return M},this.startInitializer=function(e){re(function(){H(e)})};function H(t){var n=T.timer("init data files and widget");k=0;var r=!(B||U);if(p.raiseEvent(g.EVENTS.WalkmeLoaded),void 0!=window[g.EVENTS.WalkmeLoaded])_walkMe=_makeTutorial=e,window._walkmeInternals.continueLoad=function(){j(t)},window[g.EVENTS.WalkmeLoaded](e);else{if(!R)return;window.document.dontLoadTriangle&&r?(window._walkmeInternals.blocked=!0,window._walkmeInternals.continueLoad=function(){j(t)}):j(t)}n.stop()}function j(t){var n=s.getSettingsFile();n&&(i.get("PetaServerNameManager").set(n.PetaServer),n.IsInEditor&&v.set(!0),y.setUserGuid(n.UserGuids&&n.UserGuids[0]),_=n.PlayerServer,r.init(),U?n.data&&(n.data.tutorials?(C.set(n.data.siteConfig),e.setTutorialsForEditor(n.data.tutorials,n.UserGuids[0]),f.setWalkmeTimeout(function(){i.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1)):n.data.flows&&(C.set(n.data.siteConfig),i.get("BusinessSolutionsContainer").set(n.data.flows),f.setWalkmeTimeout(function(){i.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1))):Y(n,function(e){Q(n,e)}))}function Y(t,r){var i=d.Data;if(null==i||void 0==i.Permutations)r();else{var o=i.DefaultPermutation,a=i.Permutations;n.setPermutations(a,o);var s=z(i.ActivationRules);n.initGetPermutation(s,function(t){var o=n.getPermutationById(t);if(0===o.LoadWalkMe)return T.customerLog("WalkMe ABTesting - WalkMe Loading canceled. Stopping execution"),void m.removeWalkMe("AbTesting - LoadWalkMe is false");e.appendWalkMeConfigData(i),r(t)})}}function z(e){for(var t=0;t<e.length;t++){var n=e[t],r=o.evaluate(n.Settings.conditionTree);if(r===!0){var i=n.PermutationIds[0];return i}}return null}function Q(e,t){for(var n=e.DataFiles,r=0;r<n.length;r++)if(n[r].metaData)return void K(e,n[r]);q(e.DataFiles,e.WidgetFile,t)}function K(e,t){c.loadTextFile(t.url,"fixedCallback",n,void 0,!1);function n(t,n,r){var i=[];t=P.fixAutoDetectPaths(t);for(var o=0;o<e.DataFiles.length;o++)1==e.DataFiles[o].metaData?i=i.concat(t.DataFiles):i.push(e.DataFiles[o]);q(i,e.WidgetFile)}}function q(e,t,n){O=If(Cf(e)),X(t),J(e,n)}function X(e){if(u&&u.localWidgetUrl)return void(w=u.localWidgetUrl);if(a.isLocalStorageEnabled()){var t=localStorage.getItem(A);if(t)return void(w=t)}w=e}function J(e,t){l.setLanguages(e),N=l.fixLanguageUrlInDataFiles(If(Cf(e)),F),void 0!==t&&t>-1&&(N=$(N,t)),te()}function $(e,t){for(var n=0;n<e.length;n++)e[n].url=Z(e[n],t);return e}function Z(e,t){var n=e.url,r=".js";return n.substring(0,n.length-r.length)+"_"+t+r}function ee(e){E.addTimeStamp("dataFileStartLoad");var t=I.send(g.EVENTS.BeforeDataFileLoaded,{dataFileUrl:e});t||b(e)}function te(){try{var e=N[k].url;x=void 0!=N[k].isHidden&&N[k].isHidden,ee(e)}catch(t){T.error(t,"faild to load data file");
}}this.dataFileLoadedWrapper=function(){if(E.addTimeStamp("dataFileEndLoad"),x=!1,k++,M=!1,k==N.length){var e=i.get("CustomVariableAuditor");t.bind("SfVarsExposed",e.handleSfVars),ne()}else te()};function ne(){var e={newLanguageFlag:F};e.asyncCallback=function(){if(!i.get("PostDataFileLoadedHandler").dataFinishedLoading())return;F?(F=!1,L&&L(!0)):i.get("WidgetLoader").init(w)},p.raiseEvent("DataLoadedEvent",e)}function re(e){var t=s.getSettingsFile();t.PostLibJsFile&&""!=t.PostLibJsFile?(window.walkme_post_lib_loaded=function(){e()},E.addTimeStamp("postLibStartLoad"),b(t.PostLibJsFile)):e()}W.apply(null,arguments)}i.register("DataFileExtraData").asInstance({data:{}}),i.register("DataFileDataLoader").asCtor(lf).dependencies("Lib, CommonUtils, Consts, UserGuidContainer, DataFileKeyToDeployableType, DeployableTypes, WalkthrusSiteConfigDataMigrator, DeployablesContainersFacade");function lf(t,n,r,o,a,s,u,l){var c=this;c.appendDataPackage=g,c.appendWalkMeConfigData=p,c.dataFileLoaded=d;function d(){i.get("LibInitializer").dataFileLoadedWrapper()}function p(e){i.get("AbExperimentsContainer").addRange(e.Experiments)}function g(t,r){var c=t;void 0===t.Tutorials&&(c={Tutorials:t,SiteConfig:r});var d={},p=c.SiteConfig,g=n.defaultValue(c.LauncherCustomImages,[]),m=n.defaultValue(c.LauncherHtmlImages,[]),v=n.defaultValue(c.DesignTemplates,[]);e.each(a,function(e,t){d[t]=n.defaultValue(c[e],[])});var S=i.get("PlatformsService");d[s.Spotlight]=S.filterByCurrentPlatform(d[s.Spotlight]),d[s.Tooltip]=S.filterByCurrentPlatform(d[s.Tooltip]),d[s.ShoutOut]=S.filterByCurrentPlatform(d[s.ShoutOut]);var E=n.defaultValue(c.ExtraData,{isOldDataFile:!0});i.get("DataFileExtraData").data=E,i.get("PublishDataManager").init(E),o.setUserGuid(c.UserGuid),i.get("LibInitializer").isNewLanguage()&&(i.get("SiteConfigManager").set([]),i.get("IconTemplates").customImages=[],i.get("IconTemplates").htmlImages=[],i.get("DesignTemplates").reset(),l.emptyAllDeployablesContainers()),i.get("IconTemplates").customImages=i.get("IconTemplates").customImages.concat(g),i.get("IconTemplates").htmlImages=i.get("IconTemplates").htmlImages.concat(m),i.get("DesignTemplates").set(v),i.get("PageIdentifiersAPI").setPageIdentifiers(c.PageIdentifiers),i.get("CustomCssSetter").setUiTemplates(c.UITemplates);var T=i.get("SiteConfigManager");p&&0==T.get().length&&T.set(p);for(var y=0;y<d[s.Task].length;y++)h(d[s.Task][y]);e.each(a,function(e,t){f(d[t],o.getUserGuid())}),l.addRangeToAllDeployablesContainers(d),u.migrateSiteConfigData(p),i.get("UITemplates").concat(c.UITemplates),i.get("UIVariations").concat(c.UIVariations),i.get("DisabledSmartTipsRemover").remove(i.get("BusinessSolutionsContainer").get()),i.get("DisabledCourseQuizzesRemover").remove(i.get("CoursesContainer").get())}function f(e,t){for(var n=0;n<e.length;n++)e[n].userGuid=t}function h(e){return m(e,"TaskProperties","Settings"),v(e),e}function m(e,t,n){void 0!==e[t]?e[n]=e[t]:e[t]=e[n]}function v(e){e.RelatedDeployableId?e.Settings.WalkThruId=e.RelatedDeployableId:(e.RelatedDeployableType=r.DEPLOYABLE_TYPE.Tutorial,e.RelatedDeployableId=Number(e.Settings.WalkThruId))}}i.register("PostDataFileLoadedHandler").asCtor(cf).dependencies("Lib, CommonUtils, Consts, CommonEvents, FeaturesManager, LibDestroyer, Logger, DebuggerManager, WalkMeGoalsManager, CrossDomainManager, WalkthruStateRestorer, ClientStorageManager, WalkMeVisibilityChecker, AnchorTagsFixer, PerformanceTimestampAdder, AuditSourceProvider, SiteConfigManager, WmInternals, TestmeApi, UserGuidContainer, AbTestingGoalsManagerInstance, BusinessSolutionsManager, EngagementRulesRepository");function cf(e,n,r,o,a,s,u,l,c,d,p,g,f,h,m,v,S,T,y,I,b,_,P){var A=this;A.dataFinishedLoading=O;var k="wm-lg-act";function O(t,r){var l=u.timer("lib init");if(i.get("SessionPersister").startPersisting(),i.get("SettingsCacheBusterActivator").activeIfPublishedRecently(i.get("SettingsFile").getPublishDate()),i.register("sfVarsRemovedFromLib").asInstance(function(){}),o.raiseEvent("dataFilesLoaded"),D())return;a.isFeatureEnabled("tagBody")&&n.setBodyUtils(i.get("TagBodyUtils"));try{window.walkme_data_finished_loading_callback&&walkme_data_finished_loading_callback()}catch(c){}var d=i.get("WalkmeClassesInitializer").initWalkMeClasses();if(!d.Succeeded)return s.removeWalkMe(d.ErrorMessage||"initWalkMeClassesFailed",{sendLog:!0,errorCode:d.ErrorCode}),e.initFailed=!0,!1;var p=i.get("EndUserDataConverter");p.convertData();var g=L(t,r);l.stop();var f=N(g);if(i.get("ClientOrServerStorageManager").init(f)===!1)return s.removeWalkMe("storageManagerInitFailed",{sendLog:!0}),!1;return!0}function N(e){return function(){var t={asyncCallback:e};o.raiseEvent(r.EVENTS.BeforeStorageLoadedCallback,t)}}function D(){var e=S.get();if(e.Settings&&e.Settings.rmWMCond&&i.get("ConditionTreeEvaluator").evaluate(e.Settings.rmWMCond)&&!window.editorAPI)return u.customerLog("Remove walkme condition is true. Removing WalkMe.",3),s.removeWalkMe("Removed by condition"),!0;return!1}function L(n,a){u.customerLog("after loading storage",4),o.raiseEvent(r.EVENTS.StorageLoaded);var s=n?x:M,c=R();!a&&n||(B()&&!V()&&(T.dbgr={debuggerWasLoaded:s},s=l.loadDebuggerFromStorage),U()&&e.launchLogger()),c&&(t.testme||(t.testme={}),t.testme.testmeLoadedCallback=s,s=y.startTestMe),u.customerLog("willLoadTestMe: "+c,1);var d=i.get("TodoListManager");if(d.hasTaskGoalCompletionCondition()){var p=s,g=function(){v.isInPlayMode()||d.didTasksFinishLoading()?p():d.setTasksFinishedLoadingCallback(p)};s=g}return s}function x(){u.customerLog("after loading storage for play",4),c.init(),W(),d.get().enabled()?d.get().start(F):p.restoreCrossUsersState(F)}function F(){u.customerLog("sending editor event: StorageManagerInitialized",4),o.raiseEvent("StorageManagerInitialized")}function M(){W(),i.get("StartFailureHandler").init(),i.get("WhiteListChecker").isUserInWhiteList(I.getUserGuid(),e.getEndUserGuid(),j,Q).then(j,Q)}function R(){var e=G()||H();return e||u.customerLog(E,"Not loading test me (checked window var, query string parameter and storage entry)",1),e}function B(){if(a.isFeatureEnabled("noDebugger"))return!1;var e=g.getData(r.DEBUGGER_STATE_NAME,w.Deactive,I.getUserGuid());return e==w.Active||e==w.ActiveAndReset}function U(){var e=g.getData(k,!1,I.getUserGuid());return e}function V(){return l.isDebuggerOnWindow()}function W(){i.get("AuditStepsManager").init(),i.get("ClickAuditManager").init(),i.get("ServerDataSenderManager").start(),i.get("PerformanceTracker").startSending(),!d.get().enabled()&&_.getAll().length>0&&_.restore()}function G(){if(window.walkMeTestMeLoad)return u.customerLog(E,"ShouldLoadTestMe - True by window var",1),y.rememberTestMeIsOn(),window.walkMeTestMeLoad=void 0,!0}function H(){var e=g.getData(C,0,I.getUserGuid());if(e)return u.customerLog(E,"ShouldLoadTestMe - True by storage entry",1),!0}function j(){var r=u.timer("after loading storage");h.fixAnchorTagsOnBeforeUnload();var o=[];if(d.get().enabled())try{o.push(d.get().start)}catch(a){u.customerLog(a,"failed to start pass ownership manager",1),p.restoreCrossUsersState()}else p.restoreCrossUsersState();if(v.isProductionEnv()){var l=e.getEndUserGuid(),g=t.walkme_userGuid_to_replace||I.getUserGuid();i.get("AnalyticsManager").auditUniqueEndUser(g,i.get("AbPermutationManager").getPermutation(),l)}o.push(b.value?b.value.startWatching:z),o.push(P.isReady),n.executeParallel({functionsToExecute:o,successCallback:function(){c.init(d.get().enabled()),m.addTimeStamp("walkmeReady"),Y(K),v.isInPreviewMode()||v.isInPlayMode()||i.get("EndUserLoggerManager").reportEndUser(function(){s.removeWalkMe("reportEndUserFailed")}),T.isSelfHosted?u.customerLog("Self Hosted - no need to check settings file",3):i.get("TimerManager").setWalkmeTimeout(function(){i.get("SettingsCacheManager").start()},5e3),r.stop()}})}function Y(e){var t={asyncCallback:e};o.raiseEvent(r.EVENTS.BeforeWalkmeReady,t)}function z(e){e()}function Q(){s.removeWalkMe("user is not in the white list"),e.initFailed=!0}function K(){try{walkme_ready()}catch(e){}try{mt_ready()}catch(e){}o.raiseEvent(r.EVENTS.WalkmeReady),f.isWalkMeVisible()&&!y.isTestMeLoaded()&&(i.get("PlatformInitializer").run(),i.get("PermalinkManager").run(),i.get("AutoStartManager").run(),i.get("AppletActivationListener").init(),q()),o.raiseEvent(r.EVENTS.ElementsTrackingReady),m.addTimeStamp("walkmeReadyEnd"),i.get("LoadingTimeInformer").run()}function q(){i.get("FramesetsUtils").waitForFramesToLoad().then(function(){i.get("ElementFinder").wrapSession(function(){X()})})}function X(){if(f.isWalkMeVisible()){var e=u.timer("show all launchers");i.get("LaunchersModule").showAllLaunchers(),e.stop(),i.get("SmartTipSetActivationInitiator").start()}i.get("TrackedPagesManager").start(),i.get("TrackedElementsManager").start()}}i.register("WalkmeClassesInitializer").asCtor(df).dependencies("Lib, Logger, SiteConfigManager, FeaturesManager, TimerManager, WalkMeGoalsManager, TagsManager, CommonEvents, Consts, CommonUtils, HostData, TopContainerProvider, WalkMeInfo, EngagementRulesRepository, WindowBeforeUnloadHandler");function df(e,n,r,o,a,s,u,l,c,d,p,g,f,h,m){var v=this;v.initWalkMeClasses=E;function S(){}function E(){var d={Succeeded:!0};if(f.init(),i.get("JawsAccessibilityUtil").init(),T())return d.Succeeded=!1,d.ErrorMessage="WalkMe is not supported on that browser",n.customerLog(d.ErrorMessage),d;i.get("InteractionInitiationEventListener").init(),i.get("AnalyticsPropertiesManager").init(),i.get("BalloonDrawerProvider").getBalloonDrawer(r.get().BalloonSettings).loadResources(g.getTopContainer().siblings("head")),y(),i.get("WmAjax").setFeatures(o.isFeatureEnabled("blockJsonp"),o.isFeatureEnabled("corsJsonpFallback"));var p=i.get("AbTestingManager");if(!p.shouldLoadWalkme())return d.Succeeded=!1,d;a.overrideTimeouts(),i.get("TutorialsManager").setDeployables(i.get("WalkthrusContainer").getWalkthrus());var v=r.get();if(v.EndUserSettings){var S=i.get("EndUsersManager");S.setEndUserSettings(v.EndUserSettings),S.createEndUserGuid()}h.init();var E=i.get("endUserGuidValidator").validate();if(E)return{Succeeded:!1,ErrorMessage:E.message,ErrorCode:E.code};var C=i.get("AbExperimentsContainer").get(),I=C.length>0;if(I){s.enableMultiUserStorage();var b=i.get("ExperimentsManager");b.setDeployables(C),i.get("AbTestingGoalsManagerInstance").value=new Ya({deployablesGoalManager:s,experiments:b.getAll(),lib:e,getEndUserGuid:e.getEndUserGuid,getPermutationId:i.get("AbPermutationManager").getPermutation,getAuditSource:i.get("AuditSourceManager").get,serverAddress:i.get("RecorderServerManager").get(),storageManager:i.get("ClientStorageManager"),commonEvents:i.get("CommonEvents"),userGuidContainer:i.get("UserGuidContainer")})}i.get("ContentsManager").setDeployables(i.get("ContentsContainer").get()),i.get("CategoriesManager").setDeployables(i.get("CategoriesContainer").get()),i.get("CollectionsManager").setDeployables(i.get("CollectionsContainer").get()),i.get("LaunchersManager").setDeployables(i.get("LaunchersModule").getLaunchers()),i.get("ConditionBlocksManager").setDeployables(i.get("ConditionBlocksContainer").get()),i.get("SurveysManager").setDeployables(i.get("SurveysContainer").get()),i.get("ShuttlesManager").setDeployables(i.get("ShuttlesContainer").get()),i.get("ShoutOutsManager").setDeployables(i.get("ShoutOutsContainer").get()),i.get("BusinessSolutionsManager").setDeployables(i.get("BusinessSolutionsContainer").get()),i.get("TrackedPagesManager").setDeployables(i.get("TrackedPagesContainer").get()),i.get("CoursesManager").setDeployables(i.get("CoursesContainer").get()),i.get("LessonsManager").setDeployables(i.get("LessonsContainer").get()),u.setDeployables(i.get("TagsContainer").get()),i.get("SpotlightsManager").setDeployables(i.get("SpotlightsContainer").get()),i.get("TooltipsManager").setDeployables(i.get("TooltipsContainer").get()),i.get("TrackedElementsManager").setDeployables(i.get("TrackedElementsContainer").get()),i.get("SearchProviderUrlsManager").setDeployables(i.get("SearchProviderUrlsContainer").get());var w=i.get("TodoListManager");w.setDeployables(i.get("TasksContainer").get()),u.injectTagsToDeployables();var _=i.get("AbTasksValidator");if(_.shouldTrackAbTasks()){var P=new pa({todoListManager:w,goalsManager:i.get("GoalsManager")});w.init(),w.loadTasks(P.startWatchingTasks)}else t.abTasksBlocked=!0,l.raiseEvent(c.EVENTS.AbTasksBlocked),n.customerLog("Not tracking ab testing and tasks - blocked in this browser."),p.disableReport();return p.isAbTestingEnabled()&&f.setAnalyticsCustomFields(0,e.getEndUserId()),m.register(i.get("WalkthruOnBeforeUnloadHandler").onbeforeunload),i.get("BizFlowOnBeforeUnloadChecker").init(),i.get("UIChangeTracker").init(),i.get("PageChangeTracker").init(),i.get("jQueryCacheCleaner").init(),i.get("FlowLinkedTaskCompletionHandler").init(),i.get("BalloonLogEventHandler").init(),d}function T(){return!o.isFeatureEnabled("walkmeIE7Support")&&p.isIEBrowser(8,"lt")&&!window.postMessage}function y(){d.setDefault(r.get(),"TodoListSettings",{})}S()}var pf=function(){function e(e){this._externalWalkMeConfig=e}return e.prototype.getCurrentPlatform=function(){return this._externalWalkMeConfig.get("platform")},e}(),gf=function(e){__extends(t,e);function t(t){e.call(this,t)}return t.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=0;n<e.length;n++)e[n].Settings&&e[n].Settings.platform||t.push(e[n]);return t},t}(pf);F.register([D.PLATFORM.Web,D.PLATFORM.MobileWeb],function(){i.register("PlatformsService").asCtor(gf).dependencies("ExternalWalkMeConfig")});var ff=function(e){__extends(t,e);function t(t){e.call(this,t)}return t.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=this.getCurrentPlatform(),r=0;r<e.length;r++)e[r].Settings&&e[r].Settings.platform==n&&t.push(e[r]);return t},t}(pf);F.register([D.PLATFORM.iOS,D.PLATFORM.Android],function(){i.register("PlatformsService").asCtor(ff).dependencies("ExternalWalkMeConfig")});var hf={};!function(e,t){e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:l,t:u,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];if(!i)return"";return this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!c(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,a){var s;if(c(e)&&0===e.length)return!1;return"function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o&&"object"==typeof o&&i[s]in o?(a=o,o=o[i[s]]):o="";if(r&&!o)return!1;return r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){i=o[e],a=!0;break}if(!a)return!r&&"";return r||"function"!=typeof i||(i=this.lv(i,t,n)),i},ho:function(e,t,n,r,i){var o=this.c,a=this.options;a.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s=t[t.length-1],u=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,o),a);if(u=e.call(s),"function"==typeof u){if(r)return!0;if(this.c)return this.ho(u,s,n,this.text.substring(i,o),a)}return u},lv:function(e,t,n){var r=t[t.length-1],i=e.call(r);if("function"==typeof i&&(i=u(i.call(r)),this.c&&~i.indexOf("{{")))return this.c.compile(i,this.options).render(r,n);return u(i)}};var n=/&/g,r=/</g,i=/>/g,o=/\'/g,a=/\"/g,s=/[&<>\"\']/;function u(e){return String(null===e||void 0===e?"":e)}function l(e){return e=u(e),s.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&#39;").replace(a,"&quot;"):e}var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(hf),function(e){var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,o=/\\/g,a={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(e,n){var r=e.length,i=0,o=1,c=2,d=i,p=null,g=null,f="",h=[],m=!1,v=0,S=0,E="{{",T="}}";function y(){f.length>0&&(h.push(new String(f)),f="")}function C(){for(var e=!0,n=S;n<h.length;n++)if(e=h[n].tag&&a[h[n].tag]<a._v||!h[n].tag&&null===h[n].match(t),!e)return!1;return e}function I(e,t){if(y(),e&&C())for(var n,r=S;r<h.length;r++)h[r].tag||((n=h[r+1])&&">"==n.tag&&(n.indent=h[r].toString()),h.splice(r,1));else t||h.push({tag:"\n"});m=!1,S=h.length}function b(e,t){var n="="+T,r=e.indexOf(n,t),i=u(e.substring(e.indexOf("=",t)+1,r)).split(" ");return E=i[0],T=i[1],r+n.length-1}for(n&&(n=n.split(" "),E=n[0],T=n[1]),v=0;v<r;v++)d==i?l(E,e,v)?(--v,y(),d=o):"\n"==e.charAt(v)?I(m):f+=e.charAt(v):d==o?(v+=E.length-1,g=a[e.charAt(v+1)],p=g?e.charAt(v+1):"_v","="==p?(v=b(e,v),d=i):(g&&v++,d=c),m=v):l(T,e,v)?(h.push({tag:p,n:u(f),otag:E,ctag:T,i:"/"==p?m-T.length:v+E.length}),f="",v+=T.length-1,d=i,"{"==p&&("}}"==T?v++:s(h[h.length-1]))):f+=e.charAt(v);return I(m,!0),h};function s(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function u(e){if(e.trim)return e.trim();return e.replace(/^\s*|\s*$/g,"")}function l(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function c(e,t,n,r){for(var i=[],o=null,a=null;e.length>0;)if(a=e.shift(),"#"==a.tag||"^"==a.tag||d(a,r))n.push(a),a.nodes=c(e,a.tag,n,r),i.push(a);else{if("/"==a.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+a.n);if(o=n.pop(),a.n!=o.n&&!p(a.n,o.n,r))throw new Error("Nesting error: "+o.n+" vs. "+a.n);return o.end=a.i,i}i.push(a)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return i}function d(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function p(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+h(t)+"return _.fl();";if(r.asString)return"function(c,p,i){"+i+";}";return new e.Template(new Function("c","p","i",i),n,e,r)};function g(e){return e.replace(o,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function f(e){return~e.indexOf(".")?"d":"f"}function h(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n].tag;"#"==i?t+=m(e[n].nodes,e[n].n,f(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):"^"==i?t+=v(e[n].nodes,e[n].n,f(e[n].n)):"<"==i||">"==i?t+=S(e[n]):"{"==i||"&"==i?t+=E(e[n].n,f(e[n].n)):"\n"==i?t+=y('"\\n"'+(e.length-1==n?"":" + i")):"_v"==i?t+=T(e[n].n,f(e[n].n)):void 0!==i&&e[n].hasOwnProperty("tag")||(t+=y('"'+g(e[n])+'"'))}return t}function m(e,t,n,r,i,o){return"if(_.s(_."+n+'("'+g(t)+'",c,p,1),c,p,0,'+r+","+i+',"'+o+'")){_.rs(c,p,function(c,p,_){'+h(e)+"});c.pop();}"}function v(e,t,n){return"if(!_.s(_."+n+'("'+g(t)+'",c,p,1),c,p,1,0,0,"")){'+h(e)+"};"}function S(e){return'_.b(_.rp("'+g(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function E(e,t){return"_.b(_.t(_."+t+'("'+g(e)+'",c,p,0)));'}function T(e,t){return"_.b(_.v(_."+t+'("'+g(e)+'",c,p,0)));'}function y(e){return"_.b("+e+");"}e.parse=function(e,t,n){return n=n||{},c(e,"",[],n.sectionTags||[])},e.cache={},e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];if(r)return r;return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r}}(hf),function(e){e.to_html=function(t,n,r){var i=t;return"string"==typeof i?i=this.compile(t):"function"==typeof i&&(i=new e.Template(i)),i.render(n,r)}}(hf);var mf=hf;i.register("WalkmeOOP").asCtor(vf).asProto();function vf(){var e,t=this,n=null,r=null,i={},o={},a={},s={},u={},l={};function c(n){e=n,e.__wmoop__=t,t.Virtual=new Ef(t),t.Prop=new Sf(t)}t.Extends=function(e,r,i,o,a,s,u){n=new e(r,i,o,a,s,u),t.ExtendsInstance(n)},t.ExtendsInstance=function(e){r=e.__wmoop__,g(),d();var n=p();t._base=n},t.Override=function(e,t){return u[e]=t,t};function d(){for(var e in u){if(!r.IsVirtual(e))throw"Cannot override non-virtual method ["+e+"]. of class : "+r;r.DoOverride(e,u[e])}}t.DoOverride=function(e,t){s[e]=t},t.IsVirtual=function(e){return void 0!==s[e]};t.GetOriginalFunctions=function(){return a};function p(){var e={},t={},t=r.GetOriginalFunctions();for(var n in t){var i=t[n];e[n]=i}return e}function g(){var e=r.GetPublics();for(var n in e){var i=e[n];t.Public(n,i)}}t.Public=function(t,n,r){var o=f(t,n,r);return a[t]=n,e[t]=o,i[t]=o,o},t.Protected=function(e,t,n){var r=f(e,t,n);return a[e]=t,o[e]=r,r},t.GetProperties=function(){return l};function f(e,t,n){if(!n)return t;s[e]=t;function r(){return s[e](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19])}return r}t.GetPublics=function(){return i},t.GetProtecteds=function(){return o},c.apply(null,arguments)}function Sf(){var e,t=this;function n(t){e=t}t.Public=function(t,n){var i=r(t,n);return e.Public(t,i),i},t.Protected=function(t,n){var i=r(t,n);return e.Protected(t,i),i},t.Private=function(e,t){var n=r(e,t);return n};function r(t,n){e.GetProperties()[t]=n;function r(n){if(void 0===n)return e.GetProperties()[t];e.GetProperties()[t]=n}return r}n.apply(null,arguments)}function Ef(){var e;function t(t){e=t}function n(e){function t(){throw"["+e+"] is pure virtual and must be overriden"}return t}this.Public=function(t,r){return r=r?r:n(t),e.Public(t,r,!0)},this.Protected=function(t,r){return r=r?r:n(t),e.Protected(t,r,!0)},t.apply(null,arguments)}i.register("inArrayFunc").dependencies("ArrayUtils").asFunction(function(e){return e.inArray}),i.register("ArrayUtils").asCtor(Tf);function Tf(){var e=this;e.max=function(e,t){var n=null;if(e.length>0){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o>r&&(r=o,n=e[i])}}return n},e.min=function(e,t){var n=null;if(e.length>0){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}}return n},e.foreach=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},e.reduce=function(e,t,n){var r=t;return foreach(e,function(e){r=n(r,e)}),r},e.filter=function(e,t){for(var n=new Array,r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.shuffle=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var r=e[n];e[n]=e[t],e[t]=r}return e}}i.register("StaticUtils").asCtor(yf);function yf(){var e=this;e.secureEvalJSON=If}function Cf(e){if(null!==e&&_f(e,function(e){try{e.toJSON&&(e.toJSON=null)}catch(t){}}),wf())return JSON.stringify(e);if(null===e)return"null";var t=typeof e;if("undefined"===t)return;if("number"===t||"boolean"===t)return""+e;if("string"===t)return Rf(e);if("object"===t){if("function"==typeof e.toJSON)return Cf(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),u=e.getUTCMilliseconds();return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),u<100&&(u="0"+u),u<10&&(u="0"+u),'"'+i+"-"+n+"-"+r+"T"+o+":"+a+":"+s+"."+u+'Z"'}if(e.constructor===Array){for(var l=[],c=0;c<e.length;c++)l.push(Cf(e[c])||"null");return"["+l.join(",")+"]"}var d,p,g=[];for(var f in e){if(t=typeof f,"number"===t)d='"'+f+'"';else{if("string"!==t)continue;d=Rf(f)}if(t=typeof e[f],"function"===t||"undefined"===t)continue;p=Cf(e[f]),g.push(d+":"+p)}return"{"+g.join(",")+"}"}}function If(e){if(bf())return JSON.parse(e);var t=e.toString().replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return _makeTutorialEv.Ev("("+e+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}function bf(){if("object"!=typeof JSON)return!1;if(!JSON.parse)return!1;if(!Pf(JSON.parse))return!1;return!0}function wf(){if("object"!=typeof JSON)return!1;if(!JSON.stringify)return!1;if(!Pf(JSON.stringify))return!1;return!0}function _f(e,t){if(void 0!=e&&"object"==typeof e)for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&void 0!==r&&_f(r,t)}null!==e&&void 0!==e&&t(e)}function Pf(e){return e.toString().indexOf("[native code]")>-1}function Af(e){return If(Cf(e))}function kf(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t]||"")}return e}function Of(e,t,n){var r,i,o,a,s,u=e,l=u.length,c=l>>>0;if("function"!=typeof t)throw new TypeError;if(0===c&&void 0===n)throw new TypeError;if(r=0,void 0!==n)i=n;else{for(o=!1;!o&&r<c;)a=r.toString(),o=u.hasOwnProperty(a),o&&(i=u[a]),r+=1;if(!o)throw new TypeError}for(;r<c;)a=r.toString(),o=u.hasOwnProperty(a),o&&(s=u[a],i=t.call(void 0,i,s,r,u)),r+=1;return i}function Nf(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return e.getTime()-t}function Df(e){return Lf(e)}function Lf(e){return i.get("DictionaryUtils").getDictionaryValues(e)}function xf(e,t){for(var n=e.length-1;n>=0;n--){for(var r=!1,i=t.length-1;i>=0&&!r;i--)t[i]==e[n]&&(r=!0);r||t.push(e[n])}return t}var Ff=/["\\\x00-\x1f\x7f-\x9f]/g,Mf={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function Rf(e){if(e.match(Ff))return'"'+e.replace(Ff,function(e){var t=Mf[e];if("string"==typeof t)return t;return t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"';return'"'+e+'"'}var Bf=i.get("ArrayUtils").map;i.register("GeneralUtils").dependencies("DictionaryUtils").asFunction(function(e){return{getDictionaryKeys:e.getDictionaryKeys,reduce:Of,map:Bf}});var Uf=function(){function e(e,t){this.parent=e,this.key=t,this.children=[],this.templateIndex=null,this.links=[]}e.prototype.follow=function(t){return t in this.children?this.children[t]:(this.children[t]=new e(this,t),this.children[t])};function t(e,n){var r,i,o,s;if(null!==n&&"object"==typeof n)if(a(n))for(r=[],i=0;i<n.length;i++)r.push(t(e,n[i]));else{s=e,r={"":[]};for(o in n)Object.hasOwnProperty.call(n,o)&&(s=s.follow(o),r[""].push(t(e,n[o])));s.links.push(r)}else r=n;return r}function n(e){var t,n,r,i,o,a,s=[],u=[];e.templateIndex=0;for(o in e.children)Object.hasOwnProperty.call(e.children,o)&&u.push(e.children[o]);for(;u.length>0;){t=u.shift(),a=0;for(o in t.children)Object.hasOwnProperty.call(t.children,o)&&(u.push(t.children[o]),a+=1);if(a>1||t.links.length>0){for(n=[],r=t;null===r.templateIndex;)n.unshift(r.key),r=r.parent;for(n.unshift(r.templateIndex),s.push(n),t.templateIndex=s.length,i=0;i<t.links.length;i++)t.links[i][""].unshift(t.templateIndex)}}return s}function r(r){var i,o,a;return i=new e(null,""),a=t(i,r),o=n(i),o.length>0?Cf({f:"cjson",t:o,v:a},null,null):Cf(r)}function i(e,t){for(var n=[];t>0;)n=e[t-1].slice(1).concat(n),t=e[t-1][0];return n}function o(e,t){var n,r,s;if(null!==t&&"object"==typeof t)if(a(t))for(n=[],r=0;r<t.length;r++)n.push(o(e,t[r]));else for(n={},s=i(e,t[""][0]),r=0;r<s.length;r++){var u=o(e,t[""][r+1]);null!==u&&void 0!==u&&(n[s[r]]=u)}else n=t;return n}function a(e){return"undefined"!=typeof Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function s(e){var t=If(e);if(null===t||"object"!=typeof t||!("f"in t)||"cjson"!==t.f)return t;return o(t.t,t.v)}return{stringify:r,parse:s}}();i.register("WalkmeLoadTimeManager").asCtor(Vf).dependencies("WmInternals");function Vf(e){var t=this;t.init=r,t.getWalkmeLoadTime=o;var n;function r(){i(),e.bind("NewWalkMeLoadTime",i)}function i(){n=(new Date).getTime()}function o(){return n}}i.register("WalkmeInternalsPersistWhitelist").asInstance(["removeWalkMeReason","dbgr"]),i.register("wmjQuery").asInstance(e),i.get("SimpleNLP").setJQuery(e),i.register("WmInternals").asInstance(t),i.register("Mustache").asInstance(hf),i.register("CJson").asInstance(Uf),i.register("Lib").asInstance(n),i.register("win").asInstance(window),i.register("requestAnimationFrame").asInstance(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||!1),i.register("cancelAnimationFrame").asInstance(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||!1);function Wf(){i.get("LibCtorService").init(),window.walkme_event_custom=function(e){"WalkthruCompleted"!=e.Type&&"UserStoppedWalkthru"!=e.Type||i.get("UiUtils").removeOverlay()}}t.addTimeStamp&&t.addTimeStamp("libStartInit"),Wf.apply(null,arguments)}window._makeTutorialEv={Ev:function(src){return eval(src)}},void 0==window._makeTutorial&&(window._walkMe=window._makeTutorial=new ClassMakeTutorial(window.wmjQuery,window._walkmeInternals),_makeTutorial.initFailed&&(window._walkMe=window._makeTutorial=void 0)),window._makeTutorial&&void 0==window.WalkMeAPI&&(window.WalkMeAPI=window._walkmeInternals.ctx.get("ClassWalkMeAPI")),_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeEnd")}).call(window)}).call(exports,__webpack_require__(1))},function(e,t){e.exports=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}},function(e,t,n){window._walkmeInternals.ctx||n(3)(window._walkmeInternals),e.exports=_walkmeInternals.ctx},function(e,t,n){(function(t){!function(){var t=function(e){e=e||{},e.version="0.3.3";e.logger=function(e,t){},e.log=function(t,n,r){n&&(t="[class="+n.name()+"] "+t),e.logger("DI - "+t,r||4)},e.error=function(t,n,r){e.log(t,n,r)},e.createContext=function(){var t={map:{},decorators:{}};t.decorate=function(e,n){t.decorators[e]||(t.decorators[e]=[]),t.decorators[e].push(n)},t.entry=function(e){return t.map[e]},t.register=function(n,r,i){var o=e.entry(n,t).type(r).args(i);return t.map[n]=o,o},t.has=function(e){return null!=t.entry(e)},t.isEntryUsedOnce=function(e){return null===t.entry(e)},t.get=function(n,r){return t.isEntryUsedOnce(n)&&e.error("Object["+n+"] is declared with 'useOnce'. Please consider removing 'useOnce', if you want to use it more than once"),t.has(n)||e.error("Object["+n+"] is not registered"),t.entry(n).getObject(r)},t.create=function(n,r){if(t.entry(n).strategy()==e.strategy.singleton&&e.error("Attempt to create singleton object ["+n+"]"),t.has(n))return t.entry(n).create(r);e.error("Object["+n+"] is not registered")},t.initialize=function(){function n(n){var r=t.entry(n);r?r.initialize()&&r.strategy().initialize()&&t.get(n):e.error("Object["+n+"] is not registered")}return function(e){if(e)n(e);else for(var e in t.map)n(e)}}(),t.clear=function(){this.map={},this.decorators={}};function n(e){for(;e.indexOf(" ")>=0;)e=e.replace(" ","");return e}return t.resolve=function(n){var r=n.load(),i={};return t.eachDependency(n.dependencies(),function(o,a){var s=t.get(o,r);t.ready(s,t.entry(o)),null==s&&e.error("Dependency ["+n.name()+"."+a+"]->["+o+"] can not be satisfied",n),i[a]=s}),i},t.eachDependency=function(t,r){if(t)for(var i=n(t).split(","),o=0;o<i.length;o++){var a=i[o];if(a){var s=e.dependencyExpression(a);try{r(s.name,s.property,o)}catch(u){e.error("An exception was thrown while the DI tried to resolve class '"+s.name+"'. Check the class name, or if it was registred correctly. \r\n inner exception: \r\n"+u.message)}}}},t.ready=function(e,n){if(null===n&&e)return e;var r=n.wasReady();if(n.wasReady(!0),!r){var i=t.createCallback();i&&i(n.name(),e),e&&"function"==typeof e.ready&&e!=window&&e!=window.document&&e!=window.document.body&&(n.wasReady(!0),
e.ready.apply(e,n.injector().ready(e,n)||[]))}return e},t.createCallback=function(){var e;return function(n){if(0==arguments.length)return e;return e=n,t}}(),t},e.dependencyExpression=function(e){var t={},n=e,r=e;if(e.indexOf("=")>0){var i=e.split("=");n=i[0],r=i[1]}return t.name=r,t.property=n,t},e.entry=function(t,n){var r,i={};i.name=function(){return t};for(var o=["load","wasReady","strategy","injector","type","dependencies","args","factory","initialize"],a={},s=0;s<o.length;s++){var u=o[s];l(u)}function l(e){i[e]=function(t){if(!arguments.length)return a[e];return a[e]=t,i}}i.depsDictionary=function(e){if(!arguments.length)return a.depsDictionary||i.depsDictionary(n.resolve(i)),a.depsDictionary;return a.depsDictionary=e,i},a.strategy=e.defaults.strategy,a.factory=e.defaults.factory,a.injector=e.defaults.injector,a.load=e.defaults.load,a.wasReady=!1,a.initialize=!0,i.create=function(t,o,s){s=s||e.load.recursive;var u=a.strategy.test(r,s);if(o)return u;u&&(t=a.injector.create(t?t:a.args,i,n,s));var l=a.strategy.create(r,a.factory,a.type,t,n,i,s);return n.ready(l,i)},i.getObject=function(e){return i.create(void 0,void 0,e)},i.object=function(e){return arguments.length?(r=e,i):i.create()};function c(e,t){return void 0!=t&&i.type(t),i.factory(e),i}i.asFunction=function(t){return c(e.factory.func,t)},i.asInstance=function(t){return c(e.factory.instance,t)},i.asCtor=function(t){return c(e.factory.constructor,t)},i.asSingleton=function(){return i.strategy(e.strategy.singleton)},i.asProto=function(){return i.strategy(e.strategy.proto)},i.injectToCtor=function(){return i.injector(e.injector.ctor)},i.injectToReady=function(){return i.injector(e.injector.ready)},i.injectToProperty=function(){return i.injector(e.injector.property)};function d(e,t){return void 0!=t&&i.dependencies(t),i.load(e),i}return i.flatDependencies=function(t){return d(e.load.flat,t)},i.recursiveDependencies=function(t){return d(e.load.recursive,t)},i.useOnce=function(){var e=i.getObject;return i.getObject=function(){return n.map[i.name()]=null,e.apply(this,arguments)},i},i},e.strategy={proto:{test:function(e,t){return!t||t()},initialize:function(){return!1},create:function(e,n,r,i,o,a,s){return e=t(n,r,i,o,a),s()&&a.injector().ready(e,a),a.depsDictionary(void 0),a.wasReady(!1),e}},singleton:{test:function(e,t){return!e&&(!t||t())},initialize:function(){return!0},create:function(e,n,r,i,o,a,s){return e||(e=t(n,r,i,o,a),a.object(e),a.wasReady(!0),s()&&a.injector().ready(e,a),a.wasReady(!1)),e}}};function t(e,t,n,r,i){var o=e(t,n,i),a=r.decorators[i.name()];if(a)for(var s=0;s<a.length;s++)o=a[s](o);return o}return e.factory={constructor:function(t,n,r){if(!(n instanceof Array))return new t(n);if(n.length<=10)return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);if(n.length<=30)return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27],n[28],n[29]);e.error("trying to create a class with too many args!",r)},func:function(e,t,n){return t instanceof Array?e.apply(e,t):e(t)},instance:function(e,t,n){return e}},e.injector={property:{create:function(e,t,n){return e},ready:function(e,t){var n=t.depsDictionary();for(var r in n)e[r]=n[r];var i=t.args();void 0==i||n.hasOwnProperty("args")||(e.args=i)}},ready:{create:function(e,t,n){return e},ready:function(e,t){var r=t.args(),i=[],o=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){i[n]=o[t]}),r){r=r instanceof Array?r:[r];for(var a=0;a<r.length;a++)i.push(r[a])}return i}},ctor:{create:function(e,t,n){var r=[],i=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),e){e=e instanceof Array?e:[e];for(var o=0;o<e.length;o++)r.push(e[o])}return r},ready:function(e,t){}}},e.load={flat:function(e,t,n){return!1},recursive:function(e,t,n){return!0}},e.defaults={strategy:e.strategy.singleton,factory:e.factory.constructor,injector:e.injector.ctor,load:e.load.recursive},e}(),n=t.createContext();e.exports=function(e){e.di=t,e.ctx=n}}()}).call(t,n(2))},function(e,t){/*! wm-simple-nlp - v1.0.8 - 2016-09-13
	* Copyright (c) 2016 WalkMe; Licensed ISC */
var n;!function(e){var t,n;!function(e){e[e.Digit=0]="Digit",e[e.Alphabet=1]="Alphabet",e[e.Other=2]="Other"}(n||(n={}));function r(e){t=e}e.setJQuery=r;function i(e){var t=new l,n=new a(e),r=t.isHuman(n);return r}e.isPhraseHuman=i;function o(e){if(0===e.search("[a-zA-Z]"))return n.Alphabet;if(0===e.search("[0-9]"))return n.Digit;return n.Other}var a=function(){function e(e){this.words=[],this.raw=e,this.buildWords()}return e.prototype.buildWords=function(){this.splitCategories()},e.prototype.addWord=function(e){var r=this;if(e=t.trim(e),!e)return;if(o(e[0])!==n.Alphabet)this.words.push(e);else{var i=this.splitCamelCase(e);t.each(i,function(e,t){return r.words.push(t.toLowerCase())})}},e.prototype.splitCamelCase=function(e){var t=e.replace(/([a-z](?=[A-Z]))/g,"$1 "),n=t.split(" ");return n},e.prototype.splitCategories=function(){for(var e,t=o(this.raw[0]),n=0,r=0;r<this.raw.length;r++){var i=this.raw[r],a=o(i);a!=t&&(e=this.raw.substring(r,n),this.addWord(e),n=r,t=a)}e=this.raw.substring(n,r+1),this.addWord(e)},e}();e.Sentence=a;var s=5,u=function(){function e(){var e=this;this.WHITE_LIST=["html","css","btn","js","http","a"],this.VOWELS="aeiou",this.pointers={},this.pointers[n.Alphabet]=function(t){return e.alphabetPred(t)},this.pointers[n.Digit]=function(t){return e.numberPred(t)},this.pointers[n.Other]=function(t){return e.otherPred(t)}}return e.prototype.numberPred=function(e){return!1},e.prototype.otherPred=function(e){return!0},e.prototype.alphabetPred=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(this.VOWELS.indexOf(r)==-1?t++:t=0,t>=s)return!1}return!0},e.prototype.isHuman=function(e){if(this.contains(this.WHITE_LIST,e))return!0;var t=o(e[0]),n=this.pointers[t],r=n(e);return r},e.prototype.contains=function(e,n){return t.inArray(n,e)!==-1},e}();e.WordClassifier=u;var l=function(){function e(){}return e.prototype.isHuman=function(e){if(e.raw.length<=2)return!1;if(this.isUrl(e))return!1;var n=new u,r=t.map(e.words,function(e,t){return n.isHuman(e)}),i=this.all(r);return i},e.prototype.all=function(e){for(var t=e.length-1;t>=0;t--)if(!e[t])return!1;return!0},e.prototype.isUrl=function(e){var t=0==e.raw.indexOf("/")||0==e.raw.indexOf("http");return t},e}();e.SentanceClassifier=l}(n||(n={})),e.exports=n},function(e,t,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.mapper=n}(this,function(){var e=new(n(6)),t=new(n(7))(e);return{objectJpath:e,objectMapper:t}})},function(e,t){e.exports=n;function n(){var e=this;e.getValue=t,e.setValue=n;function t(e,t){t=r(t);for(var n=t.split("."),i=e,o=0;o<n.length;o++){var a=n[o];if(void 0==i)return;i=i[a]}return i}function n(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++){var o=r[i];e[o]||(e[o]={}),e=e[r[i]]}var a=r.length-1,s=r[a];e[s]=n}function r(e){return e.replace(/[\'\"\]]|&quot;|&#39;/g,"").replace(/\[/g,".")}}},function(e,t){e.exports=n;function n(e){var t=this;t.merge=n;function n(t,n,r){for(var i in r){var o=r[i],a=u(i);if(o.transform&&(a=o.transform(a)),o.where&&!o.where(a,u))continue;var s="string"==typeof o?o:o.destination;e.setValue(n,s,a)}function u(n){return e.getValue(t,n)}}}},function(e,t,n){var r=new(n(9)),i=new(n(10))(r),o=new(n(11)),a=new(n(12))(i,o),s=new(n(13))(o,a),u=new(n(14)),l=new(n(15))(s,u);e.exports={bizFlowConsts:r,bizFlowExtensions:i,baseGraphDfsService:l,baseGraphDfsServiceWithRevisiting:s}},function(e,t){e.exports=n;function n(){var e=this;e.FLOW_NODE_TYPE={UI:"UI",Action:"Action"},e.FLOW_NODE_ACTION_TYPE={Split:"Split",Redirect:"Redirect",WaitForCondition:"WaitForCondition",Stop:"Stop",Refresh:"Refresh",SetData:"SetData",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Branch:"Branch",Survey:"Survey",Popup:"Popup",ErrorHandling:"ErrorHandling",OnPageAction:"OnPageAction"}}},function(e,t){e.exports=n;function n(e){var t=this;t.isUiNode=n,t.getNodeConnectors=i,t.isActionNode=r,t.isSplitNode=s;function n(t){return t.Type==e.FLOW_NODE_TYPE.UI}function r(e){return!n(e)}function i(e){if(n(e))return a(e);return o(e)}function o(e){return e.Links}function a(e){for(var t=[],n=0;n<e.UIElements.length;n++){var r=e.UIElements[n];t.push.apply(t,r.Triggers)}return t}function s(t){return r(t)&&t.ActionType==e.FLOW_NODE_ACTION_TYPE.Split}}},function(e,t){e.exports=n;function n(){var e=this;e.createNodeData=t,e.createUiElementData=n;function t(e,t,n,i){var o=r(e,e,e.Links,t,n,i);return o}function n(e,t){var n=r(t.node,e,e.Triggers,t.parentConnector,t.parentConnectorIndex,t.parentPoint);return n.uiElement=e,n}function r(e,t,n,r,i,o){return{node:e,point:t,connectors:n,parentConnector:r,parentConnectorIndex:i,parentPoint:o}}}},function(e,t){e.exports=n;function n(e,t){var n=this;n.traverse=r;function r(n,r){var i=n.node;if(e.isActionNode(i))r(n);else for(var o=0;o<i.UIElements.length;o++){var a=i.UIElements[o],s=t.createUiElementData(a,n);r(s)}}}},function(e,t){e.exports=n;function n(e,t){var n=this;n.runDfs=i;var r=["visitNode","visitPoint","afterPointDescendantsVisited","afterNodeDescendantsVisited"];function i(n,i,o){for(var a=!0,s={},u={},l=0;l<r.length;l++)g(r[l]);o=o||n.RootFlowNodeId,c(o);function c(r,i,o,s){if(!r||!a)return;var l=n.Nodes[r],c=e.createNodeData(l,i,o,s);u.visitNode(c),t.traverse(c,d),u.afterNodeDescendantsVisited(c)}function d(e){if(u.visitPoint(e),!s[e.point.Id]){s[e.point.Id]=!0;for(var t=e.connectors,n=0;n<t.length;n++){var r=t[n];c(r.TargetFlowNodeId,r,n,e)}}u.afterPointDescendantsVisited(e)}function p(){}function g(e){var t=i[e]||p;u[e]=function(){if(!a||!t)return;a=t.apply(null,arguments)!==!1}}}}},function(e,t){e.exports=n;function n(){var e=this;e.wrapHandlers=i;var t,n,r=["visitPoint","afterPointDescendantsVisited"];function i(e){n={};for(var i=function(){},o=e.visitNode||i,a=e.afterNodeDescendantsVisited||i,s=0;s<r.length;s++){var u=r[s];e[u]=l(e[u])}e.visitNode=function(e){if(t)return;var r=c(e);if(n[r])return void(t=e);return n[r]=!0,o(e)},e.afterNodeDescendantsVisited=function(e){if(t)return void(e==t&&(t=void 0));return a(e)};function l(e){if(!e)return;return function(){if(t)return;return e.apply(null,arguments)}}function c(e){return e.node&&e.node.Id}}}},function(e,t){e.exports=n;function n(e,t){var n=this;n.runDfs=r;function r(n,r,i){return t.wrapHandlers(r),e.runDfs(n,r,i)}}},function(e,t){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.deployableConsts=n}(this,function(){return{DEPLOYABLE_TYPE:{Walkthru:0,Task:1,Launcher:2,LabelGroup:3,Survey:4,AbExperiment:5,Category:6,Content:7,Collection:8,Shuttle:9,Tag:10,TestCase:11,PreTestSet:12,Template:13,ShoutOut:14,TestSuite:16,ConditionBlock:17,BusinessSolution:19,Lesson:20,Course:21,TrackedPage:22,Spotlight:23,Tooltip:24,TrackedElement:25,SearchProviderUrl:26}}})},function(e,t,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.uiComponents=n}(this,function(e){var t=n(18)(),r=n(19),i=n(20)(e,t),o=n(22)(i),a=n(23)(o);return{eventBasedObject:t,idisplayer:r,uiComponentBase:i,popupBase:o,shoutOutBase:a}})},function(e,t){e.exports=function(){return n};var n=function(){function e(){this.eventBase=wmjQuery({})}return e.prototype.once=function(e,t){this.eventBase.one(e,t)},e.prototype.bind=function(e,t){this.eventBase.bind(e,t)},e.prototype.unbind=function(e,t){this.eventBase.unbind(e,t)},e.prototype.trigger=function(e,t){this.eventBase.trigger(e,t)},e}()},function(e,t){},function(e,t,n){var r,i=n(21)();e.exports=function(e,t){r=e;var n=function(e){i(t,e);function t(t){e.call(this),this.LocalSVNRevision="$Rev: 4206 $",this._uiComponent=t,this._settings=t.Settings||{},this._variations=this.createVariations(),this._uiCreator=r.get("UICreator")}return t.prototype.getComponent=function(){return this._uiComponent},t.prototype.getUI=function(){return this._uiCreator.getUI()},t.prototype.createUi=function(){this._displayer=r.get("DisplayersFactory").get(this._uiComponent.DisplayerId,[this._uiComponent.Settings]);var e=this._displayer.getContainer(),t=e?e[0].document:document;this._uiCreator.setUI(this._uiComponent,this._variations,this.createConfig(),t),this.registerEvents(),this._displayer.setUiObject(this._uiCreator.getUI())},t.prototype.registerEvents=function(){},t.prototype.createVariations=function(){for(var e=r.get("UIVariations"),t=[],n=this._uiComponent.UIVariationsIds||[],i=0;i<n.length;i++)t.push(e.get(n[i]));return this._settings.variation&&t.push(this._settings.variation),t},t.prototype.createConfig=function(){return{}},t.prototype.append=function(){var e=this;this.trigger("append-begin"),r.get("TemplatesFactory").addResources(this._uiComponent.UITemplateId,this._uiComponent.UITemplateVersion,this._variations,wmjQuery.proxy(function(){e._displayer.append(wmjQuery.proxy(function(){return e.trigger("append-end")},e))},this))},t.prototype.destroy=function(){var e=this;if(this._isDead)return;this.trigger("destroy-begin"),this._displayer.remove(wmjQuery.proxy(function(){e._isDead=!0,e.trigger("destroy-end")},this))},t.prototype.show=function(){this.trigger("show-begin"),this._displayer.show(wmjQuery.proxy(function(){this.trigger("show-end")},this))},t.prototype.hide=function(){this.trigger("hide-begin"),this._displayer.hide(wmjQuery.proxy(function(){this.trigger("hide-end")},this))},t.prototype.toggle=function(){this._displayer.isVisible()?this.hide():this.show()},t}(t);return n}},function(e,t){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.typescriptHelper=n}(this,function(){var e=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r};return e})},function(e,t,n){var r=n(21)();e.exports=function(e){var t=function(e){r(t,e);function t(t,n){e.call(this,t),this.LocalSVNRevision="$Rev: 4206 $",this.CLASS_X_BUTTON="walkme-x-button",this._consts=n}return t.prototype.registerEvents=function(){e.prototype.registerEvents.call(this),this.registerXButton()},t.prototype.registerXButton=function(){var e=wmjQuery.proxy(function(){this.trigger("x-clicked"),this.destroy()},this);this._uiCreator.registerEvents("."+this.CLASS_X_BUTTON,"click",this._consts.MOBILE_COMMANDS.ACTION.libAction,{libAction:e},"Close")},t.prototype.createConfig=function(){var t=e.prototype.createConfig.call(this);return t.Id=this._uiComponent.Id,t.Name=this._uiComponent.Name,t.XButtonClass=this.CLASS_X_BUTTON,t.Settings=this._uiComponent.Settings,t},t}(e);return t}},function(e,t,n){var r=n(21)();e.exports=function(e){var t=function(e){r(t,e);function t(t,n,r,i,o){e.call(this,o,i),this.LocalSVNRevision="$Rev: 4206 $",this.CLOSE_ACTIONS_TYPE="destroy",this.CLASS_ACTION_PREFIX="walkme-action-",this._actionsFactory=t,this._bbCodeParser=r,this._commonUtils=n,this._actions=this.getActions(o),this._position=0==o.Settings.position?"top":"bottom"}return t.prototype.getActions=function(e){var t=[];if(!e.Actions)return t;for(var n=0,r=e.Actions.length;n<r;n++){var i=e.Actions[n];i.IsActive&&(this.isCloseAction(i)?i[this.CLOSE_ACTIONS_TYPE]=!0:i[i.Type]=!0,i.CssClass=this.generateActionClass(t.length,e.Actions[n]),t.push(e.Actions[n]))}return t},t.prototype.registerEvents=function(){e.prototype.registerEvents.call(this),this.registerActions()},t.prototype.registerActions=function(){for(var e=0,t=this._actions.length;e<t;e++){var n=this._actions[e];n.Args=n.Args||{},n.Args.uiComponent=this;var r,i=this._actionsFactory.get(n.Type,n.Args,this.getInitiatorType(),this._uiComponent),o=this.generateActionClass(e,this._actions[e]),a=o.replace(/-/gi,"_"),s=i.args||{};r=i.mobileAction?wmjQuery.proxy(function(e){this.trigger("action-start",e),this.destroy()},this,i.Type):wmjQuery.proxy(function(e){this.trigger("action-start",e.Type),e.doAction(),e.Type!=this._consts.DEPLOYABLE_ACTION_TYPES.Close&&this.destroy()},this,i),s.libAction=r,this._uiCreator.registerEvents("."+o,"click",i.mobileAction||this._consts.MOBILE_COMMANDS.ACTION.libAction,s,a||"")}},t.prototype.getInitiatorType=function(){},t.prototype.isCloseAction=function(e){var t=this._actionsFactory.get(e.Type).Type;return t===this._consts.DEPLOYABLE_ACTION_TYPES.Close||t===this._consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater},t.prototype.generateActionClass=function(e,t){return this.CLASS_ACTION_PREFIX+t.Type+"-"+e},t.prototype.createConfig=function(){var t=e.prototype.createConfig.call(this);return t.Title=this.handleText(this._uiComponent.Title),t.Description=this.handleText(this._uiComponent.Description),t.Actions=this.handleActions(this._actions),t.Position=this._position,t},t.prototype.handleText=function(e){return this._bbCodeParser.parse(this._commonUtils.nl2br(e))},t.prototype.handleActions=function(e){if(e)for(var t=0;t<e.length;t++)e[t].Text=this.handleText(e[t].Text);return e},t}(e);return t}},function(e,t,n){var r=n(25),i=n(27);e.exports={oldToNewConditionConverter:r,newToOldConditionConverter:i}},function(e,t,n){var r=n(26);function i(){var e=this;e.convert=t;function t(e){if(!e)return;return{Root:n(e,!0)}}function n(e){return e?"Func"==e.nodeType?i(e):e.rightSon?a(e):o(e):void 0}function i(e){return{Type:r.NEW_CONDITION_NODE_TYPE.Condition,Id:e.ConditionId,Settings:{funcName:e.funcName,funcArgs:e.funcArgs}}}function o(e){return n(e.leftSon)}function a(e){var t={Type:r.NEW_CONDITION_NODE_TYPE[e.nodeType],Nodes:[]};return t.Nodes.push(n(e.leftSon)),t.Nodes.push(n(e.rightSon)),t}}e.exports=new i},function(e,t){var n={NEW_CONDITION_NODE_TYPE:{Condition:0,And:1,Or:2,Group:3}};e.exports=n},function(e,t,n){var r=n(26);function i(){var e=this;e.convert=n;function t(){}function n(e){if(!e)return;var t=0;return i(e,t)}function i(e,t){switch(e.Type){case r.NEW_CONDITION_NODE_TYPE.Condition:return o(e,t);case r.NEW_CONDITION_NODE_TYPE.Group:return a(e,t);default:return s(e,t)}}function o(e,t){return{nodeType:"Func",nodeDepth:t,ConditionId:e.Id,funcName:e.Settings.funcName,funcArgs:e.Settings.funcArgs}}function a(e,t){return i(e.Nodes[0],t+1)}function s(e,t){var n=e.Type==r.NEW_CONDITION_NODE_TYPE.And?"And":"Or";return{nodeType:n,nodeDepth:t,ConditionId:e.Id,leftSon:i(e.Nodes[0],t),rightSon:i(e.Nodes[1],t)}}t()}e.exports=new i},function(e,t,n){!function(){var e=t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var t,i,o=String(e),a=0,s=n,u="";o.charAt(0|a)||(s="=",a%1);u+=s.charAt(63&t>>8-a%1*8)){if(i=o.charCodeAt(a+=.75),i>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|i}return u}),e.atob||(e.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,s=0,u="";o=t.charAt(s++);~o&&(i=a%4?64*i+o:o,a++%4)?u+=String.fromCharCode(255&i>>(-2*a&6)):0)o=n.indexOf(o);return u})}()},function(e,t,n){(function(t){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}var r=void 0;r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var i=r,o=0,a=void 0,s=void 0,u=function(e,t){y[o]=e,y[o+1]=t,o+=2,2===o&&(s?s(C):b())};function l(e){s=e}function c(e){u=e}var d="undefined"!=typeof window?window:void 0,p=d||{},g=p.MutationObserver||p.WebKitMutationObserver,f=!1,h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){}}function v(){if("undefined"!=typeof a)return function(){a(C)};return T()}function S(){var e=0,t=new g(C),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function E(){var e=new MessageChannel;return e.port1.onmessage=C,function(){return e.port2.postMessage(0)}}function T(){var e=setTimeout;return function(){return e(C,1)}}var y=new Array(1e3);function C(){for(var e=0;e<o;e+=2){var t=y[e],n=y[e+1];t(n),y[e]=void 0,y[e+1]=void 0}o=0}function I(){try{var e=n(!function(){var e=new Error('Cannot find module "vertx"');throw e.code="MODULE_NOT_FOUND",e}());return a=e.runOnLoop||e.runOnContext,v()}catch(t){return T()}}var b=void 0;b=f?m():g?S():h?E():void 0===d?I():T();function w(e,t){var n=arguments,r=this,i=new this.constructor(A);void 0===i[P]&&Z(i);var o=r._state;return o?!function(){var e=n[o-1];u(function(){return q(o,i,e,r._result)})}():j(r,i,e,t),i}function _(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(A);return V(n,e),n}var P=Math.random().toString(36).substring(16);function A(){}var k=void 0,O=1,N=2,D=new z;function L(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function F(e){try{return e.then}catch(t){return D.error=t,D}}function M(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function R(e,t,n){u(function(e){var r=!1,i=M(n,t,function(n){if(r)return;r=!0,t!==n?V(e,n):G(e,n)},function(t){if(r)return;r=!0,H(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,H(e,i))},e)}function B(e,t){t._state===O?G(e,t._result):t._state===N?H(e,t._result):j(t,void 0,function(t){return V(e,t)},function(t){return H(e,t)})}function U(e,n,r){n.constructor===e.constructor&&r===w&&n.constructor.resolve===_?B(e,n):r===D?(H(e,D.error),D.error=null):void 0===r?G(e,n):t(r)?R(e,n,r):G(e,n)}function V(t,n){t===n?H(t,L()):e(n)?U(t,n,F(n)):G(t,n)}function W(e){e._onerror&&e._onerror(e._result),Y(e)}function G(e,t){if(e._state!==k)return;e._result=t,e._state=O,0!==e._subscribers.length&&u(Y,e)}function H(e,t){if(e._state!==k)return;e._state=N,e._result=t,u(W,e)}function j(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+O]=n,i[o+N]=r,0===o&&e._state&&u(Y,e)}function Y(e){var t=e._subscribers,n=e._state;if(0===t.length)return;for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?q(n,r,i,o):i(o);e._subscribers.length=0}function z(){this.error=null}var Q=new z;function K(e,t){try{return e(t)}catch(n){return Q.error=n,Q}}function q(e,n,r,i){var o=t(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=K(r,i),a===Q?(l=!0,s=a.error,a.error=null):u=!0,n===a)return void H(n,x())}else a=i,u=!0;n._state!==k||(o&&u?V(n,a):l?H(n,s):e===O?G(n,a):e===N&&H(n,a))}function X(e,t){try{t(function(t){V(e,t)},function(t){H(e,t)})}catch(n){H(e,n)}}var J=0;function $(){return J++}function Z(e){e[P]=J++,e._state=void 0,e._result=void 0,e._subscribers=[]}function ee(e,t){this._instanceConstructor=e,this.promise=new e(A),this.promise[P]||Z(this.promise),i(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?G(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&G(this.promise,this._result))):H(this.promise,te())}function te(){return new Error("Array Methods must be provided an Array")}ee.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===k&&n<e;n++)this._eachEntry(t[n],n)},ee.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===_){var i=F(e);if(i===w&&e._state!==k)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===se){var o=new n(A);U(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},ee.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===k&&(this._remaining--,e===N?H(r,n):this._result[t]=n),0===this._remaining&&G(r,this._result)},ee.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){return n._settledAt(O,t,e)},function(e){return n._settledAt(N,t,e)})};function ne(e){return new ee(this,e).promise}function re(e){var t=this;return new t(i(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function ie(e){var t=this,n=new t(A);return H(n,e),n}function oe(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ae(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function se(e){this[P]=$(),this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&oe(),this instanceof se?X(this,e):ae())}se.all=ne,se.race=re,se.resolve=_,se.reject=ie,se._setScheduler=l,se._setAsap=c,se._asap=u,se.prototype={constructor:se,then:w,"catch":function(e){return this.then(null,e)}};function ue(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=se}return se.polyfill=ue,se.Promise=se,se})}).call(t,n(29))},function(e,t,n){var r=new(n(31)),i=new(n(32)),o=new(n(33)),a=new(n(34)),s=new(n(35)),u=new(n(36)),l=new(n(37)),c=new(n(38)),d=new(n(39)),p=new(n(40)),g=new(n(41)),f=new(n(42)),h=new(n(43)),m=new(n(44)),v=new(n(45)),S=new(n(46)),E=new(n(47)),T=new(n(48));e.exports={conditionBuilderPreview:r,drawablePosition:i,stepTrigger:o,stepType:a,ENTITY_TYPE:s,surveyQuestionType:u,contentType:l,POPUP_BUTTON_ACTIONS:{NextDone:0,Start:1,Back:2,Cancel:3},designTemplateType:c,designTemplateCssClassPrefix:"wm-design-template-",smarttipMode:d,stickinessType:p,flowNodeType:g,searchProvider:f,screenshotMode:h,scrollType:m,deployableGroupType:v,teachMeCompletionType:S,teachMeQuestionType:E,templateEntityType:T}},function(e,t){e.exports=n;function n(){var e={TYPES:{BAD_INPUT:-2,NO_INPUT:-1,TRUE:0,FALSE:1,CANNOT_ASSERT:2,CONTEXT_ERROR:3,CANT_INTERACT:4,DIFFERENT_RESULTS:5},TOOLTIPS:{"true-indicator":"The statement is true for the current user and page settings","false-indicator":"The statement is not true for the current user and page settings","not-defined-indicator":"Waiting. Complete the condition to evaluate the status","cannot-assert-indicator":"The validity of this statement can only be assessed when played","cannot-assert-context-error-indicator":"The validity of this statement cannot be determined because the related Switch Step cannot be played in current page","cannot-interact-error-indicator":"The validity of this statement cannot be determined because we can't interact with this page","different-results-indicator":"Different results from iframes"},INDICATOR_CLASSES:{}},t=e.INDICATOR_CLASSES;return t[e.TYPES.NO_INPUT]="no-input",t[e.TYPES.BAD_INPUT]="bad-input",t[e.TYPES.TRUE]="true",t[e.TYPES.FALSE]="false",t[e.TYPES.CANNOT_ASSERT]="cannot-assert",t[e.TYPES.CONTEXT_ERROR]="cannot-assert-context-error",t[e.TYPES.CANT_INTERACT]="cannot-interact-error",t[e.TYPES.DIFFERENT_RESULTS]="different-results",e}},function(e,t){function n(){return{Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}}e.exports=n},function(e,t){function n(){return{Nothing:0,Button:1,Click:2,Hover:3,PageChanged:4,Text:5,Delay:6,SelectAny:7,SelectValue:8,Swipe:9,PeerStep:10,Custom:11,BbCode:12}}e.exports=n},function(e,t){function n(){return{Simple:0,Popup:1,Action:2}}e.exports=n},function(e,t){function n(){return{step:0,launcher:1,conditionBuilder:2,smartTip:3,balloon:4,balloonTrigger:5,flowNode:6,flowLink:7,smartTipUiComponent:8,conditionNode:9,trackedElementsSet:10,businessSolution:11,trackedElement:12,onScreenElement:13,shoutout:17}}e.exports=n},function(e,t){function n(){return{FreeText:0,RadioButtons:1,CheckBoxes:2,PersonalDetails:3}}e.exports=n},function(e,t){function n(){return{Article:0,Video:1}}e.exports=n},function(e,t){function n(){return{Shared:0,Copied:1,Specific:2}}e.exports=n},function(e,t){function n(){return{Info:0,Validation:1,InfoAndValidation:2}}e.exports=n},function(e,t){function n(){return{soft:0,strong:1}}e.exports=n},function(e,t){function n(){return{UI:0,Action:1}}e.exports=n},function(e,t){function n(){return{NoAction:-1,WalkMe:0,Google:1,Bing:2,Desk:3,Zendesk:4,Custom:5,SalesForce:6,Parature:7}}e.exports=n},function(e,t){function n(){return{Regular:0,Blurred:1,None:2}}e.exports=n},function(e,t){function n(){return{Animated:0,Normal:1,None:2}}e.exports=n},function(e,t){function n(){return{Label:0,Category:1,Collection:2,Tag:3,Course:4,Lesson:5}}e.exports=n},function(e,t){function n(){return{byComplete:0,byGoal:1}}e.exports=n},function(e,t){function n(){return{SingleSelection:0,MultipleSelection:1}}e.exports=n},function(e,t){function n(){return{balloon:0,popup:17}}e.exports=n},function(e,t,n){var r=n(50),i=n(51),o=n(52),a=n(53);e.exports={TemplateWrap:r,TopArrow:i,CssResetRules:o,ShoutOutTemplateWrap:a}},function(e,t){var n="<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 {{designTemplateCssClass}}' style='{{{cssReset}}} width: auto; min-width: 190px; position: absolute; direction: {{direction.basic}};'><div class='walkme-custom-balloon-mid-div' style='{{{cssReset}}} direction: {{direction.basic}}; position: relative; {{#shadow}}-webkit-box-shadow: {{shadow}}; -moz-box-shadow: {{shadow}}; box-shadow: {{shadow}};{{/shadow}} font-family: {{{font}}}; border-radius:{{radiuses.balloon}}; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='{{{cssReset}}} direction: {{direction.basic}}; background-color:{{colors.mainBg}}; border:{{border.size}} solid {{colors.border}}; border-radius:{{radiuses.balloon}}; border-{{position.side}}: none; overflow: hidden;'><div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='{{{cssReset}}} font-size: 12px; color: {{colors.xBtn}}; position: absolute; {{direction.oppositeSide}}: 0px; top: 0px; padding-{{direction.oppositeSide}}: {{xBtn.marginHorizental}}; margin-top: {{xBtn.marginTop}}; cursor: pointer;font-weight:normal;' title='{{data.balloonCloseTooltip}}'>&#215;</div>{template}</div></div><div class='walkme-custom-side-border' style='{{{cssReset}}} background-color:{{colors.buttonBg}}; width: 4px; height: 100%;  top:0px; {{direction.side}}:0px; border:{{border.side.size}} solid {{colors.buttonBg}}; border-{{direction.oppositeSide}}: none; border-top: none; border-bottom: none;position: absolute;border-radius: 5px 0 0 5px;'></div></div>";e.exports=n},function(e,t){var n="<div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-outer walkme-custom-balloon-arrow-outer-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 11px 11px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(198, 198, 198); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 137px; left: 319px;'></div><div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-inner walkme-custom-balloon-arrow-inner-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 10px 10px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(255, 255, 255); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 138px; left: 320px;'></div>";e.exports=n},function(e,t){var n="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit; letter-spacing: normal; text-transform: none; outline: invert none medium; width: auto; box-shadow:none; text-shadow:none; border-top: none; border-right: none; border-bottom: none; border-left: none; position: static; top: auto; left: auto; transition: none;";e.exports=n},function(e,t){var n='<div class="wm-outer-div wm-shoutout wm-shoutout-{{Id}} wm-template-bg {{designTemplateCssClass}}" id="wm-shoutout-{{Id}}" style="{{{cssReset}}} z-index: 2147483630;">{template}</div>';e.exports=n},function(e,t){!function(){function t(e){var t=this;t.addElementClass=i;var n;function r(){n=e}function i(e,t){for(var n=!0,r=e[0].ownerDocument,i=r.styleSheets,a=0;a<i.length;a++){var s=i[a];try{for(var u=s.cssRules||s.rules,l=0;l<u.length;l++){var c=u[l];if(c&&c.selectorText&&c.selectorText.indexOf(t)>-1){var d=o(e,c,t);n&&!d&&(n=!1)}}}catch(p){n=!1}}return n}function o(e,t,r){var i=!0,o=a(t,r);if(!o)return i;var s=t.selectorText.split(","),u=new RegExp("([^:]*)"+r+"(.*)");try{n.each(s,function(t,i){var a=u.exec(i);if(!a||i.indexOf(" > "+r)>-1)return!0;var s=a[1],l=e.parents().andSelf().filter(s),c=a[2];""!=c&&(l=l.find(c).andSelf()),n.each(l,function(e,t){var r=t.ownerDocument,i=r.createElement("style");i.type="text/css",i.title="walkme-hover-css-style",i.innerHTML=o,r.getElementsByTagName("head")[0].appendChild(i),n(t).addClass("walkme-hover-css")})})}catch(l){i=!1}return i}function a(e,t){var n=void 0;try{var r=new RegExp(t,"g");return n=e.cssText.replace(r,".walkme-hover-css")}catch(i){return}return n}r.apply(null,arguments)}"object"==typeof e&&"object"==typeof e.exports&&(e.exports=t)}()}]);